# å†™åœ¨å‰å¤´

è¿™ä¸ªleetcodeåˆ·é¢˜çš„pdfåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼Œä¸ªäººè®¤ä¸ºé‡è¦åº¦ä¼˜å…ˆçº§ä¸º**hot100 > ä»£ç éšæƒ³å½• â‰ˆ hot100å­¦ä¹ è®¡åˆ’(new hot100)**ã€‚

ä¸‰ä¸ªéƒ¨åˆ†çš„é“¾æ¥åˆ†åˆ«ä¸ºã€‚

**hot100ï¼š**[ğŸ”¥ LeetCode çƒ­é¢˜ HOT 100 - åŠ›æ‰£ï¼ˆLeetCodeï¼‰å…¨çƒæå®¢æŒšçˆ±çš„æŠ€æœ¯æˆé•¿å¹³å°](https://leetcode.cn/problem-list/2cktkvj/)

**ä»£ç éšæƒ³å½•ï¼š**[æ‰‹æŠŠæ‰‹å¸¦ä½ æ’•å‡ºæ­£ç¡®çš„äºŒåˆ†æ³• | äºŒåˆ†æŸ¥æ‰¾æ³• | äºŒåˆ†æœç´¢æ³• | LeetCodeï¼š704. äºŒåˆ†æŸ¥æ‰¾_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1fA4y1o715?spm_id_from=333.788.videopod.sections&vd_source=3850fe783abc77305f59d1bd405eea06)

**hot100å­¦ä¹ è®¡åˆ’(new hot100)ï¼š**[LeetCode çƒ­é¢˜ 100 - å­¦ä¹ è®¡åˆ’ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰å…¨çƒæå®¢æŒšçˆ±çš„æŠ€æœ¯æˆé•¿å¹³å°](https://leetcode.cn/studyplan/top-100-liked/)

è¿™ä¸ªpdfè¿˜æ²¡å†™å®Œï¼Œå¸Œæœ›é™¤å¤•ä¹‹å‰èƒ½å†™å®Œï¼Œå¹¶ä¸”ä¸ªäººèƒ½åŠ›æœ‰é™ï¼Œæ‰€ä»¥å¯¹äºæ³¨é‡Šå¹¶ä¸åƒç½‘ä¸Šçš„pdfé‚£ä¹ˆè¯¦ç»†ï¼Œå¦‚æœçœ‹ä¸æ‡‚çš„è¯ï¼Œå»ºè®®é…åˆaiä½¿ç”¨ã€‚

æ­¤å¤–ï¼Œæœ¬äººæ˜¯ç®—æ³•èŒæ–°ï¼Œæœ¬ç§‘æ— ä»»ä½•ç«èµ›ï¼ˆå¤§å“­ï¼‰ï¼Œå¸Œæœ›ä¸å„ä½å¤§ä½¬å¤šå¤šäº¤æµï¼Œå¸Œæœ›è¯¸ä½åŒå­¦ä¸åèµæ•™ã€‚å¦‚æœ‰é”™è¯¯ç§èŠæˆ‘å³å¯ã€‚



# æ•°ç»„

### 461.æ±‰æ˜è·ç¦»ï¼ˆhot 100ï¼‰

ç»™ä½ ä¸¤ä¸ªæ•´æ•° `x` å’Œ `y`ï¼Œè®¡ç®—å¹¶è¿”å›å®ƒä»¬ä¹‹é—´çš„æ±‰æ˜è·ç¦»ã€‚

**ç¤ºä¾‹ 1ï¼š**

```java
è¾“å…¥ï¼šx = 1, y = 4
è¾“å‡ºï¼š2
è§£é‡Šï¼š
1   (0 0 0 1)
4   (0 1 0 0)
       â†‘   â†‘
ä¸Šé¢çš„ç®­å¤´æŒ‡å‡ºäº†å¯¹åº”äºŒè¿›åˆ¶ä½ä¸åŒçš„ä½ç½®ã€‚
```

```java
class Solution {
    // è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„æ±‰æ˜è·ç¦»
    public int hammingDistance(int x, int y) {
        // ä½¿ç”¨å¼‚æˆ–è¿ç®—ç¬¦(^)å¾—åˆ°ä¸¤ä¸ªæ•´æ•°å¯¹åº”ä½ä¸åŒçš„ç»“æœï¼Œå†ä½¿ç”¨Integerç±»çš„bitCountæ–¹æ³•è®¡ç®—ç»“æœä¸­1çš„ä¸ªæ•°ï¼Œå³ä¸ºæ±‰æ˜è·ç¦»
        return Integer.bitCount(x ^ y);
    }
}
```

### 338.æ¯”ç‰¹ä½è®¡æ•°ï¼ˆhot 100ï¼‰(4.1)

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œå¯¹äº `0 <= i <= n` ä¸­çš„æ¯ä¸ª `i` ï¼Œè®¡ç®—å…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ **`1` çš„ä¸ªæ•°** ï¼Œè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º `n + 1` çš„æ•°ç»„ `ans` ä½œä¸ºç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 2
è¾“å‡ºï¼š[0,1,1]
è§£é‡Šï¼š
0 --> 0
1 --> 1
2 --> 10
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 5
è¾“å‡ºï¼š[0,1,1,2,1,2]
è§£é‡Šï¼š
0 --> 0
1 --> 1
2 --> 10
3 --> 11
4 --> 100
5 --> 101
```

```java
// å®šä¹‰Solutionç±»
class Solution {
    // å®šä¹‰countBitsæ–¹æ³•ï¼Œå‚æ•°ä¸ºæ•´æ•°nï¼Œè¿”å›ä¸€ä¸ªæ•´å‹æ•°ç»„
    public int[] countBits(int n) {
        // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸ºn+1çš„æ•´å‹æ•°ç»„ansï¼Œç”¨äºå­˜å‚¨ç»“æœ
        int[] ans = new int[n + 1];
        // å¾ªç¯éå†ä»1åˆ°nçš„æ¯ä¸ªæ•´æ•°
        for (int i = 1; i <= n; ++i) {
            // è®¡ç®—ans[i]ï¼Œä½¿ç”¨iå’Œi-1çš„ä¸æ“ä½œï¼Œå†åŠ 1ã€‚ans[i] å®é™…ä¸Šå°±æ˜¯ ans[i & (i - 1)] çš„å€¼åŠ ä¸Š1ï¼Œè¡¨ç¤ºæ¯” i å°‘ä¸€ä¸ª1çš„æ•°çš„äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°å†åŠ ä¸Š1
            ans[i] = ans[i & (i - 1)] + 1;
        }
        // è¿”å›è®¡ç®—ç»“æœæ•°ç»„ans
        return ans;
    }
}
```

### 136.åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼ˆhot 100ï¼‰

ç»™ä½ ä¸€ä¸ª **éç©º** æ•´æ•°æ•°ç»„ `nums` ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜ï¼Œä¸”è¯¥ç®—æ³•åªä½¿ç”¨å¸¸é‡é¢å¤–ç©ºé—´ã€‚

**ç¤ºä¾‹ 1 ï¼š**

```
è¾“å…¥ï¼šnums = [2,2,1]
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 2 ï¼š**

```
è¾“å…¥ï¼šnums = [4,1,2,1,2]
è¾“å‡ºï¼š4
```

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªSolutionç±»
    public int singleNumber(int[] nums) {
        // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå‚æ•°ä¸ºæ•´å‹æ•°ç»„numsï¼Œç”¨äºæ‰¾å‡ºåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—
        int ans = 0;
        // åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ansä¸º0ï¼Œç”¨äºå­˜å‚¨ç»“æœ
        for (int num : nums) {
            // éå†æ•´å‹æ•°ç»„numsä¸­çš„æ¯ä¸ªå…ƒç´ 
            ans ^= num;
            // å¯¹ç»“æœansä¸å½“å‰å…ƒç´ numè¿›è¡Œå¼‚æˆ–æ“ä½œ
        }
        return ans;
        // è¿”å›ç»“æœansï¼Œå³åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—
    }
}
```

### 75.é¢œè‰²åˆ†ç±»ï¼ˆhot 100ï¼‰ï¼ˆ4.7ï¼‰

ç»™å®šä¸€ä¸ªåŒ…å«çº¢è‰²ã€ç™½è‰²å’Œè“è‰²ã€å…± `n` ä¸ªå…ƒç´ çš„æ•°ç»„ `nums` ï¼Œ**[åŸåœ°](https://baike.baidu.com/item/åŸåœ°ç®—æ³•)**å¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œä½¿å¾—ç›¸åŒé¢œè‰²çš„å…ƒç´ ç›¸é‚»ï¼Œå¹¶æŒ‰ç…§çº¢è‰²ã€ç™½è‰²ã€è“è‰²é¡ºåºæ’åˆ—ã€‚

æˆ‘ä»¬ä½¿ç”¨æ•´æ•° `0`ã€ `1` å’Œ `2` åˆ†åˆ«è¡¨ç¤ºçº¢è‰²ã€ç™½è‰²å’Œè“è‰²ã€‚

å¿…é¡»åœ¨ä¸ä½¿ç”¨åº“å†…ç½®çš„ sort å‡½æ•°çš„æƒ…å†µä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [2,0,2,1,1,0]
è¾“å‡ºï¼š[0,0,1,1,2,2]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [2,0,1]
è¾“å‡ºï¼š[0,1,2]
```

åˆè§ï¼Œå¯ä»¥ç”¨å†’æ³¡æ’åºè§£å†³

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ç§å¯¹é¢œè‰²æ•°ç»„è¿›è¡Œæ’åºçš„æ–¹æ³•
 * é¢œè‰²æ•°ç»„ä¸­çš„å…ƒç´ ä»£è¡¨ä¸‰ç§ä¸åŒçš„é¢œè‰²ï¼Œåˆ†åˆ«ç”¨0ã€1ã€2è¡¨ç¤º
 * è¯¥æ’åºç®—æ³•çš„ç›®çš„æ˜¯å°†æ•°ç»„æŒ‰ç…§é¢œè‰²æ’åºï¼Œç›¸åŒé¢œè‰²çš„å…ƒç´ åº”è¯¥ç›¸é‚»ï¼Œé¢œè‰²çš„é¡ºåºä¸º0ã€1ã€2
 * è¿™ä¸ªé—®é¢˜ä¹Ÿè¢«ç§°ä¸ºè·å…°å›½æ——é—®é¢˜ï¼Œç”±è®¡ç®—æœºç§‘å­¦å®¶Dijkstraæå‡º
 */
class Solution {
    /**
     * å¯¹é¢œè‰²æ•°ç»„è¿›è¡Œæ’åº
     * ä½¿ç”¨å†’æ³¡æ’åºç®—æ³•ï¼Œé€šè¿‡ä¸¤å±‚å¾ªç¯éå†æ•°ç»„ï¼Œå¹¶é€šè¿‡äº¤æ¢æ“ä½œå°†è¾ƒå¤§çš„å…ƒç´ é€æ¸äº¤æ¢åˆ°æ•°ç»„çš„æœ«å°¾
     *
     * @param nums é¢œè‰²æ•°ç»„ï¼Œå…¶ä¸­çš„å…ƒç´ æ˜¯ä»£è¡¨é¢œè‰²çš„æ•´æ•°ï¼Œ0è¡¨ç¤ºçº¢è‰²ï¼Œ1è¡¨ç¤ºç™½è‰²ï¼Œ2è¡¨ç¤ºè“è‰²
     */
    public void sortColors(int[] nums) {
        for (int i = 0; i < nums.length; i++) {
            for (int j = 0; j < nums.length; j++) {
                if (nums[j] > nums[i]) {
                    swap(nums, i, j);
                }
            }
        }
    }

    /**
     * äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªä½ç½®çš„å…ƒç´ 
     *
     * @param nums é¢œè‰²æ•°ç»„
     * @param i ç¬¬ä¸€ä¸ªè¦äº¤æ¢çš„ä½ç½®
     * @param j ç¬¬äºŒä¸ªè¦äº¤æ¢çš„ä½ç½®
     */
    void swap(int[] nums, int i, int j) {
        int temp = nums[i];
        nums[i] = nums[j];
        nums[j] = temp;
    }
}
```

**å®é™…ä¸Šæ­£ç¡®è§£æ³•åº”è¯¥æ˜¯ä¸‰æŒ‡é’ˆ**

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ç§å¯¹é¢œè‰²æ•°ç»„è¿›è¡Œæ’åºçš„æ–¹æ³•
 * é¢œè‰²æ•°ç»„ä¸­çš„å…ƒç´ ä¸º0ã€1ã€2ï¼Œåˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„é¢œè‰²
 * æ’åºçš„ç›®çš„æ˜¯å°†æ•°ç»„æŒ‰ç…§é¢œè‰²æ’åºï¼Œ0æ”¾åœ¨æ•°ç»„çš„å‰é¢ï¼Œ2æ”¾åœ¨æ•°ç»„çš„åé¢ï¼Œ1åœ¨ä¸­é—´
 */
class Solution {
    /**
     * å¯¹é¢œè‰²æ•°ç»„è¿›è¡Œæ’åº
     *
     * @param nums é¢œè‰²æ•°ç»„ï¼Œå…ƒç´ ä¸º0ã€1ã€2
     */
    public void sortColors(int[] nums) {
        // åˆå§‹åŒ–ä¸‰ä¸ªæŒ‡é’ˆï¼šlowæŒ‡å‘æ•°ç»„å¼€å§‹ä½ç½®ï¼ŒcurrentæŒ‡å‘å½“å‰å…ƒç´ ï¼ŒhighæŒ‡å‘æ•°ç»„æœ«å°¾
        int low = 0, current = 0, high = nums.length - 1;

        // éå†æ•°ç»„ï¼Œç›´åˆ°currentæŒ‡é’ˆè¶…è¿‡highæŒ‡é’ˆ
        while (current <= high) {
            // å½“å‰å…ƒç´ ä¸º0æ—¶ï¼Œå°†å½“å‰å…ƒç´ ä¸lowæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ äº¤æ¢ï¼Œå¹¶å‘å‰ç§»åŠ¨lowå’ŒcurrentæŒ‡é’ˆ
            if (nums[current] == 0) {
                swap(nums, low++, current++);
            }
            // å½“å‰å…ƒç´ ä¸º2æ—¶ï¼Œå°†å½“å‰å…ƒç´ ä¸highæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ äº¤æ¢ï¼Œå¹¶å‘åç§»åŠ¨highæŒ‡é’ˆ
            else if (nums[current] == 2) {
                swap(nums, current, high--);
            }
            // å½“å‰å…ƒç´ ä¸º1æ—¶ï¼Œä»…å‘å‰ç§»åŠ¨currentæŒ‡é’ˆ
            else {
                current++;
            }
        }
    }

    /**
     * äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®
     *
     * @param nums é¢œè‰²æ•°ç»„
     * @param i ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•
     * @param j ç¬¬äºŒä¸ªå…ƒç´ çš„ç´¢å¼•
     */
    void swap(int[] nums, int i, int j) {
        // ä¸´æ—¶å˜é‡ç”¨äºå­˜å‚¨ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œä»¥ä¾¿äº¤æ¢
        int temp = nums[i];
        // å°†ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼æ›¿æ¢ä¸ºç¬¬äºŒä¸ªå…ƒç´ çš„å€¼
        nums[i] = nums[j];
        // å°†ç¬¬äºŒä¸ªå…ƒç´ çš„å€¼æ›¿æ¢ä¸ºä¸´æ—¶å˜é‡ä¸­çš„å€¼ï¼Œå®Œæˆäº¤æ¢
        nums[j] = temp;
    }
}
```

### 704.äºŒåˆ†æŸ¥æ‰¾

ç»™å®šä¸€ä¸ª `n` ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ `nums` å’Œä¸€ä¸ªç›®æ ‡å€¼ `target` ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ `nums` ä¸­çš„ `target`ï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› `-1`ã€‚


**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [-1,0,3,5,9,12], target = 9
è¾“å‡º: 4
è§£é‡Š: 9 å‡ºç°åœ¨ nums ä¸­å¹¶ä¸”ä¸‹æ ‡ä¸º 4
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [-1,0,3,5,9,12], target = 2
è¾“å‡º: -1
è§£é‡Š: 2 ä¸å­˜åœ¨ nums ä¸­å› æ­¤è¿”å› -1
```

```java
class Solution {
    // äºŒåˆ†æŸ¥æ‰¾ç®—æ³•
    public int search(int[] nums, int target) {
        // å®šä¹‰å·¦æŒ‡é’ˆåˆå§‹ä½ç½®ä¸ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•
        int left = 0;
        // å®šä¹‰å³æŒ‡é’ˆåˆå§‹ä½ç½®ä¸ºæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•
        int right = nums.length - 1;
        // å½“å·¦æŒ‡é’ˆå°äºç­‰äºå³æŒ‡é’ˆæ—¶ï¼Œè¿›è¡Œå¾ªç¯æŸ¥æ‰¾
        while(left <= right){
            // è®¡ç®—ä¸­é—´å…ƒç´ çš„ç´¢å¼•
            int mid = (left + right) / 2;
            // å¦‚æœä¸­é—´å…ƒç´ ç­‰äºç›®æ ‡å€¼ï¼Œåˆ™è¿”å›ä¸­é—´å…ƒç´ çš„ç´¢å¼•
            if (nums[mid] == target)
                return mid;
            // å¦‚æœä¸­é—´å…ƒç´ å¤§äºç›®æ ‡å€¼ï¼Œåˆ™å°†å³æŒ‡é’ˆç§»åŠ¨åˆ°ä¸­é—´å…ƒç´ çš„å·¦ä¾§
            else if (nums[mid] > target)
                right = mid - 1;
            // å¦‚æœä¸­é—´å…ƒç´ å°äºç›®æ ‡å€¼ï¼Œåˆ™å°†å·¦æŒ‡é’ˆç§»åŠ¨åˆ°ä¸­é—´å…ƒç´ çš„å³ä¾§
            else
                left = mid + 1;
        }
        // è‹¥æœªæ‰¾åˆ°ç›®æ ‡å€¼ï¼Œåˆ™è¿”å›-1
        return -1;
    }
}
```

### 35.æœç´¢æ’å…¥ä½ç½®ï¼ˆnew hot100ï¼‰

ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚

è¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•ã€‚



**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,3,5,6], target = 5
è¾“å‡º: 2
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [1,3,5,6], target = 2
è¾“å‡º: 1
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: nums = [1,3,5,6], target = 7
è¾“å‡º: 4
```

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥è§£å†³äºŒåˆ†æŸ¥æ‰¾é—®é¢˜
 * è¿™ä¸ªç±»çš„ä¸»è¦ä½œç”¨æ˜¯é€šè¿‡äºŒåˆ†æŸ¥æ‰¾ç®—æ³•åœ¨æœ‰åºæ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼çš„ä½ç½®ï¼Œæˆ–è€…æ‰¾åˆ°ç›®æ ‡å€¼åº”è¯¥è¢«æ’å…¥çš„ä½ç½®
 */
class Solution {
    /**
     * ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾åœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼æˆ–è€…æ‰¾åˆ°ç›®æ ‡å€¼åº”è¯¥æ’å…¥çš„ä½ç½®
     *
     * @param nums ä¸€ä¸ªå·²æ’åºçš„æ•´æ•°æ•°ç»„
     * @param target ç›®æ ‡æ•´æ•°ï¼Œéœ€è¦åœ¨æ•°ç»„ä¸­æŸ¥æ‰¾
     * @return ç›®æ ‡æ•´æ•°åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ä½ç½®å¦‚æœç›®æ ‡æ•´æ•°ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œåˆ™è¿”å›å®ƒåº”è¯¥è¢«æ’å…¥çš„ä½ç½®
     */
    public int searchInsert(int[] nums, int target) {
        // åˆå§‹åŒ–æœç´¢èŒƒå›´çš„å·¦è¾¹ç•Œ
        int left = 0;
        // åˆå§‹åŒ–æœç´¢èŒƒå›´çš„å³è¾¹ç•Œ
        int right = nums.length - 1;
        // ç”¨äºå­˜å‚¨ä¸­é—´å€¼çš„ç´¢å¼•
        int mid;
        // å½“å·¦è¾¹ç•Œå°äºç­‰äºå³è¾¹ç•Œæ—¶ï¼Œè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾
        while (left <= right) {
            // è®¡ç®—ä¸­é—´å€¼çš„ç´¢å¼•
            mid = (left + right) / 2;
            // å¦‚æœä¸­é—´å€¼ç­‰äºç›®æ ‡å€¼ï¼Œç›´æ¥è¿”å›ä¸­é—´å€¼çš„ç´¢å¼•
            if (nums[mid] == target) {
                return mid;
            } else if (nums[mid] > target) {
                // å¦‚æœä¸­é—´å€¼å¤§äºç›®æ ‡å€¼ï¼Œè°ƒæ•´å³è¾¹ç•Œä¸ºä¸­é—´å€¼ç´¢å¼•çš„å‰ä¸€ä¸ª
                right = mid - 1;
            } else {
                // å¦‚æœä¸­é—´å€¼å°äºç›®æ ‡å€¼ï¼Œè°ƒæ•´å·¦è¾¹ç•Œä¸ºä¸­é—´å€¼ç´¢å¼•çš„åä¸€ä¸ª
                left = mid + 1;
            }
        }
        // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›å·¦è¾¹ç•Œï¼Œå³ç›®æ ‡å€¼åº”è¯¥è¢«æ’å…¥çš„ä½ç½®
        return left;
    }
}
```

### 74.æœç´¢äºŒç»´çŸ©é˜µï¼ˆnew hot100ï¼‰

ç»™ä½ ä¸€ä¸ªæ»¡è¶³ä¸‹è¿°ä¸¤æ¡å±æ€§çš„ `m x n` æ•´æ•°çŸ©é˜µï¼š

- æ¯è¡Œä¸­çš„æ•´æ•°ä»å·¦åˆ°å³æŒ‰éä¸¥æ ¼é€’å¢é¡ºåºæ’åˆ—ã€‚
- æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°å¤§äºå‰ä¸€è¡Œçš„æœ€åä¸€ä¸ªæ•´æ•°ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `target` ï¼Œå¦‚æœ `target` åœ¨çŸ©é˜µä¸­ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode.com/uploads/2020/10/05/mat.jpg)



```
è¾“å…¥ï¼šmatrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 3
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/11/25/mat2.jpg)



```
è¾“å…¥ï¼šmatrix = [[1,3,5,7],[10,11,16,20],[23,30,34,60]], target = 13
è¾“å‡ºï¼šfalse
```

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥åœ¨ä¸€ä¸ªäºŒç»´çŸ©é˜µä¸­æœç´¢ä¸€ä¸ªç›®æ ‡å€¼
 * è¿™ä¸ªçŸ©é˜µæ˜¯ä¸€ä¸ªæŒ‰è¡Œå’Œåˆ—éƒ½å‡åºæ’åºçš„äºŒç»´æ•°ç»„
 */
class Solution {
    /**
     * åœ¨äºŒç»´çŸ©é˜µä¸­æœç´¢ç›®æ ‡å€¼
     *
     * @param matrix ä¸€ä¸ªæŒ‰è¡Œå’Œåˆ—éƒ½å‡åºæ’åºçš„äºŒç»´æ•°ç»„
     * @param target è¦æœç´¢çš„ç›®æ ‡å€¼
     * @return å¦‚æœç›®æ ‡å€¼åœ¨çŸ©é˜µä¸­ï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    public boolean searchMatrix(int[][] matrix, int target) {
        // åˆå§‹åŒ–å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆ
        int left = 0, right = matrix.length * matrix[0].length - 1;
        int mid;
        // ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾åœ¨äºŒç»´çŸ©é˜µä¸­æœç´¢ç›®æ ‡å€¼
        while (left <= right) {
            mid = (left + right) / 2;
            // é€šè¿‡è®¡ç®—è¡Œåˆ—ç´¢å¼•æ¥è·å–å½“å‰midæŒ‡å‘çš„å…ƒç´ å€¼
            int row = mid / matrix[0].length;
            int col = mid % matrix[0].length;
            if (matrix[row][col] == target) {
                // å¦‚æœæ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›true
                return true;
            } else if (matrix[row][col] > target) {
                // å¦‚æœå½“å‰å…ƒç´ å€¼å¤§äºç›®æ ‡å€¼ï¼Œåˆ™ç›®æ ‡å€¼åœ¨å·¦åŠéƒ¨åˆ†
                right = mid - 1;
            } else {
                // å¦‚æœå½“å‰å…ƒç´ å€¼å°äºç›®æ ‡å€¼ï¼Œåˆ™ç›®æ ‡å€¼åœ¨å³åŠéƒ¨åˆ†
                left = mid + 1;
            }
        }
        // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›false
        return false;
    }
}
```

### 34.åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ï¼ˆnew hot100ï¼‰

ç»™ä½ ä¸€ä¸ªæŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—çš„æ•´æ•°æ•°ç»„ `nums`ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ `target`ã€‚è¯·ä½ æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚

å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ `target`ï¼Œè¿”å› `[-1, -1]`ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8
è¾“å‡ºï¼š[3,4]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 6
è¾“å‡ºï¼š[-1,-1]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [], target = 0
è¾“å‡ºï¼š[-1,-1]
```



```java
/**
 * Solutionç±»æä¾›äº†ä¸€ç§åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„èµ·å§‹å’Œç»“æŸä½ç½®çš„æ–¹æ³•
 */
class Solution {

    /**
     * åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾ç»™å®šç›®æ ‡å€¼çš„èµ·å§‹å’Œç»“æŸä½ç½®
     * 
     * @param nums æ’åºçš„æ•´æ•°æ•°ç»„
     * @param target è¦æŸ¥æ‰¾çš„ç›®æ ‡å€¼
     * @return åŒ…å«ç›®æ ‡å€¼çš„èµ·å§‹å’Œç»“æŸä½ç½®çš„æ•°ç»„ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›[-1, -1]
     */
    public int[] searchRange(int[] nums, int target) {
        return new int[]{findFirstIndex(nums, target), findLastIndex(nums, target)};
    }

    /**
     * æŸ¥æ‰¾ç›®æ ‡å€¼åœ¨æ’åºæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå‡ºç°çš„ç´¢å¼•
     * 
     * @param nums æ’åºçš„æ•´æ•°æ•°ç»„
     * @param target ç›®æ ‡å€¼
     * @return ç›®æ ‡å€¼ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›-1
     */
    int findFirstIndex(int[] nums, int target) {
        int left = 0, right = nums.length - 1, index = -1; // åˆå§‹åŒ–å·¦è¾¹ç•Œã€å³è¾¹ç•Œå’Œç´¢å¼•
        while (left <= right) { // å½“å·¦è¾¹ç•Œä¸å¤§äºå³è¾¹ç•Œæ—¶ç»§ç»­å¾ªç¯
            int mid = (left + right) / 2; // è®¡ç®—ä¸­é—´ç´¢å¼•
            if (nums[mid] >= target) { // å¦‚æœä¸­é—´å…ƒç´ å¤§äºç­‰äºç›®æ ‡å€¼ï¼Œåˆ™è°ƒæ•´å³è¾¹ç•Œ
                right = mid - 1;
            } else { // å¦åˆ™è°ƒæ•´å·¦è¾¹ç•Œ
                left = mid + 1;
            }
            if (nums[mid] == target) { // å¦‚æœä¸­é—´å…ƒç´ ç­‰äºç›®æ ‡å€¼ï¼Œåˆ™è®°å½•ç´¢å¼•
                index = mid;
            }
        }
        return index; // è¿”å›ç›®æ ‡å€¼çš„ç¬¬ä¸€ä¸ªå‡ºç°ä½ç½®
    }

    /**
     * æŸ¥æ‰¾ç›®æ ‡å€¼åœ¨æ’åºæ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå‡ºç°çš„ç´¢å¼•
     * 
     * @param nums æ’åºçš„æ•´æ•°æ•°ç»„
     * @param target ç›®æ ‡å€¼
     * @return ç›®æ ‡å€¼æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›-1
     */
    int findLastIndex(int[] nums, int target) {
        int left = 0, right = nums.length - 1, index = -1; // åˆå§‹åŒ–å·¦è¾¹ç•Œã€å³è¾¹ç•Œå’Œç´¢å¼•
        while (left <= right) { // å½“å·¦è¾¹ç•Œä¸å¤§äºå³è¾¹ç•Œæ—¶ç»§ç»­å¾ªç¯
            int mid = (left + right) / 2; // è®¡ç®—ä¸­é—´ç´¢å¼•
            if (nums[mid] <= target) { // å¦‚æœä¸­é—´å…ƒç´ å°äºç­‰äºç›®æ ‡å€¼ï¼Œåˆ™è°ƒæ•´å·¦è¾¹ç•Œ
                left = mid + 1;
            } else { // å¦åˆ™è°ƒæ•´å³è¾¹ç•Œ
                right = mid - 1;
            }
            if (nums[mid] == target) { // å¦‚æœä¸­é—´å…ƒç´ ç­‰äºç›®æ ‡å€¼ï¼Œåˆ™è®°å½•ç´¢å¼•
                index = mid;
            }
        }
        return index; // è¿”å›ç›®æ ‡å€¼çš„æœ€åä¸€ä¸ªå‡ºç°ä½ç½®
    }
}

```

### 33.æœç´¢æ—‹è½¬æ’åºæ•°ç»„ï¼ˆnew hot100ï¼‰ï¼ˆ3.29ï¼‰

æ•´æ•°æ•°ç»„ `nums` æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ **äº’ä¸ç›¸åŒ** ã€‚

åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œ`nums` åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ `k`ï¼ˆ`0 <= k < nums.length`ï¼‰ä¸Šè¿›è¡Œäº† **æ—‹è½¬**ï¼Œä½¿æ•°ç»„å˜ä¸º `[nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]`ï¼ˆä¸‹æ ‡ **ä» 0 å¼€å§‹** è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ `[0,1,2,4,5,6,7]` åœ¨ä¸‹æ ‡ `3` å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º `[4,5,6,7,0,1,2]` ã€‚

ç»™ä½  **æ—‹è½¬å** çš„æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `target` ï¼Œå¦‚æœ `nums` ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ `target` ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› `-1` ã€‚

ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0
è¾“å‡ºï¼š4
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3
è¾“å‡ºï¼š-1
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1], target = 0
è¾“å‡ºï¼š-1
```

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œæä¾›æ•°ç»„æŸ¥æ‰¾åŠŸèƒ½
 */
class Solution {
    /**
     * ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•åœ¨æ—‹è½¬æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼
     * æ—‹è½¬æ’åºæ•°ç»„æ˜¯å°†åŸå§‹é€’å¢æ’åºçš„æ•°ç»„åœ¨æŸä¸ªç‚¹ä¸Šè¿›è¡Œæ—‹è½¬åå¾—åˆ°çš„æ•°ç»„
     * ä¾‹å¦‚ï¼š[0,1,2,4,5,6,7] å¯èƒ½å˜ä¸º [4,5,6,7,0,1,2]
     *
     * @param nums æ—‹è½¬æ’åºæ•°ç»„
     * @param target éœ€è¦æŸ¥æ‰¾çš„ç›®æ ‡å€¼
     * @return ç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å› -1
     */
    public int search(int[] nums, int target) {
        // åˆå§‹åŒ–å·¦å³æŒ‡é’ˆ
        int left = 0, right = nums.length - 1;
        // ä¸­é—´æŒ‡é’ˆ
        int mid;
        // ä½¿ç”¨whileå¾ªç¯è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾
        while (left <= right) {
            // è®¡ç®—ä¸­é—´ä½ç½®
            mid = (left + right) / 2;
            // å¦‚æœä¸­é—´ä½ç½®çš„å€¼ç­‰äºç›®æ ‡å€¼ï¼Œç›´æ¥è¿”å›ç´¢å¼•
            if (nums[mid] == target) {
                return mid;
            }

            // åˆ¤æ–­å·¦åŠéƒ¨åˆ†æ˜¯å¦æ˜¯æœ‰åºçš„
            if (nums[left] <= nums[mid]) {
                // å¦‚æœç›®æ ‡å€¼åœ¨å·¦åŠéƒ¨åˆ†çš„èŒƒå›´å†…ï¼Œåˆ™è°ƒæ•´å³æŒ‡é’ˆ
                if (nums[left] <= target && target < nums[mid]) {
                    right = mid - 1;
                } else {
                    // å¦åˆ™è°ƒæ•´å·¦æŒ‡é’ˆ
                    left = mid + 1;
                }
            } else {
                // åˆ¤æ–­å³åŠéƒ¨åˆ†æ˜¯å¦æ˜¯æœ‰åºçš„
                // å¦‚æœç›®æ ‡å€¼åœ¨å³åŠéƒ¨åˆ†çš„èŒƒå›´å†…ï¼Œåˆ™è°ƒæ•´å·¦æŒ‡é’ˆ
                if (nums[mid] < target && target <= nums[right]) {
                    left = mid + 1;
                } else {
                    // å¦åˆ™è°ƒæ•´å³æŒ‡é’ˆ
                    right = mid - 1;
                }
            }
        }
        // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å› -1
        return -1;
    }
}
```

### 153.å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ï¼ˆnew hot100ï¼‰ï¼ˆ3.28ï¼‰

å·²çŸ¥ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ï¼Œé¢„å…ˆæŒ‰ç…§å‡åºæ’åˆ—ï¼Œç»ç”± `1` åˆ° `n` æ¬¡ **æ—‹è½¬** åï¼Œå¾—åˆ°è¾“å…¥æ•°ç»„ã€‚ä¾‹å¦‚ï¼ŒåŸæ•°ç»„ `nums = [0,1,2,4,5,6,7]` åœ¨å˜åŒ–åå¯èƒ½å¾—åˆ°ï¼š

- è‹¥æ—‹è½¬ `4` æ¬¡ï¼Œåˆ™å¯ä»¥å¾—åˆ° `[4,5,6,7,0,1,2]`
- è‹¥æ—‹è½¬ `7` æ¬¡ï¼Œåˆ™å¯ä»¥å¾—åˆ° `[0,1,2,4,5,6,7]`

æ³¨æ„ï¼Œæ•°ç»„ `[a[0], a[1], a[2], ..., a[n-1]]` **æ—‹è½¬ä¸€æ¬¡** çš„ç»“æœä¸ºæ•°ç»„ `[a[n-1], a[0], a[1], a[2], ..., a[n-2]]` ã€‚

ç»™ä½ ä¸€ä¸ªå…ƒç´ å€¼ **äº’ä¸ç›¸åŒ** çš„æ•°ç»„ `nums` ï¼Œå®ƒåŸæ¥æ˜¯ä¸€ä¸ªå‡åºæ’åˆ—çš„æ•°ç»„ï¼Œå¹¶æŒ‰ä¸Šè¿°æƒ…å½¢è¿›è¡Œäº†å¤šæ¬¡æ—‹è½¬ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ•°ç»„ä¸­çš„ **æœ€å°å…ƒç´ ** ã€‚

ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [3,4,5,1,2]
è¾“å‡ºï¼š1
è§£é‡Šï¼šåŸæ•°ç»„ä¸º [1,2,3,4,5] ï¼Œæ—‹è½¬ 3 æ¬¡å¾—åˆ°è¾“å…¥æ•°ç»„ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2]
è¾“å‡ºï¼š0
è§£é‡Šï¼šåŸæ•°ç»„ä¸º [0,1,2,4,5,6,7] ï¼Œæ—‹è½¬ 3 æ¬¡å¾—åˆ°è¾“å…¥æ•°ç»„ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [11,13,15,17]
è¾“å‡ºï¼š11
è§£é‡Šï¼šåŸæ•°ç»„ä¸º [11,13,15,17] ï¼Œæ—‹è½¬ 4 æ¬¡å¾—åˆ°è¾“å…¥æ•°ç»„ã€‚
```

å·¦é—­å³å¼€åŒºé—´çš„å…¸ä¾‹

```java
/**
 * Solutionç±»ç”¨äºè§£å†³å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼çš„é—®é¢˜
 */
class Solution {
    /**
     * ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼
     *
     * @param nums ä¸€ä¸ªæ—‹è½¬æ’åºæ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„
     * @return æ•°ç»„ä¸­çš„æœ€å°å€¼
     */
    public int findMin(int[] nums) {
        // åˆå§‹åŒ–å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆ
        int left = 0, right = nums.length - 1;
        // å½“å·¦æŒ‡é’ˆå°äºå³æŒ‡é’ˆæ—¶ï¼Œè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾
        while (left < right) {
            // è®¡ç®—ä¸­é—´ä½ç½®
            int mid = (left + right) / 2;
            // åˆ¤æ–­ä¸­é—´å…ƒç´ æ˜¯å¦å¤§äºå³ä¾§å…ƒç´ ï¼Œä»¥ç¡®å®šæœ€å°å€¼æ‰€åœ¨çš„åŒºé—´
            if (nums[mid] > nums[right]) {
                // nums[mid] > nums[right] è¯´æ˜æ•°ç»„çš„å³åŠéƒ¨åˆ†æ˜¯æ— åºçš„ï¼ˆæ—‹è½¬æ•°ç»„çš„ç‰¹ç‚¹ï¼‰ï¼Œæ‰€ä»¥æœ€å°å€¼ä¸€å®šåœ¨å³åŠéƒ¨åˆ†ã€‚å› æ­¤ï¼Œæ›´æ–° left = mid + 1ã€‚
                left = mid + 1;
            } else {
                // nums[mid] <= nums[right] è¯´æ˜æ•°ç»„çš„å³åŠéƒ¨åˆ†æ˜¯æœ‰åºçš„ï¼Œæœ€å°å€¼æœ‰å¯èƒ½æ˜¯ mid æˆ–è€…æ›´å°çš„å…ƒç´ ï¼Œå› æ­¤æ›´æ–° right = midã€‚
                right = mid;
            }
        }
        // æ­¤æ—¶å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆé‡åˆï¼ŒæŒ‡å‘æœ€å°å€¼
        return nums[right];
    }
}
```

### 4.å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ï¼ˆnew hot100ï¼‰ï¼ˆ4.11ï¼‰

ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º `m` å’Œ `n` çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ `nums1` å’Œ `nums2`ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ **ä¸­ä½æ•°** ã€‚

ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º `O(log (m+n))` ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]
è¾“å‡ºï¼š2.00000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]
è¾“å‡ºï¼š2.50000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5
```

```java
/**
 * Solutionç±»ç”¨äºè§£å†³ä¸¤ä¸ªå·²æ’åºæ•°ç»„çš„ä¸­ä½æ•°æŸ¥æ‰¾é—®é¢˜
 */
class Solution {
    /**
     * å¯»æ‰¾ä¸¤ä¸ªå·²æ’åºæ•°ç»„çš„ä¸­ä½æ•°
     * 
     * @param nums1 ç¬¬ä¸€ä¸ªå·²æ’åºæ•°ç»„
     * @param nums2 ç¬¬äºŒä¸ªå·²æ’åºæ•°ç»„
     * @return ä¸¤ä¸ªæ•°ç»„åˆå¹¶åçš„ä¸­ä½æ•°
     */
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        int totalLength = nums1.length + nums2.length;
        // æ ¹æ®æ•°ç»„æ€»é•¿åº¦çš„å¥‡å¶æ€§å†³å®šä¸­ä½æ•°çš„è®¡ç®—æ–¹å¼
        return totalLength % 2 != 0 ? findTheKThLargestNumber(nums1, nums2, totalLength / 2 + 1)
                : (findTheKThLargestNumber(nums1, nums2, totalLength / 2 + 1) + findTheKThLargestNumber(nums1, nums2, totalLength / 2)) / 2.0;
    }

    /**
     * å¯»æ‰¾ä¸¤ä¸ªå·²æ’åºæ•°ç»„ä¸­çš„ç¬¬kå°çš„æ•°
     * 
     * @param nums1 ç¬¬ä¸€ä¸ªå·²æ’åºæ•°ç»„
     * @param nums2 ç¬¬äºŒä¸ªå·²æ’åºæ•°ç»„
     * @param k æƒ³è¦æ‰¾åˆ°çš„ç¬¬kå°çš„æ•°çš„ç´¢å¼•
     * @return ä¸¤ä¸ªæ•°ç»„ä¸­çš„ç¬¬kå°çš„æ•°
     */
    int findTheKThLargestNumber(int[] nums1, int[] nums2, int k) {
        int length1 = nums1.length, length2 = nums2.length;
        int index1 = 0, index2 = 0;
        while (true) {
            // å¦‚æœéå†å®Œnums1æ•°ç»„ï¼Œç›´æ¥ä»nums2æ•°ç»„ä¸­æ‰¾ç¬¬kå°çš„æ•°
            if (index1 == length1) {
                while (k != 1) {
                    index2++;
                    k--;
                }
                return nums2[index2];
            }
            // å¦‚æœéå†å®Œnums2æ•°ç»„ï¼Œç›´æ¥ä»nums1æ•°ç»„ä¸­æ‰¾ç¬¬kå°çš„æ•°
            if (index2 == length2) {
                while (k != 1) {
                    index1++;
                    k--;
                }
                return nums1[index1];
            }
            // å¦‚æœkä¸º1ï¼Œè¿”å›ä¸¤ä¸ªæ•°ç»„å½“å‰æœ€å°çš„æ•°
            if (k == 1) {
                return Math.min(nums1[index1], nums2[index2]);
            }
            // æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„å½“å‰çš„æ•°ï¼Œè¾ƒå°çš„é‚£ä¸ªæ•°çš„ç´¢å¼•å‘å‰ç§»åŠ¨ï¼Œå¹¶å°†kå€¼å‡1
            if (nums1[index1] <= nums2[index2]) {
                index1++;
            } else {
                index2++;
            }
            k--;
        }
    }
}
```

### 27.ç§»é™¤å…ƒç´ 

```java
// å®šä¹‰ä¸€ä¸ªåä¸ºSolutionçš„ç±»
class Solution {
    // å®šä¹‰ä¸€ä¸ªåä¸ºremoveElementçš„æ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªæ•´å‹æ•°ç»„numså’Œä¸€ä¸ªæ•´æ•°valä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•´æ•°
    public int removeElement(int[] nums, int val) {
        // åˆå§‹åŒ–ä¸€ä¸ªå˜é‡kï¼Œç”¨äºè®°å½•ä¸ç­‰äºvalçš„å…ƒç´ ä¸ªæ•°
        int k = 0;
        // éå†æ•´å‹æ•°ç»„nums
        for (int i = 0; i < nums.length; i++){
            // å¦‚æœå½“å‰å…ƒç´ ä¸ç­‰äºval
            if (nums[i] != val){
                // å°†å½“å‰å…ƒç´ ç§»åŠ¨åˆ°æ•°ç»„çš„å‰é¢ï¼Œå¹¶æ›´æ–°k
                nums[k++] = nums[i];
            }
        }
        // è¿”å›ä¸ç­‰äºvalçš„å…ƒç´ ä¸ªæ•°
        return k;
    }
}
```

### 977.æœ‰åºæ•°ç»„çš„å¹³æ–¹

åŒæŒ‡é’ˆæ–¹æ³•

```java
class Solution {
    public int[] sortedSquares(int[] nums) {
        int[] result = new int[nums.length];
        int i = nums.length - 1,j = nums.length - 1, k = 0;
        while (k <= j) {
            if ((nums[k] * nums[k]) >= (nums[j] * nums[j])) {
                result[i] = nums[k] * nums[k];
                k++;
                i--;
            } else {
                result[i] = nums[j] * nums[j];
                j--;
                i--;
            }
        }
        return result;
    }
}
```

æ›´ç®€å•çš„

```java
class Solution {
    public int[] sortedSquares(int[] nums) {
        for (int i = 0; i < nums.length; i++) {
            nums[i] = nums[i] * nums[i];
        }

        Arrays.sort(nums);
        return nums;
    }
}
```

### 209.é•¿åº¦æœ€å°çš„å­æ•°ç»„ï¼ˆ3.25ï¼‰

ç»™å®šä¸€ä¸ªå«æœ‰ `n` ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° `target` **ã€‚**

æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶æ€»å’Œå¤§äºç­‰äº `target` çš„é•¿åº¦æœ€å°çš„ **å­æ•°ç»„** `[numsl, numsl+1, ..., numsr-1, numsr]` ï¼Œå¹¶è¿”å›å…¶é•¿åº¦**ã€‚**å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› `0` ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]
è¾“å‡ºï¼š2
è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼štarget = 4, nums = [1,4,4]
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼štarget = 11, nums = [1,1,1,1,1,1,1,1]
è¾“å‡ºï¼š0
```

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œæä¾›æ•°ç»„ç›¸å…³çš„é—®é¢˜è§£å†³æ–¹æ³•
 */
class Solution {
    /**
     * è®¡ç®—æ»¡è¶³æ¡ä»¶çš„æœ€çŸ­å­æ•°ç»„çš„é•¿åº¦
     * 
     * è¯¥æ–¹æ³•ç”¨äºæ‰¾åˆ°ä¸€ä¸ªå­æ•°ç»„ï¼Œä½¿å¾—å­æ•°ç»„çš„æ‰€æœ‰å…ƒç´ å’Œè‡³å°‘ä¸ºç›®æ ‡å€¼ï¼Œ
     * å¹¶è¿”å›æ»¡è¶³æ¡ä»¶çš„æœ€çŸ­å­æ•°ç»„çš„é•¿åº¦å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å­æ•°ç»„ï¼Œåˆ™è¿”å›0
     * 
     * @param target ç›®æ ‡å€¼ï¼Œå­æ•°ç»„çš„å’Œè‡³å°‘è¦è¾¾åˆ°è¿™ä¸ªå€¼
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @return è¿”å›æ»¡è¶³æ¡ä»¶çš„æœ€çŸ­å­æ•°ç»„çš„é•¿åº¦ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›0
     */
    public int minSubArrayLen(int target, int[] nums) {
        // ç´¯åŠ å’Œï¼Œç”¨äºè®°å½•å½“å‰å­æ•°ç»„çš„å’Œ
        int sum = 0;
        // å­æ•°ç»„çš„æœ€å°é•¿åº¦ï¼Œåˆå§‹å€¼è®¾ä¸ºæœ€å¤§æ•´æ•°ï¼Œä»¥ä¾¿åç»­æ¯”è¾ƒ
        int count = Integer.MAX_VALUE;
        // ä½¿ç”¨åŒæŒ‡é’ˆæŠ€æœ¯éå†æ•°ç»„ï¼Œiä¸ºæ…¢æŒ‡é’ˆï¼Œjä¸ºå¿«æŒ‡é’ˆ
        for (int i = 0, j = 0; i < nums.length; i++) {
            // å°†å½“å‰å…ƒç´ åŠ åˆ°å­æ•°ç»„çš„å’Œä¸­
            sum += nums[i];
            // å½“å½“å‰å­æ•°ç»„çš„å’Œå¤§äºç­‰äºç›®æ ‡å€¼æ—¶ï¼Œå°è¯•ç¼©å°å­æ•°ç»„çš„èŒƒå›´
            while (sum >= target) {
                // æ›´æ–°å­æ•°ç»„çš„æœ€å°é•¿åº¦
                count = Math.min(count, i - j + 1);
                // ç§»åŠ¨å¿«æŒ‡é’ˆï¼Œå‡å°å­æ•°ç»„çš„èŒƒå›´
                sum -= nums[j];
                j++;
            }
        }

        // å¦‚æœæœ€å°é•¿åº¦ä»ç„¶æ˜¯åˆå§‹å€¼ï¼Œåˆ™è¯´æ˜æ²¡æœ‰æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å›0
        // å¦åˆ™è¿”å›è®¡ç®—å‡ºçš„æœ€å°é•¿åº¦
        return count == Integer.MAX_VALUE ? 0 : count;
    }
}
```

### 560.å’Œä¸ºkçš„å­æ•°ç»„(hot100)(3.29)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å› *è¯¥æ•°ç»„ä¸­å’Œä¸º `k` çš„å­æ•°ç»„çš„ä¸ªæ•°* ã€‚

å­æ•°ç»„æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„è¿ç»­éç©ºåºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,1], k = 2
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3], k = 3
è¾“å‡ºï¼š2
```

æš´åŠ›è§£ï¼Œå¤æ‚åº¦ O(n^2)ï¼Œæ¨èè¿™ç§ï¼Œç®€å•å¥½è®°ã€‚

```java
auxiliaryMap.getOrDefault(sum - k, 0)
```

**ä¸ºä»€ä¹ˆè¿™ç§éå†èƒ½è§£å†³é—®é¢˜ï¼š**

- **å­æ•°ç»„çš„å®šä¹‰**ï¼šå­æ•°ç»„æ˜¯æ•°ç»„ä¸­ä¸€æ®µè¿ç»­çš„éç©ºå…ƒç´ åºåˆ—ã€‚é€šè¿‡åŒé‡å¾ªç¯ï¼Œå†…å±‚å¾ªç¯éå†ä»æŸä¸ªèµ·å§‹ä½ç½® `i` å¼€å§‹çš„æ‰€æœ‰å­æ•°ç»„ï¼Œä»è€Œå¯ä»¥æ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„å­æ•°ç»„ã€‚
- **è®¡ç®—å’Œçš„æ–¹å¼**ï¼šå†…å±‚å¾ªç¯æ¯æ¬¡è®¡ç®—å½“å‰å­æ•°ç»„çš„å’Œï¼Œé€æ­¥ç´¯åŠ æ•°ç»„å…ƒç´ ï¼Œç›´åˆ°æ‰¾åˆ°å’Œä¸º `k` çš„å­æ•°ç»„ã€‚



**ä¼˜åŒ–åçš„O(N)ï¼Œç”¨å‰ç¼€å’Œçš„æ€æƒ³ã€‚ä¸å¦‚ä¸Šé¢å¥½è®°**

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¡ç®—æ•°ç»„ä¸­è¿ç»­å­æ•°ç»„çš„å’Œç­‰äºkçš„ä¸ªæ•°
    public int subarraySum(int[] nums, int k) {
        // å®šä¹‰ç»“æœå˜é‡ï¼Œç”¨äºå­˜å‚¨è¿ç»­å­æ•°ç»„çš„å’Œç­‰äºkçš„ä¸ªæ•°
        int result = 0, sum = 0;
        // å®šä¹‰ä¸€ä¸ªHashMapï¼Œç”¨äºå­˜å‚¨å‰ç¼€å’ŒåŠå…¶å‡ºç°çš„æ¬¡æ•°
        HashMap<Integer, Integer> map = new HashMap<>();
        // å°†å‰ç¼€å’Œä¸º0çš„æƒ…å†µæ”¾å…¥HashMapä¸­ï¼Œè¡¨ç¤ºä»æ•°ç»„å¼€å¤´åˆ°å½“å‰ä½ç½®çš„å’Œä¸º0
        map.put(0, 1);
        // éå†æ•°ç»„
        for (int i = 0; i < nums.length; i++) {
            // è®¡ç®—å½“å‰ä½ç½®çš„å‰ç¼€å’Œ
            sum += nums[i];
            // å¦‚æœHashMapä¸­å­˜åœ¨å‰ç¼€å’Œä¸ºsum-kçš„æƒ…å†µï¼Œåˆ™è¯´æ˜å­˜åœ¨è¿ç»­å­æ•°ç»„çš„å’Œä¸ºk
            if (map.containsKey(sum - k)) {
                // å°†å‰ç¼€å’Œä¸ºsum-kçš„æ¬¡æ•°åŠ åˆ°ç»“æœä¸­
                result += map.get(sum - k);
            }
            // å°†å½“å‰å‰ç¼€å’Œæ”¾å…¥HashMapä¸­ï¼Œå¹¶æ›´æ–°å…¶å‡ºç°çš„æ¬¡æ•°
            map.put(sum, map.getOrDefault(sum, 0) + 1);
        }
        // è¿”å›ç»“æœ
        return result;
    }
}
```

### 238.é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯ï¼ˆhot100ï¼‰ï¼ˆ4.18ï¼‰

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œè¿”å› æ•°ç»„ `answer` ï¼Œå…¶ä¸­ `answer[i]` ç­‰äº `nums` ä¸­é™¤ `nums[i]` ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯ ã€‚

é¢˜ç›®æ•°æ® **ä¿è¯** æ•°ç»„ `nums`ä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨ **32 ä½** æ•´æ•°èŒƒå›´å†…ã€‚

è¯· **ä¸è¦ä½¿ç”¨é™¤æ³•ï¼Œ**ä¸”åœ¨ `O(n)` æ—¶é—´å¤æ‚åº¦å†…å®Œæˆæ­¤é¢˜ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,2,3,4]
è¾“å‡º: [24,12,8,6]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [-1,1,0,-3,3]
è¾“å‡º: [0,0,9,0,0]
```

**æç¤ºï¼š**

- `2 <= nums.length <= 105`
- `-30 <= nums[i] <= 30`
- **ä¿è¯** æ•°ç»„ `nums`ä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨ **32 ä½** æ•´æ•°èŒƒå›´å†…

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥è®¡ç®—ä¸€ä¸ªæ•´æ•°æ•°ç»„ä¸­é™¤äº†è‡ªèº«ä¹‹å¤–æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
 */
class Solution {
    /**
     * è®¡ç®—æ•°ç»„ä¸­é™¤äº†è‡ªèº«ä¹‹å¤–æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
     * 
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @return è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æ˜¯åŸæ•°ç»„ä¸­é™¤äº†å½“å‰ä½ç½®å…ƒç´ ä¹‹å¤–æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
     */
    public int[] productExceptSelf(int[] nums) {
        // åˆå§‹åŒ–ç»“æœæ•°ç»„ï¼Œé•¿åº¦ä¸è¾“å…¥æ•°ç»„ç›¸åŒ
        int[] resultArray = new int[nums.length];
        // è®¾ç½®ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º1ï¼Œå› ä¸ºå·¦è¾¹æ²¡æœ‰å…ƒç´ 
        resultArray[0] = 1;
        // è®¡ç®—æ¯ä¸ªä½ç½®å·¦è¾¹æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        for (int i = 1; i < nums.length; i++) {
            resultArray[i] = resultArray[i - 1] * nums[i - 1];
        }

        // åˆå§‹åŒ–å³è¾¹ä¹˜ç§¯å˜é‡ä¸º1ï¼Œç”¨äºè®¡ç®—å³è¾¹å…ƒç´ çš„ä¹˜ç§¯
        int auxiliaryRightNum = 1;
        // ä»åå‘å‰éå†æ•°ç»„ï¼Œè®¡ç®—æ¯ä¸ªä½ç½®å³è¾¹å…ƒç´ çš„ä¹˜ç§¯
        for (int i = nums.length - 1; i >= 0; i--) {
            resultArray[i] *= auxiliaryRightNum;
            auxiliaryRightNum *= nums[i];
        }

        // è¿”å›ç»“æœæ•°ç»„
        return resultArray;
    }
}
```



### 283.ç§»åŠ¨é›¶ï¼ˆhot100ï¼‰ï¼ˆ27.ç§»é™¤å…ƒç´ çš„è¿›é˜¶ï¼‰

ç»™å®šä¸€ä¸ªæ•°ç»„ `nums`ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ `0` ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚

**è¯·æ³¨æ„** ï¼Œå¿…é¡»åœ¨ä¸å¤åˆ¶æ•°ç»„çš„æƒ…å†µä¸‹åŸåœ°å¯¹æ•°ç»„è¿›è¡Œæ“ä½œã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [0,1,0,3,12]
è¾“å‡º: [1,3,12,0,0]
```

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå°†æ•°ç»„ä¸­çš„0ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾
    public void moveZeroes(int[] nums) {
        // å®šä¹‰ä¸€ä¸ªå˜é‡kï¼Œç”¨äºè®°å½•é0å…ƒç´ çš„ä¸ªæ•°
        int k = 0;
        // éå†æ•°ç»„
        for (int i = 0; i < nums.length; i++) {
            // å¦‚æœå½“å‰å…ƒç´ ä¸ä¸º0
            if (nums[i] != 0) {
                // å°†å½“å‰å…ƒç´ èµ‹å€¼ç»™nums[k]ï¼Œå¹¶å°†kåŠ 1
                nums[k++] = nums[i];
            }
        }
        // å°†æ•°ç»„ä¸­å‰©ä½™çš„ä½ç½®å…¨éƒ¨èµ‹å€¼ä¸º0
        while (k < nums.length) {
            nums[k++] = 0;
        }
    }
}
```

### 189.è½®è½¬æ•°ç»„ï¼ˆnew hot100ï¼‰

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³è½®è½¬ `k` ä¸ªä½ç½®ï¼Œå…¶ä¸­ `k` æ˜¯éè´Ÿæ•°ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,2,3,4,5,6,7], k = 3
è¾“å‡º: [5,6,7,1,2,3,4]
è§£é‡Š:
å‘å³è½®è½¬ 1 æ­¥: [7,1,2,3,4,5,6]
å‘å³è½®è½¬ 2 æ­¥: [6,7,1,2,3,4,5]
å‘å³è½®è½¬ 3 æ­¥: [5,6,7,1,2,3,4]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥ï¼šnums = [-1,-100,3,99], k = 2
è¾“å‡ºï¼š[3,99,-1,-100]
è§£é‡Š: 
å‘å³è½®è½¬ 1 æ­¥: [99,-1,-100,3]
å‘å³è½®è½¬ 2 æ­¥: [3,99,-1,-100]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `-231 <= nums[i] <= 231 - 1`
- `0 <= k <= 105`

æš´åŠ›è§£æ³•

```java
class Solution {
    /**
     * å°†ç»™å®šçš„æ•´æ•°æ•°ç»„ nums ä¸­çš„å…ƒç´ å‘å³æ—‹è½¬ k ä¸ªä½ç½®
     * 
     * @param nums è¦æ—‹è½¬çš„æ•´æ•°æ•°ç»„
     * @param k æ—‹è½¬çš„ä½ç½®æ•°ï¼Œä¸èƒ½ä¸º0
     */
    public void rotate(int[] nums, int k) {
        // å¦‚æœkä¸º0ï¼Œåˆ™ä¸éœ€è¦æ—‹è½¬ï¼Œç›´æ¥è¿”å›
        if (k != 0) {
            // åˆå§‹åŒ–è¾…åŠ©æ•°ç»„ï¼Œç”¨äºå­˜æ”¾æ—‹è½¬åçš„å…ƒç´ 
            int[] auxiliaryArray = new int[nums.length];
            // éå†åŸå§‹æ•°ç»„ï¼Œå°†å…ƒç´ æ ¹æ®æ—‹è½¬è§„åˆ™æ”¾å…¥è¾…åŠ©æ•°ç»„
            for (int i = 0; i < nums.length; i++) {
                auxiliaryArray[(i + k) % nums.length] = nums[i];
            }
            // å°†è¾…åŠ©æ•°ç»„ä¸­çš„å…ƒç´ å¤åˆ¶å›åŸå§‹æ•°ç»„ï¼Œå®Œæˆæ—‹è½¬
            for (int i = 0; i < nums.length; i++) {
                nums[i]=auxiliaryArray[i];
            }
        }
    }
}

```

Oï¼ˆ1ï¼‰çš„å¤„ç†ç©ºé—´ï¼Œæ€è·¯ç±»ä¼¼å³æ—‹å­—ç¬¦ä¸²ã€‚

```java
class Solution {
    /**
     * å°†æ•°ç»„ nums ä¸­çš„å…ƒç´ å‘å³æ—‹è½¬ k ä¸ªä½ç½®
     * é€šè¿‡åè½¬æ•°ç»„çš„æ–¹å¼æ¥å®ç°æ—‹è½¬æ“ä½œ
     * 
     * @param nums åŸå§‹æ•°ç»„
     * @param k æ—‹è½¬çš„æ­¥æ•°
     */
    public void rotate(int[] nums, int k) {
        // è®¡ç®—å®é™…éœ€è¦ç§»åŠ¨çš„æ­¥æ•°ï¼Œé˜²æ­¢ k å¤§äºæ•°ç»„é•¿åº¦çš„æƒ…å†µ
        int NumberOfStepsMoved = k % (nums.length);
        // åè½¬æ•´ä¸ªæ•°ç»„
        reverse(nums, 0, nums.length - 1);
        // åè½¬å‰ NumberOfStepsMoved ä¸ªå…ƒç´ 
        reverse(nums, 0, NumberOfStepsMoved - 1);
        // åè½¬å‰©ä½™çš„å…ƒç´ 
        reverse(nums, NumberOfStepsMoved, nums.length - 1);
    }

    /**
     * åè½¬æ•°ç»„ä¸­æŒ‡å®šèŒƒå›´çš„å…ƒç´ 
     * 
     * @param nums åŸå§‹æ•°ç»„
     * @param left åè½¬èŒƒå›´çš„å·¦è¾¹ç•Œ
     * @param right åè½¬èŒƒå›´çš„å³è¾¹ç•Œ
     */
    void reverse(int[] nums, int left, int right) {
        int tempNum;
        while (left < right) {
            // äº¤æ¢å½“å‰å…ƒç´ 
            tempNum = nums[right];
            nums[right] = nums[left];
            nums[left] = tempNum;
            // ç§»åŠ¨æŒ‡é’ˆï¼Œè¿›è¡Œä¸‹ä¸€è½®äº¤æ¢
            right--;
            left++;
        }
    }
}

```

### 41.ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°ï¼ˆnew hot100ï¼‰ï¼ˆ3.22ï¼‰

ç»™ä½ ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ `nums` ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚

è¯·ä½ å®ç°æ—¶é—´å¤æ‚åº¦ä¸º 

```
O(n)
```

 å¹¶ä¸”åªä½¿ç”¨å¸¸æ•°çº§åˆ«é¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,0]
è¾“å‡ºï¼š3
è§£é‡Šï¼šèŒƒå›´ [1,2] ä¸­çš„æ•°å­—éƒ½åœ¨æ•°ç»„ä¸­ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,4,-1,1]
è¾“å‡ºï¼š2
è§£é‡Šï¼š1 åœ¨æ•°ç»„ä¸­ï¼Œä½† 2 æ²¡æœ‰ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [7,8,9,11,12]
è¾“å‡ºï¼š1
è§£é‡Šï¼šæœ€å°çš„æ­£æ•° 1 æ²¡æœ‰å‡ºç°ã€‚
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `-231 <= nums[i] <= 231 - 1`

```java
class Solution {
    /**
     * æ‰¾åˆ°æ•°ç»„ä¸­ç¼ºå¤±çš„æœ€å°æ­£æ•´æ•°
     * 
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @return è¿”å›ç¼ºå¤±çš„æœ€å°æ­£æ•´æ•°
     */
    public int firstMissingPositive(int[] nums) {
        // ç¬¬ä¸€ééå†æ•°ç»„ï¼Œå°†æ¯ä¸ªæ•°å­—æ”¾åˆ°å®ƒåº”è¯¥åœ¨çš„ä½ç½®ä¸Š
        for (int i = 0; i < nums.length; i++) {
            // ä½¿ç”¨ while å¾ªç¯è€Œä¸æ˜¯ if æ˜¯å› ä¸ºä¸€ä¸ªå…ƒç´ ç»è¿‡ä¸€æ¬¡äº¤æ¢åï¼Œå¯èƒ½è¿˜éœ€è¦ç»§ç»­äº¤æ¢
            // ç›´åˆ°è¿™ä¸ªå…ƒç´ åˆ°è¾¾å®ƒåº”è¯¥åœ¨çš„ä½ç½®ã€‚
            // æ¯”å¦‚ï¼Œå‡è®¾ nums[i] çš„å€¼æ˜¯ 5ï¼Œå®ƒåº”è¯¥æ”¾åœ¨ nums[4] çš„ä½ç½®ä¸Šã€‚
            // å¦‚æœæˆ‘ä»¬äº¤æ¢å nums[i] å˜æˆäº†å¦ä¸€ä¸ªä¸åœ¨æ­£ç¡®ä½ç½®çš„æ•°å­—ï¼Œæ¯”å¦‚ 3ï¼Œ
            // é‚£ä¹ˆ nums[i] è¿˜éœ€è¦ç»§ç»­äº¤æ¢åˆ°æ­£ç¡®çš„ä½ç½® nums[2]ã€‚
            //nums[i] æ˜¯å½“å‰æˆ‘ä»¬æ­£åœ¨æ£€æŸ¥çš„æ•°å­—
			//nums[i] - 1 æ˜¯è¿™ä¸ªæ•°å­—åº”è¯¥åœ¨çš„ç´¢å¼•ä½ç½®
			//nums[nums[i] - 1] æ˜¯ç°åœ¨å æ®è¿™ä¸ªä½ç½®çš„æ•°å­—
            while (nums[i] > 0 && nums[i] <= nums.length && nums[nums[i] - 1] != nums[i]) {
                // å½“æ¡ä»¶æ»¡è¶³æ—¶äº¤æ¢å…ƒç´ ï¼š
                // 1. nums[i] > 0ï¼šæ•°å­—åº”è¯¥æ˜¯æ­£æ•°æ‰éœ€è¦å¤„ç†ï¼ˆè´Ÿæ•°å’Œ 0 æ— éœ€ç§»åŠ¨ï¼‰
                // 2. nums[i] <= nums.lengthï¼šåªå¤„ç†èŒƒå›´åœ¨ 1 åˆ° n ä¹‹é—´çš„æ•°å­—ï¼ˆå¿½ç•¥å¤§äº n çš„æ•°å­—ï¼Œå› ä¸ºå®ƒä»¬æ— æ³•æˆä¸ºç­”æ¡ˆï¼‰
                // 3. nums[nums[i] - 1] != nums[i]ï¼šåªåœ¨å…ƒç´ æœªå¤„äºæ­£ç¡®ä½ç½®æ—¶æ‰äº¤æ¢ï¼Œé¿å…é‡å¤äº¤æ¢å’Œæ­»å¾ªç¯
                swap(nums, nums[i] - 1, i);
            }
        }

        // ç¬¬äºŒæ¬¡éå†æ•°ç»„ï¼ŒæŸ¥æ‰¾ç¬¬ä¸€ä¸ªä½ç½® i ä½¿å¾— nums[i] != i + 1
        for (int i = 0; i < nums.length; i++) {
            // å¦‚æœå‘ç°æŸä¸ªä½ç½®çš„æ•°å­—ä¸ i+1 ä¸ç¬¦ï¼Œé‚£ä¹ˆ i+1 å°±æ˜¯ç¼ºå¤±çš„æœ€å°æ­£æ•´æ•°
            if (nums[i] != i + 1) {
                return i + 1; // è¿”å›ç¬¬ä¸€ä¸ªç¼ºå¤±çš„æœ€å°æ­£æ•´æ•°
            }
        }

        // å¦‚æœæ•°ç»„ä¸­æ‰€æœ‰æ•°å­—éƒ½ç¬¦åˆ nums[i] == i + 1 çš„æƒ…å†µï¼Œé‚£ä¹ˆç¼ºå¤±çš„æœ€å°æ­£æ•´æ•°å°±æ˜¯ nums.length + 1
        return nums.length + 1;
    }

    /**
     * äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªä½ç½®çš„å€¼
     * 
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @param i ç¬¬ä¸€ä¸ªä½ç½®çš„ç´¢å¼•
     * @param j ç¬¬äºŒä¸ªä½ç½®çš„ç´¢å¼•
     */
    private void swap(int[] nums, int i, int j) {
        int temp = nums[i];  // ä¿å­˜ nums[i] çš„å€¼
        nums[i] = nums[j];   // å°† nums[j] èµ‹ç»™ nums[i]
        nums[j] = temp;      // å°† temp ä¸­ä¿å­˜çš„å€¼èµ‹ç»™ nums[j]
    }
}

```

### 59.èºæ—‹çŸ©é˜µII

```java
class Solution {
    public int[][] generateMatrix(int n) {
        int[][] matrix = new int[n][n];
        int num = 0;
        for (int k = 0, i = 0, j = 0, starx = 0, stary = 0; k < n / 2; k++) {

            for (j = stary; j < n - k - 1; j++) {
                matrix[starx][j] = ++num;
            }
            for (i = starx; i < n - k - 1; i++) {
                matrix[i][n - k - 1] = ++num;
            }
            for (j = n - k - 1; j > k; j--) {
                matrix[n - k - 1][j] = ++num;
            }
            for (i = n - k - 1; i > k; i--) {
                matrix[i][stary] = ++num;
            }
            starx++;
            stary++;

        }
        if (n % 2 != 0) {
            matrix[n / 2][n / 2] = ++num;
        }

        return matrix;
    }
}
```



### 54.èºæ—‹çŸ©é˜µï¼ˆnew hot100ï¼‰ï¼ˆ4.19ï¼‰

```java
class Solution {
    /**
     * æŒ‰èºæ—‹é¡ºåºè¿”å›çŸ©é˜µä¸­çš„å…ƒç´ 
     * 
     * @param matrix äºŒç»´æ•´æ•°æ•°ç»„ï¼Œè¡¨ç¤ºè¾“å…¥çš„çŸ©é˜µ
     * @return List<Integer>ï¼ŒåŒ…å«æŒ‰èºæ—‹é¡ºåºéå†çŸ©é˜µçš„å…ƒç´ 
     */
    public List<Integer> spiralOrder(int[][] matrix) {
        // åˆå§‹åŒ–ç»“æœåˆ—è¡¨
        List<Integer> resultList = new ArrayList<>();
        // åˆå§‹åŒ–ä¸Šä¸‹å·¦å³è¾¹ç•Œ
        int top = 0, bottom = matrix.length - 1, left = 0, right = matrix[0].length - 1;

        // å½“ä¸Šè¾¹ç•Œå°äºç­‰äºä¸‹è¾¹ç•Œä¸”å·¦è¾¹ç•Œå°äºç­‰äºå³è¾¹ç•Œæ—¶ï¼Œè¿›è¡Œèºæ—‹éå†
        while (top <= bottom && left <= right) {
            // ä»å·¦åˆ°å³éå†é¡¶éƒ¨å…ƒç´ 
            for (int i = left; i <= right; i++) {
                resultList.add(matrix[top][i]);
            }
            // ä¸Šè¾¹ç•Œä¸‹ç§»
            top++;
            // ä»ä¸Šåˆ°ä¸‹éå†å³ä¾§å…ƒç´ 
            for (int i = top; i <= bottom; i++) {
                resultList.add(matrix[i][right]);
            }
            // å³è¾¹ç•Œå·¦ç§»
            right--;
            // å¦‚æœä¸Šè¾¹ç•Œå°äºç­‰äºä¸‹è¾¹ç•Œï¼Œåˆ™ä»å³åˆ°å·¦éå†åº•éƒ¨å…ƒç´ 
            if (top <= bottom) {
                for (int i = right; i >= left; i--) {
                    resultList.add(matrix[bottom][i]);
                }
                // ä¸‹è¾¹ç•Œä¸Šç§»
                bottom--;
            }
            // å¦‚æœå·¦è¾¹ç•Œå°äºç­‰äºå³è¾¹ç•Œï¼Œåˆ™ä»ä¸‹åˆ°ä¸Šéå†å·¦ä¾§å…ƒç´ 
            if (left <= right) {
                for (int i = bottom; i >= top; i--) {
                    resultList.add(matrix[i][left]);
                }
                // å·¦è¾¹ç•Œå³ç§»
                left++;
            }
        }
        // è¿”å›èºæ—‹éå†çš„ç»“æœ
        return resultList;
    }
}

```

åœ¨èºæ—‹é¡ºåºéå†ä¸­ï¼Œåä¸¤ä¸ªå¾ªç¯ï¼ˆä»å³åˆ°å·¦ã€ä»ä¸‹åˆ°ä¸Šï¼‰éœ€è¦è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œä¸»è¦åŸå› æ˜¯ä¸ºäº†é¿å…é‡å¤éå†æˆ–è¶Šç•Œæ“ä½œã€‚

å…·ä½“æ¥è¯´ï¼š

1. **ç¬¬ä¸€ä¸ªåˆ¤æ–­ (top <= bottom)**ï¼š
   - åœ¨ä»å³åˆ°å·¦éå†åº•éƒ¨æ—¶ï¼Œè¿™ä¸ªåˆ¤æ–­ç¡®ä¿åœ¨çŸ©é˜µçš„è¡Œæ•°è¶³å¤Ÿæ—¶æ‰è¿›è¡Œéå†ã€‚ç»è¿‡å‰ä¸¤ä¸ªéå†ï¼ˆä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹ï¼‰åï¼Œ`top` å·²ç»é€’å¢äº†ï¼Œè€Œ `bottom` å·²ç»é€’å‡äº†ï¼Œå¯èƒ½åœ¨æŸä¸€æ—¶åˆ» `top` è¶…è¿‡äº† `bottom`ï¼Œè¯´æ˜å·²ç»å¤„ç†å®Œæ‰€æœ‰è¡Œã€‚æ­¤æ—¶æ— éœ€å†æ‰§è¡Œä»å³åˆ°å·¦çš„éå†ï¼Œé¿å…é‡å¤æ·»åŠ å…ƒç´ ã€‚
2. **ç¬¬äºŒä¸ªåˆ¤æ–­ (left <= right)**ï¼š
   - åŒç†ï¼Œåœ¨ä»ä¸‹åˆ°ä¸Šéå†å·¦ä¾§åˆ—æ—¶ï¼Œè¿™ä¸ªåˆ¤æ–­ç¡®ä¿åˆ—æ•°è¶³å¤Ÿæ—¶æ‰è¿›è¡Œéå†ã€‚å‰é¢çš„éå†å¯èƒ½å·²ç»å¤„ç†æ‰äº†æ‰€æœ‰åˆ—ï¼Œå› æ­¤éœ€è¦åˆ¤æ–­ `left` å’Œ `right` çš„å…³ç³»ï¼Œé¿å…é‡å¤è®¿é—®å·²ç»å¤„ç†è¿‡çš„åˆ—ã€‚

è¿™äº›åˆ¤æ–­ç¡®ä¿æ¯ä¸€æ¬¡åªå¤„ç†å‰©ä¸‹æœªè®¿é—®çš„è¡Œå’Œåˆ—ï¼Œé¿å…ä¸å¿…è¦çš„é‡å¤å¤„ç†æˆ–è¶Šç•Œé”™è¯¯ï¼Œå°¤å…¶æ˜¯åœ¨çŸ©é˜µéå¸¸å°çš„æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚ 1xN æˆ– Nx1 çš„çŸ©é˜µï¼‰ã€‚



### 73.çŸ©é˜µç½®0ï¼ˆnew hot100ï¼‰

ç»™å®šä¸€ä¸ª `*m* x *n*` çš„çŸ©é˜µï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ ä¸º **0** ï¼Œåˆ™å°†å…¶æ‰€åœ¨è¡Œå’Œåˆ—çš„æ‰€æœ‰å…ƒç´ éƒ½è®¾ä¸º **0** ã€‚è¯·ä½¿ç”¨ **åŸåœ°** ç®—æ³•**ã€‚**

**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode.com/uploads/2020/08/17/mat1.jpg)



```
è¾“å…¥ï¼šmatrix = [[1,1,1],[1,0,1],[1,1,1]]
è¾“å‡ºï¼š[[1,0,1],[0,0,0],[1,0,1]]
```

**ç¤ºä¾‹ 2ï¼š**

![img](https://assets.leetcode.com/uploads/2020/08/17/mat2.jpg)

```
è¾“å…¥ï¼šmatrix = [[0,1,2,0],[3,4,5,2],[1,3,1,5]]
è¾“å‡ºï¼š[[0,0,0,0],[0,4,5,0],[0,3,1,0]]
```



```java
class Solution {
    /**
     * å°†çŸ©é˜µä¸­æŒ‡å®šå…ƒç´ è®¾ä¸º0
     * å¦‚æœä¸€ä¸ªçŸ©é˜µä¸­çš„å…ƒç´ ä¸º0ï¼Œåˆ™å°†å…¶æ‰€åœ¨è¡Œå’Œåˆ—çš„æ‰€æœ‰å…ƒç´ éƒ½è®¾ä¸º0
     *
     * @param matrix äºŒç»´æ•´æ•°æ•°ç»„ï¼Œè¡¨ç¤ºéœ€è¦å¤„ç†çš„çŸ©é˜µ
     */
    public void setZeroes(int[][] matrix) {
        // åˆ›å»ºå¸ƒå°”æ•°ç»„è®°å½•çŸ©é˜µä¸­æ¯è¡Œæ¯åˆ—æ˜¯å¦æœ‰å…ƒç´ ä¸º0
        boolean[] row = new boolean[matrix.length];
        boolean[] col = new boolean[matrix[0].length];

        // éå†çŸ©é˜µï¼Œæ ‡è®°å«æœ‰0çš„è¡Œå’Œåˆ—
        for (int i = 0; i < matrix.length; i++) {
            for (int j = 0; j < matrix[0].length; j++) {
                if (matrix[i][j] == 0) {
                    row[i] = true;
                    col[j] = true;
                }
            }
        }

        // æ ¹æ®æ ‡è®°çš„è¡Œå’Œåˆ—ï¼Œå°†å¯¹åº”ä½ç½®çš„å…ƒç´ è®¾ä¸º0
        for (int i = 0; i < matrix.length; i++) {
            for (int j = 0; j < matrix[0].length; j++) {
                if (row[i] || col[j]) {
                    matrix[i][j] = 0;
                }
            }
        }
    }
}
```

ç©ºé—´å¤æ‚åº¦æ˜¯O(1)ï¼Œé˜²æ­¢é¢è¯•åˆéš¾ã€‚

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•setZeroesï¼Œç”¨äºå°†åŒ…å«0çš„å…ƒç´ æ‰€åœ¨çš„è¡Œå’Œåˆ—ç½®é›¶
 */
class Solution {
    /**
     * å°†çŸ©é˜µä¸­åŒ…å«0çš„å…ƒç´ æ‰€åœ¨çš„è¡Œå’Œåˆ—ç½®é›¶
     * 
     * @param matrix ä¸€ä¸ªæ•´æ•°çŸ©é˜µ
     */
    public void setZeroes(int[][] matrix) {
        // çŸ©é˜µçš„è¡Œæ•°
        int m = matrix.length;
        // çŸ©é˜µçš„åˆ—æ•°
        int n = matrix[0].length;
        // æ ‡è®°é¦–è¡Œæ˜¯å¦åŒ…å«0
        boolean firstRowZero = false;
        // æ ‡è®°é¦–åˆ—æ˜¯å¦åŒ…å«0
        boolean firstColumnZero = false;
        
        // æ£€æŸ¥é¦–è¡Œæ˜¯å¦åŒ…å«0
        for (int j = 0; j < n; j++) {
            if (matrix[0][j] == 0) {
                firstRowZero = true;
                break;
            }
        }
        
        // æ£€æŸ¥é¦–åˆ—æ˜¯å¦åŒ…å«0
        for (int i = 0; i < m; i++) {
            if (matrix[i][0] == 0) {
                firstColumnZero = true;
                break;
            }
        }
        
        // éå†çŸ©é˜µï¼Œå°†åŒ…å«0çš„å…ƒç´ æ‰€åœ¨çš„è¡Œå’Œåˆ—çš„å¯¹åº”æ ‡å¿—ä½ç½®é›¶
        for (int i = 1; i < m; i++) {
            for (int j = 1; j < n; j++) {
                if (matrix[i][j] == 0) {
                    matrix[i][0] = 0;
                    matrix[0][j] = 0;
                }
            }
        }
        
        // æ ¹æ®æ ‡å¿—ä½ï¼Œå°†å¯¹åº”çš„è¡Œå’Œåˆ—ç½®é›¶
        for (int i = 1; i < m; i++) {
            for (int j = 1; j < n; j++) {
                if (matrix[i][0] == 0 || matrix[0][j] == 0) {
                    matrix[i][j] = 0;
                }
            }
        }
        
        // å¦‚æœé¦–è¡ŒåŒ…å«0ï¼Œå°†é¦–è¡Œç½®é›¶
        if (firstRowZero) {
            for (int j = 0; j < n; j++) {
                matrix[0][j] = 0;
            }
        }
        
        // å¦‚æœé¦–åˆ—åŒ…å«0ï¼Œå°†é¦–åˆ—ç½®é›¶
        if (firstColumnZero) {
            for (int i = 0; i < m; i++) {
                matrix[i][0] = 0;
            }
        }
    }
}

```



### 48.æ—‹è½¬å›¾åƒï¼ˆnew hot100ï¼‰ï¼ˆ4.15ï¼‰

ç»™å®šä¸€ä¸ª *n* Ã— *n* çš„äºŒç»´çŸ©é˜µ `matrix` è¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚è¯·ä½ å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚

ä½ å¿…é¡»åœ¨ **åŸåœ°** æ—‹è½¬å›¾åƒï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦ç›´æ¥ä¿®æ”¹è¾“å…¥çš„äºŒç»´çŸ©é˜µã€‚**è¯·ä¸è¦** ä½¿ç”¨å¦ä¸€ä¸ªçŸ©é˜µæ¥æ—‹è½¬å›¾åƒã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode.com/uploads/2020/08/28/mat1.jpg)

```
è¾“å…¥ï¼šmatrix = [[1,2,3],[4,5,6],[7,8,9]]
è¾“å‡ºï¼š[[7,4,1],[8,5,2],[9,6,3]]
```

**ç¤ºä¾‹ 2ï¼š**

![img](https://assets.leetcode.com/uploads/2020/08/28/mat2.jpg)

```
è¾“å…¥ï¼šmatrix = [[5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16]]
è¾“å‡ºï¼š[[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]]
```



```java
class Solution {
    /**
     * å°†äºŒç»´çŸ©é˜µé¡ºæ—¶é’ˆæ—‹è½¬90åº¦
     * é€šè¿‡å…ˆè½¬ç½®çŸ©é˜µï¼Œç„¶åæ²¿å‚ç›´ä¸­çº¿ç¿»è½¬æ¥å®ç°
     *
     * @param matrix äºŒç»´æ•´æ•°æ•°ç»„ï¼Œè¡¨ç¤ºéœ€è¦æ—‹è½¬çš„çŸ©é˜µ
     */
    public void rotate(int[][] matrix) {
        // è·å–çŸ©é˜µçš„è¡Œæ•°ï¼ˆä¹Ÿæ˜¯åˆ—æ•°ï¼Œå› ä¸ºçŸ©é˜µæ˜¯æ–¹é˜µï¼‰
        int n = matrix.length;

        // éå†çŸ©é˜µçš„ä¸ŠåŠéƒ¨åˆ†ï¼Œè¿›è¡Œè½¬ç½®
        // åªéœ€éå†ä¸Šä¸‰è§’ï¼Œè½¬ç½®åä¼šå¾—åˆ°ä¸€ä¸ªå¯¹ç§°çŸ©é˜µ
        for (int i = 0; i < n; i++) {
            for (int j = i; j < n; j++) {
                // äº¤æ¢çŸ©é˜µå¯¹è§’çº¿ä¸Šçš„å…ƒç´ ï¼Œå®Œæˆè½¬ç½®
                int temp = matrix[i][j];
                matrix[i][j] = matrix[j][i];
                matrix[j][i] = temp;
            }
        }

        // éå†çŸ©é˜µçš„æ¯ä¸€è¡Œï¼Œæ²¿å‚ç›´ä¸­çº¿ç¿»è½¬
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n / 2; j++) {
                // äº¤æ¢æ¯è¡Œä¸­å¯¹ç§°ä½ç½®çš„å…ƒç´ 
                int temp = matrix[i][j];
                matrix[i][j] = matrix[i][n - 1 - j];
                matrix[i][n - 1 - j] = temp;
            }
        }
    }
}
```



### 240.æœç´¢äºŒç»´çŸ©é˜µIIï¼ˆnew hot100ï¼‰

ç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•æ¥æœç´¢ `*m* x *n*` çŸ©é˜µ `matrix` ä¸­çš„ä¸€ä¸ªç›®æ ‡å€¼ `target` ã€‚è¯¥çŸ©é˜µå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š

- æ¯è¡Œçš„å…ƒç´ ä»å·¦åˆ°å³å‡åºæ’åˆ—ã€‚
- æ¯åˆ—çš„å…ƒç´ ä»ä¸Šåˆ°ä¸‹å‡åºæ’åˆ—ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/11/25/searchgrid2.jpg)

```
è¾“å…¥ï¼šmatrix = [[1,4,7,11,15],[2,5,8,12,19],[3,6,9,16,22],[10,13,14,17,24],[18,21,23,26,30]], target = 5
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/11/25/searchgrid.jpg)

```
è¾“å…¥ï¼šmatrix = [[1,4,7,11,15],[2,5,8,12,19],[3,6,9,16,22],[10,13,14,17,24],[18,21,23,26,30]], target = 20
è¾“å‡ºï¼šfalse
```



```java
/**
 * åœ¨äºŒç»´çŸ©é˜µä¸­æœç´¢ç›®æ ‡å€¼
 * è¿™ä¸ªå‡½æ•°é‡‡ç”¨ä»å³ä¸Šè§’å¼€å§‹æœç´¢çš„ç­–ç•¥ï¼Œå……åˆ†åˆ©ç”¨çŸ©é˜µçš„æœ‰åºç‰¹æ€§ï¼Œä»è€Œå®ç°é«˜æ•ˆæœç´¢
 * 
 * @param matrix ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ï¼Œè¡¨ç¤ºå¾…æœç´¢çš„çŸ©é˜µè¯¥çŸ©é˜µæ¯è¡Œä»å·¦åˆ°å³é€’å¢ï¼Œæ¯åˆ—ä»ä¸Šåˆ°ä¸‹é€’å¢
 * @param target è¦æœç´¢çš„ç›®æ ‡å€¼
 * @return å¦‚æœç›®æ ‡å€¼å­˜åœ¨äºçŸ©é˜µä¸­ï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
 */
class Solution {
    public boolean searchMatrix(int[][] matrix, int target) {
        // é¦–å…ˆæ£€æŸ¥çŸ©é˜µæ˜¯å¦ä¸ºç©ºï¼Œæˆ–è€…è¡Œæˆ–åˆ—æ˜¯å¦ä¸ºç©º
        if (matrix == null || matrix.length == 0 || matrix[0].length == 0) {
            return false;
        }

        // åˆå§‹åŒ–æœç´¢çš„èµ·å§‹ä½ç½®ä¸ºçŸ©é˜µçš„å³ä¸Šè§’
        int row = 0;
        int col = matrix[0].length - 1;

        // å¼€å§‹åœ¨çŸ©é˜µä¸­æœç´¢ï¼Œåªè¦æœç´¢æŒ‡é’ˆä¸è¶…å‡ºçŸ©é˜µçš„è¾¹ç•Œ
        while (row < matrix.length && col >= 0) {
            // å¦‚æœå½“å‰ä½ç½®çš„å€¼ç­‰äºç›®æ ‡å€¼ï¼Œè¯´æ˜æ‰¾åˆ°äº†ç›®æ ‡ï¼Œè¿”å›true
            if (matrix[row][col] == target) {
                return true;
            } 
            // å¦‚æœå½“å‰å€¼å¤§äºç›®æ ‡å€¼ï¼Œå‘ä¸‹ä¸€è¡Œç§»åŠ¨
            else if (matrix[row][col] > target) {
                col--;
            } 
            // å¦‚æœå½“å‰å€¼å°äºç›®æ ‡å€¼ï¼Œå‘å·¦ä¸€åˆ—ç§»åŠ¨
            else {
                row++;
            }
        }

        // å¦‚æœæœç´¢ç»“æŸéƒ½æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›false
        return false;
    }
}
```

### 31.ä¸‹ä¸€ä¸ªæ’åˆ—ï¼ˆhot 100ï¼‰ï¼ˆ3.21ï¼‰

æ•´æ•°æ•°ç»„çš„ä¸€ä¸ª **æ’åˆ—** å°±æ˜¯å°†å…¶æ‰€æœ‰æˆå‘˜ä»¥åºåˆ—æˆ–çº¿æ€§é¡ºåºæ’åˆ—ã€‚

- ä¾‹å¦‚ï¼Œ`arr = [1,2,3]` ï¼Œä»¥ä¸‹è¿™äº›éƒ½å¯ä»¥è§†ä½œ `arr` çš„æ’åˆ—ï¼š`[1,2,3]`ã€`[1,3,2]`ã€`[3,1,2]`ã€`[2,3,1]` ã€‚

æ•´æ•°æ•°ç»„çš„ **ä¸‹ä¸€ä¸ªæ’åˆ—** æ˜¯æŒ‡å…¶æ•´æ•°çš„ä¸‹ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚æ›´æ­£å¼åœ°ï¼Œå¦‚æœæ•°ç»„çš„æ‰€æœ‰æ’åˆ—æ ¹æ®å…¶å­—å…¸é¡ºåºä»å°åˆ°å¤§æ’åˆ—åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæ•°ç»„çš„ **ä¸‹ä¸€ä¸ªæ’åˆ—** å°±æ˜¯åœ¨è¿™ä¸ªæœ‰åºå®¹å™¨ä¸­æ’åœ¨å®ƒåé¢çš„é‚£ä¸ªæ’åˆ—ã€‚å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„å¿…é¡»é‡æ’ä¸ºå­—å…¸åºæœ€å°çš„æ’åˆ—ï¼ˆå³ï¼Œå…¶å…ƒç´ æŒ‰å‡åºæ’åˆ—ï¼‰ã€‚

- ä¾‹å¦‚ï¼Œ`arr = [1,2,3]` çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ `[1,3,2]` ã€‚
- ç±»ä¼¼åœ°ï¼Œ`arr = [2,3,1]` çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ `[3,1,2]` ã€‚
- è€Œ `arr = [3,2,1]` çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ `[1,2,3]` ï¼Œå› ä¸º `[3,2,1]` ä¸å­˜åœ¨ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾å‡º `nums` çš„ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚

å¿…é¡»**[ åŸåœ° ](https://baike.baidu.com/item/åŸåœ°ç®—æ³•)**ä¿®æ”¹ï¼Œåªå…è®¸ä½¿ç”¨é¢å¤–å¸¸æ•°ç©ºé—´ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[1,3,2]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,2,1]
è¾“å‡ºï¼š[1,2,3]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,5]
è¾“å‡ºï¼š[1,5,1]
```

```java
class Solution {
    // ä¸‹ä¸€ä¸ªæ’åˆ—
    public void nextPermutation(int[] nums) {
        int i = nums.length - 2;
        // ä»å€’æ•°ç¬¬äºŒä¸ªæ•°å¼€å§‹å‘å‰éå†ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸æ»¡è¶³é€’å‡é¡ºåºçš„æ•°
        while (i >= 0 && nums[i] >= nums[i + 1]) {
            i--;
        }
        // å¦‚æœæ‰¾åˆ°äº†è¿™æ ·çš„æ•°
        if (i >= 0) {
            int j = nums.length - 1;
            // ä»æœ«å°¾å‘å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºnums[i]çš„æ•°
            while (nums[j] <= nums[i]) {
                j--;
            }
            // äº¤æ¢è¿™ä¸¤ä¸ªæ•°
            swap(nums, i, j);
        }
        // åè½¬ä»i+1å¼€å§‹çš„éƒ¨åˆ†ï¼Œä½¿å…¶å˜ä¸ºé€’å¢é¡ºåº
        reverse(nums, i + 1);
    }

    // åè½¬æ•°ç»„
    private void reverse(int[] nums, int start) {
        int i = start, j = nums.length - 1;
        // ä»startåˆ°æœ«å°¾ä¾æ¬¡äº¤æ¢æ•°å­—
        while (i < j) {
            swap(nums, i, j);
            i++;
            j--;
        }
    }

    // äº¤æ¢æ•°ç»„ä¸­çš„ä¸¤ä¸ªå…ƒç´ 
    private void swap(int[] nums, int i, int j) {
        int temp = nums[i];
        nums[i] = nums[j];
        nums[j] = temp;
    }
}
```

### 287.å¯»æ‰¾é‡å¤æ•°ï¼ˆhot 100ï¼‰ï¼ˆ3.29ï¼‰

ç»™å®šä¸€ä¸ªåŒ…å« `n + 1` ä¸ªæ•´æ•°çš„æ•°ç»„ `nums` ï¼Œå…¶æ•°å­—éƒ½åœ¨ `[1, n]` èŒƒå›´å†…ï¼ˆåŒ…æ‹¬ `1` å’Œ `n`ï¼‰ï¼Œå¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°ã€‚

å‡è®¾ `nums` åªæœ‰ **ä¸€ä¸ªé‡å¤çš„æ•´æ•°** ï¼Œè¿”å› **è¿™ä¸ªé‡å¤çš„æ•°** ã€‚

ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡» **ä¸ä¿®æ”¹** æ•°ç»„ `nums` ä¸”åªç”¨å¸¸é‡çº§ `O(1)` çš„é¢å¤–ç©ºé—´ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,3,4,2,2]
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,1,3,4,2]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 3 :**

```
è¾“å…¥ï¼šnums = [3,3,3,3,3]
è¾“å‡ºï¼š3
```

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œç”¨äºå¯»æ‰¾æ•°ç»„ä¸­çš„é‡å¤æ•°å­—
 */
class Solution {
    /**
     * å¯»æ‰¾é‡å¤æ•°å­—
     * è¯¥æ–¹æ³•ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæŠ€æœ¯ï¼Œç±»ä¼¼äºæ£€æµ‹é“¾è¡¨ä¸­çš„ç¯
     * æ•°ç»„ä¸­çš„é‡å¤æ•°å­—å¯¼è‡´äº†å€¼çš„å¾ªç¯å¼•ç”¨ï¼Œç±»ä¼¼äºé“¾è¡¨ä¸­çš„ç¯å…¥å£
     *
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªé‡å¤çš„æ•°å­—
     * @return è¿”å›æ•°ç»„ä¸­çš„é‡å¤æ•°å­—
     */
    public int findDuplicate(int[] nums) {
        // åˆå§‹åŒ–å¿«æ…¢æŒ‡é’ˆï¼Œä¸¤è€…éƒ½ä»ç´¢å¼•0å¼€å§‹
        int fast = 0, slow = 0;
        // å¿«æ…¢æŒ‡é’ˆä»¥ä¸åŒé€Ÿåº¦ç§»åŠ¨ï¼Œç›´åˆ°å®ƒä»¬ç›¸é‡
        do {
            // å¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥
            fast = nums[nums[fast]];
            // æ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥
            slow = nums[slow];
        } while (fast != slow);
        // æ…¢æŒ‡é’ˆé‡ç½®åˆ°èµ·ç‚¹
        slow = 0;
        // å¿«æ…¢æŒ‡é’ˆå†æ¬¡ä»¥ç›¸åŒé€Ÿåº¦ç§»åŠ¨ï¼Œç›´åˆ°å®ƒä»¬å†æ¬¡ç›¸é‡
        while (fast != slow) {
            // å¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥
            fast = nums[fast];
            // æ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥
            slow = nums[slow];
        }
        // å½“å®ƒä»¬å†æ¬¡ç›¸é‡æ—¶ï¼Œç›¸é‡ç‚¹å³ä¸ºé‡å¤æ•°å­—
        return fast;
    }
}
```

### 11.ç››æ°´æœ€å¤šçš„å®¹å™¨ï¼ˆhot 100ï¼‰ï¼ˆ3.30ï¼‰

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•´æ•°æ•°ç»„ `height` ã€‚æœ‰ `n` æ¡å‚çº¿ï¼Œç¬¬ `i` æ¡çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯ `(i, 0)` å’Œ `(i, height[i])` ã€‚

æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ `x` è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚

è¿”å›å®¹å™¨å¯ä»¥å‚¨å­˜çš„æœ€å¤§æ°´é‡ã€‚

**è¯´æ˜ï¼š**ä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/question_11.jpg)

```
è¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]
è¾“å‡ºï¼š49 
è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º 49ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šheight = [1,1]
è¾“å‡ºï¼š1
```

```java
class Solution {
    /**
     * è®¡ç®—ç»™å®šé«˜åº¦æ•°ç»„ä¸­ï¼Œä¸¤ç‚¹å¯ä»¥å½¢æˆçš„æœ€å¤§å®¹å™¨çš„æ°´é‡
     *
     * @param height é«˜åº¦æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä¸ªç‚¹çš„é«˜åº¦
     * @return æœ€å¤§æ°´é‡
     *
     * æ–¹æ³•é€šè¿‡åŒæŒ‡é’ˆæŠ€æœ¯å¯»æ‰¾æœ€å¤§å®¹å™¨æŒ‡é’ˆåˆ†åˆ«ä»æ•°ç»„çš„ä¸¤ç«¯å¼€å§‹ï¼Œé€æ­¥å‘ä¸­é—´ç§»åŠ¨ï¼Œ
     * åœ¨æ¯ä¸€æ­¥ä¸­è®¡ç®—å½“å‰æŒ‡é’ˆæ‰€æŒ‡å‘çš„ä¸¤ç‚¹å¯ä»¥å½¢æˆçš„å®¹å™¨çš„æ°´é‡ï¼Œå¹¶æ›´æ–°æœ€å¤§æ°´é‡
     * ç§»åŠ¨è§„åˆ™æ˜¯ï¼šå°†è¾ƒçŸ­çš„ä¸€ç«¯å‘å†…ç§»åŠ¨ï¼Œå› ä¸ºå®¹å™¨çš„é«˜åº¦ç”±ä¸¤ç«¯ä¸­è¾ƒçŸ­çš„ä¸€ç«¯å†³å®šï¼Œ
     * ç§»åŠ¨è¾ƒçŸ­çš„ä¸€ç«¯å¯èƒ½ä¼šæ‰¾åˆ°æ›´é«˜çš„è¾¹ï¼Œä»è€Œå¯èƒ½å¢åŠ å®¹å™¨çš„æ°´é‡
     */
    public int maxArea(int[] height) {
        // åˆå§‹åŒ–å·¦å³æŒ‡é’ˆ
        int left = 0, right = height.length - 1;
        // åˆå§‹åŒ–æœ€å¤§é¢ç§¯
        int maxarea = 0;
        // å½“å·¦æŒ‡é’ˆå°äºå³æŒ‡é’ˆæ—¶ï¼Œæ‰§è¡Œå¾ªç¯
        while (left < right) {
            // è®¡ç®—å½“å‰å·¦å³æŒ‡é’ˆå½¢æˆçš„å®¹å™¨çš„é¢ç§¯ï¼Œå¹¶æ›´æ–°æœ€å¤§é¢ç§¯
            maxarea = Math.max(maxarea, Math.min(height[left], height[right]) * (right - left));
            // ç§»åŠ¨è¾ƒçŸ­çš„ä¸€ç«¯çš„æŒ‡é’ˆ
            if (height[left] < height[right]) {
                left++;
            } else {
                right--;
            }
        }
        // è¿”å›æœ€å¤§é¢ç§¯
        return maxarea;
    }
}
```

### 581.æœ€çŸ­è¿ç»­æ— åºå­æ•°ç»„ï¼ˆhot100ï¼‰(3.27)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œä½ éœ€è¦æ‰¾å‡ºä¸€ä¸ª **è¿ç»­å­æ•°ç»„** ï¼Œå¦‚æœå¯¹è¿™ä¸ªå­æ•°ç»„è¿›è¡Œå‡åºæ’åºï¼Œé‚£ä¹ˆæ•´ä¸ªæ•°ç»„éƒ½ä¼šå˜ä¸ºå‡åºæ’åºã€‚

è¯·ä½ æ‰¾å‡ºç¬¦åˆé¢˜æ„çš„ **æœ€çŸ­** å­æ•°ç»„ï¼Œå¹¶è¾“å‡ºå®ƒçš„é•¿åº¦ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [2,6,4,8,10,9,15]
è¾“å‡ºï¼š5
è§£é‡Šï¼šä½ åªéœ€è¦å¯¹ [6, 4, 8, 10, 9] è¿›è¡Œå‡åºæ’åºï¼Œé‚£ä¹ˆæ•´ä¸ªè¡¨éƒ½ä¼šå˜ä¸ºå‡åºæ’åºã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3,4]
è¾“å‡ºï¼š0
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1]
è¾“å‡ºï¼š0
```

è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ˜¯éœ€è¦æ‰¾åˆ°ä¸€ä¸ªå­æ•°ç»„ï¼Œä½¿å¾—æ’åºè¿™ä¸ªå­æ•°ç»„åï¼Œæ•´ä¸ªæ•°ç»„å˜ä¸ºæœ‰åºã€‚

è¿™ä¸ªå­æ•°ç»„çš„èµ·ç‚¹å’Œç»ˆç‚¹éœ€è¦æ»¡è¶³ï¼š

- èµ·ç‚¹æ˜¯ç¬¬ä¸€ä¸ªä¸æ»¡è¶³å‡åºçš„ä½ç½®ã€‚
- ç»ˆç‚¹æ˜¯æœ€åä¸€ä¸ªä¸æ»¡è¶³å‡åºçš„ä½ç½®ã€‚

æ•´ä¸ªæ€è·¯å…¶å®ç”¨çš„è´ªå¿ƒï¼Œè€Œä¸”ç”¨äº†åŒæŒ‡é’ˆçš„æ–¹å¼ã€‚

```java
public class Solution {
    // å¯»æ‰¾æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„çš„æ–¹æ³•
    public int findUnsortedSubarray(int[] nums) {
        // å¤åˆ¶åŸå§‹æ•°ç»„
        int[] temp = Arrays.copyOf(nums, nums.length);
        // å¯¹å¤åˆ¶çš„æ•°ç»„è¿›è¡Œæ’åº
        Arrays.sort(temp);
        // åˆå§‹åŒ–å·¦å³æŒ‡é’ˆ
        int leftPos = 0;
        int rightPos = nums.length - 1;

        // å¾ªç¯ç›´åˆ°æ‰¾åˆ°éœ€è¦è°ƒæ•´çš„å­æ•°ç»„
        while (leftPos <= rightPos && (temp[leftPos] == nums[leftPos] || temp[rightPos] == nums[rightPos])) {
            // ç§»åŠ¨å·¦æŒ‡é’ˆç›´åˆ°æ‰¾åˆ°éœ€è¦è°ƒæ•´çš„ä½ç½®
            if (temp[leftPos] == nums[leftPos]) {
                leftPos++;
            }
            // ç§»åŠ¨å³æŒ‡é’ˆç›´åˆ°æ‰¾åˆ°éœ€è¦è°ƒæ•´çš„ä½ç½®
            if (temp[rightPos] == nums[rightPos]) {
                rightPos--;
            }
        }

        // è¿”å›éœ€è¦è°ƒæ•´çš„å­æ•°ç»„çš„é•¿åº¦
        return rightPos - leftPos + 1 >= 0 ? rightPos - leftPos + 1 : 0;
    }
}
```



# é“¾è¡¨

### 203.ç§»é™¤é“¾è¡¨å…ƒç´ 

```java
// å®šä¹‰ä¸€ä¸ªSolutionç±»
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºç§»é™¤é“¾è¡¨ä¸­æŒ‡å®šå…ƒç´ 
    public ListNode removeElements(ListNode head, int val) {
        // å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œç›´æ¥è¿”å›null
        if(head == null)
            return null;
        // åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œå¹¶å°†å…¶æŒ‡å‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹
        ListNode dummyHead = new ListNode();
        dummyHead.next = head;
        // åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆcuræŒ‡å‘è™šæ‹Ÿå¤´èŠ‚ç‚¹
        ListNode cur = dummyHead;
        // éå†é“¾è¡¨
        while(cur.next != null){
            // å¦‚æœå½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ç­‰äºè¦åˆ é™¤çš„å€¼valï¼Œåˆ™å°†å½“å‰èŠ‚ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸‹ä¸ªèŠ‚ç‚¹ï¼Œç›¸å½“äºåˆ é™¤å½“å‰èŠ‚ç‚¹
            if (cur.next.val == val)
                cur.next = cur.next.next;
            else
                cur = cur.next; // å¦åˆ™ç§»åŠ¨curæŒ‡é’ˆåˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
        }
        // è¿”å›è™šæ‹Ÿå¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå³ä¸ºå¤„ç†åçš„é“¾è¡¨
        return dummyHead.next;
    }
}
```

### 707.è®¾è®¡é“¾è¡¨

```java
class MyLinkedList {
    int size;
    LinkNode head;

    public MyLinkedList() {
        size = 0;
        head = new LinkNode();
    }

    public int get(int index) {
        if (index >= size) {
            return -1;
        }
        LinkNode auxiliary = head;
        for (int i = 0; i <= index; i++) {
            auxiliary = auxiliary.next;
        }
        return auxiliary.val;
    }

    public void addAtHead(int val) {
        LinkNode current = new LinkNode();
        current.val = val;
        current.next = head.next;
        head.next = current;
        size++;
    }

    public void addAtTail(int val) {
        LinkNode current = new LinkNode();
        current.val = val;
        current.next = null;
        LinkNode auxiliary = head;
        while (auxiliary.next != null) {
            auxiliary = auxiliary.next;
        }
        auxiliary.next = current;
        size++;
    }

    public void addAtIndex(int index, int val) {
        if (index > size) {
            return;
        }
        if (index == size) {
            addAtTail(val);
            return;
        }
        LinkNode current = new LinkNode();
        current.val = val;
        LinkNode auxiliary = head;
        for (int i = 0; i < index; i++) {
            auxiliary = auxiliary.next;
        }
        current.next = auxiliary.next;
        auxiliary.next = current;
        size++;
    }

    public void deleteAtIndex(int index) {
        if (index >= size) {
            return;
        }
        LinkNode auxiliary = head;
        for (int i = 0; i < index; i++) {
            auxiliary = auxiliary.next;
        }
        auxiliary.next = auxiliary.next.next;
        size--;
    }
}

class LinkNode {
    int val;
    LinkNode next;
}
```

### 206.åè½¬é“¾è¡¨ï¼ˆhot100ï¼‰ï¼ˆ3.21ï¼‰

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºåè½¬é“¾è¡¨
    public ListNode reverseList(ListNode head) {
        // å®šä¹‰ä¸‰ä¸ªæŒ‡é’ˆå˜é‡
        ListNode temp;
        ListNode pre = null; // preæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹
        ListNode cur = head; // curæŒ‡å‘å½“å‰èŠ‚ç‚¹
        // éå†é“¾è¡¨
        while(cur != null) {
            temp = cur.next; // ä¸´æ—¶ä¿å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            cur.next = pre; // å½“å‰èŠ‚ç‚¹æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹
            pre = cur; // preæŒ‡å‘å½“å‰èŠ‚ç‚¹
            cur = temp; // curæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
        }
        return pre; // è¿”å›åè½¬åçš„é“¾è¡¨å¤´èŠ‚ç‚¹
    }
}
```

### 24.ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹

ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚ä½ å¿…é¡»åœ¨ä¸ä¿®æ”¹èŠ‚ç‚¹å†…éƒ¨çš„å€¼çš„æƒ…å†µä¸‹å®Œæˆæœ¬é¢˜ï¼ˆå³ï¼Œåªèƒ½è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ï¼‰ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode.com/uploads/2020/10/03/swap_ex1.jpg)



```
è¾“å…¥ï¼šhead = [1,2,3,4]
è¾“å‡ºï¼š[2,1,4,3]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šhead = []
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šhead = [1]
è¾“å‡ºï¼š[1]
```

```java
class Solution {
    public ListNode swapPairs(ListNode head) {
        // åˆ›å»ºè¾…åŠ©å¤´èŠ‚ç‚¹ï¼Œç®€åŒ–å¤´èŠ‚ç‚¹å¤„ç†é€»è¾‘
        ListNode auxiliaryHead = new ListNode();
        // åˆå§‹åŒ–æŒ‡é’ˆï¼šleftç”¨äºåè½¬èŠ‚ç‚¹å¯¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œrightä¸ºå½“å‰èŠ‚ç‚¹ï¼Œcurrentç”¨äºæ„å»ºç»“æœé“¾è¡¨ï¼Œtempç”¨äºæš‚å­˜èŠ‚ç‚¹
        ListNode left = null, right = head, current = auxiliaryHead, temp = head;
        int count = 0;
        // è®¡ç®—é“¾è¡¨é•¿åº¦ä»¥ç¡®å®šéœ€è¦äº¤æ¢çš„èŠ‚ç‚¹å¯¹æ•°
        while (temp != null) {
            count++;
            temp = temp.next;
        }
        // æ¯å¯¹èŠ‚ç‚¹è¿›è¡Œäº¤æ¢ï¼Œå…±äº¤æ¢ count/2 å¯¹
        for (int i = 0; i < count / 2; i++) {
            // åè½¬å½“å‰ä¸¤ä¸ªèŠ‚ç‚¹çš„æŒ‡å‘
            for (int j = 0; j < 2; j++) {
                temp = right.next; // æš‚å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé˜²æ­¢æ–­é“¾
                right.next = left; // åè½¬å½“å‰èŠ‚ç‚¹çš„æŒ‡é’ˆ
                left = right;      // leftæŒ‡é’ˆå‰ç§»
                right = temp;      // rightæŒ‡é’ˆåç§»
            }
            // å°†åè½¬åçš„èŠ‚ç‚¹å¯¹è¿æ¥åˆ°ç»“æœé“¾è¡¨
            current.next = left;
            // ç§»åŠ¨currentæŒ‡é’ˆåˆ°ç»“æœé“¾è¡¨çš„æœ«å°¾ï¼Œå‡†å¤‡è¿æ¥ä¸‹ä¸€å¯¹èŠ‚ç‚¹
            current = current.next.next;
        }
        // å¤„ç†å‰©ä½™èŠ‚ç‚¹ï¼ˆå½“é“¾è¡¨é•¿åº¦ä¸ºå¥‡æ•°æ—¶ï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸å¤„ç†ï¼‰
        current.next = right;
        // æ ¹æ®é“¾è¡¨é•¿åº¦è¿”å›ç»“æœï¼šé•¿åº¦ä¸è¶³2ç›´æ¥è¿”å›åŸé“¾è¡¨ï¼Œå¦åˆ™è¿”å›è¾…åŠ©å¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
        return count < 2 ? head : auxiliaryHead.next;
    }
}
```

### 19.åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ï¼ˆhot100ï¼‰

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œæä¾›åˆ é™¤é“¾è¡¨å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹çš„æ–¹æ³•
 */
class Solution {
    /**
     * åˆ é™¤é“¾è¡¨ä¸­çš„å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹
     *
     * @param head é“¾è¡¨çš„å¤´èŠ‚ç‚¹
     * @param n    è¦åˆ é™¤çš„å€’æ•°ä½ç½®
     * @return è¿”å›åˆ é™¤èŠ‚ç‚¹åçš„é“¾è¡¨å¤´èŠ‚ç‚¹
     */
    public ListNode removeNthFromEnd(ListNode head, int n) {
        // åˆ›å»ºè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œç®€åŒ–è¾¹ç•Œæƒ…å†µå¤„ç†
        ListNode dummy = new ListNode();
        dummy.next = head;
        
        // å®šä¹‰å¿«æ…¢æŒ‡é’ˆï¼Œåˆå§‹éƒ½æŒ‡å‘è™šæ‹Ÿå¤´èŠ‚ç‚¹
        ListNode fast = dummy, slow = dummy;
        
        // å¿«æŒ‡é’ˆå…ˆå‘å‰ç§»åŠ¨næ­¥
        for (int i = 0; i < n; i++) {
            fast = fast.next;
        }
        
        // å½“å¿«æŒ‡é’ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆæ°å¥½ä½äºå¾…åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹
        while (fast.next != null) {
            fast = fast.next;
            slow = slow.next;
        }

        // è·³è¿‡å¾…åˆ é™¤èŠ‚ç‚¹
        slow.next = slow.next.next;
        
        // è¿”å›æ–°çš„é“¾è¡¨å¤´èŠ‚ç‚¹
        return dummy.next;
    }
}

```

### 160.ç›¸äº¤é“¾è¡¨ï¼ˆhot100ï¼‰

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œç”¨äºå¯»æ‰¾ä¸¤ä¸ªé“¾è¡¨çš„äº¤ç‚¹
 */
public class Solution {
    /**
     * è·å–ä¸¤ä¸ªé“¾è¡¨çš„äº¤ç‚¹èŠ‚ç‚¹
     * 
     * @param headA ç¬¬ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹
     * @param headB ç¬¬äºŒä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹
     * @return è¿”å›ä¸¤ä¸ªé“¾è¡¨çš„äº¤ç‚¹èŠ‚ç‚¹ï¼Œå¦‚æœä¸å­˜åœ¨äº¤ç‚¹åˆ™è¿”å›null
     */
    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {
        // è¾…åŠ©èŠ‚ç‚¹ï¼Œç”¨äºéå†é“¾è¡¨A
        ListNode auxA = headA;
        // è¾…åŠ©èŠ‚ç‚¹ï¼Œç”¨äºéå†é“¾è¡¨B
        ListNode auxB = headB;
        // é“¾è¡¨Açš„é•¿åº¦
        int lengthA = 1;
        // é“¾è¡¨Bçš„é•¿åº¦
        int lengthB = 1;
        
        // éå†é“¾è¡¨Aï¼Œè®¡ç®—å…¶é•¿åº¦
        while (auxA.next != null) {
            auxA = auxA.next;
            lengthA++;
        }
        // éå†é“¾è¡¨Bï¼Œè®¡ç®—å…¶é•¿åº¦
        while (auxB.next != null) {
            auxB = auxB.next;
            lengthB++;
        }
        
        // å¦‚æœé“¾è¡¨Aæ¯”é“¾è¡¨Bé•¿ï¼Œäº¤æ¢ä¸¤ä¸ªé“¾è¡¨çš„ä½ç½®ï¼Œç¡®ä¿é“¾è¡¨Bæ˜¯è¾ƒé•¿çš„é‚£ä¸ª
        if (lengthA > lengthB) {
            ListNode tempNode = headB;
            headB = headA;
            headA = tempNode;
            int tempLength = lengthB;
            lengthB = lengthA;
            lengthA = tempLength;
        }
        
        // è®©è¾ƒé•¿çš„é“¾è¡¨Bå…ˆèµ°å·®å€¼æ­¥æ•°ï¼Œè¿™æ ·å½“ä¸¤ä¸ªé“¾è¡¨éƒ½èµ°åˆ°æœ«å°¾æ—¶ï¼Œå®ƒä»¬ä¼šåŒæ—¶åˆ°è¾¾äº¤ç‚¹èŠ‚ç‚¹
        for (int i = 0; i < lengthB - lengthA; i++) {
            headB = headB.next;
        }
        
        // åŒæ—¶éå†ä¸¤ä¸ªé“¾è¡¨ï¼Œç›´åˆ°æ‰¾åˆ°äº¤ç‚¹èŠ‚ç‚¹æˆ–ä¸¤ä¸ªé“¾è¡¨éƒ½éå†ç»“æŸ
        while (headA != null && headB != null) {
            if (headA == headB) {
                // æ‰¾åˆ°äº¤ç‚¹èŠ‚ç‚¹
                return headA;
            }
            headA = headA.next;
            headB = headB.next;
        }
        
        // å¦‚æœæ²¡æœ‰äº¤ç‚¹ï¼Œè¿”å›null
        return null;
    }
}

```

### 141.ç¯å½¢é“¾è¡¨ï¼ˆhot100ï¼‰

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œç”¨äºæ£€æµ‹é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨å¾ªç¯
 */
public class Solution {
    /**
     * æ£€æµ‹ç»™å®šçš„é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨å¾ªç¯
     * 
     * é€šè¿‡å¿«æ…¢æŒ‡é’ˆçš„æ–¹æ³•æ¥åˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨å¾ªç¯
     * å¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥
     * å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨å¾ªç¯ï¼Œå¿«æŒ‡é’ˆæœ€ç»ˆä¼šè¿½ä¸Šæ…¢æŒ‡é’ˆ
     * å¦‚æœé“¾è¡¨ä¸­ä¸å­˜åœ¨å¾ªç¯ï¼Œå¿«æŒ‡é’ˆä¼šé¦–å…ˆåˆ°è¾¾é“¾è¡¨çš„æœ«å°¾
     * 
     * @param head é“¾è¡¨çš„å¤´èŠ‚ç‚¹
     * @return å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨å¾ªç¯ï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    public boolean hasCycle(ListNode head) {
        // åˆå§‹åŒ–å¿«æ…¢æŒ‡é’ˆ
        ListNode fast = head;
        ListNode slow = head;
        
        // éå†é“¾è¡¨ï¼Œç›´åˆ°å¿«æŒ‡é’ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾æˆ–ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯æœ«å°¾
        while (fast != null && fast.next != null) {
            // å¿«æŒ‡é’ˆç§»åŠ¨ä¸¤æ­¥
            fast = fast.next.next;
            // æ…¢æŒ‡é’ˆç§»åŠ¨ä¸€æ­¥
            slow = slow.next;
            // å¦‚æœå¿«æ…¢æŒ‡é’ˆç›¸é‡ï¼Œè¯´æ˜é“¾è¡¨ä¸­å­˜åœ¨å¾ªç¯
            if (fast == slow) {
                return true;
            }
        }
        // å¦‚æœå¿«æŒ‡é’ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾ï¼Œè¯´æ˜é“¾è¡¨ä¸­ä¸å­˜åœ¨å¾ªç¯
        return false;
    }
}

```

### 142.ç¯å½¢é“¾è¡¨IIï¼ˆhot100ï¼‰

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œç”¨äºæ£€æµ‹é“¾è¡¨ä¸­çš„ç¯
 */
public class Solution {
    /**
     * æ£€æµ‹é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ï¼Œå¹¶è¿”å›ç¯çš„èµ·å§‹èŠ‚ç‚¹
     * 
     * @param head é“¾è¡¨çš„å¤´èŠ‚ç‚¹
     * @return ç¯çš„èµ·å§‹èŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰ç¯åˆ™è¿”å›null
     */
    public ListNode detectCycle(ListNode head) {
        // åˆå§‹åŒ–å¿«æ…¢æŒ‡é’ˆ
        ListNode fast = head;
        ListNode slow = head;
        
        // ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆéå†é“¾è¡¨
        while (fast != null && fast.next != null) {
            // å¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥
            fast = fast.next.next;
            slow = slow.next;
            
            // å¦‚æœå¿«æ…¢æŒ‡é’ˆç›¸é‡ï¼Œè¯´æ˜å­˜åœ¨ç¯
            if (fast == slow) {
                // å°†æ…¢æŒ‡é’ˆé‡æ–°æŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œå¿«æŒ‡é’ˆç»§ç»­å‘å‰ç§»åŠ¨
                slow = head;
                // å†æ¬¡ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆä»¥ç›¸åŒé€Ÿåº¦å‰è¿›ï¼Œç›´åˆ°å®ƒä»¬å†æ¬¡ç›¸é‡
                while (slow != fast) {
                    slow = slow.next;
                    fast = fast.next;
                }
                // è¿”å›ç›¸é‡ç‚¹ï¼Œå³ç¯çš„èµ·å§‹èŠ‚ç‚¹
                return slow;
            }
        }
        // å¦‚æœå¿«æŒ‡é’ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾ï¼Œè¯´æ˜é“¾è¡¨æ— ç¯
        return null;
    }
}

```

### 234.å›æ–‡é“¾è¡¨ï¼ˆhot100ï¼‰

```java
class Solution {
    // åˆ¤æ–­ç»™å®šçš„é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨
    public boolean isPalindrome(ListNode head) {
        // ä½¿ç”¨æ ˆæ¥å­˜å‚¨é“¾è¡¨å‰åŠéƒ¨åˆ†çš„èŠ‚ç‚¹å€¼
        Deque<Integer> stack = new LinkedList<>();
        // ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹
        ListNode fast = head, slow = head;
        while (fast != null && fast.next != null) {
            stack.push(slow.val);
            slow = slow.next;
            fast = fast.next.next;
        }
        // é“¾è¡¨èŠ‚ç‚¹ä¸ªæ•°ä¸ºå¥‡æ•°æ—¶ï¼Œè·³è¿‡ä¸­é—´èŠ‚ç‚¹
        if (fast != null) {
            slow = slow.next;
        }
        // ä»ä¸­ç‚¹å¼€å§‹ï¼Œä¸æ ˆä¸­çš„å€¼é€ä¸ªæ¯”è¾ƒï¼Œåˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡
        while (slow != null) {
            if (slow.val != stack.pop()) {
                return false;
            }
            slow = slow.next;
        }
        return true;
    }
}
```

### 21.åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ï¼ˆhot100ï¼‰

å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ **å‡åº** é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚

**ç¤ºä¾‹ 1ï¼š**

<img src="https://assets.leetcode.com/uploads/2020/10/03/merge_ex1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šl1 = [1,2,4], l2 = [1,3,4]
è¾“å‡ºï¼š[1,1,2,3,4,4]
```

```java
class Solution {
    // åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨
    public ListNode mergeTwoLists(ListNode list1, ListNode list2) {
        // åˆ›å»ºä¸€ä¸ªè¾…åŠ©å¤´èŠ‚ç‚¹
        ListNode auxiliaryHead = new ListNode();
        // åˆ›å»ºä¸€ä¸ªå½“å‰èŠ‚ç‚¹ï¼ŒæŒ‡å‘è¾…åŠ©å¤´èŠ‚ç‚¹
        ListNode current = auxiliaryHead;
        // å½“list1å’Œlist2éƒ½ä¸ä¸ºç©ºæ—¶ï¼Œå¾ªç¯éå†
        while (list1 != null && list2 != null) {
            // å¦‚æœlist1çš„å€¼å°äºç­‰äºlist2çš„å€¼ï¼Œå°†list1èŠ‚ç‚¹è¿æ¥åˆ°å½“å‰èŠ‚ç‚¹åé¢ï¼Œå¹¶å°†list1å’Œå½“å‰èŠ‚ç‚¹å‘åç§»åŠ¨ä¸€ä½
            if (list1.val <= list2.val) {
                current.next = list1;
                list1 = list1.next;
                current = current.next;
            // å¦åˆ™ï¼Œå°†list2èŠ‚ç‚¹è¿æ¥åˆ°å½“å‰èŠ‚ç‚¹åé¢ï¼Œå¹¶å°†list2å’Œå½“å‰èŠ‚ç‚¹å‘åç§»åŠ¨ä¸€ä½
            } else {
                current.next = list2;
                list2 = list2.next;
                current = current.next;
            }
        }

        // å¦‚æœlist1ä¸ºç©ºï¼Œå°†list2è¿æ¥åˆ°å½“å‰èŠ‚ç‚¹åé¢
        if (list1 == null) {
            current.next = list2;
        // å¦åˆ™ï¼Œå°†list1è¿æ¥åˆ°å½“å‰èŠ‚ç‚¹åé¢
        } else {
            current.next = list1;
        }

        // è¿”å›è¾…åŠ©å¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå³åˆå¹¶åçš„é“¾è¡¨
        return auxiliaryHead.next;
    }
}
```

### 2.ä¸¤æ•°ç›¸åŠ ï¼ˆhot100ï¼‰(3.26)

ç»™ä½ ä¸¤ä¸ª **éç©º** çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§ **é€†åº** çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ **ä¸€ä½** æ•°å­—ã€‚

è¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚

ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚

**ç¤ºä¾‹ 1ï¼š**

<img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2021/01/02/addtwonumber1.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šl1 = [2,4,3], l2 = [5,6,4]
è¾“å‡ºï¼š[7,0,8]
è§£é‡Šï¼š342 + 465 = 807.
```

**åˆè§ï¼Œç¬¬ä¸€ååº”æ¯”è¾ƒç¬¨çš„æ–¹æ³•ï¼Œä¸æ¨è**

```java
/**
 * Solutionç±»ç”¨äºè§£å†³ä¸¤ä¸ªé“¾è¡¨è¡¨ç¤ºçš„æ•°å­—ç›¸åŠ çš„é—®é¢˜
 */
class Solution {
    /**
     * å°†ä¸¤ä¸ªè¡¨ç¤ºæ•°å­—çš„é“¾è¡¨ç›¸åŠ 
     *
     * @param l1 ç¬¬ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹
     * @param l2 ç¬¬äºŒä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹
     * @return è¿”å›ç›¸åŠ åé“¾è¡¨çš„å¤´èŠ‚ç‚¹
     */
    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {
        // è¿›ä½å’Œå½“å‰ä½ä¹‹å’Œ
        int carry = 0, sum = 0;
        // è¾…åŠ©å¤´èŠ‚ç‚¹ï¼Œæ–¹ä¾¿å¤„ç†ç»“æœé“¾è¡¨
        ListNode auxilairyHead = new ListNode();
        // å½“å‰æ“ä½œèŠ‚ç‚¹
        ListNode current = auxilairyHead;
        // l1å’Œl2çš„æ¸¸æ ‡èŠ‚ç‚¹
        ListNode temp1 = l1, temp2 = l2;

        // æ— é™å¾ªç¯ï¼Œç›´åˆ°æ»¡è¶³ç»ˆæ­¢æ¡ä»¶
        while (true) {
            // è®¡ç®—å½“å‰ä½çš„å’ŒåŠè¿›ä½
            sum = (temp1 == null ? 0 : temp1.val) + (temp2 == null ? 0 : temp2.val) + carry;
            carry = sum / 10;
            sum = sum % 10;
            // å¦‚æœä¸¤ä¸ªé“¾è¡¨éƒ½éå†å®Œä¸”æ²¡æœ‰è¿›ä½ï¼Œç»ˆæ­¢å¾ªç¯
            if (temp1 == null && temp2 == null && sum == 0 && carry == 0) {
                break;
            }
            // åˆ›å»ºæ–°èŠ‚ç‚¹å¹¶é“¾æ¥åˆ°ç»“æœé“¾è¡¨
            current.next = new ListNode(sum);
            current = current.next;
            // ç§»åŠ¨é“¾è¡¨æŒ‡é’ˆï¼Œå¦‚æœé“¾è¡¨å·²ç»éå†å®Œï¼Œåˆ™ä¿æŒä¸ºnull
            temp1 = (temp1 == null ? null : temp1.next);
            temp2 = (temp2 == null ? null : temp2.next);
        }
        // è¿”å›ç»“æœé“¾è¡¨çš„å¤´èŠ‚ç‚¹
        return auxilairyHead.next;
    }
}


```



### 138.éšæœºé“¾è¡¨çš„å¤åˆ¶ï¼ˆhot100ï¼‰ï¼ˆ4.2ï¼‰

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªé¢å¤–å¢åŠ çš„éšæœºæŒ‡é’ˆ `random` ï¼Œè¯¥æŒ‡é’ˆå¯ä»¥æŒ‡å‘é“¾è¡¨ä¸­çš„ä»»ä½•èŠ‚ç‚¹æˆ–ç©ºèŠ‚ç‚¹ã€‚

æ„é€ è¿™ä¸ªé“¾è¡¨çš„ **æ·±æ‹·è´**ã€‚ æ·±æ‹·è´åº”è¯¥æ­£å¥½ç”± `n` ä¸ª **å…¨æ–°** èŠ‚ç‚¹ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªæ–°èŠ‚ç‚¹çš„å€¼éƒ½è®¾ä¸ºå…¶å¯¹åº”çš„åŸèŠ‚ç‚¹çš„å€¼ã€‚æ–°èŠ‚ç‚¹çš„ `next` æŒ‡é’ˆå’Œ `random` æŒ‡é’ˆä¹Ÿéƒ½åº”æŒ‡å‘å¤åˆ¶é“¾è¡¨ä¸­çš„æ–°èŠ‚ç‚¹ï¼Œå¹¶ä½¿åŸé“¾è¡¨å’Œå¤åˆ¶é“¾è¡¨ä¸­çš„è¿™äº›æŒ‡é’ˆèƒ½å¤Ÿè¡¨ç¤ºç›¸åŒçš„é“¾è¡¨çŠ¶æ€ã€‚**å¤åˆ¶é“¾è¡¨ä¸­çš„æŒ‡é’ˆéƒ½ä¸åº”æŒ‡å‘åŸé“¾è¡¨ä¸­çš„èŠ‚ç‚¹** ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœåŸé“¾è¡¨ä¸­æœ‰ `X` å’Œ `Y` ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­ `X.random --> Y` ã€‚é‚£ä¹ˆåœ¨å¤åˆ¶é“¾è¡¨ä¸­å¯¹åº”çš„ä¸¤ä¸ªèŠ‚ç‚¹ `x` å’Œ `y` ï¼ŒåŒæ ·æœ‰ `x.random --> y` ã€‚

è¿”å›å¤åˆ¶é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚

ç”¨ä¸€ä¸ªç”± `n` ä¸ªèŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨æ¥è¡¨ç¤ºè¾“å…¥/è¾“å‡ºä¸­çš„é“¾è¡¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸€ä¸ª `[val, random_index]` è¡¨ç¤ºï¼š

- `val`ï¼šä¸€ä¸ªè¡¨ç¤º `Node.val` çš„æ•´æ•°ã€‚
- `random_index`ï¼šéšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ç´¢å¼•ï¼ˆèŒƒå›´ä» `0` åˆ° `n-1`ï¼‰ï¼›å¦‚æœä¸æŒ‡å‘ä»»ä½•èŠ‚ç‚¹ï¼Œåˆ™ä¸º `null` ã€‚

ä½ çš„ä»£ç  **åª** æ¥å—åŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ä½œä¸ºä¼ å…¥å‚æ•°ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/01/09/e1.png)

```
è¾“å…¥ï¼šhead = [[7,null],[13,0],[11,4],[10,2],[1,0]]
è¾“å‡ºï¼š[[7,null],[13,0],[11,4],[10,2],[1,0]]
```

**ç¤ºä¾‹ 2ï¼š**

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/01/09/e2.png)

```
è¾“å…¥ï¼šhead = [[1,1],[2,1]]
è¾“å‡ºï¼š[[1,1],[2,1]]
```

**ç¤ºä¾‹ 3ï¼š**

**![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/01/09/e3.png)**

```
è¾“å…¥ï¼šhead = [[3,null],[3,0],[3,null]]
è¾“å‡ºï¼š[[3,null],[3,0],[3,null]]
```

```java
class Solution {
    /**
     * å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨
     * 
     * @param head åŸå§‹é“¾è¡¨çš„å¤´èŠ‚ç‚¹
     * @return å¤åˆ¶é“¾è¡¨çš„å¤´èŠ‚ç‚¹
     */
    public Node copyRandomList(Node head) {
        // è¾…åŠ©å“ˆå¸Œè¡¨ï¼Œç”¨äºå­˜å‚¨åŸå§‹èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹ä¹‹é—´çš„æ˜ å°„å…³ç³»
        HashMap<Node, Node> auxiliaryMap = new HashMap<Node, Node>();
        // åˆ›å»ºä¸€ä¸ªå“‘èŠ‚ç‚¹ï¼Œä½œä¸ºå¤åˆ¶é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œä¾¿äºå¤„ç†é“¾è¡¨æ“ä½œ
        Node dummyHead = new Node(0);
        // è¾…åŠ©èŠ‚ç‚¹ï¼Œç”¨äºæ„å»ºå¤åˆ¶é“¾è¡¨
        Node auxiliaryNode = dummyHead;
        // å½“å‰éå†çš„åŸå§‹é“¾è¡¨èŠ‚ç‚¹
        Node currentNode = head;
        // ç¬¬ä¸€æ¬¡éå†ï¼Œåˆ›å»ºåŸå§‹èŠ‚ç‚¹åˆ°æ–°èŠ‚ç‚¹çš„æ˜ å°„
        while (currentNode != null) {
            // å°†å½“å‰èŠ‚ç‚¹æ˜ å°„åˆ°ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹
            auxiliaryMap.put(currentNode, new Node(currentNode.val));
            // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªåŸå§‹èŠ‚ç‚¹
            currentNode = currentNode.next;
        }
        // é‡æ–°åˆå§‹åŒ–å½“å‰èŠ‚ç‚¹ä¸ºå¤´èŠ‚ç‚¹ï¼Œå‡†å¤‡ç¬¬äºŒæ¬¡éå†
        currentNode = head;
        // è¾…åŠ©èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹åŒæ­¥éå†åŸå§‹é“¾è¡¨å’Œå¤åˆ¶é“¾è¡¨
        while (currentNode != null) {
            // å°†è¾…åŠ©èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘å½“å‰èŠ‚ç‚¹åœ¨å“ˆå¸Œè¡¨ä¸­å¯¹åº”çš„æ–°èŠ‚ç‚¹
            auxiliaryNode.next = auxiliaryMap.get(currentNode);
            // è®¾ç½®å¤åˆ¶é“¾è¡¨ä¸­èŠ‚ç‚¹çš„randomæŒ‡é’ˆ
            auxiliaryNode.next.random = auxiliaryMap.get(currentNode.random);
            // è¾…åŠ©èŠ‚ç‚¹ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            auxiliaryNode = auxiliaryNode.next;
            // åŸå§‹é“¾è¡¨çš„å½“å‰èŠ‚ç‚¹ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            currentNode = currentNode.next;
        }

        // è¿”å›å¤åˆ¶é“¾è¡¨çš„å¤´èŠ‚ç‚¹
        return dummyHead.next;
    }
}

```

### 148.æ’åºé“¾è¡¨(hot100)ï¼ˆ4.15ï¼‰

ç»™ä½ é“¾è¡¨çš„å¤´ç»“ç‚¹ `head` ï¼Œè¯·å°†å…¶æŒ‰ **å‡åº** æ’åˆ—å¹¶è¿”å› **æ’åºåçš„é“¾è¡¨** ã€‚

**ç¤ºä¾‹ 1ï¼š**

<img src="https://assets.leetcode.com/uploads/2020/09/14/sort_list_1.jpg" alt="img" style="zoom:50%;" />

```
è¾“å…¥ï¼šhead = [4,2,1,3]
è¾“å‡ºï¼š[1,2,3,4]
```

**ç¤ºä¾‹ 2ï¼š**

<img src="https://assets.leetcode.com/uploads/2020/09/14/sort_list_2.jpg" alt="img" style="zoom:50%;" />

```
è¾“å…¥ï¼šhead = [-1,5,3,4,0]
è¾“å‡ºï¼š[-1,0,3,4,5]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šhead = []
è¾“å‡ºï¼š[]
```

```java
class Solution {
    /**
     * ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰å¯¹é“¾è¡¨è¿›è¡Œæ’åº
     * 
     * @param head éœ€è¦æ’åºçš„é“¾è¡¨å¤´èŠ‚ç‚¹
     * @return æ’åºåçš„é“¾è¡¨å¤´èŠ‚ç‚¹
     */
    public ListNode sortList(ListNode head) {
        // å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›
        if (head == null) {
            return head;
        }
        // åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œç”¨äºæ„å»ºæ’åºåçš„é“¾è¡¨
        ListNode dummyHead = new ListNode();
        // è¾…åŠ©èŠ‚ç‚¹ç”¨äºéå†å¹¶è¿æ¥æ’åºåçš„èŠ‚ç‚¹
        ListNode auxiliaryNode = dummyHead;

        // ä½¿ç”¨æœ€å°å †æ¥å®ç°å †æ’åºï¼Œè¿™é‡Œä½¿ç”¨PriorityQueueæ¥å®ç°æœ€å°å †
        PriorityQueue<Integer> minHeap = new PriorityQueue<>();
        // éå†é“¾è¡¨ï¼Œå°†æ‰€æœ‰èŠ‚ç‚¹çš„å€¼æ·»åŠ åˆ°æœ€å°å †ä¸­
        while (head != null) {
            minHeap.add(head.val);
            head = head.next;
        }

        // ä»æœ€å°å †ä¸­ä¸æ–­å–å‡ºæœ€å°å€¼ï¼Œæ„å»ºæ’åºåçš„é“¾è¡¨
        while (!minHeap.isEmpty()) {
            // ä»æœ€å°å †ä¸­å–å‡ºæœ€å°å€¼ï¼Œåˆ›å»ºæ–°çš„èŠ‚ç‚¹
            auxiliaryNode.next = new ListNode(minHeap.poll());
            // ç§»åŠ¨è¾…åŠ©èŠ‚ç‚¹ï¼Œç”¨äºè¿æ¥ä¸‹ä¸€ä¸ªæ’åºåçš„èŠ‚ç‚¹
            auxiliaryNode = auxiliaryNode.next;
        }

        // è¿”å›æ’åºåé“¾è¡¨çš„å¤´èŠ‚ç‚¹
        return dummyHead.next;
    }
}

```

### 146. LRUç¼“å­˜ï¼ˆhot100ï¼‰ï¼ˆ3.20ï¼‰

è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ»¡è¶³ [LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜](https://baike.baidu.com/item/LRU) çº¦æŸçš„æ•°æ®ç»“æ„ã€‚

å®ç° `LRUCache` ç±»ï¼š

- `LRUCache(int capacity)` ä»¥ **æ­£æ•´æ•°** ä½œä¸ºå®¹é‡ `capacity` åˆå§‹åŒ– LRU ç¼“å­˜
- `int get(int key)` å¦‚æœå…³é”®å­— `key` å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› `-1` ã€‚
- `void put(int key, int value)` å¦‚æœå…³é”®å­— `key` å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ `value` ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘ç¼“å­˜ä¸­æ’å…¥è¯¥ç»„ `key-value` ã€‚å¦‚æœæ’å…¥æ“ä½œå¯¼è‡´å…³é”®å­—æ•°é‡è¶…è¿‡ `capacity` ï¼Œåˆ™åº”è¯¥ **é€å‡º** æœ€ä¹…æœªä½¿ç”¨çš„å…³é”®å­—ã€‚

å‡½æ•° `get` å’Œ `put` å¿…é¡»ä»¥ `O(1)` çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥
["LRUCache", "put", "put", "get", "put", "get", "put", "get", "get", "get"]
[[2], [1, 1], [2, 2], [1], [3, 3], [2], [4, 4], [1], [3], [4]]
è¾“å‡º
[null, null, null, 1, null, -1, null, -1, 3, 4]

è§£é‡Š
LRUCache lRUCache = new LRUCache(2);
lRUCache.put(1, 1); // ç¼“å­˜æ˜¯ {1=1}
lRUCache.put(2, 2); // ç¼“å­˜æ˜¯ {1=1, 2=2}
lRUCache.get(1);    // è¿”å› 1
lRUCache.put(3, 3); // è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 2 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {1=1, 3=3}
lRUCache.get(2);    // è¿”å› -1 (æœªæ‰¾åˆ°)
lRUCache.put(4, 4); // è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 1 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {4=4, 3=3}
lRUCache.get(1);    // è¿”å› -1 (æœªæ‰¾åˆ°)
lRUCache.get(3);    // è¿”å› 3
lRUCache.get(4);    // è¿”å› 4
```

```java
/**
 * å®ç°ä¸€ä¸ªæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼‰ç¼“å­˜
 */
class LRUCache {
    // ç¼“å­˜å®¹é‡
    int capacity;
    // å­˜å‚¨é”®å€¼å¯¹çš„å“ˆå¸Œæ˜ å°„ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾
    HashMap<Integer, Integer> Lru;
    // å­˜å‚¨é”®çš„é“¾è¡¨ï¼Œç”¨äºå¿«é€Ÿç§»åŠ¨æœ€è¿‘ä½¿ç”¨çš„é”®åˆ°æœ«å°¾
    LinkedHashSet<Integer> LruOrder;

    /**
     * åˆå§‹åŒ–LRUç¼“å­˜
     * 
     * @param capacity ç¼“å­˜çš„æœ€å¤§å®¹é‡
     */
    public LRUCache(int capacity) {
        this.capacity = capacity;
        Lru = new HashMap<>();
        LruOrder = new LinkedHashSet<>();
    }

    /**
     * è·å–ç¼“å­˜ä¸­çš„å€¼
     * 
     * @param key é”®
     * @return å¯¹åº”é”®çš„å€¼ï¼Œå¦‚æœé”®ä¸å­˜åœ¨è¿”å›-1
     */
    public int get(int key) {
        // å¦‚æœé”®å­˜åœ¨ï¼Œæ›´æ–°é”®çš„é¡ºåºï¼Œå¹¶è¿”å›å¯¹åº”çš„å€¼
        if (Lru.containsKey(key)) {
            LruOrder.remove(key);
            LruOrder.add(key);
            return Lru.get(key);
        }
        // å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¿”å›-1
        return -1;
    }

    /**
     * å°†é”®å€¼å¯¹æ”¾å…¥ç¼“å­˜ä¸­
     * 
     * @param key   é”®
     * @param value å€¼
     */
    public void put(int key, int value) {
        // å¦‚æœç¼“å­˜æœªæ»¡ä¸”é”®ä¸å­˜åœ¨ï¼Œç›´æ¥æ·»åŠ é”®å€¼å¯¹
        if (Lru.size() < capacity && !Lru.containsKey(key)) {
            LruOrder.add(key);
            Lru.put(key, value);
        // å¦‚æœç¼“å­˜æœªæ»¡ä¸”é”®å·²å­˜åœ¨ï¼Œæ›´æ–°é”®å€¼å¯¹å’Œé¡ºåº
        } else if (Lru.size() < capacity && Lru.containsKey(key)) {
            LruOrder.remove(key);
            LruOrder.add(key);
            Lru.put(key, value);
        // å¦‚æœç¼“å­˜å·²æ»¡ä¸”é”®å·²å­˜åœ¨ï¼Œæ›´æ–°é”®å€¼å¯¹å’Œé¡ºåº
        } else if (capacity == Lru.size() && Lru.containsKey(key)) {
            LruOrder.remove(key);
            LruOrder.add(key);
            Lru.put(key, value);
        // å¦‚æœç¼“å­˜å·²æ»¡ä¸”é”®ä¸å­˜åœ¨ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„å…ƒç´ ï¼Œå¹¶æ·»åŠ æ–°çš„é”®å€¼å¯¹
        } else {
            int LRUElements = LruOrder.iterator().next();
            LruOrder.remove(LRUElements);
            Lru.remove(LRUElements);
            Lru.put(key, value);
            LruOrder.add(key);
        }
    }
}
```

### 460.LFUï¼ˆäº†è§£å³å¯ï¼Œè¿™ä¸ªæ¯”LRUéš¾å¤šäº†ï¼‰

è¯·ä½ ä¸º [æœ€ä¸ç»å¸¸ä½¿ç”¨ï¼ˆLFUï¼‰](https://baike.baidu.com/item/%E7%BC%93%E5%AD%98%E7%AE%97%E6%B3%95)ç¼“å­˜ç®—æ³•è®¾è®¡å¹¶å®ç°æ•°æ®ç»“æ„ã€‚

å®ç° `LFUCache` ç±»ï¼š

- `LFUCache(int capacity)` - ç”¨æ•°æ®ç»“æ„çš„å®¹é‡ `capacity` åˆå§‹åŒ–å¯¹è±¡
- `int get(int key)` - å¦‚æœé”® `key` å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è·å–é”®çš„å€¼ï¼Œå¦åˆ™è¿”å› `-1` ã€‚
- `void put(int key, int value)` - å¦‚æœé”® `key` å·²å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶å€¼ï¼›å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¯·æ’å…¥é”®å€¼å¯¹ã€‚å½“ç¼“å­˜è¾¾åˆ°å…¶å®¹é‡ `capacity` æ—¶ï¼Œåˆ™åº”è¯¥åœ¨æ’å…¥æ–°é¡¹ä¹‹å‰ï¼Œç§»é™¤æœ€ä¸ç»å¸¸ä½¿ç”¨çš„é¡¹ã€‚åœ¨æ­¤é—®é¢˜ä¸­ï¼Œå½“å­˜åœ¨å¹³å±€ï¼ˆå³ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªé”®å…·æœ‰ç›¸åŒä½¿ç”¨é¢‘ç‡ï¼‰æ—¶ï¼Œåº”è¯¥å»é™¤ **æœ€ä¹…æœªä½¿ç”¨** çš„é”®ã€‚

ä¸ºäº†ç¡®å®šæœ€ä¸å¸¸ä½¿ç”¨çš„é”®ï¼Œå¯ä»¥ä¸ºç¼“å­˜ä¸­çš„æ¯ä¸ªé”®ç»´æŠ¤ä¸€ä¸ª **ä½¿ç”¨è®¡æ•°å™¨** ã€‚ä½¿ç”¨è®¡æ•°æœ€å°çš„é”®æ˜¯æœ€ä¹…æœªä½¿ç”¨çš„é”®ã€‚

å½“ä¸€ä¸ªé”®é¦–æ¬¡æ’å…¥åˆ°ç¼“å­˜ä¸­æ—¶ï¼Œå®ƒçš„ä½¿ç”¨è®¡æ•°å™¨è¢«è®¾ç½®ä¸º `1` (ç”±äº put æ“ä½œ)ã€‚å¯¹ç¼“å­˜ä¸­çš„é”®æ‰§è¡Œ `get` æˆ– `put` æ“ä½œï¼Œä½¿ç”¨è®¡æ•°å™¨çš„å€¼å°†ä¼šé€’å¢ã€‚

å‡½æ•° `get` å’Œ `put` å¿…é¡»ä»¥ `O(1)` çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼š
["LFUCache", "put", "put", "get", "put", "get", "get", "put", "get", "get", "get"]
[[2], [1, 1], [2, 2], [1], [3, 3], [2], [3], [4, 4], [1], [3], [4]]
è¾“å‡ºï¼š
[null, null, null, 1, null, -1, 3, null, -1, 3, 4]

è§£é‡Šï¼š
// cnt(x) = é”® x çš„ä½¿ç”¨è®¡æ•°
// cache=[] å°†æ˜¾ç¤ºæœ€åä¸€æ¬¡ä½¿ç”¨çš„é¡ºåºï¼ˆæœ€å·¦è¾¹çš„å…ƒç´ æ˜¯æœ€è¿‘çš„ï¼‰
LFUCache lfu = new LFUCache(2);
lfu.put(1, 1);   // cache=[1,_], cnt(1)=1
lfu.put(2, 2);   // cache=[2,1], cnt(2)=1, cnt(1)=1
lfu.get(1);      // è¿”å› 1
                 // cache=[1,2], cnt(2)=1, cnt(1)=2
lfu.put(3, 3);   // å»é™¤é”® 2 ï¼Œå› ä¸º cnt(2)=1 ï¼Œä½¿ç”¨è®¡æ•°æœ€å°
                 // cache=[3,1], cnt(3)=1, cnt(1)=2
lfu.get(2);      // è¿”å› -1ï¼ˆæœªæ‰¾åˆ°ï¼‰
lfu.get(3);      // è¿”å› 3
                 // cache=[3,1], cnt(3)=2, cnt(1)=2
lfu.put(4, 4);   // å»é™¤é”® 1 ï¼Œ1 å’Œ 3 çš„ cnt ç›¸åŒï¼Œä½† 1 æœ€ä¹…æœªä½¿ç”¨
                 // cache=[4,3], cnt(4)=1, cnt(3)=2
lfu.get(1);      // è¿”å› -1ï¼ˆæœªæ‰¾åˆ°ï¼‰
lfu.get(3);      // è¿”å› 3
                 // cache=[3,4], cnt(4)=1, cnt(3)=3
lfu.get(4);      // è¿”å› 4
                 // cache=[3,4], cnt(4)=2, cnt(3)=3
```

**æç¤ºï¼š**

- `1 <= capacity <= 104`
- `0 <= key <= 105`
- `0 <= value <= 109`
- æœ€å¤šè°ƒç”¨ `2 * 105` æ¬¡ `get` å’Œ `put` æ–¹æ³•

ç¼ºç‚¹æ˜¯æ²¡æœ‰Oï¼ˆ1ï¼‰ï¼Œä½†é¢è¯•åº”è¯¥èƒ½è¿‡ã€‚

```java
class LFUCache {
    LinkedHashMap<Integer, NodeOfVal> auxiliaryMap;
    int length;

    public LFUCache(int capacity) {
        auxiliaryMap = new LinkedHashMap<>();
        length = capacity;
    }
    
    public int get(int key) {
        NodeOfVal tempNode;
        if (auxiliaryMap.containsKey(key)) {
            tempNode = auxiliaryMap.get(key);
            tempNode.count++;
            auxiliaryMap.remove(key);
            auxiliaryMap.put(key, tempNode);
            return tempNode.val;
        } else {
            return -1;
        }
    }
    
    public void put(int key, int value) {
        NodeOfVal tempNode;
        if (length == 0 && auxiliaryMap.containsKey(key)) {
            tempNode = auxiliaryMap.get(key);
            tempNode.count++;
            tempNode.val = value;
            auxiliaryMap.remove(key);
            auxiliaryMap.put(key, tempNode);
        } else if (length == 0 && !auxiliaryMap.containsKey(key)) {
            tempNode = new NodeOfVal(value);
            int deleteKey = getdelKey(auxiliaryMap);
            auxiliaryMap.remove(deleteKey);
            auxiliaryMap.put(key, tempNode);
        } else if (length != 0 && auxiliaryMap.containsKey(key)) {
            tempNode = auxiliaryMap.get(key);
            tempNode.count++;
            tempNode.val = value;
            auxiliaryMap.remove(key);
            auxiliaryMap.put(key, tempNode);
        } else {
            tempNode = new NodeOfVal(value);
            auxiliaryMap.put(key, tempNode);
            length--;
        }
    }

    int getdelKey(LinkedHashMap<Integer, NodeOfVal> auxiliaryMap) {
        int count = Integer.MAX_VALUE;
        int pre = 0;
        int result = auxiliaryMap.entrySet().iterator().next().getKey();
        for (Map.Entry<Integer, NodeOfVal> entry : auxiliaryMap.entrySet()) {
            if (entry.getValue().count < count) {
                count = entry.getValue().count;
                if (count != pre) {
                    result = entry.getKey();

                }

            }
            pre = entry.getValue().count;
        }
        return result;
    }
}


class NodeOfVal {
    int val;
    int count;

    public NodeOfVal(int val) {
        this.val = val;
        count = 1;
    }
}
```

### 25.K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ï¼ˆnew hot100ï¼‰ï¼ˆ3.20ï¼‰

ç»™ä½ é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œæ¯ `k` ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ä¿®æ”¹åçš„é“¾è¡¨ã€‚

`k` æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ `k` çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚

ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode.com/uploads/2020/10/03/reverse_ex1.jpg)

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 2
è¾“å‡ºï¼š[2,1,4,3,5]
```

**ç¤ºä¾‹ 2ï¼š**

![img](https://assets.leetcode.com/uploads/2020/10/03/reverse_ex2.jpg)

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 3
è¾“å‡ºï¼š[3,2,1,4,5]
```

æç¤ºï¼š

- é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°ç›®ä¸º `n`
- `1 <= k <= n <= 5000`
- `0 <= Node.val <= 1000`



æˆ‘çš„åˆè§ï¼Œé€»è¾‘è¾ƒä¸ºç›´è§‚ã€‚

```java
class Solution {
    public ListNode reverseKGroup(ListNode head, int k) {
        // åˆ›å»ºä¸€ä¸ªè¾…åŠ©å¤´èŠ‚ç‚¹ï¼Œç”¨äºç®€åŒ–å¤´èŠ‚ç‚¹å¤„ç†é€»è¾‘
        ListNode auxiliaryHead = new ListNode();
        auxiliaryHead.next = head;
        ListNode current = auxiliaryHead; // currentç”¨äºéå†å’Œè¿æ¥å„ç»„
        ListNode left = null;  // åè½¬éƒ¨åˆ†çš„å¤´èŠ‚ç‚¹ï¼ˆåè½¬åå˜ä¸ºå°¾èŠ‚ç‚¹ï¼‰
        ListNode right = head; // å½“å‰å¾…åè½¬éƒ¨åˆ†çš„èµ·å§‹èŠ‚ç‚¹
        ListNode temp = head;  // ä¸´æ—¶èŠ‚ç‚¹ç”¨äºéå†è®¡ç®—é•¿åº¦å’Œåè½¬æ“ä½œ
        int length = 0;
        
        // è®¡ç®—é“¾è¡¨æ€»é•¿åº¦
        while (temp != null) {
            length++;
            temp = temp.next;
        }
        
        // å¤–å±‚å¾ªç¯ï¼šå¤„ç†æ¯ä¸€ç»„kä¸ªèŠ‚ç‚¹çš„åè½¬
        for (int i = 0; i < length / k; i++) {
            // å†…å±‚å¾ªç¯ï¼šåè½¬å½“å‰kä¸ªèŠ‚ç‚¹
            for (int j = 0; j < k; j++) {
                temp = right.next; // ä¿å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
                right.next = left; // åè½¬æŒ‡é’ˆï¼Œå°†å½“å‰èŠ‚ç‚¹æŒ‡å‘left
                left = right;      // leftç§»åŠ¨åˆ°å½“å‰èŠ‚ç‚¹ï¼Œä½œä¸ºæ–°çš„åè½¬å¤´
                right = temp;      // rightç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå¾…å¤„ç†èŠ‚ç‚¹
            }
            // å°†å½“å‰åè½¬åçš„kä¸ªèŠ‚ç‚¹è¿æ¥åˆ°å·²å¤„ç†éƒ¨åˆ†çš„æœ«å°¾
            current.next = left;
            // ç§»åŠ¨currentåˆ°å½“å‰ç»„çš„æœ«å°¾ï¼Œä»¥ä¾¿è¿æ¥ä¸‹ä¸€ç»„
            for (int j = 0; j < k; j++) {
                current = current.next;
            }
        }
        // å¤„ç†å‰©ä½™ä¸è¶³kä¸ªçš„èŠ‚ç‚¹ï¼Œç›´æ¥è¿æ¥åˆ°currentçš„æœ«å°¾
        current.next = right;
        // è¿”å›è¾…åŠ©å¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå³æ–°é“¾è¡¨çš„å¤´
        return auxiliaryHead.next;
    }
}
```





æ ‡å‡†ç­”æ¡ˆï¼Œæ€§èƒ½ç¨å¾®æ›´å¥½

```java
class Solution {
    /**
     * åè½¬é“¾è¡¨çš„æ¯ä¸ª k ç»„èŠ‚ç‚¹
     * 
     * @param head é“¾è¡¨çš„å¤´èŠ‚ç‚¹
     * @param k    æ¯ç»„èŠ‚ç‚¹çš„ä¸ªæ•°
     * @return åè½¬åçš„é“¾è¡¨å¤´èŠ‚ç‚¹
     */
    public ListNode reverseKGroup(ListNode head, int k) {
        // åŸºæœ¬æƒ…å†µï¼šå¦‚æœé“¾è¡¨ä¸ºç©ºæˆ– k ä¸º 1ï¼ˆæ„å‘³ç€ä¸éœ€è¦åè½¬ï¼‰ï¼Œåˆ™ç›´æ¥è¿”å›åŸé“¾è¡¨
        if (head == null || k == 1) return head;

        // åˆ›å»ºä¸€ä¸ªå“‘èŠ‚ç‚¹ï¼ˆdummy nodeï¼‰ï¼Œç”¨æ¥æŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œä¾¿äºå¤„ç†é“¾è¡¨å¤´èŠ‚ç‚¹çš„ç‰¹æ®Šæƒ…å†µ
        ListNode dummyHead = new ListNode();
        dummyHead.next = head;

        // å‡ ä¸ªè¾…åŠ©æŒ‡é’ˆçš„å®šä¹‰ï¼š
        ListNode auxiliaryNode = head; // ç”¨äºè®¡ç®—é“¾è¡¨çš„é•¿åº¦
        ListNode curheadNode = head;   // å½“å‰æ®µåè½¬çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        ListNode curtailNode = dummyHead; // å½“å‰æ®µåè½¬å‰çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆç”¨æ¥è¿æ¥åè½¬åçš„éƒ¨åˆ†ï¼‰
        ListNode nextHeadNode = head;  // å½“å‰æ®µåè½¬åçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¤´éƒ¨
        ListNode tempNode = null;      // ä¸´æ—¶æŒ‡é’ˆï¼Œç”¨äºåœ¨åè½¬è¿‡ç¨‹ä¸­ä¸´æ—¶å­˜å‚¨

        // è®¡ç®—é“¾è¡¨çš„æ€»é•¿åº¦ count
        int count = 0;
        while (auxiliaryNode != null) {
            auxiliaryNode = auxiliaryNode.next;
            count++;
        }

        // å½“å‰©ä½™çš„èŠ‚ç‚¹æ•°å¤§äºç­‰äº k æ—¶ï¼Œç»§ç»­è¿›è¡Œåè½¬æ“ä½œ
        while (count >= k) {
            // å½“å‰æ®µçš„å¤´èŠ‚ç‚¹æ˜¯ curtailNode çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            curheadNode = curtailNode.next;
            // nextHeadNode æ˜¯å½“å‰æ®µåè½¬æ—¶çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            nextHeadNode = curheadNode.next;

            // å¯¹å½“å‰ k ä¸ªèŠ‚ç‚¹è¿›è¡Œåè½¬
            // ä¾‹å¦‚å½“ k = 3 æ—¶ï¼š1 -> 2 -> 3 å˜æˆ 3 -> 2 -> 1
            for (int i = 1; i < k; i++) {
                tempNode = nextHeadNode.next;   // æš‚å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
                nextHeadNode.next = curheadNode; // å°† nextHeadNode æ’åˆ° curheadNode å‰é¢ï¼Œå®ç°åè½¬
                curheadNode = nextHeadNode;      // æ›´æ–° curheadNodeï¼Œç»§ç»­åè½¬ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
                nextHeadNode = tempNode;         // æ›´æ–° nextHeadNodeï¼ŒæŒ‡å‘ä¸‹ä¸€è½®åè½¬çš„èŠ‚ç‚¹
            }

            // å®Œæˆåè½¬åï¼ŒcurtailNode çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘åè½¬åçš„å½“å‰æ®µå¤´èŠ‚ç‚¹
            tempNode = curtailNode.next;  // æš‚å­˜åè½¬å‰çš„å¤´èŠ‚ç‚¹
            curtailNode.next.next = nextHeadNode; // å°†åè½¬åçš„å°¾èŠ‚ç‚¹è¿æ¥åˆ°ä¸‹ä¸€æ®µé“¾è¡¨
            curtailNode.next = curheadNode;       // å°† curtailNode çš„ä¸‹ä¸€ä¸ªæŒ‡å‘åè½¬åçš„å¤´èŠ‚ç‚¹
            curtailNode = tempNode;               // æ›´æ–° curtailNode ä¸ºå½“å‰æ®µåè½¬å‰çš„å°¾èŠ‚ç‚¹

            // å‡å°‘å‰©ä½™æœªå¤„ç†èŠ‚ç‚¹çš„è®¡æ•°
            count -= k;
        }

        // è¿”å›æ–°çš„é“¾è¡¨å¤´èŠ‚ç‚¹ï¼Œå³ dummyHead çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
        return dummyHead.next;
    }
}
```

### 23.åˆå¹¶ K ä¸ªå‡åºé“¾è¡¨ï¼ˆnew hot100ï¼‰ï¼ˆ4.4ï¼‰

ç»™ä½ ä¸€ä¸ªé“¾è¡¨æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨éƒ½å·²ç»æŒ‰å‡åºæ’åˆ—ã€‚

è¯·ä½ å°†æ‰€æœ‰é“¾è¡¨åˆå¹¶åˆ°ä¸€ä¸ªå‡åºé“¾è¡¨ä¸­ï¼Œè¿”å›åˆå¹¶åçš„é“¾è¡¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šlists = [[1,4,5],[1,3,4],[2,6]]
è¾“å‡ºï¼š[1,1,2,3,4,4,5,6]
è§£é‡Šï¼šé“¾è¡¨æ•°ç»„å¦‚ä¸‹ï¼š
[
  1->4->5,
  1->3->4,
  2->6
]
å°†å®ƒä»¬åˆå¹¶åˆ°ä¸€ä¸ªæœ‰åºé“¾è¡¨ä¸­å¾—åˆ°ã€‚
1->1->2->3->4->4->5->6
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šlists = []
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šlists = [[]]
è¾“å‡ºï¼š[]
```



```java
class Solution {
    /**
     * åˆå¹¶å¤šä¸ªå·²æ’åºçš„é“¾è¡¨
     *
     * @param lists åŒ…å«å¤šä¸ªå·²æ’åºé“¾è¡¨çš„æ•°ç»„
     * @return åˆå¹¶åçš„å•ä¸ªæ’åºé“¾è¡¨çš„å¤´èŠ‚ç‚¹
     */
    public ListNode mergeKLists(ListNode[] lists) {
        // åˆ›å»ºä¸€ä¸ªå“‘èŠ‚ç‚¹ä½œä¸ºç»“æœé“¾è¡¨çš„å¤´èŠ‚ç‚¹
        ListNode dummyHead = new ListNode();
        ListNode currentNode = dummyHead;

        // åˆ›å»ºä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰ï¼ŒæŒ‰èŠ‚ç‚¹å€¼æ’åº
        PriorityQueue<ListNode> auxiliaryQueue = new PriorityQueue<>((a, b) -> a.val - b.val);

        // å°†æ‰€æœ‰é“¾è¡¨çš„å¤´èŠ‚ç‚¹åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—
        for (ListNode curheadNode : lists) {
            if (curheadNode != null) {
                auxiliaryQueue.offer(curheadNode);
            }
        }

        // å½“ä¼˜å…ˆé˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼ŒæŒç»­åˆå¹¶
        while (!auxiliaryQueue.isEmpty()) {
            // å–å‡ºå½“å‰æœ€å°å€¼çš„èŠ‚ç‚¹
            ListNode nextHeadNode = auxiliaryQueue.poll();
            currentNode.next = nextHeadNode;
            currentNode = currentNode.next;

            // å¦‚æœè¢«å–å‡ºçš„èŠ‚ç‚¹è¿˜æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†å…¶åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—
            if (nextHeadNode.next != null) {
                auxiliaryQueue.offer(nextHeadNode.next);
            }
        }

        // è¿”å›åˆå¹¶åçš„é“¾è¡¨ï¼ˆå»æ‰å“‘èŠ‚ç‚¹ï¼‰
        return dummyHead.next;
    }
}

```

# å“ˆå¸Œè¡¨

### 169.å¤šæ•°å…ƒç´ ï¼ˆhot 100ï¼‰

ç»™å®šä¸€ä¸ªå¤§å°ä¸º `n` çš„æ•°ç»„ `nums` ï¼Œè¿”å›å…¶ä¸­çš„å¤šæ•°å…ƒç´ ã€‚å¤šæ•°å…ƒç´ æ˜¯æŒ‡åœ¨æ•°ç»„ä¸­å‡ºç°æ¬¡æ•° **å¤§äº** `âŒŠ n/2 âŒ‹` çš„å…ƒç´ ã€‚

ä½ å¯ä»¥å‡è®¾æ•°ç»„æ˜¯éç©ºçš„ï¼Œå¹¶ä¸”ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´ ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [3,2,3]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [2,2,1,1,1,2,2]
è¾“å‡ºï¼š2
```

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œç”¨äºæä¾›æ•°ç»„ä¸­å…ƒç´ çš„è§£å†³æ–¹æ¡ˆ
 */
class Solution {
    /**
     * å¯»æ‰¾æ•°ç»„ä¸­çš„å¤šæ•°å…ƒç´ 
     * å¤šæ•°å…ƒç´ å®šä¹‰ä¸ºåœ¨æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°å¤§äºæ•°ç»„é•¿åº¦ä¸€åŠçš„å…ƒç´ 
     * ä½¿ç”¨HashMapæ¥è®°å½•æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œä»¥ä¾¿æ‰¾å‡ºå¤šæ•°å…ƒç´ 
     *
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @return æ•°ç»„ä¸­çš„å¤šæ•°å…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨å¤šæ•°å…ƒç´ åˆ™è¿”å›-1
     */
    public int majorityElement(int[] nums) {
        // åˆå§‹åŒ–HashMapï¼Œç”¨äºå­˜å‚¨æ•°å­—åŠå…¶å‡ºç°çš„æ¬¡æ•°
        HashMap<Integer, Integer> axuiliaryMap = new HashMap<>();
        // éå†æ•°ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°
        for (int i = 0; i < nums.length; i++) {
            // å¦‚æœæ•°å­—å·²å­˜åœ¨äºMapä¸­ï¼Œåˆ™å¢åŠ å…¶è®¡æ•°ï¼›å¦åˆ™ï¼Œåˆå§‹åŒ–è®¡æ•°ä¸º1
            axuiliaryMap.put(nums[i], axuiliaryMap.getOrDefault(nums[i], 0) + 1);
        }
        // éå†Mapä¸­çš„æ¯ä¸ªæ¡ç›®ï¼Œå¯»æ‰¾å‡ºç°æ¬¡æ•°è¶…è¿‡æ•°ç»„é•¿åº¦ä¸€åŠçš„æ•°å­—
        for (Map.Entry<Integer, Integer> entry : axuiliaryMap.entrySet()) {
            // å¦‚æœæ‰¾åˆ°å¤šæ•°å…ƒç´ ï¼Œåˆ™è¿”å›è¯¥å…ƒç´ 
            if (entry.getValue() > nums.length / 2) {
                return entry.getKey();
            }
        }
        // å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¤šæ•°å…ƒç´ ï¼Œè¿”å›-1
        return -1;
    }
}

```



### 242.æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯

```java
class Solution {
    /**
     * åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºå­—æ¯å¼‚ä½è¯
     * å­—æ¯å¼‚ä½è¯æ˜¯æŒ‡ä¸¤ä¸ªå­—ç¬¦ä¸²å«æœ‰ç›¸åŒçš„å­—ç¬¦ï¼Œä½†å­—ç¬¦çš„é¡ºåºä¸åŒ
     * é€šè¿‡ä½¿ç”¨ä¸€ä¸ªè¾…åŠ©æ•°ç»„æ¥ç»Ÿè®¡ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œå¹¶æ¯”è¾ƒè¿™äº›æ¬¡æ•°æ˜¯å¦ç›¸ç­‰
     * 
     * @param s ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²
     * @param t ç¬¬äºŒä¸ªå­—ç¬¦ä¸²
     * @return å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å­—æ¯å¼‚ä½è¯ï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    public boolean isAnagram(String s, String t) {
        // å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦ä¸åŒï¼Œåˆ™å®ƒä»¬ä¸å¯èƒ½æ˜¯å­—æ¯å¼‚ä½è¯
        if (s.length() != t.length()) {
            return false;
        }
        // ä½¿ç”¨ä¸€ä¸ªå¤§å°ä¸º26çš„æ•´å‹æ•°ç»„æ¥å­˜å‚¨æ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°
        // å› ä¸ºå­—ç¬¦ä¸²åªåŒ…å«å°å†™å­—æ¯ï¼Œæ‰€ä»¥æ•°ç»„çš„ç´¢å¼•ç”±å­—æ¯çš„asciiç å‡å»'a'çš„asciiç å¾—åˆ°
        int[] auxiliaryArray = new int[26];
        // éå†å­—ç¬¦ä¸²så’Œtï¼Œç»Ÿè®¡æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°
        // sä¸­çš„å­—ç¬¦æ¬¡æ•°åŠ 1ï¼Œtä¸­çš„å­—ç¬¦æ¬¡æ•°å‡1
        for (int i = 0; i < s.length(); i++) {
            auxiliaryArray[s.charAt(i) - 'a']++;
            auxiliaryArray[t.charAt(i) - 'a']--;
        }
        // éå†è¾…åŠ©æ•°ç»„ï¼Œå¦‚æœä»»æ„ä¸€ä¸ªå€¼ä¸ä¸º0ï¼Œåˆ™è¯´æ˜ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸æ˜¯å­—æ¯å¼‚ä½è¯
        // å› ä¸ºå¦‚æœæ˜¯å­—æ¯å¼‚ä½è¯ï¼Œè¾…åŠ©æ•°ç»„ä¸­çš„å€¼åº”è¯¥å…¨éƒ¨ä¸º0
        for (int i = 0; i < auxiliaryArray.length; i++) {
            if (auxiliaryArray[i] != 0) {
                return false;
            }
        }
        // å¦‚æœè¾…åŠ©æ•°ç»„ä¸­çš„æ‰€æœ‰å€¼éƒ½ä¸º0ï¼Œåˆ™ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å­—æ¯å¼‚ä½è¯
        return true;
    }
}
```

### 448.æ‰¾å‡ºæ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­—ï¼ˆhot100ï¼‰

ç»™ä½ ä¸€ä¸ªå« `n` ä¸ªæ•´æ•°çš„æ•°ç»„ `nums` ï¼Œå…¶ä¸­ `nums[i]` åœ¨åŒºé—´ `[1, n]` å†…ã€‚è¯·ä½ æ‰¾å‡ºæ‰€æœ‰åœ¨ `[1, n]` èŒƒå›´å†…ä½†æ²¡æœ‰å‡ºç°åœ¨ `nums` ä¸­çš„æ•°å­—ï¼Œå¹¶ä»¥æ•°ç»„çš„å½¢å¼è¿”å›ç»“æœã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [4,3,2,7,8,2,3,1]
è¾“å‡ºï¼š[5,6]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,1]
è¾“å‡ºï¼š[2]
```

```java
/**
 * Solutionç±»ç”¨äºè§£å†³æ‰¾å‡ºæ•°ç»„ä¸­æ‰€æœ‰æ¶ˆå¤±çš„æ•°å­—çš„é—®é¢˜
 */
class Solution {
    /**
     * æ‰¾å‡ºæ•°ç»„ä¸­æ‰€æœ‰æ¶ˆå¤±çš„æ•°å­—
     *
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @return è¿”å›ä¸€ä¸ªæ•´æ•°åˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰æ¶ˆå¤±çš„æ•°å­—
     */
    public List<Integer> findDisappearedNumbers(int[] nums) {
        // åˆå§‹åŒ–ç»“æœåˆ—è¡¨
        List<Integer> resultList = new ArrayList<>();
        // è¾…åŠ©é›†åˆï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªæ•°å­—
        HashSet<Integer> auxiliarySet = new HashSet<>();

        // éå†æ•°ç»„ï¼Œå°†æ‰€æœ‰å‡ºç°çš„æ•°å­—æ·»åŠ åˆ°è¾…åŠ©é›†åˆä¸­
        for (int i = 0; i < nums.length; i++) {
            auxiliarySet.add(nums[i]);
        }

        // éå†ä»1åˆ°æ•°ç»„é•¿åº¦çš„æ‰€æœ‰å¯èƒ½æ•°å­—
        for (int i = 1; i <= nums.length; i++) {
            // å¦‚æœå½“å‰æ•°å­—ä¸åœ¨è¾…åŠ©é›†åˆä¸­ï¼Œè¯´æ˜è¯¥æ•°å­—åœ¨æ•°ç»„ä¸­æ¶ˆå¤±äº†
            if (!auxiliarySet.contains(i)) {
                // å°†æ¶ˆå¤±çš„æ•°å­—æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
                resultList.add(i);
            }
        }

        // è¿”å›ç»“æœåˆ—è¡¨
        return resultList;
    }
}
```



### 349.ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†

**Java ä¸­çš„ `ArrayList`**

`ArrayList` æ˜¯ Java ä¸­ `List` æ¥å£çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå¯åŠ¨æ€è°ƒæ•´å¤§å°çš„æ•°ç»„ã€‚ä»¥ä¸‹æ˜¯ `ArrayList` çš„ä¸€äº›ä¸»è¦ç‰¹ç‚¹å’Œç”¨æ³•ï¼š

1. **åŠ¨æ€æ•°ç»„**: `ArrayList` å¯ä»¥è‡ªåŠ¨è°ƒæ•´å…¶å®¹é‡ä»¥é€‚åº”æ–°å¢å…ƒç´ ã€‚
2. **å¿«é€Ÿéšæœºè®¿é—®**: æä¾› `O(1)` æ—¶é—´å¤æ‚åº¦çš„éšæœºè®¿é—®ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäºæ•°ç»„å®ç°çš„ã€‚
3. **å…è®¸é‡å¤å…ƒç´ **: `ArrayList` å¯ä»¥åŒ…å«é‡å¤çš„å…ƒç´ ã€‚
4. **å…è®¸nullå€¼**: å¯ä»¥å­˜å‚¨ `null` å…ƒç´ ã€‚
5. **éåŒæ­¥**: `ArrayList` ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—® `ArrayList`ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ä»ç»“æ„ä¸Šä¿®æ”¹äº†åˆ—è¡¨ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»ä¿æŒå¤–éƒ¨åŒæ­¥ã€‚

æœ‰å†—ä½™æ“ä½œï¼Œç›´è§‰ç‰ˆ

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºä¸¤ä¸ªæ•°ç»„çš„äº¤é›†
    public int[] intersection(int[] nums1, int[] nums2) {
        // å¯¹nums2æ•°ç»„è¿›è¡Œæ’åº
        Arrays.sort(nums2);
        // å®šä¹‰ä¸€ä¸ªHashSetï¼Œç”¨äºå­˜å‚¨nums1æ•°ç»„ä¸­çš„å…ƒç´ 
        HashSet<Integer> auxiliarySet = new HashSet<>();
        // å®šä¹‰ä¸€ä¸ªArrayListï¼Œç”¨äºå­˜å‚¨äº¤é›†å…ƒç´ 
        ArrayList<Integer> resultList = new ArrayList<>();
        // éå†nums1æ•°ç»„ï¼Œå°†å…ƒç´ æ·»åŠ åˆ°auxiliarySetä¸­
        for (int i = 0; i < nums1.length; i++) {
            auxiliarySet.add(nums1[i]);
        }

        // éå†nums2æ•°ç»„
        for (int i = 0; i < nums2.length; i++) {
            // å¦‚æœå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œåˆ™è·³è¿‡
            if (i > 0 && nums2[i] == nums2[i - 1]) {
                continue;
            }
            // å¦‚æœauxiliarySetä¸­åŒ…å«å½“å‰å…ƒç´ ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°resultListä¸­
            if (auxiliarySet.contains(nums2[i])) {
                resultList.add(nums2[i]);
            }
        }
        // å°†resultListè½¬æ¢ä¸ºintæ•°ç»„å¹¶è¿”å›
        return resultList.stream().mapToInt(Integer::intValue).toArray();
    }
}
```

**int**:

- **åŸå§‹æ•°æ®ç±»å‹ï¼ˆPrimitive Typeï¼‰**: `int` æ˜¯ä¸€ç§åŸå§‹æ•°æ®ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºæ•´æ•°ã€‚
- **å†…å­˜å ç”¨**: å ç”¨ 4 ä¸ªå­—èŠ‚ï¼ˆ32 ä½ï¼‰ã€‚
- **æ€§èƒ½**: åŸå§‹æ•°æ®ç±»å‹çš„æ“ä½œé€Ÿåº¦å¿«ï¼Œå› ä¸ºå®ƒä»¬ç›´æ¥å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­ã€‚
- **é»˜è®¤å€¼**: `int` çš„é»˜è®¤å€¼ä¸º `0`ã€‚

**Integer**:

- **åŒ…è£…ç±»ï¼ˆWrapper Classï¼‰**: `Integer` æ˜¯ä¸€ä¸ªç±»ï¼Œç”¨äºå°† `int` åŸå§‹æ•°æ®ç±»å‹åŒ…è£…ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚
- **å†…å­˜å ç”¨**: ç›¸æ¯”äºåŸå§‹æ•°æ®ç±»å‹ï¼Œ`Integer` å¯¹è±¡å ç”¨æ›´å¤šå†…å­˜ï¼Œå› ä¸ºå®ƒä»¬å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œå¹¶ä¸”åŒ…å«é¢å¤–çš„å…ƒæ•°æ®ã€‚
- **åŠŸèƒ½**: æä¾›äº†è®¸å¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œä¾‹å¦‚å°† `int` è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€è§£æå­—ç¬¦ä¸²ä¸º `int` ç­‰ã€‚
- **é»˜è®¤å€¼**: `Integer` çš„é»˜è®¤å€¼ä¸º `null`ã€‚

ä¼˜åŒ–ç‰ˆæœ¬ï¼Œæ¨èè®°å¿†è¿™ä¸ª

```java
/**
 * Solutionç±»ç”¨äºå¯»æ‰¾ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†
 * å®ƒæä¾›äº†ä¸€ä¸ªå…¬å…±æ–¹æ³•æ¥å®ç°è¿™ä¸€åŠŸèƒ½
 */
class Solution {
    /**
     * å¯»æ‰¾ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†
     * è¯¥æ–¹æ³•é€šè¿‡éå†æ•°ç»„å¹¶å°†ç»“æœå­˜å‚¨åœ¨æ–°çš„åˆ—è¡¨ä¸­æ¥æ‰¾åˆ°ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†å…ƒç´ 
     * 
     * @param nums1 ç¬¬ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«ä¸€ç»„æ•´æ•°
     * @param nums2 ç¬¬äºŒä¸ªæ•°ç»„ï¼ŒåŒ…å«å¦ä¸€ç»„æ•´æ•°
     * @return äº¤é›†æ•°ç»„ï¼ŒåŒ…å«ä¸¤ä¸ªæ•°ç»„ä¸­éƒ½å‡ºç°çš„å…ƒç´ 
     */
    public int[] intersection(int[] nums1, int[] nums2) {
        // åˆ›å»ºä¸€ä¸ªArrayListæ¥å­˜å‚¨æœ€ç»ˆçš„äº¤é›†ç»“æœ
        ArrayList<Integer> resultList = new ArrayList<>();
        // åˆ›å»ºä¸€ä¸ªHashSetç”¨äºè¾…åŠ©è®¡ç®—äº¤é›†ï¼Œé¿å…é‡å¤å…ƒç´ çš„å½±å“
        HashSet<Integer> auxiliarySet = new HashSet<>();
        
        // éå†ç¬¬ä¸€ä¸ªæ•°ç»„ï¼Œå°†å…ƒç´ æ·»åŠ åˆ°è¾…åŠ©é›†åˆä¸­
        for (int i = 0; i < nums1.length; i++) {
            auxiliarySet.add(nums1[i]);
        }
        
        // éå†ç¬¬äºŒä¸ªæ•°ç»„ï¼Œæ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨è¾…åŠ©é›†åˆä¸­
        for (int i = 0; i < nums2.length; i++) {
            // å¦‚æœå…ƒç´ åœ¨è¾…åŠ©é›†åˆä¸­ï¼Œåˆ™æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­ï¼Œå¹¶ä»è¾…åŠ©é›†åˆä¸­ç§»é™¤ï¼Œä»¥é¿å…é‡å¤æ·»åŠ 
            if (auxiliarySet.contains(nums2[i])) {
                resultList.add(nums2[i]);
                auxiliarySet.remove(nums2[i]);
            }
        }
        
        // å°†ç»“æœåˆ—è¡¨è½¬æ¢ä¸ºæ•´æ•°æ•°ç»„å¹¶è¿”å›
        return resultList.stream().mapToInt(Integer::intValue).toArray();
    }
}
```

### 202.å¿«ä¹æ•°ï¼ˆ2.XXï¼Œå¾ˆæœ‰æ„æ€ï¼‰

ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•° `n` æ˜¯ä¸æ˜¯å¿«ä¹æ•°ã€‚

**ã€Œå¿«ä¹æ•°ã€** å®šä¹‰ä¸ºï¼š

- å¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œã€‚
- ç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°è¿™ä¸ªæ•°å˜ä¸º 1ï¼Œä¹Ÿå¯èƒ½æ˜¯ **æ— é™å¾ªç¯** ä½†å§‹ç»ˆå˜ä¸åˆ° 1ã€‚
- å¦‚æœè¿™ä¸ªè¿‡ç¨‹ **ç»“æœä¸º** 1ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯å¿«ä¹æ•°ã€‚

å¦‚æœ `n` æ˜¯ *å¿«ä¹æ•°* å°±è¿”å› `true` ï¼›ä¸æ˜¯ï¼Œåˆ™è¿”å› `false` ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 19
è¾“å‡ºï¼štrue
è§£é‡Šï¼š
12 + 92 = 82
82 + 22 = 68
62 + 82 = 100
12 + 02 + 02 = 1
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 2
è¾“å‡ºï¼šfalse
```

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯å¦ä¸ºå¿«ä¹æ•°
 * å¿«ä¹æ•°å®šä¹‰ä¸ºï¼Œå°†æ•°å­—çš„å„ä½å¹³æ–¹å’Œç›¸åŠ ï¼Œå¦‚æœæœ€ç»ˆç»“æœä¸º1ï¼Œåˆ™è¯¥æ•°å­—æ˜¯å¿«ä¹æ•°
 */
class Solution {
    /**
     * åˆ¤æ–­ç»™å®šçš„æ•°å­—næ˜¯å¦ä¸ºå¿«ä¹æ•°
     * 
     * @param n å¾…åˆ¤æ–­çš„æ•°å­—
     * @return å¦‚æœnæ˜¯å¿«ä¹æ•°ï¼Œè¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    public boolean isHappy(int n) {
        // ä½¿ç”¨HashSetæ¥å­˜å‚¨è®¡ç®—è¿‡ç¨‹ä¸­çš„ä¸­é—´ç»“æœï¼Œç”¨äºæ£€æµ‹å¾ªç¯
        HashSet<Integer> auxiliarySet = new HashSet<>();
        while (n != 1) {
            // å¦‚æœå½“å‰æ•°å­—å·²ç»åœ¨è¾…åŠ©é›†ä¸­ï¼Œåˆ™è¯´æ˜é™·å…¥äº†å¾ªç¯ï¼Œä¸æ˜¯å¿«ä¹æ•°
            if (auxiliarySet.contains(n)) {
                return false;
            }
            auxiliarySet.add(n);
            // è®¡ç®—ä¸‹ä¸€ä¸ªæ•°å­—
            n = calculateTheSumOfSquares(n);
        }
        // å¦‚æœå¾ªç¯ç»“æŸæ—¶nä¸º1ï¼Œåˆ™è¯´æ˜æ˜¯å¿«ä¹æ•°
        return true;
    }

    /**
     * è®¡ç®—ç»™å®šæ•°å­—çš„å„ä½å¹³æ–¹å’Œ
     * 
     * @param num å¾…è®¡ç®—çš„æ•°å­—
     * @return è®¡ç®—ç»“æœï¼Œå³å„ä½å¹³æ–¹å’Œ
     */
    int calculateTheSumOfSquares(int num) {
        // ç”¨äºç´¯åŠ å„ä½çš„å¹³æ–¹å’Œ
        int sum = 0;
        // éå†æ•°å­—çš„æ¯ä¸€ä½ï¼Œè®¡ç®—å¹³æ–¹å’Œ
        while (num > 0) {
            // å–å‡ºæœ€åä¸€ä½æ•°å­—ï¼Œè®¡ç®—å…¶å¹³æ–¹å¹¶ç´¯åŠ åˆ°sumä¸Š
            sum += (num % 10) * (num % 10);
            // å°†æ•°å­—é™¤ä»¥10ï¼Œç§»é™¤æœ€åä¸€ä½
            num = num / 10;
        }
        // è¿”å›è®¡ç®—ç»“æœ
        return sum;
    }
}

```

### 1.ä¸¤æ•°ä¹‹å’Œï¼ˆhot100ï¼‰ï¼ˆ3.20ï¼‰

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ `target`ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º **å’Œä¸ºç›®æ ‡å€¼** *`target`* çš„é‚£ **ä¸¤ä¸ª** æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚

ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚

ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [2,7,11,15], target = 9
è¾“å‡ºï¼š[0,1]
è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚
```

```java
/**
 * æœ¬ç±»ç”¨äºè§£å†³ä¸¤æ•°ä¹‹å’Œçš„é—®é¢˜ï¼Œé€šè¿‡æŸ¥æ‰¾æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œç­‰äºç‰¹å®šç›®æ ‡å€¼
 */
class Solution {
    /**
     * åœ¨ç»™å®šæ•´æ•°æ•°ç»„ä¸­ï¼Œå¯»æ‰¾ä¸¤ä¸ªæ•°ä½¿å¾—å®ƒä»¬çš„å’Œç­‰äºç›®æ ‡å€¼target
     * 
     * @param nums æ•´æ•°æ•°ç»„ï¼Œå‡è®¾å…¶ä¸­è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´ 
     * @param target ç›®æ ‡å€¼ï¼Œå³ä¸¤ä¸ªæ•°åº”è¯¥ç›¸åŠ å¾—åˆ°çš„å€¼
     * @return è¿”å›ä¸€ä¸ªåŒ…å«è¿™ä¸¤ä¸ªæ•°çš„ç´¢å¼•çš„æ•°ç»„å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ä¸¤ä¸ªæ•°ï¼Œåˆ™è¿”å›null
     */
    public int[] twoSum(int[] nums, int target) {
        // ä½¿ç”¨HashMapæ¥è¾…åŠ©æŸ¥æ‰¾ï¼Œé”®ä¸ºæ•°ç»„ä¸­çš„æ•°ï¼Œå€¼ä¸ºè¯¥æ•°çš„ç´¢å¼•
        HashMap<Integer, Integer> auxiliaryMap = new HashMap<>();
        // éå†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°
        for (int i = 0; i < nums.length; i++) {
            // æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¦ä¸€ä¸ªæ•°ä¸å½“å‰æ•°çš„å’Œä¸ºç›®æ ‡å€¼
            if (auxiliaryMap.containsKey(target - nums[i])) {
                // å¦‚æœå­˜åœ¨ï¼Œè¿”å›è¿™ä¸¤ä¸ªæ•°çš„ç´¢å¼•
                return new int[]{i, auxiliaryMap.get(target - nums[i])};
            }
            // å°†å½“å‰æ•°åŠå…¶ç´¢å¼•æ”¾å…¥è¾…åŠ©HashMapä¸­ï¼Œä»¥ä¾¿åç»­æŸ¥æ‰¾
            auxiliaryMap.put(nums[i], i);
        }
        // å¦‚æœéå†å®Œæ•°ç»„åæ²¡æœ‰æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„ä¸¤ä¸ªæ•°ï¼Œè¿”å›null
        return null;
    }
}
```

### 454.å››æ•°ç›¸åŠ II

ç»™ä½ å››ä¸ªæ•´æ•°æ•°ç»„ `nums1`ã€`nums2`ã€`nums3` å’Œ `nums4` ï¼Œæ•°ç»„é•¿åº¦éƒ½æ˜¯ `n` ï¼Œè¯·ä½ è®¡ç®—æœ‰å¤šå°‘ä¸ªå…ƒç»„ `(i, j, k, l)` èƒ½æ»¡è¶³ï¼š

- `0 <= i, j, k, l < n`
- `nums1[i] + nums2[j] + nums3[k] + nums4[l] == 0`

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums1 = [1,2], nums2 = [-2,-1], nums3 = [-1,2], nums4 = [0,2]
è¾“å‡ºï¼š2
è§£é‡Šï¼š
ä¸¤ä¸ªå…ƒç»„å¦‚ä¸‹ï¼š
1. (0, 0, 0, 1) -> nums1[0] + nums2[0] + nums3[0] + nums4[1] = 1 + (-2) + (-1) + 2 = 0
2. (1, 1, 0, 0) -> nums1[1] + nums2[1] + nums3[0] + nums4[0] = 2 + (-1) + (-1) + 0 = 0
```

```java
class Solution {
    /**
     * è®¡ç®—å››ä¸ªæ•°ç»„ä¸­ï¼Œé€‰å–çš„ä»»æ„å››ä¸ªæ•°ç›¸åŠ ç­‰äº0çš„ç»„åˆæ•°é‡
     * 
     * @param nums1 ç¬¬ä¸€ä¸ªæ•´æ•°æ•°ç»„
     * @param nums2 ç¬¬äºŒä¸ªæ•´æ•°æ•°ç»„
     * @param nums3 ç¬¬ä¸‰ä¸ªæ•´æ•°æ•°ç»„
     * @param nums4 ç¬¬å››ä¸ªæ•´æ•°æ•°ç»„
     * @return æ»¡è¶³æ¡ä»¶çš„ç»„åˆæ•°é‡
     */
    public int fourSumCount(int[] nums1, int[] nums2, int[] nums3, int[] nums4) {
        // è¾…åŠ©å“ˆå¸Œè¡¨ï¼Œç”¨äºå­˜å‚¨nums1å’Œnums2ä¸­ä¸¤ä¸¤å…ƒç´ ç›¸åŠ çš„å’ŒåŠå…¶å‡ºç°çš„æ¬¡æ•°
        HashMap<Integer, Integer> auxiliaryMap = new HashMap<>();
        // æœ€ç»ˆç»“æœçš„è®¡æ•°å™¨
        int resultCount = 0, tempNum;
        
        // éå†nums1å’Œnums2æ•°ç»„ï¼Œè®¡ç®—æ‰€æœ‰å¯èƒ½çš„ä¸¤æ•°ä¹‹å’Œï¼Œå¹¶è®°å½•æ¯ä¸ªå’Œå‡ºç°çš„æ¬¡æ•°
        for (int i = 0; i < nums1.length; i++) {
            for (int j = 0; j < nums2.length; j++) {
                // è®¡ç®—å½“å‰çš„å’Œï¼Œå¹¶è·å–è¿™ä¸ªå’Œå½“å‰å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åæ¬¡æ•°åŠ 1
                tempNum = auxiliaryMap.getOrDefault(nums1[i] + nums2[j], 0) + 1;
                // å°†è®¡ç®—å¾—åˆ°çš„å’ŒåŠæ›´æ–°åçš„æ¬¡æ•°å­˜å…¥è¾…åŠ©å“ˆå¸Œè¡¨
                auxiliaryMap.put(nums1[i] + nums2[j], tempNum);
            }
        }
        
        // éå†nums3å’Œnums4æ•°ç»„ï¼ŒæŸ¥æ‰¾ä¸nums3[i] + nums4[j]å’Œä¸º0çš„ç»„åˆæ•°é‡
        for (int i = 0; i < nums3.length; i++) {
            for (int j = 0; j < nums4.length; j++) {
                // ä»è¾…åŠ©å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾ä¸nums3[i] + nums4[j]å’Œä¸º0çš„æ¬¡æ•°ï¼Œå¹¶ç´¯åŠ åˆ°ç»“æœè®¡æ•°å™¨
                resultCount += auxiliaryMap.getOrDefault(0 - nums3[i] - nums4[j], 0);
            }
        }
        
        // è¿”å›æ»¡è¶³æ¡ä»¶çš„ç»„åˆæ•°é‡
        return resultCount;
    }
}

```



### 383.èµé‡‘ä¿¡

ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼š`ransomNote` å’Œ `magazine` ï¼Œåˆ¤æ–­ `ransomNote` èƒ½ä¸èƒ½ç”± `magazine` é‡Œé¢çš„å­—ç¬¦æ„æˆã€‚

å¦‚æœå¯ä»¥ï¼Œè¿”å› `true` ï¼›å¦åˆ™è¿”å› `false` ã€‚

`magazine` ä¸­çš„æ¯ä¸ªå­—ç¬¦åªèƒ½åœ¨ `ransomNote` ä¸­ä½¿ç”¨ä¸€æ¬¡ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šransomNote = "a", magazine = "b"
è¾“å‡ºï¼šfalse
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šransomNote = "aa", magazine = "ab"
è¾“å‡ºï¼šfalse
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šransomNote = "aa", magazine = "aab"
è¾“å‡ºï¼štrue
```

```java
class Solution {
    /**
     * åˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨æ‚å¿—å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ„æˆå‹’ç´¢ä¿¡å­—ç¬¦ä¸²
     * 
     * @param ransomNote å‹’ç´¢ä¿¡å­—ç¬¦ä¸²
     * @param magazine æ‚å¿—å­—ç¬¦ä¸²
     * @return å¦‚æœå¯ä»¥æ„æˆï¼Œè¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    public boolean canConstruct(String ransomNote, String magazine) {
        // åˆ›å»ºä¸€ä¸ªè¾…åŠ©æ•°ç»„ï¼Œè®°å½•æ¯ä¸ªå­—æ¯çš„å‡ºç°æ¬¡æ•°
        int[] auxiliaryArray = new int[26];
        // éå†æ‚å¿—å­—ç¬¦ä¸²ï¼Œç»Ÿè®¡æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°
        for (int i = 0; i < magazine.length(); i++) {
            auxiliaryArray[magazine.charAt(i) - 'a']++;
        }

        // éå†å‹’ç´¢ä¿¡å­—ç¬¦ä¸²ï¼Œå‡å»å¯¹åº”å­—ç¬¦çš„å‡ºç°æ¬¡æ•°
        for (int i = 0; i < ransomNote.length(); i++) {
            auxiliaryArray[ransomNote.charAt(i) - 'a']--;
            // å¦‚æœæŸä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°å°äº0ï¼Œè¯´æ˜æ— æ³•æ„æˆå‹’ç´¢ä¿¡ï¼Œè¿”å›false
            if (auxiliaryArray[ransomNote.charAt(i) - 'a'] < 0) {
                return false;
            }
        }
        // å¦‚æœèƒ½å®Œæ•´éå†å‹’ç´¢ä¿¡å­—ç¬¦ä¸²è€Œæ²¡æœ‰è¿”å›falseï¼Œè¯´æ˜å¯ä»¥æ„æˆï¼Œè¿”å›true
        return true;
    }
}
```

### 15.ä¸‰æ•°ä¹‹å’Œï¼ˆhot100ï¼‰ï¼ˆ4.1ï¼‰

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ `[nums[i], nums[j], nums[k]]` æ»¡è¶³ `i != j`ã€`i != k` ä¸” `j != k` ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ `nums[i] + nums[j] + nums[k] == 0` ã€‚è¯·

ä½ è¿”å›æ‰€æœ‰å’Œä¸º `0` ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚

**æ³¨æ„ï¼š**ç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]
è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]
è§£é‡Šï¼š
nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚
nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚
nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚
ä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚
æ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0,1,1]
è¾“å‡ºï¼š[]
è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [0,0,0]
è¾“å‡ºï¼š[[0,0,0]]
è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚
```

```java
class Solution {
    /**
     * å¯»æ‰¾æ•°ç»„ä¸­æ‰€æœ‰ä¸é‡å¤çš„ä¸‰å…ƒç»„ï¼Œè¿™äº›ä¸‰å…ƒç»„çš„å’Œä¸º0
     * 
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @return è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«æ‰€æœ‰å’Œä¸º0çš„ä¸é‡å¤ä¸‰å…ƒç»„
     */
    public List<List<Integer>> threeSum(int[] nums) {
        // å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œä»¥ä¾¿åç»­ä½¿ç”¨åŒæŒ‡é’ˆæŠ€æœ¯
        Arrays.sort(nums);
        // åˆå§‹åŒ–ç»“æœåˆ—è¡¨
        List<List<Integer>> resultList = new ArrayList<>();
        // å®šä¹‰ä¸‰ä¸ªæŒ‡é’ˆï¼Œiä¸ºå½“å‰éå†çš„å…ƒç´ ï¼Œjä¸ºiåçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œkä¸ºæ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ 
        int j, k;
        // éå†æ•°ç»„
        for (int i = 0; i < nums.length; i++) {
            // å¦‚æœå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œåˆ™è·³è¿‡ï¼Œä»¥é¿å…é‡å¤çš„ä¸‰å…ƒç»„
            if (i > 0 && nums[i] == nums[i - 1]) {
                continue;
            }
            // åˆå§‹åŒ–jå’Œk
            j = i + 1;
            k = nums.length - 1;
            // ä½¿ç”¨åŒæŒ‡é’ˆæŠ€æœ¯å¯»æ‰¾ä¸‰å…ƒç»„
            while (j < k) {
                // å¦‚æœä¸‰ä¸ªæ•°çš„å’Œä¸º0ï¼Œæ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
                if (nums[i] + nums[j] + nums[k] == 0) {
                    resultList.add(Arrays.asList(nums[i], nums[j], nums[k]));
                    // ç§»åŠ¨æŒ‡é’ˆï¼Œç»§ç»­å¯»æ‰¾ä¸‹ä¸€ç»„ä¸‰å…ƒç»„
                    k--;
                    j++;
                    // è·³è¿‡é‡å¤çš„å…ƒç´ ï¼Œé¿å…é‡å¤çš„ä¸‰å…ƒç»„
                    while (j < k && nums[j] == nums[j - 1]) {
                        j++;
                    }
                    while (j < k && nums[k] == nums[k + 1]) {
                        k--;
                    }
                } else if (nums[i] + nums[j] + nums[k] < 0) {
                    // å¦‚æœä¸‰ä¸ªæ•°çš„å’Œå°äº0ï¼ŒjæŒ‡é’ˆå³ç§»ä»¥å¢åŠ å’Œçš„å€¼
                    j++;
                } else {
                    // å¦‚æœä¸‰ä¸ªæ•°çš„å’Œå¤§äº0ï¼ŒkæŒ‡é’ˆå·¦ç§»ä»¥å‡å°å’Œçš„å€¼
                    k--;
                }
            }
        }
        // è¿”å›ç»“æœåˆ—è¡¨
        return resultList;
    }
}
```

### 18.å››æ•°ä¹‹å’Œ

ç»™ä½ ä¸€ä¸ªç”± `n` ä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„ `nums` ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ `target` ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ»¡è¶³ä¸‹è¿°å…¨éƒ¨æ¡ä»¶ä¸”**ä¸é‡å¤**çš„å››å…ƒç»„ `[nums[a], nums[b], nums[c], nums[d]]` ï¼ˆè‹¥ä¸¤ä¸ªå››å…ƒç»„å…ƒç´ ä¸€ä¸€å¯¹åº”ï¼Œåˆ™è®¤ä¸ºä¸¤ä¸ªå››å…ƒç»„é‡å¤ï¼‰ï¼š

- `0 <= a, b, c, d < n`
- `a`ã€`b`ã€`c` å’Œ `d` **äº’ä¸ç›¸åŒ**
- `nums[a] + nums[b] + nums[c] + nums[d] == target`

ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆ ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,0,-1,0,-2,2], target = 0
è¾“å‡ºï¼š[[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [2,2,2,2,2], target = 8
è¾“å‡ºï¼š[[2,2,2,2]]
```

```java
class Solution {
    /**
     * å¯»æ‰¾æ•°ç»„ä¸­å››æ•°ä¹‹å’Œç­‰äºç‰¹å®šç›®æ ‡å€¼çš„å››å…ƒç»„
     * 
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @param target ç›®æ ‡å€¼
     * @return ç¬¦åˆæ¡ä»¶çš„å››å…ƒç»„çš„åˆ—è¡¨
     */
    public List<List<Integer>> fourSum(int[] nums, int target) {
        // åˆå§‹åŒ–ç»“æœåˆ—è¡¨
        List<List<Integer>> resultList = new ArrayList<>();
        // å¦‚æœæ•°ç»„é•¿åº¦å°äº4ï¼Œç›´æ¥è¿”å›ç©ºç»“æœ
        if (nums.length < 4) {
            return resultList;
        }
        // å¯¹æ•°ç»„è¿›è¡Œæ’åº
        Arrays.sort(nums);
        // åˆå§‹åŒ–æŒ‡é’ˆkå’Œl
        int k, l;

        // éå†æ•°ç»„ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªæ•°
        for (int i = 0; i < nums.length; i++) {
            // é¿å…é‡å¤è®¡ç®—ï¼Œè·³è¿‡ç›¸åŒçš„æ•°
            if (i > 0 && nums[i] == nums[i - 1]) {
                continue;
            }
            // éå†å‰©ä½™æ•°ç»„ï¼Œä½œä¸ºç¬¬äºŒä¸ªæ•°
            for (int j = i + 1; j < nums.length; j++) {
                // é¿å…é‡å¤è®¡ç®—ï¼Œè·³è¿‡ç›¸åŒçš„æ•°
                if (j > i + 1 && nums[j] == nums[j - 1]) {
                    continue;
                }
                // åˆå§‹åŒ–æŒ‡é’ˆkï¼ˆç¬¬ä¸‰ä¸ªæ•°çš„èµ·å§‹ä½ç½®ï¼‰å’Œlï¼ˆç¬¬å››ä¸ªæ•°çš„ä½ç½®ï¼‰
                k = j + 1;
                l = nums.length - 1;
                // ä½¿ç”¨åŒæŒ‡é’ˆå¯»æ‰¾ç¬¦åˆæ¡ä»¶çš„æ•°å¯¹
                while (k < l) {
                    // å½“æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å››æ•°ä¹‹å’Œæ—¶
                    if ((long)nums[i] + nums[j] + nums[k] + nums[l] == target) {
                        // å°†ç»“æœæ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
                        resultList.add(Arrays.asList(nums[i], nums[j], nums[k], nums[l]));
                        // ç§»åŠ¨æŒ‡é’ˆï¼Œç»§ç»­å¯»æ‰¾ä¸‹ä¸€ç»„æ•°
                        k++;
                        l--;
                        // é¿å…é‡å¤ç»“æœï¼Œè·³è¿‡ç›¸åŒçš„æ•°
                        while (k < l && nums[k] == nums[k - 1]) {
                            k++;
                        }
                        while (k < l && nums[l] == nums[l + 1]) {
                            l--;
                        }
                    } else if (nums[i] + nums[j] + nums[k] + nums[l] < target) {
                        // å¦‚æœå’Œå°äºç›®æ ‡å€¼ï¼Œç§»åŠ¨kæŒ‡é’ˆä»¥å¢å¤§å’Œ
                        k++;
                    } else {
                        // å¦‚æœå’Œå¤§äºç›®æ ‡å€¼ï¼Œç§»åŠ¨læŒ‡é’ˆä»¥å‡å°å’Œ
                        l--;
                    }
                }
            }
        }
        // è¿”å›ç»“æœåˆ—è¡¨
        return resultList;
    }
}

```

### 49.å­—æ¯å¼‚ä½è¯åˆ†ç»„ï¼ˆhot100ï¼‰ï¼ˆ3.21ï¼‰

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¯·ä½ å°† **å­—æ¯å¼‚ä½è¯** ç»„åˆåœ¨ä¸€èµ·ã€‚å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç»“æœåˆ—è¡¨ã€‚

**å­—æ¯å¼‚ä½è¯** æ˜¯ç”±é‡æ–°æ’åˆ—æºå•è¯çš„æ‰€æœ‰å­—æ¯å¾—åˆ°çš„ä¸€ä¸ªæ–°å•è¯ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: strs = ["eat", "tea", "tan", "ate", "nat", "bat"]
è¾“å‡º: [["bat"],["nat","tan"],["ate","eat","tea"]]
```

```java
class Solution {
    /**
     * å°†å­—ç¬¦ä¸²æ•°ç»„æŒ‰å­—æ¯å¼‚ä½è¯åˆ†ç»„
     * å­—æ¯å¼‚ä½è¯ç”±é‡æ–°æ’åˆ—æºå•è¯çš„å­—æ¯å½¢æˆçš„å•è¯ï¼Œæ‰€æœ‰å­—æ¯çš„ç±»å‹å’Œæ•°é‡éƒ½ç›¸åŒ
     * 
     * @param strs å­—ç¬¦ä¸²æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«å¯èƒ½çš„å­—æ¯å¼‚ä½è¯
     * @return è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«ç»™å®šå­—ç¬¦ä¸²æ•°ç»„åˆ†ç»„åçš„å­—æ¯å¼‚ä½è¯
     */
    public List<List<String>> groupAnagrams(String[] strs) {
        // åˆå§‹åŒ–ç»“æœåˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨åˆ†ç»„åçš„å­—æ¯å¼‚ä½è¯
        List<List<String>> resultlist = new ArrayList<>();
        // åˆå§‹åŒ–è¾…åŠ©å“ˆå¸Œè¡¨ï¼Œç”¨äºåœ¨å­—æ¯å¼‚ä½è¯åˆ†ç»„æ—¶å­˜å‚¨ä¸­é—´ç»“æœ
        HashMap<String, List<String>> auxiliaryMap = new HashMap<>();
        
        // éå†è¾“å…¥çš„å­—ç¬¦ä¸²æ•°ç»„
        for (int i = 0; i < strs.length; i++) {
            // å°†å½“å‰å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„å¹¶æ’åºï¼Œä»¥ä¾¿æ‰¾åˆ°å­—æ¯å¼‚ä½è¯çš„é”®å€¼
            char[] tempCharArray = strs[i].toCharArray();
            Arrays.sort(tempCharArray);
            // å°†æ’åºåçš„å­—ç¬¦æ•°ç»„è½¬æ¢å›å­—ç¬¦ä¸²ï¼Œä½œä¸ºå“ˆå¸Œè¡¨ä¸­çš„é”®
            String key = String.valueOf(tempCharArray);
            // ä»è¾…åŠ©å“ˆå¸Œè¡¨ä¸­è·å–ä¸å½“å‰é”®å¯¹åº”çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨
            List<String> auxiliaryList = auxiliaryMap.getOrDefault(key, new ArrayList<>());
            // å°†å½“å‰å­—ç¬¦ä¸²æ·»åŠ åˆ°å¯¹åº”çš„åˆ—è¡¨ä¸­
            auxiliaryList.add(strs[i]);
            // æ›´æ–°è¾…åŠ©å“ˆå¸Œè¡¨ï¼Œå°†å½“å‰å­—ç¬¦ä¸²æ·»åŠ åˆ°å¯¹åº”çš„åˆ—è¡¨ä¸­
            auxiliaryMap.put(key, auxiliaryList);
        }
        
        // å°†è¾…åŠ©å“ˆå¸Œè¡¨ä¸­çš„æ‰€æœ‰å€¼åˆ—è¡¨æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
        for (List<String> list : auxiliaryMap.values()) {
            resultlist.add(list);
        }
        
        // è¿”å›æœ€ç»ˆçš„ç»“æœåˆ—è¡¨
        return resultlist;
    }
}
```

### 128.æœ€é•¿è¿ç»­åºåˆ—ï¼ˆhot100ï¼‰ï¼ˆ3.21ï¼‰

ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾å‡ºæ•°å­—è¿ç»­çš„æœ€é•¿åºåˆ—ï¼ˆä¸è¦æ±‚åºåˆ—å…ƒç´ åœ¨åŸæ•°ç»„ä¸­è¿ç»­ï¼‰çš„é•¿åº¦ã€‚

è¯·ä½ è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [100,4,200,1,3,2]
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿æ•°å­—è¿ç»­åºåˆ—æ˜¯ [1, 2, 3, 4]ã€‚å®ƒçš„é•¿åº¦ä¸º 4ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0,3,7,2,5,8,4,6,0,1]
è¾“å‡ºï¼š9
```

**è¾ƒä¸ºæ…¢ï¼Œæ—¶é—´å¤æ‚åº¦ä½†ä»ç„¶æ˜¯O(n)**

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¡ç®—æ•°ç»„ä¸­è¿ç»­æ•°å­—çš„æœ€å¤§é•¿åº¦
    public int longestConsecutive(int[] nums) {
        // åˆ›å»ºä¸€ä¸ªHashSetï¼Œç”¨äºå­˜å‚¨æ•°ç»„ä¸­çš„æ•°å­—
        HashSet<Integer> auxiliarySet = new HashSet<>();
        // éå†æ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„æ•°å­—æ·»åŠ åˆ°HashSetä¸­
        for (int num : nums) {
            auxiliarySet.add(num);
        }

        // å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç”¨äºå­˜å‚¨è¿ç»­æ•°å­—çš„æœ€å¤§é•¿åº¦
        int maxContinuousCount =0;
        // å†æ¬¡éå†æ•°ç»„
        for (int num : nums) {
            // å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç”¨äºå­˜å‚¨å½“å‰è¿ç»­æ•°å­—çš„é•¿åº¦
            int count = 1;
            // å¦‚æœå½“å‰æ•°å­—çš„å‰ä¸€ä¸ªæ•°å­—ä¸åœ¨HashSetä¸­ï¼Œè¯´æ˜å½“å‰æ•°å­—æ˜¯è¿ç»­æ•°å­—çš„èµ·å§‹æ•°å­—
            if (!auxiliarySet.contains(num - 1)) {
                // å¾ªç¯éå†HashSetï¼Œæ‰¾åˆ°å½“å‰æ•°å­—çš„åä¸€ä¸ªæ•°å­—ï¼Œå¹¶å¢åŠ è¿ç»­æ•°å­—çš„é•¿åº¦
                while (auxiliarySet.contains(++num)) {
                    count++;
                }
                // æ›´æ–°è¿ç»­æ•°å­—çš„æœ€å¤§é•¿åº¦
                maxContinuousCount = Math.max(maxContinuousCount, count);
            }
        }
        // è¿”å›è¿ç»­æ•°å­—çš„æœ€å¤§é•¿åº¦
        return maxContinuousCount;
    }
}
```

ä¼˜åŒ–ï¼Œå°†ç¬¬äºŒæ¬¡éå†è½¬åŒ–ä¸ºå¯¹Setçš„éå†ï¼Œæ”¹ä¸€è¡Œä»£ç ï¼Œå¿«10å€ä¸æ­¢ï¼ˆsetå»é™¤äº†å¤§é‡é‡å¤å…ƒç´ ï¼‰ã€‚

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¡ç®—æ•°ç»„ä¸­è¿ç»­æ•°å­—çš„æœ€å¤§é•¿åº¦
    public int longestConsecutive(int[] nums) {
        // åˆ›å»ºä¸€ä¸ªHashSetï¼Œç”¨äºå­˜å‚¨æ•°ç»„ä¸­çš„æ•°å­—
        HashSet<Integer> auxiliarySet = new HashSet<>();
        // éå†æ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„æ•°å­—æ·»åŠ åˆ°HashSetä¸­
        for (int num : nums) {
            auxiliarySet.add(num);
        }

        // å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç”¨äºå­˜å‚¨è¿ç»­æ•°å­—çš„æœ€å¤§é•¿åº¦
        int maxContinuousCount =0;
        // éå†HashSetä¸­çš„æ•°å­—
        for (int num : auxiliarySet) {
            // å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç”¨äºå­˜å‚¨å½“å‰è¿ç»­æ•°å­—çš„é•¿åº¦
            int count = 1;
            // å¦‚æœå½“å‰æ•°å­—çš„å‰ä¸€ä¸ªæ•°å­—ä¸åœ¨HashSetä¸­ï¼Œè¯´æ˜å½“å‰æ•°å­—æ˜¯è¿ç»­æ•°å­—çš„èµ·å§‹æ•°å­—
            if (!auxiliarySet.contains(num - 1)) {
                // å¾ªç¯éå†HashSetä¸­çš„æ•°å­—ï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ªä¸åœ¨HashSetä¸­çš„æ•°å­—
                while (auxiliarySet.contains(++num)) {
                    // æ¯æ¬¡é‡åˆ°ä¸€ä¸ªåœ¨HashSetä¸­çš„æ•°å­—ï¼Œè¿ç»­æ•°å­—çš„é•¿åº¦åŠ 1
                    count++;
                }
                // æ›´æ–°è¿ç»­æ•°å­—çš„æœ€å¤§é•¿åº¦
                maxContinuousCount = Math.max(maxContinuousCount, count);
            }
        }
        // è¿”å›è¿ç»­æ•°å­—çš„æœ€å¤§é•¿åº¦
        return maxContinuousCount;
    }
}
```



### 621.ä»»åŠ¡è°ƒåº¦å™¨ï¼ˆhot100ï¼‰(3.27)

ç»™ä½ ä¸€ä¸ªç”¨å­—ç¬¦æ•°ç»„ `tasks` è¡¨ç¤ºçš„ CPU éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ï¼Œç”¨å­—æ¯ A åˆ° Z è¡¨ç¤ºï¼Œä»¥åŠä¸€ä¸ªå†·å´æ—¶é—´ `n`ã€‚æ¯ä¸ªå‘¨æœŸæˆ–æ—¶é—´é—´éš”å…è®¸å®Œæˆä¸€é¡¹ä»»åŠ¡ã€‚ä»»åŠ¡å¯ä»¥æŒ‰ä»»ä½•é¡ºåºå®Œæˆï¼Œä½†æœ‰ä¸€ä¸ªé™åˆ¶ï¼šä¸¤ä¸ª **ç›¸åŒç§ç±»** çš„ä»»åŠ¡ä¹‹é—´å¿…é¡»æœ‰é•¿åº¦ä¸º `n` çš„å†·å´æ—¶é—´ã€‚

è¿”å›å®Œæˆæ‰€æœ‰ä»»åŠ¡æ‰€éœ€è¦çš„ **æœ€çŸ­æ—¶é—´é—´éš”** ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼štasks = ["A","A","A","B","B","B"], n = 2
è¾“å‡ºï¼š8
è§£é‡Šï¼šA -> B -> (å¾…å‘½) -> A -> B -> (å¾…å‘½) -> A -> B
     åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ªç›¸åŒç±»å‹ä»»åŠ¡ä¹‹é—´å¿…é¡»é—´éš”é•¿åº¦ä¸º n = 2 çš„å†·å´æ—¶é—´ï¼Œè€Œæ‰§è¡Œä¸€ä¸ªä»»åŠ¡åªéœ€è¦ä¸€ä¸ªå•ä½æ—¶é—´ï¼Œæ‰€ä»¥ä¸­é—´å‡ºç°äº†ï¼ˆå¾…å‘½ï¼‰çŠ¶æ€ã€‚ 
```



```java
class Solution {
    // è®¡ç®—ä»»åŠ¡è°ƒåº¦å™¨æ‰§è¡Œä»»åŠ¡çš„æœ€å°æ—¶é—´
    public int leastInterval(char[] tasks, int n) {
        // åˆ›å»ºä¸€ä¸ªæ•°ç»„ cnt æ¥ç»Ÿè®¡æ¯ç§ä»»åŠ¡å‡ºç°çš„æ¬¡æ•°
        int[] cnt = new int[26];
        // éå†ä»»åŠ¡åˆ—è¡¨ï¼Œå¯¹æ¯ä¸ªä»»åŠ¡å­—ç¬¦è¿›è¡Œè®¡æ•°
        for (char t : tasks) {
            cnt[t - 'A']++;  // ä½¿ç”¨ t - 'A' å¾—åˆ°ä»»åŠ¡å¯¹åº”çš„ç´¢å¼•ï¼Œå¢åŠ è¯¥ä»»åŠ¡çš„è®¡æ•°
        }

        // å°†ä»»åŠ¡å‡ºç°æ¬¡æ•°è¿›è¡Œæ’åºï¼Œä»å°åˆ°å¤§æ’åˆ—
        Arrays.sort(cnt);

        // è®¡ç®—æœ€å¤§ä»»åŠ¡çš„é—´éš”æ•°ï¼ˆæœ€å¤§ä»»åŠ¡æ¬¡æ•° - 1ï¼‰å’Œç©ºé—²æ—¶é—´
        int mx = cnt[25] - 1;  // æœ€å¸¸è§çš„ä»»åŠ¡å‡ºç°æ¬¡æ•°å‡å» 1ï¼Œè¡¨ç¤ºå‰©ä½™éœ€è¦å¡«å……çš„é—´éš”
        int idle = mx * n;      // é—´éš”æ•°ä¹˜ä»¥å†·å´æ—¶é—´ nï¼Œå¾—åˆ°æ€»çš„ç©ºé—²æ—¶é—´

        // éå†æ‰€æœ‰å…¶ä»–ä»»åŠ¡ï¼Œå°è¯•å‡å°‘ç©ºé—²æ—¶é—´
        // ä»ç´¢å¼• 24 å¼€å§‹ï¼Œå› ä¸ºç´¢å¼• 25 æ˜¯ä»»åŠ¡å‡ºç°æœ€å¤šçš„ä»»åŠ¡
        for (int i = 24; i >= 0; i--) {
            // å¦‚æœå½“å‰ä»»åŠ¡çš„æ•°é‡å¤§äºé›¶ï¼Œå°½é‡å‡å°‘ç©ºé—²æ—¶é—´
            idle -= Math.min(cnt[i], mx);  // ç”¨å½“å‰ä»»åŠ¡çš„æ•°é‡å’Œæœ€å¤§ä»»åŠ¡æ•°é‡ï¼ˆmxï¼‰çš„æœ€å°å€¼æ¥å¡«å……ç©ºé—²æ—¶é—´
        }

        // å¦‚æœæœ‰å‰©ä½™çš„ç©ºé—²æ—¶é—´ï¼ˆå³ç©ºé—²æ—¶é—´å¤§äº 0ï¼‰ï¼Œåˆ™éœ€è¦é¢å¤–çš„æ—¶é—´æ¥å¡«å……è¿™äº›ç©ºé—²æ—¶é—´
        // å¦åˆ™ï¼Œä»»åŠ¡æ‰§è¡Œæ—¶é—´å°±æ˜¯ä»»åŠ¡æ€»æ•°
        return idle > 0 ? idle + tasks.length : tasks.length;
    }
}

```





# å­—ç¬¦ä¸²

### 344.åè½¬å­—ç¬¦ä¸²

ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ `s` çš„å½¢å¼ç»™å‡ºã€‚

ä¸è¦ç»™å¦å¤–çš„æ•°ç»„åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡»**[åŸåœ°](https://baike.baidu.com/item/åŸåœ°ç®—æ³•)ä¿®æ”¹è¾“å…¥æ•°ç»„**ã€ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸€é—®é¢˜ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = ["h","e","l","l","o"]
è¾“å‡ºï¼š["o","l","l","e","h"]
```

```java
// å®šä¹‰ä¸€ä¸ªåä¸ºSolutionçš„ç±»
class Solution {
    // å®šä¹‰ä¸€ä¸ªåä¸ºreverseStringçš„å…¬å…±æ–¹æ³•ï¼Œå‚æ•°ä¸ºå­—ç¬¦æ•°ç»„s
    public void reverseString(char[] s) {
        // å®šä¹‰æ•´å‹å˜é‡leftå¹¶èµ‹å€¼ä¸º0
        int left = 0;
        // å®šä¹‰æ•´å‹å˜é‡rightå¹¶èµ‹å€¼ä¸ºsçš„é•¿åº¦å‡1
        int right = s.length - 1;
        // å½“leftå°äºrightæ—¶æ‰§è¡Œå¾ªç¯
        while(left < right) {
            // å®šä¹‰å­—ç¬¦å‹å˜é‡tempå¹¶èµ‹å€¼ä¸ºs[left]
            char temp = s[left];
            // å°†s[left]èµ‹å€¼ä¸ºs[right]
            s[left] = s[right];
            // å°†s[right]èµ‹å€¼ä¸ºtemp
            s[right] = temp;
            // leftè‡ªå¢1
            left++;
            // rightè‡ªå‡1
            right--;
        }
    }
}
```

### 541.åè½¬å­—ç¬¦ä¸²II

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªæ•´æ•° `k`ï¼Œä»å­—ç¬¦ä¸²å¼€å¤´ç®—èµ·ï¼Œæ¯è®¡æ•°è‡³ `2k` ä¸ªå­—ç¬¦ï¼Œå°±åè½¬è¿™ `2k` å­—ç¬¦ä¸­çš„å‰ `k` ä¸ªå­—ç¬¦ã€‚

- å¦‚æœå‰©ä½™å­—ç¬¦å°‘äº `k` ä¸ªï¼Œåˆ™å°†å‰©ä½™å­—ç¬¦å…¨éƒ¨åè½¬ã€‚
- å¦‚æœå‰©ä½™å­—ç¬¦å°äº `2k` ä½†å¤§äºæˆ–ç­‰äº `k` ä¸ªï¼Œåˆ™åè½¬å‰ `k` ä¸ªå­—ç¬¦ï¼Œå…¶ä½™å­—ç¬¦ä¿æŒåŸæ ·ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "abcdefg", k = 2
è¾“å‡ºï¼š"bacdfeg"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "abcd", k = 2
è¾“å‡ºï¼š"bacd"
```

```java
class Solution {
    /**
     * åè½¬å­—ç¬¦ä¸²sä¸­æ¯2kä¸ªå­—ç¬¦çš„å‰kä¸ªå­—ç¬¦
     * 
     * @param s è¾“å…¥çš„å­—ç¬¦ä¸²
     * @param k æ¯2kä¸ªå­—ç¬¦ä¸­è¦åè½¬çš„å­—ç¬¦æ•°é‡
     * @return åè½¬åçš„å­—ç¬¦ä¸²
     */
    public String reverseStr(String s, int k) {
        // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„ï¼Œä¾¿äºé€ä¸ªå­—ç¬¦æ“ä½œ
        char[] str = s.toCharArray();
        // è®¡ç®—å®Œæ•´å‘¨æœŸçš„æ•°é‡ï¼Œæ¯ä¸ªå‘¨æœŸåŒ…å«2kä¸ªå­—ç¬¦
        int numberOfCycles = str.length / (2 * k);
        // éå†æ¯ä¸ªå®Œæ•´å‘¨æœŸï¼Œå¯¹æ¯ä¸ªå‘¨æœŸçš„å‰kä¸ªå­—ç¬¦è¿›è¡Œåè½¬
        for (int i = 0; i < numberOfCycles; i++) {
            reverseString(str, i * 2 * k, i * 2 * k + k - 1);
        }
        // å¦‚æœå‰©ä½™å­—ç¬¦æ•°é‡å¤§äºç­‰äºkï¼Œå¯¹æœ€åä¸€ä¸ªå‘¨æœŸçš„å‰kä¸ªå­—ç¬¦è¿›è¡Œåè½¬
        if (str.length % (2 * k) >= k) {
            reverseString(str, numberOfCycles * 2 * k, numberOfCycles * 2 * k + k - 1);
        } else {
            // å¦åˆ™ï¼Œå¯¹å‰©ä½™çš„æ‰€æœ‰å­—ç¬¦è¿›è¡Œåè½¬
            reverseString(str, numberOfCycles * 2 * k, str.length - 1);
        }
        // å°†å­—ç¬¦æ•°ç»„è½¬æ¢å›å­—ç¬¦ä¸²å¹¶è¿”å›
        return String.valueOf(str);
    }

    /**
     * è¾…åŠ©å‡½æ•°ï¼šåè½¬æŒ‡å®šä½ç½®ä¹‹é—´çš„å­—ç¬¦
     * 
     * @param s   å¾…æ“ä½œçš„å­—ç¬¦æ•°ç»„
     * @param left å·¦è¾¹ç•Œä½ç½®
     * @param right å³è¾¹ç•Œä½ç½®
     */
    void reverseString(char[] s, int left, int right) {
        // ä½¿ç”¨åŒæŒ‡é’ˆæŠ€æœ¯ä»ä¸¤ç«¯äº¤æ¢å­—ç¬¦ï¼Œç›´åˆ°å·¦æŒ‡é’ˆå¤§äºç­‰äºå³æŒ‡é’ˆ
        while (left < right) {
            char tempChar = s[left];
            s[left] = s[right];
            s[right] = tempChar;
            left++;
            right--;
        }
    }
}
```

### ï¼ˆä»£ç éšæƒ³å½•è‡ªåˆ›ï¼‰æ›¿æ¢æ•°å­—

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œå®ƒåŒ…å«å°å†™å­—æ¯å’Œæ•°å­—å­—ç¬¦ï¼Œè¯·ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ä¸­çš„å­—æ¯å­—ç¬¦ä¿æŒä¸å˜ï¼Œè€Œå°†æ¯ä¸ªæ•°å­—å­—ç¬¦æ›¿æ¢ä¸ºnumberã€‚

ä¾‹å¦‚ï¼Œå¯¹äºè¾“å…¥å­—ç¬¦ä¸² "a1b2c3"ï¼Œå‡½æ•°åº”è¯¥å°†å…¶è½¬æ¢ä¸º "anumberbnumbercnumber"ã€‚

å¯¹äºè¾“å…¥å­—ç¬¦ä¸² "a5b"ï¼Œå‡½æ•°åº”è¯¥å°†å…¶è½¬æ¢ä¸º "anumberb"

è¾“å…¥ï¼šä¸€ä¸ªå­—ç¬¦ä¸² s,s ä»…åŒ…å«å°å†™å­—æ¯å’Œæ•°å­—å­—ç¬¦ã€‚

è¾“å‡ºï¼šæ‰“å°ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­æ¯ä¸ªæ•°å­—å­—ç¬¦éƒ½è¢«æ›¿æ¢ä¸ºäº†number

æ ·ä¾‹è¾“å…¥ï¼ša1b2c3

æ ·ä¾‹è¾“å‡ºï¼šanumberbnumbercnumber

æ•°æ®èŒƒå›´ï¼š1 <= s.length < 10000ã€‚

ä¸ç”¨æ¥å£ï¼š

```java
class Solution {
    public String replaceNum(String s) {
        int len = s.length();
        for (int i = 0; i < s.length(); i++) {
            if (s.charAt(i) >= '0' && s.charAt(i) <= '9') {
                len = len + 5;
            }
        }
        char[] result = new char[len];
        char[] strArray = s.toCharArray();

        for (int i = 0; i < strArray.length; i++) {
            result[i] = strArray[i];
        }

        for (int i = strArray.length - 1, j = result.length - 1; i >= 0; i--) {
            if ((result[i] >= '0') && (result[i] <= '9')) {
                result[j--] = 'r';
                result[j--] = 'e';
                result[j--] = 'b';
                result[j--] = 'm';
                result[j--] = 'u';
                result[j--] = 'n';
            } else {
                result[j--] = result[i];
            }
        }

        return new String(result);
    }
}
```

ç”¨æ¥å£ï¼Œä¸è¦é‡å¤é€ è½®å­ï¼Œ**è®°ä¸‹é¢è¿™ä¸ªè¿™ä¸ª**

```java
class Solution1 {
    /**
     * æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„æ•°å­—å­—ç¬¦
     *
     * @param s è¾“å…¥çš„å­—ç¬¦ä¸²ï¼ŒåªåŒ…å«å°å†™å­—æ¯å’Œæ•°å­—å­—ç¬¦
     * @return æ–°çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­æ¯ä¸ªæ•°å­—å­—ç¬¦éƒ½è¢«æ›¿æ¢ä¸º "number"
     */
    public String replaceNum(String s) {
        // ä½¿ç”¨ StringBuilder æ¥æ„å»ºæ–°çš„å­—ç¬¦ä¸²
        StringBuilder sb = new StringBuilder();
        
        // éå†è¾“å…¥å­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªå­—ç¬¦
        for (int i = 0; i < s.length(); i++) {
            // å¦‚æœå½“å‰å­—ç¬¦æ˜¯æ•°å­—ï¼Œåˆ™è¿½åŠ  "number"
            if (s.charAt(i) >= '0' && s.charAt(i) <= '9') {
                sb.append("number");
            } else {
                // å¦åˆ™ç›´æ¥è¿½åŠ åŸå­—ç¬¦
                sb.append(s.charAt(i));
            }
        }

        // è¿”å›æ„é€ çš„æ–°å­—ç¬¦ä¸²
        return sb.toString();
    }
}
```

### ï¼ˆä»£ç éšæƒ³å½•è‡ªåˆ›ï¼‰å³æ—‹å­—ç¬¦ä¸²

å­—ç¬¦ä¸²çš„å³æ—‹è½¬æ“ä½œæ˜¯æŠŠå­—ç¬¦ä¸²å°¾éƒ¨çš„è‹¥å¹²ä¸ªå­—ç¬¦è½¬ç§»åˆ°å­—ç¬¦ä¸²çš„å‰é¢ã€‚ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªæ­£æ•´æ•° kï¼Œè¯·ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ä¸­çš„åé¢ k ä¸ªå­—ç¬¦ç§»åˆ°å­—ç¬¦ä¸²çš„å‰é¢ï¼Œå®ç°å­—ç¬¦ä¸²çš„å³æ—‹è½¬æ“ä½œã€‚

ä¾‹å¦‚ï¼Œå¯¹äºè¾“å…¥å­—ç¬¦ä¸² "abcdefg" å’Œæ•´æ•° 2ï¼Œå‡½æ•°åº”è¯¥å°†å…¶è½¬æ¢ä¸º "fgabcde"ã€‚

è¾“å…¥ï¼šè¾“å…¥å…±åŒ…å«ä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ­£æ•´æ•° kï¼Œä»£è¡¨å³æ—‹è½¬çš„ä½æ•°ã€‚ç¬¬äºŒè¡Œä¸ºå­—ç¬¦ä¸² sï¼Œä»£è¡¨éœ€è¦æ—‹è½¬çš„å­—ç¬¦ä¸²ã€‚

è¾“å‡ºï¼šè¾“å‡ºå…±ä¸€è¡Œï¼Œä¸ºè¿›è¡Œäº†å³æ—‹è½¬æ“ä½œåçš„å­—ç¬¦ä¸²ã€‚

æ ·ä¾‹è¾“å…¥ï¼š

```text
2
abcdefg 
```

æ ·ä¾‹è¾“å‡ºï¼š

```text
fgabcde
```

æ•°æ®èŒƒå›´ï¼š1 <= k < 10000, 1 <= s.length < 10000;

```java
class Solution {
    /**
     * æ‰§è¡Œå­—ç¬¦ä¸²çš„å³æ—‹è½¬æ“ä½œ
     * @param s è¦æ—‹è½¬çš„å­—ç¬¦ä¸²
     * @param num å³æ—‹è½¬çš„ä½æ•°
     * @return æ—‹è½¬åçš„å­—ç¬¦ä¸²
     */
    public String RightRotateStr(String s, int num) {
        // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„ï¼Œä¾¿äºæ“ä½œ
        char[] str = s.toCharArray();
        
        // æ­¥éª¤1ï¼šç¿»è½¬æ•´ä¸ªå­—ç¬¦ä¸²
        reverse(str, 0, str.length - 1);
        
        // æ­¥éª¤2ï¼šç¿»è½¬å‰numä¸ªå­—ç¬¦ï¼ˆåŸå­—ç¬¦ä¸²çš„æœ€ånumä¸ªå­—ç¬¦ï¼‰
        reverse(str, 0, num - 1);
        
        // æ­¥éª¤3ï¼šç¿»è½¬å‰©ä½™çš„å­—ç¬¦
        reverse(str, num, str.length - 1);
        
        // å°†å¤„ç†åçš„å­—ç¬¦æ•°ç»„è½¬æ¢å›å­—ç¬¦ä¸²å¹¶è¿”å›
        return String.valueOf(str);
    }
    
    /**
     * ç¿»è½¬å­—ç¬¦æ•°ç»„ä¸­æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦
     * @param chars è¦æ“ä½œçš„å­—ç¬¦æ•°ç»„
     * @param left è¦ç¿»è½¬çš„èµ·å§‹ç´¢å¼•ï¼ˆåŒ…å«ï¼‰
     * @param right è¦ç¿»è½¬çš„ç»“æŸç´¢å¼•ï¼ˆåŒ…å«ï¼‰
     */
    private void reverse(char[] chars, int left, int right) {
        char charTemp;
        // ä½¿ç”¨åŒæŒ‡é’ˆæ³•è¿›è¡Œç¿»è½¬
        while (left < right) {
            // äº¤æ¢leftå’ŒrightæŒ‡å‘çš„å­—ç¬¦
            charTemp = chars[left];
            chars[left] = chars[right];
            chars[right] = charTemp;
            // ç§»åŠ¨æŒ‡é’ˆ
            left++;
            right--;
        }
    }
}
```

### 151.ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ åè½¬å­—ç¬¦ä¸²ä¸­ **å•è¯** çš„é¡ºåºã€‚

**å•è¯** æ˜¯ç”±éç©ºæ ¼å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚`s` ä¸­ä½¿ç”¨è‡³å°‘ä¸€ä¸ªç©ºæ ¼å°†å­—ç¬¦ä¸²ä¸­çš„ **å•è¯** åˆ†éš”å¼€ã€‚

è¿”å› **å•è¯** é¡ºåºé¢ å€’ä¸” **å•è¯** ä¹‹é—´ç”¨å•ä¸ªç©ºæ ¼è¿æ¥çš„ç»“æœå­—ç¬¦ä¸²ã€‚

**æ³¨æ„ï¼š**è¾“å…¥å­—ç¬¦ä¸² `s`ä¸­å¯èƒ½ä¼šå­˜åœ¨å‰å¯¼ç©ºæ ¼ã€å°¾éšç©ºæ ¼æˆ–è€…å•è¯é—´çš„å¤šä¸ªç©ºæ ¼ã€‚è¿”å›çš„ç»“æœå­—ç¬¦ä¸²ä¸­ï¼Œå•è¯é—´åº”å½“ä»…ç”¨å•ä¸ªç©ºæ ¼åˆ†éš”ï¼Œä¸”ä¸åŒ…å«ä»»ä½•é¢å¤–çš„ç©ºæ ¼ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "the sky is blue"
è¾“å‡ºï¼š"blue is sky the"
```

```java
class Solution {
    /**
     * åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯
     * 
     * @param s è¾“å…¥çš„å­—ç¬¦ä¸²
     * @return åè½¬åçš„å­—ç¬¦ä¸²
     */
    public String reverseWords(String s) {
        // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„
        char[] str = s.toCharArray();
        // åˆå§‹åŒ–å·¦å³æŒ‡é’ˆ
        int left = 0, right = str.length - 1;
        // ç§»é™¤å‰å¯¼ç©ºæ ¼
        while (str[left] == ' ') {
            left++;
        }
        // ç§»é™¤å°¾éšç©ºæ ¼
        while (str[right] == ' ') {
            right--;
        }
        // å°†æ•´ä¸ªå­—ç¬¦ä¸²åè½¬
        reverseString(str, left, right);
        // ç§»é™¤å¤šä½™ç©ºæ ¼
        for (int i = left; i <= right; i++) {
            if (str[i] == ' ' && str[i] == str[i - 1]) {
                continue;
            }
            str[count++] = str[i];
        }
        // åè½¬æ¯ä¸ªå•è¯
        for (int i = 0, j = 0; i < count; i++) {
            if (str[i] == ' ') {
                reverseString(str, j, i - 1);
                j = i + 1;
            } else if (i == count - 1) {
                reverseString(str, j, i);
            }
        }
        // è¿”å›å¤„ç†åçš„å­—ç¬¦ä¸²
        return String.valueOf(str).substring(0, count);
    }

    /**
     * åè½¬å­—ç¬¦æ•°ç»„ä¸­æŒ‡å®šåŒºé—´çš„å­—ç¬¦
     * 
     * @param s å­—ç¬¦æ•°ç»„
     * @param left å·¦è¾¹ç•Œ
     * @param right å³è¾¹ç•Œ
     */
    void reverseString(char[] s, int left, int right) {
        // ä½¿ç”¨åŒæŒ‡é’ˆæŠ€æœ¯è¿›è¡Œåè½¬
        while (left < right) {
            char tempChar = s[left];
            s[left] = s[right];
            s[right] = tempChar;
            left++;
            right--;
        }
    }
}

```

### 28.æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡(KMP)(3.25)

ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² `haystack` å’Œ `needle` ï¼Œè¯·ä½ åœ¨ `haystack` å­—ç¬¦ä¸²ä¸­æ‰¾å‡º `needle` å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœ `needle` ä¸æ˜¯ `haystack` çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™è¿”å› `-1` ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šhaystack = "sadbutsad", needle = "sad"
è¾“å‡ºï¼š0
è§£é‡Šï¼š"sad" åœ¨ä¸‹æ ‡ 0 å’Œ 6 å¤„åŒ¹é…ã€‚
ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡æ˜¯ 0 ï¼Œæ‰€ä»¥è¿”å› 0 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šhaystack = "leetcode", needle = "leeto"
è¾“å‡ºï¼š-1
è§£é‡Šï¼š"leeto" æ²¡æœ‰åœ¨ "leetcode" ä¸­å‡ºç°ï¼Œæ‰€ä»¥è¿”å› -1 ã€‚
```

**æˆ‘çš„è¯„ä»·æ˜¯ï¼šKMPå°±æ˜¯çº¯èƒŒ**

```java
class Solution {
    /**
     * å®ç°å­—ç¬¦ä¸²çš„æŸ¥æ‰¾ç®—æ³•
     * è¯¥æ–¹æ³•ä½¿ç”¨KMPç®—æ³•æ¥æŸ¥æ‰¾å­—ç¬¦ä¸²haystackä¸­é¦–æ¬¡å‡ºç°å­å­—ç¬¦ä¸²needleçš„ç´¢å¼•
     * å¦‚æœæ‰¾åˆ°ï¼Œåˆ™è¿”å›é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ï¼›å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™è¿”å›-1
     *
     * @param haystack ä¸»å­—ç¬¦ä¸²ï¼Œå³æˆ‘ä»¬è¦åœ¨å…¶ä¸­æœç´¢needleçš„å­—ç¬¦ä¸²
     * @param needle   å­å­—ç¬¦ä¸²ï¼Œå³æˆ‘ä»¬è¦åœ¨haystackä¸­æœç´¢çš„å­—ç¬¦ä¸²
     * @return è¿”å›needleåœ¨haystackä¸­é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæœªæ‰¾åˆ°åˆ™è¿”å›-1
     */
    public int strStr(String haystack, String needle) {
        // è®¡ç®—needleçš„nextæ•°ç»„ï¼Œç”¨äºKMPç®—æ³•åŒ¹é…
        int[] next = new int[needle.length()];
        // iè¡¨ç¤ºå½“å‰å¤„ç†çš„needleå­—ç¬¦ç´¢å¼•ï¼Œjè¡¨ç¤ºä¹‹å‰åŒ¹é…çš„å­—ç¬¦æ•°é‡
        for (int i = 1, j = 0; i < needle.length(); i++) {
            // å½“åŒ¹é…çš„å­—ç¬¦æ•°é‡å¤§äº0ä¸”å½“å‰needleå­—ç¬¦ä¸ç­‰äºneedleçš„jç´¢å¼•å­—ç¬¦æ—¶ï¼Œå›é€€j
            while (j > 0 && needle.charAt(i) != needle.charAt(j)) {
                j = next[j - 1];
            }
            // å¦‚æœå½“å‰needleå­—ç¬¦å’Œneedleçš„jç´¢å¼•å­—ç¬¦ç›¸ç­‰ï¼Œjå¢åŠ 
            if (needle.charAt(i) == needle.charAt(j)) {
                j++;
            }
            // æ›´æ–°nextæ•°ç»„
            next[i] = j;
        }

        // ä½¿ç”¨KMPç®—æ³•åœ¨haystackä¸­æœç´¢needle
        for (int i = 0, j = 0; i < haystack.length(); i++) {
            // å½“åŒ¹é…çš„å­—ç¬¦æ•°é‡å¤§äº0ä¸”å½“å‰haystackå­—ç¬¦ä¸ç­‰äºneedleçš„jç´¢å¼•å­—ç¬¦æ—¶ï¼Œå›é€€j
            while (j > 0 && haystack.charAt(i) != needle.charAt(j)) {
                j = next[j - 1];
            }
            // å¦‚æœå½“å‰haystackå­—ç¬¦å’Œneedleçš„jç´¢å¼•å­—ç¬¦ç›¸ç­‰ï¼Œjå¢åŠ 
            if (haystack.charAt(i) == needle.charAt(j)) {
                j++;
            }
            // å¦‚æœjè¾¾åˆ°needleçš„é•¿åº¦ï¼Œè¯´æ˜æ‰¾åˆ°åŒ¹é…ï¼Œè¿”å›åŒ¹é…çš„èµ·å§‹ç´¢å¼•
            if (j == needle.length()) {
                return i - j + 1;
            }
        }

        // å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œè¿”å›-1
        return -1;
    }
}

```

### 459.é‡å¤çš„å­å­—ç¬¦ä¸²

ç»™å®šä¸€ä¸ªéç©ºçš„å­—ç¬¦ä¸² `s` ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥é€šè¿‡ç”±å®ƒçš„ä¸€ä¸ªå­ä¸²é‡å¤å¤šæ¬¡æ„æˆã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: s = "abab"
è¾“å‡º: true
è§£é‡Š: å¯ç”±å­ä¸² "ab" é‡å¤ä¸¤æ¬¡æ„æˆã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: s = "aba"
è¾“å‡º: false
```

```java
class Solution {
    /**
     * åˆ¤æ–­å­—ç¬¦ä¸²sæ˜¯å¦ç”±é‡å¤çš„å­å­—ç¬¦ä¸²æ„æˆ
     * é€šè¿‡å°†å­—ç¬¦ä¸²sæ‹¼æ¥è‡ªèº«ï¼Œç„¶åå»é™¤é¦–å°¾å­—ç¬¦ï¼Œæ£€æŸ¥å‰©ä½™å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åŸå­—ç¬¦ä¸²sæ¥å®ç°åˆ¤æ–­
     * è¿™ç§æ–¹æ³•åˆ©ç”¨äº†å­—ç¬¦ä¸²çš„æ€§è´¨å’ŒåŒ…å«å…³ç³»æ¥æ£€æµ‹é‡å¤æ¨¡å¼
     * 
     * @param s è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œç”¨äºæ£€æŸ¥æ˜¯å¦ç”±é‡å¤å­å­—ç¬¦ä¸²æ„æˆ
     * @return å¦‚æœå­—ç¬¦ä¸²sç”±é‡å¤çš„å­å­—ç¬¦ä¸²æ„æˆï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    public boolean repeatedSubstringPattern(String s) {
        // å°†å­—ç¬¦ä¸²sæ‹¼æ¥è‡ªèº«ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²str
        String str = s + s;
        // åˆ¤æ–­å»æ‰é¦–å°¾å­—ç¬¦åçš„stræ˜¯å¦åŒ…å«åŸå§‹å­—ç¬¦ä¸²sï¼Œè‹¥åŒ…å«åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false
        str = str.substring(1, str.length() - 1);
        return str.contains(s);
    }
}

```

### 438.æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„å­—æ¯å¼‚ä½è¯ï¼ˆhot100ï¼‰(4.1)

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `s` å’Œ `p`ï¼Œæ‰¾åˆ° `s` ä¸­æ‰€æœ‰ `p` çš„ **å¼‚ä½è¯** çš„å­ä¸²ï¼Œè¿”å›è¿™äº›å­ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚ä¸è€ƒè™‘ç­”æ¡ˆè¾“å‡ºçš„é¡ºåºã€‚

**å¼‚ä½è¯** æŒ‡ç”±ç›¸åŒå­—æ¯é‡æ’åˆ—å½¢æˆçš„å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ç›¸åŒçš„å­—ç¬¦ä¸²ï¼‰ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: s = "cbaebabacd", p = "abc"
è¾“å‡º: [0,6]
è§£é‡Š:
èµ·å§‹ç´¢å¼•ç­‰äº 0 çš„å­ä¸²æ˜¯ "cba", å®ƒæ˜¯ "abc" çš„å¼‚ä½è¯ã€‚
èµ·å§‹ç´¢å¼•ç­‰äº 6 çš„å­ä¸²æ˜¯ "bac", å®ƒæ˜¯ "abc" çš„å¼‚ä½è¯ã€‚
```

**ç¤ºä¾‹ 2:**

```java
è¾“å…¥: s = "abab", p = "ab"
è¾“å‡º: [0,1,2]
è§£é‡Š:
èµ·å§‹ç´¢å¼•ç­‰äº 0 çš„å­ä¸²æ˜¯ "ab", å®ƒæ˜¯ "ab" çš„å¼‚ä½è¯ã€‚
èµ·å§‹ç´¢å¼•ç­‰äº 1 çš„å­ä¸²æ˜¯ "ba", å®ƒæ˜¯ "ab" çš„å¼‚ä½è¯ã€‚
èµ·å§‹ç´¢å¼•ç­‰äº 2 çš„å­ä¸²æ˜¯ "ab", å®ƒæ˜¯ "ab" çš„å¼‚ä½è¯ã€‚
```

**æ»‘åŠ¨çª—å£**

```java
class Solution {
    // å¯»æ‰¾å­—ç¬¦ä¸²sä¸­æ‰€æœ‰pçš„å­—æ¯å¼‚ä½è¯çš„èµ·å§‹ç´¢å¼•
    public List<Integer> findAnagrams(String s, String p) {
        List<Integer> ans = new ArrayList<>(); // ç”¨äºå­˜å‚¨ç»“æœçš„åˆ—è¡¨
        if (s.length() < p.length()) { // å¦‚æœsçš„é•¿åº¦å°äºpçš„é•¿åº¦ï¼Œç›´æ¥è¿”å›ç©ºåˆ—è¡¨
            return ans;
        }
        int[] cnt1 = new int[26]; // ç”¨äºç»Ÿè®¡pä¸­å„å­—æ¯å‡ºç°æ¬¡æ•°çš„æ•°ç»„
        int[] cnt2 = new int[26]; // ç”¨äºç»Ÿè®¡sä¸­å½“å‰çª—å£å†…å„å­—æ¯å‡ºç°æ¬¡æ•°çš„æ•°ç»„
        for (int i = 0; i < p.length(); ++i) {
            ++cnt1[p.charAt(i) - 'a']; // ç»Ÿè®¡pä¸­å„å­—æ¯å‡ºç°æ¬¡æ•°
            ++cnt2[s.charAt(i) - 'a']; // ç»Ÿè®¡sä¸­å‰p.length()ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°
        }
        if (Arrays.equals(cnt1, cnt2)) { // å¦‚æœåˆå§‹çª—å£å†…på’Œsä¸­å„å­—æ¯å‡ºç°æ¬¡æ•°ç›¸åŒï¼ŒåŠ å…¥ç»“æœåˆ—è¡¨
            ans.add(0);
        }
        for (int i = p.length(); i < s.length(); ++i) {
            ++cnt2[s.charAt(i) - 'a']; // ç§»åŠ¨çª—å£ï¼Œæ–°å¢ä¸€ä¸ªå­—ç¬¦
            --cnt2[s.charAt(i - p.length()) - 'a']; // ç§»åŠ¨çª—å£ï¼Œç§»é™¤ä¸€ä¸ªå­—ç¬¦
            if (Arrays.equals(cnt1, cnt2)) { // å¦‚æœçª—å£å†…på’Œsä¸­å„å­—æ¯å‡ºç°æ¬¡æ•°ç›¸åŒï¼ŒåŠ å…¥ç»“æœåˆ—è¡¨
                ans.add(i - p.length() + 1);
            }
        }
        return ans; // è¿”å›ç»“æœåˆ—è¡¨
    }
}
```

æš´åŠ›ä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯ **O(n \* m log m)**ï¼Œä½†å’Œ 49.å­—æ¯å¼‚ä½è¯åˆ†ç»„ï¼ˆhot100ï¼‰æ€è·¯ä¸€æ ·

```java
class Solution {
    /**
     * æŸ¥æ‰¾å­—ç¬¦ä¸²sä¸­çš„æ‰€æœ‰æ’åˆ—ï¼Œè¿™äº›æ’åˆ—åœ¨å­—ç¬¦ä¸²pä¸­æ˜¯å­—æ¯å¼‚ä½è¯
     * 
     * @param s ä¸»å­—ç¬¦ä¸²ï¼Œåœ¨è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å­—æ¯å¼‚ä½è¯
     * @param p ç›®æ ‡å­—ç¬¦ä¸²ï¼ŒæŸ¥æ‰¾sä¸­ä¸pç›¸åŒçš„å­—æ¯å¼‚ä½è¯
     * @return åŒ…å«æ‰€æœ‰å­—æ¯å¼‚ä½è¯èµ·å§‹ç´¢å¼•çš„åˆ—è¡¨
     */
    public List<Integer> findAnagrams(String s, String p) {
        // è¾…åŠ©å“ˆå¸Œè¡¨ï¼Œç”¨äºå­˜å‚¨æ’åºåçš„å­—ç¬¦åºåˆ—å’Œå¯¹åº”çš„ç´¢å¼•åˆ—è¡¨
        HashMap<String, List<Integer>> auxiliaryMap = new HashMap<>();
        
        // å°†å­—ç¬¦ä¸²pè½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„å¹¶è¿›è¡Œæ’åºï¼Œä»¥ä¾¿ç”ŸæˆåŸºå‡†é”®å€¼
        char[] tempCharArray = p.toCharArray();
        Arrays.sort(tempCharArray);
        String key = String.valueOf(tempCharArray);
        
        // éå†ä¸»å­—ç¬¦ä¸²sï¼Œå¯»æ‰¾æ‰€æœ‰å¯èƒ½çš„å­—æ¯å¼‚ä½è¯
        for (int i = 0; i < s.length() - p.length() + 1; i++) {
            // ä»sä¸­æå–ä¸pç›¸åŒé•¿åº¦çš„å­å­—ç¬¦ä¸²ï¼Œè½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„å¹¶æ’åº
            tempCharArray = s.substring(i, i + p.length()).toCharArray();
            Arrays.sort(tempCharArray);
            String tempKey = String.valueOf(tempCharArray);
            
            // ä»è¾…åŠ©å“ˆå¸Œè¡¨ä¸­è·å–å½“å‰æ’åºåå­—ç¬¦åºåˆ—å¯¹åº”çš„ç´¢å¼•åˆ—è¡¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆå§‹åŒ–
            List<Integer> tempList = auxiliaryMap.getOrDefault(tempKey, new ArrayList<>());
            // å°†å½“å‰ç´¢å¼•æ·»åŠ åˆ°åˆ—è¡¨ä¸­
            tempList.add(i);
            // æ›´æ–°è¾…åŠ©å“ˆå¸Œè¡¨
            auxiliaryMap.put(tempKey, tempList);
        }
        
        // æ ¹æ®åŸºå‡†é”®å€¼ä»è¾…åŠ©å“ˆå¸Œè¡¨ä¸­è·å–å¯¹åº”çš„ç´¢å¼•åˆ—è¡¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›ç©ºåˆ—è¡¨
        return auxiliaryMap.get(key) == null ? new ArrayList<>() : auxiliaryMap.get(key);
    }
}

```

### 3.æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²ï¼ˆhot100ï¼‰(4.1)

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ **æœ€é•¿å­ä¸²** çš„é•¿åº¦ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: s = "abcabcbb"
è¾“å‡º: 3 
è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "abc"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: s = "bbbbb"
è¾“å‡º: 1
è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "b"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚
```

**ç¤ºä¾‹ 3:**

```java
è¾“å…¥: s = "pwwkew"
è¾“å‡º: 3
è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "wke"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚
```

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥è®¡ç®—å­—ç¬¦ä¸²ä¸­æœ€é•¿æ— é‡å¤å­—ç¬¦çš„å­ä¸²çš„é•¿åº¦
 */
class Solution {
    /**
     * è®¡ç®—ç»™å®šå­—ç¬¦ä¸²ä¸­æœ€é•¿æ— é‡å¤å­—ç¬¦çš„å­ä¸²çš„é•¿åº¦
     * 
     * @param s è¾“å…¥çš„å­—ç¬¦ä¸²
     * @return æœ€é•¿æ— é‡å¤å­—ç¬¦çš„å­ä¸²çš„é•¿åº¦
     */
    public int lengthOfLongestSubstring(String s) {
        // ä½¿ç”¨HashSetå­˜å‚¨å½“å‰éå†çš„æ— é‡å¤å­—ç¬¦çš„å­ä¸²
        HashSet<Character> auxiliarySet = new HashSet<>();
        // è®°å½•æœ€é•¿æ— é‡å¤å­—ç¬¦çš„å­ä¸²çš„é•¿åº¦
        int maxLength = 0;
        // åˆå§‹åŒ–å·¦å³æŒ‡é’ˆ
        int left = 0, right = 0;
        // éå†å­—ç¬¦ä¸²
        while (right < s.length()) {
            // å¦‚æœå½“å‰å­—ç¬¦ä¸åœ¨Setä¸­ï¼Œåˆ™æ·»åŠ åˆ°Setä¸­ï¼Œç§»åŠ¨å³æŒ‡é’ˆï¼Œå¹¶æ›´æ–°æœ€å¤§é•¿åº¦
            if (!auxiliarySet.contains(s.charAt(right))) {
                auxiliarySet.add(s.charAt(right++));
                maxLength = Math.max(maxLength, right - left);
            } else {
                auxiliarySet.remove(s.charAt(left++));
                }
            }
        }
        // è¿”å›æœ€é•¿æ— é‡å¤å­—ç¬¦çš„å­ä¸²çš„é•¿åº¦
        return maxLength;
    }
}
```

### 76.æœ€å°è¦†ç›–å­ä¸²ï¼ˆhot100ï¼‰(4.4)

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ã€ä¸€ä¸ªå­—ç¬¦ä¸² `t` ã€‚è¿”å› `s` ä¸­æ¶µç›– `t` æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚å¦‚æœ `s` ä¸­ä¸å­˜åœ¨æ¶µç›– `t` æ‰€æœ‰å­—ç¬¦çš„å­ä¸²ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² `""` ã€‚

**æ³¨æ„ï¼š**

- å¯¹äº `t` ä¸­é‡å¤å­—ç¬¦ï¼Œæˆ‘ä»¬å¯»æ‰¾çš„å­å­—ç¬¦ä¸²ä¸­è¯¥å­—ç¬¦æ•°é‡å¿…é¡»ä¸å°‘äº `t` ä¸­è¯¥å­—ç¬¦æ•°é‡ã€‚
- å¦‚æœ `s` ä¸­å­˜åœ¨è¿™æ ·çš„å­ä¸²ï¼Œæˆ‘ä»¬ä¿è¯å®ƒæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```java
è¾“å…¥ï¼šs = "ADOBECODEBANC", t = "ABC"
è¾“å‡ºï¼š"BANC"
è§£é‡Šï¼šæœ€å°è¦†ç›–å­ä¸² "BANC" åŒ…å«æ¥è‡ªå­—ç¬¦ä¸² t çš„ 'A'ã€'B' å’Œ 'C'ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```java
è¾“å…¥ï¼šs = "a", t = "a"
è¾“å‡ºï¼š"a"
è§£é‡Šï¼šæ•´ä¸ªå­—ç¬¦ä¸² s æ˜¯æœ€å°è¦†ç›–å­ä¸²ã€‚
```

**ç¤ºä¾‹ 3:**

```java
è¾“å…¥: s = "a", t = "aa"
è¾“å‡º: ""
è§£é‡Š: t ä¸­ä¸¤ä¸ªå­—ç¬¦ 'a' å‡åº”åŒ…å«åœ¨ s çš„å­ä¸²ä¸­ï¼Œ
å› æ­¤æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­å­—ç¬¦ä¸²ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚
```

```java
class Solution {
    /**
     * å¯»æ‰¾å­—ç¬¦ä¸²sä¸­åŒ…å«å­—ç¬¦ä¸²tçš„æœ€å°å­ä¸²
     * 
     * @param s å­—ç¬¦ä¸²s
     * @param t å­—ç¬¦ä¸²t
     * @return è¿”å›åŒ…å«å­—ç¬¦ä¸²tçš„æœ€å°å­ä¸²ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²
     */
    public String minWindow(String s, String t) {
        // ä½¿ç”¨å“ˆå¸Œè¡¨è¾…åŠ©å­˜å‚¨å­—ç¬¦ä¸²tä¸­æ¯ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°
        HashMap<Character, Integer> auxiliaryMap = new HashMap<>();
        for (int i = 0; i < t.length(); i++) {
            auxiliaryMap.put(t.charAt(i), auxiliaryMap.getOrDefault(t.charAt(i), 0) + 1);
        }

        // åˆå§‹åŒ–æœ€å°çª—å£çš„é•¿åº¦ä¸ºæœ€å¤§å€¼ï¼Œå·¦ä¾§ä½ç½®ä¸º0ï¼Œstartå’Œendä½œä¸ºçª—å£çš„å·¦å³æŒ‡é’ˆï¼Œcountè¡¨ç¤ºæœªè¦†ç›–çš„tå­—ç¬¦æ•°
        int minLength = Integer.MAX_VALUE, minLeft = 0, start = 0, end = 0, count = t.length();

        // éå†å­—ç¬¦ä¸²s
        while (end < s.length()) {
            char endChar = s.charAt(end);
            // å¦‚æœå½“å‰å­—ç¬¦åœ¨tä¸­å­˜åœ¨
            if (auxiliaryMap.containsKey(endChar)) {
                // å¦‚æœå½“å‰å­—ç¬¦åœ¨è¾…åŠ©å“ˆå¸Œè¡¨ä¸­çš„è®¡æ•°å¤§äº0ï¼Œè¯´æ˜éœ€è¦è¦†ç›–ï¼Œcountå‡1
                if (auxiliaryMap.get(endChar) > 0) {
                    count--;
                }
                // å½“å‰å­—ç¬¦çš„è®¡æ•°å‡1
                auxiliaryMap.put(endChar, auxiliaryMap.get(endChar) - 1);
            }
            end++;

            // å½“countä¸º0æ—¶ï¼Œè¡¨ç¤ºæ‰¾åˆ°äº†ä¸€ä¸ªåŒ…å«tçš„å­ä¸²
            while (count == 0) {
                // å¦‚æœå½“å‰çª—å£é•¿åº¦å°äºæœ€å°é•¿åº¦ï¼Œæ›´æ–°æœ€å°é•¿åº¦å’Œå·¦ä¾§ä½ç½®
                if (end - start < minLength) {
                    minLength = end - start;
                    minLeft = start;
                }
                char startChar = s.charAt(start);
                // ç§»åŠ¨å·¦æŒ‡é’ˆï¼Œé‡æ–°è°ƒæ•´çª—å£
                if (auxiliaryMap.containsKey(startChar)) {
                    // å°†è¦†ç›–çš„å­—ç¬¦è®¡æ•°åŠ 1
                    auxiliaryMap.put(startChar, auxiliaryMap.get(startChar) + 1);
                    // å¦‚æœè®¡æ•°å¤§äº0ï¼Œè¡¨ç¤ºè¯¥å­—ç¬¦è¿˜éœ€è¦è¢«è¦†ç›–ï¼ŒcountåŠ 1
                    if (auxiliaryMap.get(startChar) > 0) {
                        count++;
                    }
                }
                start++;
            }
        }
        // æ ¹æ®æœ€å°é•¿åº¦ä»sä¸­æå–æœ€å°å­ä¸²
        return minLength == Integer.MAX_VALUE ? "" : s.substring(minLeft, minLeft + minLength);
    }
}
```



**æ»‘åŠ¨çª—å£æ¦‚è¿°**
æ»‘åŠ¨çª—å£æ˜¯ä¸€ç§åœ¨å­—ç¬¦ä¸²ã€æ•°ç»„ç­‰æ•°æ®ç»“æ„ä¸Šï¼Œå¤„ç†è¿ç»­åŒºé—´çš„é—®é¢˜æ—¶å¸¸ç”¨çš„æŠ€å·§ã€‚å®ƒé€šè¿‡ç§»åŠ¨å·¦å³æŒ‡é’ˆï¼ˆå³çª—å£çš„ä¸¤ç«¯ï¼‰ï¼ŒåŠ¨æ€ç»´æŠ¤å½“å‰å­åŒºé—´çš„æ€§è´¨ã€‚
åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæ»‘åŠ¨çª—å£ç”¨äºåŠ¨æ€ç»´æŠ¤ä¸€ä¸ª"æœ‰æ•ˆçª—å£"ï¼Œå³åŒ…å«å­—ç¬¦ä¸² `t` æ‰€æœ‰å­—ç¬¦çš„å­ä¸²ã€‚

**ä»£ç ä¸­çš„æ»‘åŠ¨çª—å£é€»è¾‘**
æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»£ç çš„å…³é”®é€»è¾‘ä»¥åŠæ»‘åŠ¨çª—å£çš„ç§»åŠ¨è§„åˆ™ã€‚

**1. åˆå§‹åŒ–**
```java
HashMap<Character, Integer> auxiliaryMap = new HashMap<>();
for (int i = 0; i < t.length(); i++) {
    auxiliaryMap.put(t.charAt(i), auxiliaryMap.getOrDefault(t.charAt(i), 0) + 1);
}
```
è¿™é‡Œæ„å»ºäº†ä¸€ä¸ª `auxiliaryMap`ï¼Œå­˜å‚¨ `t` ä¸­æ¯ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥çŸ¥é“æ¯ä¸ªå­—ç¬¦éœ€è¦åœ¨æ»‘åŠ¨çª—å£å†…å‡ºç°å¤šå°‘æ¬¡ã€‚
```java
int minLength = Integer.MAX_VALUE, minLeft = 0, start = 0, end = 0, count = t.length();
```
- `minLength`ï¼šè®°å½•æ‰¾åˆ°çš„æœ€å°å­ä¸²é•¿åº¦ã€‚
- `minLeft`ï¼šè®°å½•æœ€å°å­ä¸²çš„èµ·å§‹ä½ç½®ã€‚
- `start` å’Œ `end`ï¼šæ»‘åŠ¨çª—å£çš„å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆã€‚
- `count`ï¼šè¡¨ç¤ºå½“å‰è¿˜éœ€è¦åœ¨çª—å£ä¸­æ‰¾åˆ°å¤šå°‘ä¸ªå­—ç¬¦æ‰èƒ½è¦†ç›–å­—ç¬¦ä¸² `t`ã€‚åˆå§‹å€¼ä¸º `t.length()`ï¼Œå› ä¸ºä¸€å¼€å§‹æˆ‘ä»¬è¿˜æ²¡æœ‰æ‰¾åˆ°ä»»ä½•å­—ç¬¦ã€‚

**2. å‘å³æ‰©å±•çª—å£ï¼ˆæ‰©å¤§çª—å£ï¼‰**
```java
while (end < s.length()) {
    char endChar = s.charAt(end);
    if (auxiliaryMap.containsKey(endChar)) {
        if (auxiliaryMap.get(endChar) > 0) {
            count--;
        }
        auxiliaryMap.put(endChar, auxiliaryMap.get(endChar) - 1);
    }
    end++;
```
æˆ‘ä»¬é€šè¿‡å³æŒ‡é’ˆ `end` ä¸æ–­å‘å³æ‰©å±•çª—å£ï¼š
- `endChar` æ˜¯ `s` ä¸­å½“å‰ `end` æŒ‡å‘çš„å­—ç¬¦ã€‚
- å¦‚æœ `endChar` æ˜¯ `t` ä¸­çš„å­—ç¬¦ï¼ˆå³ `auxiliaryMap` ä¸­å­˜åœ¨ï¼‰ï¼Œæˆ‘ä»¬æ£€æŸ¥è¯¥å­—ç¬¦åœ¨ `auxiliaryMap` ä¸­çš„è®¡æ•°æ˜¯å¦å¤§äº0ã€‚å¦‚æœå¤§äº0ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæˆ‘ä»¬è¿˜éœ€è¦çš„å­—ç¬¦ï¼Œäºæ˜¯ `count--`ã€‚
- ç„¶åï¼Œæ— è®º `auxiliaryMap` çš„è®¡æ•°æ˜¯æ­£æ•°è¿˜æ˜¯è´Ÿæ•°ï¼Œæˆ‘ä»¬éƒ½å°†å…¶è®¡æ•°å‡1ã€‚è¿™æ˜¯å› ä¸ºå³ä½¿è¿™ä¸ªå­—ç¬¦ä¸å†éœ€è¦ï¼ˆæ¯”å¦‚å¤šæ¬¡å‡ºç°ï¼‰ï¼Œæˆ‘ä»¬ä¾ç„¶è¦è·Ÿè¸ªçª—å£ä¸­çš„å­—ç¬¦æƒ…å†µã€‚

**3. æ”¶ç¼©çª—å£ï¼ˆç¼©å°çª—å£ï¼‰**
å½“ `count == 0` æ—¶ï¼Œè¯´æ˜å½“å‰çª—å£åŒ…å«äº† `t` çš„æ‰€æœ‰å­—ç¬¦ï¼Œè¿™æ—¶æˆ‘ä»¬å°è¯•ç¼©å°çª—å£ä»¥æ‰¾åˆ°æ›´å°çš„æœ‰æ•ˆå­ä¸²ï¼š
```java
while (count == 0) {
    if (end - start < minLength) {
        minLength = end - start;
        minLeft = start;
    }
    char startChar = s.charAt(start);
    if (auxiliaryMap.containsKey(startChar)) {
        auxiliaryMap.put(startChar, auxiliaryMap.get(startChar) + 1);
        if (auxiliaryMap.get(startChar) > 0) {
            count++;
        }
    }
    start++;
}
```
- å¦‚æœå½“å‰çª—å£å¤§å°æ¯”ä¹‹å‰æ‰¾åˆ°çš„æœ€å°å­ä¸²è¿˜è¦å°ï¼Œå°±æ›´æ–° `minLength` å’Œ `minLeft`ã€‚
- ç„¶åæˆ‘ä»¬å¼€å§‹ç§»åŠ¨å·¦æŒ‡é’ˆ `start`ï¼Œå°è¯•ç¼©å°çª—å£ã€‚
  - `startChar` æ˜¯çª—å£çš„å·¦è¾¹ç•Œå­—ç¬¦ã€‚
  - å¦‚æœ `startChar` æ˜¯ `t` ä¸­çš„å­—ç¬¦ï¼Œå¢åŠ å®ƒåœ¨ `auxiliaryMap` ä¸­çš„è®¡æ•°ã€‚
  - å¦‚æœæ­¤æ—¶ `auxiliaryMap` ä¸­ `startChar` çš„è®¡æ•°å˜å¾—å¤§äº0ï¼Œè¯´æ˜æˆ‘ä»¬å°‘äº†ä¸€ä¸ªéœ€è¦çš„å­—ç¬¦ï¼Œäºæ˜¯ `count++`ã€‚

**æ»‘åŠ¨çª—å£ç§»åŠ¨åŸç†**
- **å³æŒ‡é’ˆç§»åŠ¨ï¼š** æ¯æ¬¡å³æŒ‡é’ˆç§»åŠ¨éƒ½å°è¯•æ‰©å¤§çª—å£ï¼Œç›´åˆ°çª—å£åŒ…å«äº† `t` çš„æ‰€æœ‰å­—ç¬¦ã€‚
- **å·¦æŒ‡é’ˆç§»åŠ¨ï¼š** ä¸€æ—¦æ‰¾åˆ°ä¸€ä¸ªåŒ…å« `t` æ‰€æœ‰å­—ç¬¦çš„çª—å£ï¼ˆå³ `count == 0`ï¼‰ï¼Œæˆ‘ä»¬ç§»åŠ¨å·¦æŒ‡é’ˆï¼Œå°è¯•ç¼©å°çª—å£ï¼Œç›´åˆ°çª—å£ä¸å†åŒ…å«æ‰€æœ‰å­—ç¬¦ä¸ºæ­¢ã€‚


é€šè¿‡è¿™æ ·çš„æœºåˆ¶ï¼Œæˆ‘ä»¬ç¡®ä¿æ‰¾åˆ°çš„å­ä¸²æ—¢åŒ…å«æ‰€æœ‰ `t` çš„å­—ç¬¦ï¼Œåˆæ˜¯æœ€çŸ­çš„ã€‚

**4. æœ€ç»ˆè¿”å›ç»“æœ**
```java
return minLength == Integer.MAX_VALUE ? "" : s.substring(minLeft, minLeft + minLength);
```
æœ€åï¼Œæ ¹æ®è®°å½•çš„ `minLength` å’Œ `minLeft`ï¼Œè¿”å›æœ€å°å­ä¸²ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚

**æ€»ç»“**
- **å³æŒ‡é’ˆè´Ÿè´£æ‰©å±•çª—å£**ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆçª—å£ã€‚
- **å·¦æŒ‡é’ˆè´Ÿè´£æ”¶ç¼©çª—å£**ï¼Œä»¥ä¾¿å°è¯•æ‰¾åˆ°æœ€å°çš„æœ‰æ•ˆçª—å£ã€‚
- é€šè¿‡è¿™ä¸¤è€…çš„é…åˆï¼Œç®—æ³•èƒ½å¤Ÿé«˜æ•ˆåœ°æ‰¾åˆ°æœ€å°å­ä¸²ã€‚



### **415. å­—ç¬¦ä¸²ç›¸åŠ ** 

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„éè´Ÿæ•´æ•° `num1` å’Œ`num2` ï¼Œè®¡ç®—å®ƒä»¬çš„å’Œå¹¶åŒæ ·ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›ã€‚

ä½ ä¸èƒ½ä½¿ç”¨ä»»ä½•å…§å»ºçš„ç”¨äºå¤„ç†å¤§æ•´æ•°çš„åº“ï¼ˆæ¯”å¦‚ `BigInteger`ï¼‰ï¼Œ ä¹Ÿä¸èƒ½ç›´æ¥å°†è¾“å…¥çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°å½¢å¼ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnum1 = "11", num2 = "123"
è¾“å‡ºï¼š"134"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnum1 = "456", num2 = "77"
è¾“å‡ºï¼š"533"
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnum1 = "0", num2 = "0"
è¾“å‡ºï¼š"0"
```

**æç¤ºï¼š**

- `1 <= num1.length, num2.length <= 104`
- `num1` å’Œ`num2` éƒ½åªåŒ…å«æ•°å­— `0-9`
- `num1` å’Œ`num2` éƒ½ä¸åŒ…å«ä»»ä½•å‰å¯¼é›¶

```java
class Solution {
    public String addStrings(String num1, String num2) {
        StringBuilder Sb = new StringBuilder();
        int caray = 0, sum = 0;
        int index1 = num1.length() - 1, index2 = num2.length() - 1;
        while (true) {
            sum = (index1 >= 0 ? num1.charAt(index1)-'0' : 0) + (index2 >= 0 ? num2.charAt(index2)-'0' : 0) + caray;
            caray = sum >= 10 ? 1 : 0;
            sum = sum % 10;

            if (sum == 0 && caray == 0 && index1 < 0 && index2 < 0) {
                break;
            }
            Sb.append(sum);
            index1--;
            index2--;
        }
        return Sb.reverse().toString();
    }
}
```



### **43.å­—ç¬¦ä¸²ç›¸ä¹˜** *

ç»™å®šä¸¤ä¸ªä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºçš„éè´Ÿæ•´æ•° `num1` å’Œ `num2`ï¼Œè¿”å› `num1` å’Œ `num2` çš„ä¹˜ç§¯ï¼Œå®ƒä»¬çš„ä¹˜ç§¯ä¹Ÿè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²å½¢å¼ã€‚

**æ³¨æ„ï¼š**ä¸èƒ½ä½¿ç”¨ä»»ä½•å†…ç½®çš„ BigInteger åº“æˆ–ç›´æ¥å°†è¾“å…¥è½¬æ¢ä¸ºæ•´æ•°ã€‚



**ç¤ºä¾‹ 1:**

```
è¾“å…¥: num1 = "2", num2 = "3"
è¾“å‡º: "6"
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: num1 = "123", num2 = "456"
è¾“å‡º: "56088"
```



**æç¤ºï¼š**

- `1 <= num1.length, num2.length <= 200`
- `num1` å’Œ `num2` åªèƒ½ç”±æ•°å­—ç»„æˆã€‚
- `num1` å’Œ `num2` éƒ½ä¸åŒ…å«ä»»ä½•å‰å¯¼é›¶ï¼Œé™¤äº†æ•°å­—0æœ¬èº«ã€‚

```java
class Solution {
    public String multiply(String num1, String num2) {
        // å¤„ç†ç‰¹æ®Šæƒ…å†µï¼šå¦‚æœä»»ä¸€æ•°å­—ä¸º"0"ï¼Œç›´æ¥è¿”å›"0"
        if (num1.equals("0") || num2.equals("0")) {
            return "0";
        }

        String result = "0";

        // ä»å³å‘å·¦éå†ç¬¬äºŒä¸ªæ•°çš„æ¯ä¸€ä½
        for (int i = num2.length() - 1; i >= 0; i--) {
            // å–å‡ºå½“å‰ä½çš„æ•°å­—
            int digit = num2.charAt(i) - '0';

            // è®¡ç®—num1ä¸å½“å‰ä½ç›¸ä¹˜çš„ç»“æœ
            StringBuilder temp = new StringBuilder();

            // æ·»åŠ ç›¸åº”æ•°é‡çš„0ï¼ˆæ ¹æ®ä½ç½®ï¼‰
            for (int j = 0; j < num2.length() - 1 - i; j++) {
                temp.append('0');
            }

            int carry = 0;
            // ä»å³å‘å·¦éå†ç¬¬ä¸€ä¸ªæ•°çš„æ¯ä¸€ä½
            for (int j = num1.length() - 1; j >= 0; j--) {
                int product = (num1.charAt(j) - '0') * digit + carry;
                carry = product / 10;
                temp.append(product % 10);
            }

            // å¤„ç†æœ€åçš„è¿›ä½
            if (carry > 0) {
                temp.append(carry);
            }

            // å°†tempåè½¬åä¸resultç›¸åŠ 
            result = get(result, temp.reverse().toString());
        }

        return result;
    }

    String get(String num1, String num2) {
        StringBuilder Sb = new StringBuilder();
        int caray = 0, sum = 0;
        int index1 = num1.length() - 1, index2 = num2.length() - 1;
        while (true) {
            sum = (index1 >= 0 ? num1.charAt(index1)-'0' : 0) + (index2 >= 0 ? num2.charAt(index2)-'0' : 0) + caray;
            caray = sum >= 10 ? 1 : 0;
            sum = sum % 10;

            if (sum == 0 && caray == 0 && index1 < 0 && index2 < 0) {
                break;
            }
            Sb.append(sum);
            index1--;
            index2--;
        }
        return Sb.reverse().toString();
    }
}
```



### å­—ç¬¦ä¸²ç›¸å‡(æ‹“å±•)

```java
class Solution {
    public String subtractStrings(String num1, String num2) {
        // å‡è®¾ num1 >= num2
        StringBuilder sb = new StringBuilder();
        int borrow = 0;
        int index1 = num1.length() - 1, index2 = num2.length() - 1;
        
        // ä»ä½ä½å¼€å§‹é€ä½ç›¸å‡
        while (index1 >= 0 || index2 >= 0) {
            int digit1 = index1 >= 0 ? num1.charAt(index1) - '0' : 0;
            int digit2 = index2 >= 0 ? num2.charAt(index2) - '0' : 0;
            
            int diff = digit1 - borrow - digit2;
            if (diff < 0) {
                diff += 10;
                borrow = 1;
            } else {
                borrow = 0;
            }
            
            sb.append(diff);
            index1--;
            index2--;
        }
        
        // å»æ‰å¯èƒ½å­˜åœ¨çš„å‰å¯¼é›¶ï¼ˆæ³¨æ„è‡³å°‘ä¿ç•™ä¸€ä½ï¼‰
        while (sb.length() > 1 && sb.charAt(sb.length() - 1) == '0') {
            sb.setLength(sb.length() - 1);
        }
        
        return sb.reverse().toString();
    }
}
```



# æ ˆä¸é˜Ÿåˆ—ä¸å †

### 232.ç”¨æ ˆå®ç°é˜Ÿåˆ—

è¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªæ ˆå®ç°å…ˆå…¥å…ˆå‡ºé˜Ÿåˆ—ã€‚é˜Ÿåˆ—åº”å½“æ”¯æŒä¸€èˆ¬é˜Ÿåˆ—æ”¯æŒçš„æ‰€æœ‰æ“ä½œï¼ˆ`push`ã€`pop`ã€`peek`ã€`empty`ï¼‰ï¼š

å®ç° `MyQueue` ç±»ï¼š

- `void push(int x)` å°†å…ƒç´  x æ¨åˆ°é˜Ÿåˆ—çš„æœ«å°¾
- `int pop()` ä»é˜Ÿåˆ—çš„å¼€å¤´ç§»é™¤å¹¶è¿”å›å…ƒç´ 
- `int peek()` è¿”å›é˜Ÿåˆ—å¼€å¤´çš„å…ƒç´ 
- `boolean empty()` å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false`

```java
/**
 * ä½¿ç”¨æ ˆå®ç°é˜Ÿåˆ—
 * é€šè¿‡ä¸€ä¸ªæ ˆæ¥æ¨¡æ‹Ÿé˜Ÿåˆ—çš„è¡Œä¸º
 */
class MyQueue {
    // ç”¨äºæ¨¡æ‹Ÿé˜Ÿåˆ—çš„æ ˆ
    Stack<Integer> simulationQueue;
    // é˜Ÿåˆ—çš„å¤§å°
    int size;

    /**
     * åˆå§‹åŒ–é˜Ÿåˆ—
     */
    public MyQueue() {
        simulationQueue = new Stack<>();
        size = 0;
    }
    
    /**
     * å°†å…ƒç´ åŠ å…¥é˜Ÿåˆ—
     * é€šè¿‡è¾…åŠ©æ ˆæ¥ä¿è¯æ–°å…ƒç´ èƒ½å¤Ÿæ’å…¥åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨
     * 
     * @param x è¦åŠ å…¥é˜Ÿåˆ—çš„å…ƒç´ 
     */
    public void push(int x) {
        Stack<Integer> auxiliaryStack = new Stack<>();
        // å°†æ¨¡æ‹Ÿé˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸´æ—¶å­˜æ”¾åˆ°è¾…åŠ©æ ˆä¸­
        while (!simulationQueue.empty()) {
            auxiliaryStack.push(simulationQueue.pop());
        }
        // å°†æ–°å…ƒç´ åŠ å…¥åˆ°æ¨¡æ‹Ÿé˜Ÿåˆ—ä¸­
        simulationQueue.push(x);
        size++;
        // å°†è¾…åŠ©æ ˆä¸­çš„å…ƒç´ é‡æ–°æ”¾å›æ¨¡æ‹Ÿé˜Ÿåˆ—
        while (!auxiliaryStack.isEmpty()) {
            simulationQueue.push(auxiliaryStack.pop());
        }
    }
    
    /**
     * ä»é˜Ÿåˆ—ä¸­ç§»é™¤å¹¶è¿”å›å¤´éƒ¨å…ƒç´ 
     * 
     * @return ç§»é™¤çš„å¤´éƒ¨å…ƒç´ 
     */
    public int pop() {
        size--;
        return simulationQueue.pop();
    }
    
    /**
     * è¿”å›é˜Ÿåˆ—çš„å¤´éƒ¨å…ƒç´ 
     * 
     * @return é˜Ÿåˆ—çš„å¤´éƒ¨å…ƒç´ 
     */
    public int peek() {
        return simulationQueue.peek();
    }
    
    /**
     * åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º
     * 
     * @return true å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œå¦åˆ™è¿”å› false
     */
    public boolean empty() {
        if (size == 0) {
            return true;
        }
        return false;
    }
}
```

### 225.ç”¨é˜Ÿåˆ—å®ç°æ ˆ

è¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—å®ç°ä¸€ä¸ªåå…¥å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ ˆï¼Œå¹¶æ”¯æŒæ™®é€šæ ˆçš„å…¨éƒ¨å››ç§æ“ä½œï¼ˆ`push`ã€`top`ã€`pop` å’Œ `empty`ï¼‰ã€‚

å®ç° `MyStack` ç±»ï¼š

- `void push(int x)` å°†å…ƒç´  x å‹å…¥æ ˆé¡¶ã€‚
- `int pop()` ç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´ ã€‚
- `int top()` è¿”å›æ ˆé¡¶å…ƒç´ ã€‚
- `boolean empty()` å¦‚æœæ ˆæ˜¯ç©ºçš„ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

```java
/**
 * ä½¿ç”¨é˜Ÿåˆ—æ¨¡æ‹Ÿæ ˆæ“ä½œçš„æ•°æ®ç»“æ„ã€‚
 * æ ˆæ˜¯ä¸€ç§åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ•°æ®ç»“æ„ï¼Œè¿™æ„å‘³ç€æœ€åä¸€ä¸ªæ’å…¥çš„å…ƒç´ æ˜¯ç¬¬ä¸€ä¸ªè¢«ç§»é™¤çš„ã€‚
 */
class MyStack {
    // ä½¿ç”¨é˜Ÿåˆ—æ¥æ¨¡æ‹Ÿæ ˆ
    Queue<Integer> simulationStack;
    // æ ˆä¸­å…ƒç´ çš„æ•°é‡
    int size;

    /**
     * MyStackçš„æ„é€ æ–¹æ³•ã€‚
     * åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„é˜Ÿåˆ—å’Œå¤§å°ä¸º0çš„æ ˆã€‚
     */
    public MyStack() {
        simulationStack = new LinkedList<>();
        size = 0;
    }
    
    /**
     * å°†å…ƒç´ æ¨å…¥æ ˆé¡¶ã€‚
     * @param x è¦æ¨å…¥çš„å…ƒç´ ã€‚
     * æ­¤æ–¹æ³•å°†å…ƒç´ æ·»åŠ åˆ°é˜Ÿåˆ—çš„æœ«å°¾ï¼Œç„¶åé€šè¿‡å¾ªç¯å°†é™¤æœ€åä¸€ä¸ªå…ƒç´ å¤–çš„æ‰€æœ‰å…ƒç´ ç§»è‡³é˜Ÿåˆ—æœ«å°¾ï¼Œ
     * ä½¿å¾—æœ€åä¸€ä¸ªæ’å…¥çš„å…ƒç´ ä½äºé˜Ÿåˆ—çš„å¼€å¤´ï¼Œå³æ ˆé¡¶ã€‚
     */
    public void push(int x) {
        simulationStack.offer(x);
        for (int i = 0; i <= size - 1; i++) {
            simulationStack.offer(simulationStack.poll());
        }
        size++;
    }
    
    /**
     * ç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´ ã€‚
     * @return è¿”å›ç§»é™¤çš„æ ˆé¡¶å…ƒç´ ã€‚
     * æ­¤æ–¹æ³•ä»é˜Ÿåˆ—å¤´éƒ¨ç§»é™¤å¹¶è¿”å›å…ƒç´ ï¼Œå³æ ˆé¡¶å…ƒç´ ã€‚
     */
    public int pop() {
        size--;
        return simulationStack.poll();
    }
    
    /**
     * è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œä½†ä¸ç§»é™¤å®ƒã€‚
     * @return è¿”å›æ ˆé¡¶å…ƒç´ ã€‚
     * æ­¤æ–¹æ³•è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œå³æ ˆé¡¶å…ƒç´ ï¼Œä½†ä¸æ”¹å˜é˜Ÿåˆ—å†…å®¹ã€‚
     */
    public int top() {
        return simulationStack.peek();
    }
    
    /**
     * æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©ºã€‚
     * @return å¦‚æœæ ˆä¸ºç©ºï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›falseã€‚
     * é€šè¿‡æ£€æŸ¥æ ˆçš„å¤§å°æ˜¯å¦ä¸º0æ¥åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºã€‚
     */
    public boolean empty() {
        if (size == 0) {
            return true;
        } else {
            return false;
        }
    }
}

```

### 155.æœ€å°æ ˆï¼ˆhot100ï¼‰

è®¾è®¡ä¸€ä¸ªæ”¯æŒ `push` ï¼Œ`pop` ï¼Œ`top` æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚

å®ç° `MinStack` ç±»:

- `MinStack()` åˆå§‹åŒ–å †æ ˆå¯¹è±¡ã€‚
- `void push(int val)` å°†å…ƒç´ valæ¨å…¥å †æ ˆã€‚
- `void pop()` åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚
- `int top()` è·å–å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚
- `int getMin()` è·å–å †æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥ï¼š
["MinStack","push","push","push","getMin","pop","top","getMin"]
[[],[-2],[0],[-3],[],[],[],[]]

è¾“å‡ºï¼š
[null,null,null,null,-3,null,0,-2]

è§£é‡Šï¼š
MinStack minStack = new MinStack();
minStack.push(-2);
minStack.push(0);
minStack.push(-3);
minStack.getMin();   --> è¿”å› -3.
minStack.pop();
minStack.top();      --> è¿”å› 0.
minStack.getMin();   --> è¿”å› -2.
```

```java
/**
 * MinStackç±»ï¼Œç”¨äºå®ç°ä¸€ä¸ªæ”¯æŒè·å–æœ€å°å…ƒç´ æ“ä½œçš„æ•°æ®ç»“æ„
 * è¯¥ç±»é€šè¿‡ä¸¤ä¸ªæ ˆæ¥å®ç°ï¼šä¸€ä¸ªç”¨äºå­˜å‚¨æ‰€æœ‰å…ƒç´ ï¼Œå¦ä¸€ä¸ªç”¨äºè·Ÿè¸ªæœ€å°å…ƒç´ 
 */
class MinStack {
    // å­˜å‚¨æ‰€æœ‰å…ƒç´ çš„æ ˆ
    Stack<Integer> stack;
    // å­˜å‚¨å½“å‰æœ€å°å…ƒç´ çš„æ ˆï¼Œåº•éƒ¨åˆå§‹åŒ–ä¸ºæ•´å‹æœ€å¤§å€¼ï¼Œç¡®ä¿ä»»ä½•æ–°å…ƒç´ éƒ½ä¼šå°äºè¿™ä¸ªå€¼
    Stack<Integer> minStack;

    /**
     * MinStackæ„é€ å‡½æ•°
     * åˆå§‹åŒ–ä¸¤ä¸ªæ ˆï¼šä¸€ä¸ªç”¨äºå­˜å‚¨å…ƒç´ ï¼Œå¦ä¸€ä¸ªç”¨äºè·Ÿè¸ªæœ€å°å…ƒç´ 
     * å°†æ•´å‹æœ€å¤§å€¼ä½œä¸ºåˆå§‹æœ€å°å€¼æ”¾å…¥minStackä¸­
     */
    public MinStack() {
        stack = new Stack<>();
        minStack = new Stack<>();
        minStack.push(Integer.MAX_VALUE);
    }
    
    /**
     * å°†ä¸€ä¸ªå…ƒç´ å‹å…¥æ ˆä¸­
     * æ¯æ¬¡å‹å…¥å…ƒç´ æ—¶ï¼Œä¹Ÿå°†å½“å‰æœ€å°å€¼å‹å…¥minStackï¼Œä»¥ä¾¿äºpopæ“ä½œæ—¶ä¿æŒminStackçš„åŒæ­¥æ€§
     * 
     * @param val è¦å‹å…¥æ ˆçš„å…ƒç´ å€¼
     */
    public void push(int val) {
        stack.push(val);
        minStack.push(Math.min(minStack.peek(), val));
    }
    
    /**
     * å¼¹å‡ºæ ˆé¡¶å…ƒç´ 
     * åŒæ—¶ä»ä¸¤ä¸ªæ ˆä¸­å¼¹å‡ºé¡¶éƒ¨å…ƒç´ ï¼Œä¿æŒminStackä¸stackçš„åŒæ­¥
     */
    public void pop() {
        stack.pop();
        minStack.pop();
    }
    
    /**
     * è·å–æ ˆé¡¶å…ƒç´ 
     * è¿”å›stackçš„é¡¶éƒ¨å…ƒç´ ï¼Œå³æœ€è¿‘å‹å…¥çš„å…ƒç´ ï¼ˆéæœ€å°å€¼æ ˆï¼‰
     * 
     * @return æ ˆé¡¶å…ƒç´ çš„å€¼
     */
    public int top() {
        return stack.peek();
    }
    
    /**
     * è·å–å½“å‰çš„æœ€å°å…ƒç´ 
     * è¿”å›minStackçš„é¡¶éƒ¨å…ƒç´ ï¼Œå³å½“å‰æ ˆä¸­çš„æœ€å°å€¼
     * 
     * @return å½“å‰æœ€å°å…ƒç´ çš„å€¼
     */
    public int getMin() {
        return minStack.peek();
    }
}
```



### 20.æœ‰æ•ˆçš„æ‹¬å·

ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ `'('`ï¼Œ`')'`ï¼Œ`'{'`ï¼Œ`'}'`ï¼Œ`'['`ï¼Œ`']'` çš„å­—ç¬¦ä¸² `s` ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚

æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š

1. å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚
2. å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚
3. æ¯ä¸ªå³æ‹¬å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç›¸åŒç±»å‹çš„å·¦æ‹¬å·ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "()"
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "()[]{}"
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = "(]"
è¾“å‡ºï¼šfalse
```

```java
class Solution {
    /**
     * æ£€æŸ¥ç»™å®šçš„å­—ç¬¦ä¸²ä¸­çš„æ‹¬å·æ˜¯å¦æœ‰æ•ˆ
     * é€šè¿‡ä½¿ç”¨æ ˆæ¥å¤„ç†æ‹¬å·çš„åŒ¹é…é—®é¢˜
     * 
     * @param s å¾…æ£€æŸ¥çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«å¯èƒ½çš„æ‹¬å·å­—ç¬¦
     * @return å¦‚æœå­—ç¬¦ä¸²ä¸­çš„æ‹¬å·æœ‰æ•ˆï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    public boolean isValid(String s) {
        // ä½¿ç”¨æ ˆä½œä¸ºè¾…åŠ©æ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨å·¦æ‹¬å·
        Stack<Character> auxiliaryStack = new Stack<>();
        // éå†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ‹¬å·å¹¶è¿›è¡Œç›¸åº”å¤„ç†
        for (int i = 0; i < s.length(); i++) {
            // é‡åˆ°å·¦æ‹¬å·æ—¶ï¼Œå°†å…¶å‹å…¥æ ˆä¸­
            if (s.charAt(i) == '(' || s.charAt(i) == '[' || s.charAt(i) == '{') {
                auxiliaryStack.push(s.charAt(i));
            } 
            // å½“æ ˆä¸ºç©ºä¸”é‡åˆ°å³æ‹¬å·æ—¶ï¼Œè¯´æ˜æ²¡æœ‰å·¦æ‹¬å·ä¸ä¹‹åŒ¹é…ï¼Œè¿”å›false
            else if (auxiliaryStack.isEmpty() && (s.charAt(i) == ')' || s.charAt(i) == ']' || s.charAt(i) == '}')) {
                return false;
            } 
            // é‡åˆ°å³æ‹¬å·æ—¶ï¼Œæ ¹æ®æ ˆé¡¶çš„å·¦æ‹¬å·è¿›è¡ŒåŒ¹é…
            else if (s.charAt(i) == ')') {
                // å¦‚æœæ ˆé¡¶çš„å·¦æ‹¬å·ä¸º'('ï¼Œåˆ™å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œè¡¨ç¤ºåŒ¹é…æˆåŠŸ
                if (auxiliaryStack.peek() == '(') {
                    auxiliaryStack.pop();
                } else {
                    // å¦‚æœæ ˆé¡¶çš„å·¦æ‹¬å·ä¸ä¸º'('ï¼Œè¯´æ˜æ‹¬å·ä¸åŒ¹é…ï¼Œè¿”å›false
                    return false;
                }
            } else if (s.charAt(i) == ']') {
                // å¦‚æœæ ˆé¡¶çš„å·¦æ‹¬å·ä¸º'['ï¼Œåˆ™å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œè¡¨ç¤ºåŒ¹é…æˆåŠŸ
                if (auxiliaryStack.peek() == '[') {
                    auxiliaryStack.pop();
                } else {
                    // å¦‚æœæ ˆé¡¶çš„å·¦æ‹¬å·ä¸ä¸º'['ï¼Œè¯´æ˜æ‹¬å·ä¸åŒ¹é…ï¼Œè¿”å›false
                    return false;
                }
            } else {
                // å¦‚æœæ ˆé¡¶çš„å·¦æ‹¬å·ä¸º'{'ï¼Œåˆ™å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œè¡¨ç¤ºåŒ¹é…æˆåŠŸ
                if (auxiliaryStack.peek() == '{') {
                    auxiliaryStack.pop();
                } else {
                    // å¦‚æœæ ˆé¡¶çš„å·¦æ‹¬å·ä¸ä¸º'{'ï¼Œè¯´æ˜æ‹¬å·ä¸åŒ¹é…ï¼Œè¿”å›false
                    return false;
                }
            }
        }
        // å¦‚æœéå†å®Œå­—ç¬¦ä¸²åï¼Œæ ˆä¸ºç©ºï¼Œåˆ™è¯´æ˜æ‰€æœ‰æ‹¬å·éƒ½æœ‰æ•ˆï¼Œè¿”å›trueï¼›å¦åˆ™è¿”å›false
        return auxiliaryStack.empty() ? true : false;
    }
}

```

### 1047.åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹

ç»™å‡ºç”±å°å†™å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² `S`ï¼Œ**é‡å¤é¡¹åˆ é™¤æ“ä½œ**ä¼šé€‰æ‹©ä¸¤ä¸ªç›¸é‚»ä¸”ç›¸åŒçš„å­—æ¯ï¼Œå¹¶åˆ é™¤å®ƒä»¬ã€‚

åœ¨ S ä¸Šåå¤æ‰§è¡Œé‡å¤é¡¹åˆ é™¤æ“ä½œï¼Œç›´åˆ°æ— æ³•ç»§ç»­åˆ é™¤ã€‚

åœ¨å®Œæˆæ‰€æœ‰é‡å¤é¡¹åˆ é™¤æ“ä½œåè¿”å›æœ€ç»ˆçš„å­—ç¬¦ä¸²ã€‚ç­”æ¡ˆä¿è¯å”¯ä¸€ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼š"abbaca"
è¾“å‡ºï¼š"ca"
è§£é‡Šï¼š
ä¾‹å¦‚ï¼Œåœ¨ "abbaca" ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤ "bb" ç”±äºä¸¤å­—æ¯ç›¸é‚»ä¸”ç›¸åŒï¼Œè¿™æ˜¯æ­¤æ—¶å”¯ä¸€å¯ä»¥æ‰§è¡Œåˆ é™¤æ“ä½œçš„é‡å¤é¡¹ã€‚ä¹‹åæˆ‘ä»¬å¾—åˆ°å­—ç¬¦ä¸² "aaca"ï¼Œå…¶ä¸­åˆåªæœ‰ "aa" å¯ä»¥æ‰§è¡Œé‡å¤é¡¹åˆ é™¤æ“ä½œï¼Œæ‰€ä»¥æœ€åçš„å­—ç¬¦ä¸²ä¸º "ca"ã€‚
```

```java
class Solution {
    /**
     * ç§»é™¤å­—ç¬¦ä¸²ä¸­æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹
     * 
     * @param s è¾“å…¥çš„å­—ç¬¦ä¸²
     * @return ç§»é™¤æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹åçš„å­—ç¬¦ä¸²
     */
    public String removeDuplicates(String s) {
        // ä½¿ç”¨æ ˆä½œä¸ºè¾…åŠ©ç»“æ„ï¼Œç”¨äºä¸´æ—¶å­˜å‚¨å­—ç¬¦å¹¶æ–¹ä¾¿ç§»é™¤ç›¸é‚»é‡å¤é¡¹
        Stack<Character> auxiliaryStack = new Stack<>();
        // StringBuilderç”¨äºæ„å»ºæœ€ç»ˆçš„ç»“æœå­—ç¬¦ä¸²
        StringBuilder sb = new StringBuilder();
        
        // éå†è¾“å…¥å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦
        for (int i = 0; i < s.length(); i++) {
            // å¦‚æœæ ˆä¸ä¸ºç©ºä¸”æ ˆé¡¶å…ƒç´ ä¸å½“å‰å­—ç¬¦ç›¸åŒï¼Œåˆ™ç§»é™¤æ ˆé¡¶å…ƒç´ ï¼Œå³ç§»é™¤ç›¸é‚»é‡å¤é¡¹
            if (!auxiliaryStack.isEmpty() && auxiliaryStack.peek() == s.charAt(i)) {
                auxiliaryStack.pop();
            } else {
                // å¦åˆ™ï¼Œå°†å½“å‰å­—ç¬¦å‹å…¥æ ˆä¸­
                auxiliaryStack.push(s.charAt(i));
            }
        }
        
        // å°†æ ˆä¸­å‰©ä½™çš„å­—ç¬¦è½¬ç§»åˆ°StringBuilderä¸­ï¼Œæ„å»ºç§»é™¤é‡å¤é¡¹åçš„å­—ç¬¦ä¸²
        while (!auxiliaryStack.isEmpty()) {
            sb.append(auxiliaryStack.pop());
        }
        
        // ç”±äºæ ˆçš„ç‰¹æ€§æ˜¯åè¿›å…ˆå‡ºï¼Œæ‰€ä»¥éœ€è¦å°†StringBuilderä¸­çš„å­—ç¬¦ä¸²åè½¬ï¼Œä»¥å¾—åˆ°æ­£ç¡®çš„é¡ºåº
        return sb.reverse().toString();
    }
}
```

### 150.é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ `tokens` ï¼Œè¡¨ç¤ºä¸€ä¸ªæ ¹æ® [é€†æ³¢å…°è¡¨ç¤ºæ³•](https://baike.baidu.com/item/é€†æ³¢å…°å¼/128437) è¡¨ç¤ºçš„ç®—æœ¯è¡¨è¾¾å¼ã€‚

è¯·ä½ è®¡ç®—è¯¥è¡¨è¾¾å¼ã€‚è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¡¨è¾¾å¼å€¼çš„æ•´æ•°ã€‚

**æ³¨æ„ï¼š**

- æœ‰æ•ˆçš„ç®—ç¬¦ä¸º `'+'`ã€`'-'`ã€`'*'` å’Œ `'/'` ã€‚
- æ¯ä¸ªæ“ä½œæ•°ï¼ˆè¿ç®—å¯¹è±¡ï¼‰éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°æˆ–è€…å¦ä¸€ä¸ªè¡¨è¾¾å¼ã€‚
- ä¸¤ä¸ªæ•´æ•°ä¹‹é—´çš„é™¤æ³•æ€»æ˜¯ **å‘é›¶æˆªæ–­** ã€‚
- è¡¨è¾¾å¼ä¸­ä¸å«é™¤é›¶è¿ç®—ã€‚
- è¾“å…¥æ˜¯ä¸€ä¸ªæ ¹æ®é€†æ³¢å…°è¡¨ç¤ºæ³•è¡¨ç¤ºçš„ç®—æœ¯è¡¨è¾¾å¼ã€‚
- ç­”æ¡ˆåŠæ‰€æœ‰ä¸­é—´è®¡ç®—ç»“æœå¯ä»¥ç”¨ **32 ä½** æ•´æ•°è¡¨ç¤ºã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼štokens = ["2","1","+","3","*"]
è¾“å‡ºï¼š9
è§£é‡Šï¼šè¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š((2 + 1) * 3) = 9
```

```java
class Solution {
    /**
     * æ ¹æ®é€†æ³¢å…°è¡¨è¾¾å¼è®¡ç®—ç»“æœ
     * é€†æ³¢å…°è¡¨è¾¾å¼æ˜¯ä¸€ç§æ²¡æœ‰æ‹¬å·çš„ç®—æœ¯è¡¨è¾¾å¼ï¼Œä»¥ postfix å½¢å¼è¡¨ç¤º
     * åœ¨è¿™ç§è¡¨ç¤ºä¸­ï¼Œæ“ä½œæ•°å¯ä»¥æ˜¯æ•°å­—æˆ–å¦ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè€Œè¿ç®—ç¬¦ä½äºæ“ä½œæ•°ä¹‹å
     *
     * @param tokens å­—ç¬¦ä¸²æ•°ç»„ï¼ŒåŒ…å«é€†æ³¢å…°è¡¨è¾¾å¼çš„ç¬¦å·å’Œæ“ä½œæ•°
     * @return è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœ
     */
    public int evalRPN(String[] tokens) {
        // åˆ›å»ºä¸€ä¸ªè¾…åŠ©æ ˆï¼Œç”¨äºå­˜å‚¨è¿ç®—è¿‡ç¨‹ä¸­çš„ä¸­é—´ç»“æœ
        Stack<Integer> auxiliaryStack = new Stack<>();
        
        // éå†é€†æ³¢å…°è¡¨è¾¾å¼çš„æ¯ä¸ªå…ƒç´ 
        for (int i = 0; i < tokens.length; i++) {
            // å½“å‰å…ƒç´ ä¸ºè¿ç®—ç¬¦"+"
            if (tokens[i].equals("+")) {
                // ä»æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªæ“ä½œæ•°
                int num1 = auxiliaryStack.pop();
                int num2 = auxiliaryStack.pop();
                // å°†ä¸¤ä¸ªæ“ä½œæ•°çš„å’Œå‹å…¥æ ˆä¸­
                auxiliaryStack.push(num2 + num1);
            } 
            // å½“å‰å…ƒç´ ä¸ºè¿ç®—ç¬¦"-"
            else if (tokens[i].equals("-")) {
                // ä»æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªæ“ä½œæ•°
                int num1 = auxiliaryStack.pop();
                int num2 = auxiliaryStack.pop();
                // å°†ä¸¤ä¸ªæ“ä½œæ•°çš„å·®å‹å…¥æ ˆä¸­
                auxiliaryStack.push(num2 - num1);
            } 
            // å½“å‰å…ƒç´ ä¸ºè¿ç®—ç¬¦"*"
            else if (tokens[i].equals("*")) {
                // ä»æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªæ“ä½œæ•°
                int num1 = auxiliaryStack.pop();
                int num2 = auxiliaryStack.pop();
                // å°†ä¸¤ä¸ªæ“ä½œæ•°çš„ä¹˜ç§¯ç´¯å…¥æ ˆä¸­
                auxiliaryStack.push(num2 * num1);
            } 
            // å½“å‰å…ƒç´ ä¸ºè¿ç®—ç¬¦"/"
            else if (tokens[i].equals("/")) {
                // ä»æ ˆä¸­å¼¹å‡ºä¸¤ä¸ªæ“ä½œæ•°
                int num1 = auxiliaryStack.pop();
                int num2 = auxiliaryStack.pop();
                // å°†ä¸¤ä¸ªæ“ä½œæ•°çš„å•†å‹å…¥æ ˆä¸­
                auxiliaryStack.push(num2 / num1);
            } 
            // å½“å‰å…ƒç´ ä¸ºæ“ä½œæ•°
            else {
                // å°†æ“ä½œæ•°è§£æä¸ºæ•´æ•°å¹¶å‹å…¥æ ˆä¸­
                auxiliaryStack.push(Integer.parseInt(tokens[i]));
            }
        }
        // è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œå³è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœ
        return auxiliaryStack.peek();
    }
}
```

### 394.å­—ç¬¦ä¸²è§£ç ï¼ˆhot100ï¼‰(4.2)

ç»™å®šä¸€ä¸ªç»è¿‡ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œè¿”å›å®ƒè§£ç åçš„å­—ç¬¦ä¸²ã€‚

ç¼–ç è§„åˆ™ä¸º: `k[encoded_string]`ï¼Œè¡¨ç¤ºå…¶ä¸­æ–¹æ‹¬å·å†…éƒ¨çš„ `encoded_string` æ­£å¥½é‡å¤ `k` æ¬¡ã€‚æ³¨æ„ `k` ä¿è¯ä¸ºæ­£æ•´æ•°ã€‚

ä½ å¯ä»¥è®¤ä¸ºè¾“å…¥å­—ç¬¦ä¸²æ€»æ˜¯æœ‰æ•ˆçš„ï¼›è¾“å…¥å­—ç¬¦ä¸²ä¸­æ²¡æœ‰é¢å¤–çš„ç©ºæ ¼ï¼Œä¸”è¾“å…¥çš„æ–¹æ‹¬å·æ€»æ˜¯ç¬¦åˆæ ¼å¼è¦æ±‚çš„ã€‚

æ­¤å¤–ï¼Œä½ å¯ä»¥è®¤ä¸ºåŸå§‹æ•°æ®ä¸åŒ…å«æ•°å­—ï¼Œæ‰€æœ‰çš„æ•°å­—åªè¡¨ç¤ºé‡å¤çš„æ¬¡æ•° `k` ï¼Œä¾‹å¦‚ä¸ä¼šå‡ºç°åƒ `3a` æˆ– `2[4]` çš„è¾“å…¥ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "3[a]2[bc]"
è¾“å‡ºï¼š"aaabcbc"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "3[a2[c]]"
è¾“å‡ºï¼š"accaccacc"
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = "2[abc]3[cd]ef"
è¾“å‡ºï¼š"abcabccdcdcdef"
```

ç›´è§‚çš„è§£æ³•ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œä¸æ¨èè®°å¿†ã€‚

```java
class Solution {
    /**
     * è§£ç å­—ç¬¦ä¸²
     * 
     * æ ¹æ®ç»™å®šçš„è§„åˆ™è§£ç å­—ç¬¦ä¸²ï¼Œè§„åˆ™ä¸ºï¼šk[encoded_string]ï¼Œè¡¨ç¤ºå…¶ä¸­æ–¹æ‹¬å·å†…éƒ¨çš„ encoded_string æ­£å¥½é‡å¤ k æ¬¡
     * æ•°å­— k ä¸ºæ­£æ•´æ•°ï¼Œè¾“å…¥å­—ç¬¦ä¸²ä¿è¯æ˜¯æœ‰æ•ˆçš„ï¼Œä¸åŒ…å«é¢å¤–çš„ç©ºæ ¼ï¼Œå¹¶ä¸”æ–¹æ‹¬å·æ€»æ˜¯ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆ
     * 
     * @param s å¾…è§£ç çš„å­—ç¬¦ä¸²
     * @return è§£ç åçš„å­—ç¬¦ä¸²
     */
    public String decodeString(String s) {
        // ç”¨äºæ‹¼æ¥æœ€ç»ˆçš„è§£ç å­—ç¬¦ä¸²
        StringBuilder sb = new StringBuilder();
        // è¾…åŠ©æ ˆï¼Œç”¨äºå­˜å‚¨é‡åˆ°çš„æ•°å­—ï¼Œä»¥ä¾¿åç»­é‡å¤å­—ç¬¦ä¸²
        Stack<Integer> auxiliaryStackDigit = new Stack<>();
        // è¾…åŠ©æ ˆï¼Œç”¨äºå­˜å‚¨å­—ç¬¦ä¸²ç‰‡æ®µ
        Stack<String> auxiliaryStackChar = new Stack<>();
        // å½“å‰å¤„ç†çš„ä½ç½®
        int pos = 0;
        // ä¸´æ—¶å­˜å‚¨æ•°å­—ï¼Œç”¨äºè®¡ç®—é‡å¤æ¬¡æ•°
        int num = 0;
        // è¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦
        int size = s.length();
        // ä¸´æ—¶å­—ç¬¦ä¸²æ„å»ºå™¨ï¼Œç”¨äºç»„è£…é‡å¤çš„å­—ç¬¦ä¸²
        StringBuilder tempSB = new StringBuilder();

        // éå†è¾“å…¥å­—ç¬¦ä¸²
        while (pos < size) {
            // å¦‚æœå½“å‰å­—ç¬¦æ˜¯å­—æ¯ä¸”æ ˆä¸ºç©ºï¼Œç›´æ¥å°†å­—æ¯æ·»åŠ åˆ°ç»“æœå­—ç¬¦ä¸²ä¸­
            if (Character.isLetter(s.charAt(pos)) && auxiliaryStackDigit.isEmpty()) {
                sb.append(s.charAt(pos));
            } else if (Character.isDigit(s.charAt(pos))) {
                // å¦‚æœå½“å‰å­—ç¬¦æ˜¯æ•°å­—ï¼Œè®¡ç®—æ•°å­—çš„å€¼
                num = num * 10 + s.charAt(pos) - '0';
            } else if (s.charAt(pos) == '[') {
                /**
                 * é‡åˆ°å·¦æ‹¬å· '['ï¼Œå°†ä¹‹å‰çš„æ•°å­—å…¥æ ˆï¼Œå¹¶åˆå§‹åŒ–å­—ç¬¦ä¸²ç‰‡æ®µ
                 * 
                 * ä¸ºä»€ä¹ˆè¦åœ¨é‡åˆ°å·¦æ‹¬å·æ—¶åŠ å…¥ç©ºå­—ç¬¦ä¸²ï¼Ÿ
                 * - å› ä¸ºæ¯å½“é‡åˆ°å·¦æ‹¬å·æ—¶ï¼Œæˆ‘ä»¬å³å°†å¤„ç†æ–°çš„æ‹¬å·èŒƒå›´å†…çš„å­—ç¬¦ä¸²ã€‚
                 * - éœ€è¦åˆå§‹åŒ–ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ç”¨äºä¿å­˜è¯¥èŒƒå›´å†…çš„å­—ç¬¦ã€‚å¦‚æœåé¢æœ‰åµŒå¥—çš„ç»“æ„ï¼Œåˆ™è¿˜ä¼šè¿›ä¸€æ­¥å¤„ç†ï¼Œ
                 *   æœ€ç»ˆå°†è§£ç åçš„å­—ç¬¦ä¸²æ‹¼æ¥åˆ°è¿™é‡Œå­˜å‚¨çš„ç©ºå­—ç¬¦ä¸²ä¸­ã€‚
                 * - è¿™æ ·åšç¡®ä¿äº†åœ¨åµŒå¥—çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ­£ç¡®ä¿å­˜æ¯å±‚çš„å­å­—ç¬¦ä¸²ã€‚
                 */
                auxiliaryStackDigit.push(num);  // å°†é‡å¤çš„æ¬¡æ•°æ¨å…¥æ ˆ
                auxiliaryStackChar.push("");    // åœ¨å­—ç¬¦æ ˆä¸­å­˜å…¥ç©ºå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ–°çš„å­å­—ç¬¦ä¸²
                num = 0;  // å°† num é‡ç½®ä¸º 0ï¼Œå‡†å¤‡è§£æä¸‹ä¸€ä¸ªæ•°å­—
            } else if (Character.isLetter(s.charAt(pos))) {
                // å¦‚æœåœ¨æ‹¬å·å†…é‡åˆ°å­—æ¯ï¼Œå°†å…¶æ·»åŠ åˆ°æ ˆé¡¶çš„å­—ç¬¦ä¸²ä¸­
                auxiliaryStackChar.push(auxiliaryStackChar.pop() + s.charAt(pos));
            } else {
                // é‡åˆ°å³æ‹¬å· ']'ï¼Œå¤„ç†æ‹¬å·å†…çš„å­—ç¬¦ä¸²é‡å¤é—®é¢˜
                int tempNum = auxiliaryStackDigit.pop();  // å¼¹å‡ºæ•°å­—ï¼Œè¡¨ç¤ºé‡å¤æ¬¡æ•°
                String tempStr = auxiliaryStackChar.pop();  // å¼¹å‡ºæ ˆé¡¶çš„å­—ç¬¦ä¸²ï¼Œå³æ–¹æ‹¬å·å†…çš„å­—ç¬¦ä¸²

                // å°†å¼¹å‡ºçš„å­—ç¬¦ä¸²é‡å¤ tempNum æ¬¡
                for (int i = 0; i < tempNum; i++) {
                    tempSB.append(tempStr);
                }

                /**
                 * å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œè¯´æ˜è¿˜æœ‰æ›´å¤–å±‚çš„åµŒå¥—ï¼Œå½“å‰é‡å¤ç»“æœéœ€è¦ç»§ç»­å­˜æ”¾åœ¨æ ˆé¡¶çš„å­—ç¬¦ä¸²ä¸­
                 * å¦åˆ™ï¼Œå°†é‡å¤åçš„å­—ç¬¦ä¸²æ·»åŠ åˆ°æœ€ç»ˆçš„ç»“æœ sb ä¸­
                 */
                if (!auxiliaryStackChar.isEmpty()) {
                    auxiliaryStackChar.push(auxiliaryStackChar.pop() + tempSB.toString());
                } else {
                    sb.append(tempSB.toString());
                }

                /**
                 * æ¸…ç©ºä¸´æ—¶å­—ç¬¦ä¸²æ„å»ºå™¨ tempSBï¼Œä»¥ä¾¿åç»­ä½¿ç”¨
                 * 
                 * ä¸ºä»€ä¹ˆ StringBuilder.setLength(0) å¯è¡Œï¼Ÿ
                 * - `StringBuilder.setLength(0)` å®é™…ä¸Šæ˜¯é‡ç½® `StringBuilder` çš„é•¿åº¦ä¸º 0ï¼Œ
                 *   æ¸…ç©ºæ‰€æœ‰å­—ç¬¦çš„æœ‰æ•ˆéƒ¨åˆ†ï¼Œä¸ä¼šé‡æ–°åˆ†é…å†…å­˜ã€‚
                 * - è¿™ä¸ªæ“ä½œå¾ˆé«˜æ•ˆï¼Œå®ƒä¸ä¼šåˆ é™¤åº•å±‚æ•°ç»„ä¸­çš„æ•°æ®ï¼Œä½†ä¼šå°†å…¶è§†ä¸ºæ— æ•ˆï¼Œä»è€Œå…è®¸åœ¨åŒä¸€å—
                 *   å†…å­˜ä¸­é‡æ–°è¿½åŠ æ–°å†…å®¹ã€‚
                 * - åœ¨è¿™é‡Œä½¿ç”¨ `setLength(0)` æ¥æ¸…ç©º `tempSB`ï¼Œæ˜¯ä¸ºäº†é¿å…åœ¨æ¯æ¬¡å¾ªç¯ä¸­åˆ›å»ºæ–°çš„ `StringBuilder` å¯¹è±¡ï¼Œ
                 *   æé«˜æ€§èƒ½ã€‚
                 */
                tempSB.setLength(0);
            }
            // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦
            pos++;
        }
        // è¿”å›è§£ç åçš„å­—ç¬¦ä¸²
        return sb.toString();
    }
}
```

**é€’å½’çš„è§£æ³•ï¼Œæ›´ç›´è§‚æ¨è**

```java
class Solution {
    public String decodeString(String s) {
        // ä½¿ç”¨é€’å½’æ–¹æ³•ï¼Œå…¥å£æ˜¯ä½ç½®0
        return dfs(s, new int[]{0});
    }

    // é€’å½’å‡½æ•°ï¼Œå‚æ•°sæ˜¯åŸå§‹å­—ç¬¦ä¸²ï¼Œindexæ˜¯å½“å‰å¤„ç†ä½ç½®çš„æŒ‡é’ˆï¼ˆç”¨æ•°ç»„æ¨¡æ‹Ÿå¼•ç”¨ä¼ é€’ï¼‰
    private String dfs(String s, int[] index) {
        StringBuilder res = new StringBuilder();
        int num = 0; // ç”¨äºç´¯ç§¯å½“å‰æ•°å­—

        while (index[0] < s.length()) {
            char c = s.charAt(index[0]);
            if (Character.isDigit(c)) {
                // è®¡ç®—æ•°å­—çš„å€¼
                num = num * 10 + (c - '0');
                index[0]++; // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦
            } else if (c == '[') {
                // é‡åˆ°å·¦æ‹¬å·ï¼Œé€’å½’å¤„ç†å­ä¸²
                index[0]++; // è·³è¿‡'['
                String inner = dfs(s, index); // é€’å½’å¾—åˆ°æ‹¬å·å†…çš„è§£ç ç»“æœ
                // å°†å­ä¸²é‡å¤numæ¬¡æ‹¼æ¥åˆ°ç»“æœ
                for (int i = 0; i < num; i++) {
                    res.append(inner);
                }
                num = 0; // é‡ç½®num
            } else if (c == ']') {
                // é‡åˆ°å³æ‹¬å·ï¼Œç»“æŸå½“å‰é€’å½’å±‚ï¼Œè¿”å›ç»“æœ
                index[0]++; // è·³è¿‡']'
                return res.toString();
            } else {
                // æ™®é€šå­—ç¬¦ç›´æ¥æ‹¼æ¥
                res.append(c);
                index[0]++;
            }
        }
        // è¿”å›æœ€ç»ˆç»“æœ
        return res.toString();
    }
}
```





### 239.æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆhot100ï¼‰(3.25)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸º `k` çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£å†…çš„ `k` ä¸ªæ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½ã€‚

è¿”å› æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼*ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,3,-1,-3,5,3,6,7], k = 3
è¾“å‡ºï¼š[3,3,5,5,6,7]
è§£é‡Šï¼š
æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼
---------------               -----
[1  3  -1] -3  5  3  6  7       3
 1 [3  -1  -3] 5  3  6  7       3
 1  3 [-1  -3  5] 3  6  7       5
 1  3  -1 [-3  5  3] 6  7       5
 1  3  -1  -3 [5  3  6] 7       6
 1  3  -1  -3  5 [3  6  7]      7
```

å•è°ƒé˜Ÿåˆ—

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œæä¾›æ»‘åŠ¨çª—å£æœ€å¤§å€¼çš„è®¡ç®—åŠŸèƒ½
 */
class Solution {
    /**
     * è®¡ç®—æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼
     * 
     * æœ¬æ–¹æ³•é€šè¿‡ç»´æŠ¤ä¸€ä¸ªè¾…åŠ©åŒç«¯é˜Ÿåˆ—æ¥å®ç°é«˜æ•ˆæŸ¥æ‰¾æ¯ä¸ªçª—å£çš„æœ€å¤§å€¼è¯¥é˜Ÿåˆ—ä¿è¯é˜Ÿé¦–å…ƒç´ æ€»æ˜¯å½“å‰çª—å£çš„æœ€å¤§å€¼ï¼Œ
     * å¹¶ä¸”é˜Ÿåˆ—ä¸­çš„å…ƒç´ ç´¢å¼•ä¸ä¼šåŒ…å«çª—å£ä¹‹å¤–çš„å…ƒç´ è¿™ç§æ–¹æ³•é¿å…äº†å¯¹æ¯ä¸ªçª—å£è¿›è¡Œå…¨æ•°ç»„æ‰«æï¼Œæé«˜äº†æ•ˆç‡
     * 
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @param k çª—å£çš„å¤§å°
     * @return ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ¯ä¸ªæ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼
     */
    public int[] maxSlidingWindow(int[] nums, int k) {
        // è¾…åŠ©åŒç«¯é˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨æ•°ç»„ç´¢å¼•
        Deque<Integer> auxiliaryDeque = new LinkedList<>();
        // ç”¨äºå­˜å‚¨ç»“æœçš„æ•°ç»„ï¼Œé•¿åº¦ä¸ºåŸæ•°ç»„é•¿åº¦å‡å»çª—å£å¤§å°åŠ ä¸€
        int[] resultArray = new int[nums.length - k + 1];
        
        for (int i = 0; i < nums.length; i++) {
            // ç§»é™¤é˜Ÿé¦–è¶…å‡ºçª—å£èŒƒå›´çš„ç´¢å¼•
            while (!auxiliaryDeque.isEmpty() && auxiliaryDeque.peekFirst() == i - k) {
                auxiliaryDeque.pollFirst();
            }
            // ç§»é™¤é˜Ÿå°¾æ‰€æœ‰å°äºå½“å‰å…ƒç´ ç´¢å¼•çš„å…ƒç´ ï¼Œä»¥ä¿è¯é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä»å¤§åˆ°å°æ’åˆ—
            while (!auxiliaryDeque.isEmpty() && nums[auxiliaryDeque.peekLast()] < nums[i]) {
                auxiliaryDeque.pollLast();
            }
            // å°†å½“å‰å…ƒç´ ç´¢å¼•åŠ å…¥é˜Ÿå°¾
            auxiliaryDeque.offerLast(i);
            // å½“å‰å…ƒç´ å±äºç¬¬i-k+1ä¸ªçª—å£ï¼Œè®°å½•æ­¤çª—å£çš„æœ€å¤§å€¼
            if (i >= k - 1) {
                resultArray[i - k + 1] = nums[auxiliaryDeque.peekFirst()];
            }
        }
        // è¿”å›ç»“æœæ•°ç»„
        return resultArray;
    }
}
```

### 215.æ•°ç»„ä¸­ç¬¬kä¸ªæœ€å¤§å…ƒç´ ï¼ˆhot100ï¼‰

ç»™å®šæ•´æ•°æ•°ç»„ `nums` å’Œæ•´æ•° `k`ï¼Œè¯·è¿”å›æ•°ç»„ä¸­ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚

è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ `k` ä¸ªä¸åŒçš„å…ƒç´ ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: [3,2,1,5,6,4], k = 2
è¾“å‡º: 5
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: [3,2,3,1,2,4,5,5,6], k = 4
è¾“å‡º: 4
```

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥å¯»æ‰¾æ•°ç»„ä¸­ç¬¬kå¤§çš„å…ƒç´ 
 */
class Solution {
    /**
     * å¯»æ‰¾æ•°ç»„ä¸­ç¬¬kå¤§çš„å…ƒç´ 
     * 
     * @param nums ä¸€ä¸ªæ•´æ•°æ•°ç»„
     * @param k ç¬¬kå¤§çš„å…ƒç´ çš„ç´¢å¼•
     * @return æ•°ç»„ä¸­ç¬¬kå¤§çš„å…ƒç´ 
     */
    public int findKthLargest(int[] nums, int k) {
        // åˆ›å»ºä¸€ä¸ªæœ€å¤§å †ï¼Œç”¨äºå­˜å‚¨æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¹¶èƒ½é«˜æ•ˆåœ°è·å–æœ€å¤§å…ƒç´ 
        PriorityQueue<Integer> maxHeap = new PriorityQueue<>(Comparator.reverseOrder());
        // å°†æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°æœ€å¤§å †ä¸­
        for (int num : nums) {
            maxHeap.add(num);
        }
        // ä»æœ€å¤§å †ä¸­ç§»é™¤k-1ä¸ªå…ƒç´ ï¼Œä»¥ä¾¿å †é¡¶å…ƒç´ ä¸ºç¬¬kå¤§çš„å…ƒç´ 
        for (int i = 0; i < k - 1; i++) {
            maxHeap.poll();
        }
        // è¿”å›æœ€å¤§å †çš„å †é¡¶å…ƒç´ ï¼Œå³ç¬¬kå¤§çš„å…ƒç´ 
        return maxHeap.peek();
    }
}
```



### 347.å‰kä¸ªé«˜é¢‘å…ƒç´ ï¼ˆhot100ï¼‰(3.20)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ è¿”å›å…¶ä¸­å‡ºç°é¢‘ç‡å‰ `k` é«˜çš„å…ƒç´ ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,1,1,2,2,3], k = 2
è¾“å‡º: [1,2]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [1], k = 1
è¾“å‡º: [1]
```

```java
class Solution {
    /**
     * æ‰¾å‡ºæ•°ç»„ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„kä¸ªæ•°
     * 
     * @param nums åŸå§‹æ•´æ•°æ•°ç»„
     * @param k éœ€è¦è¿”å›çš„å…ƒç´ ä¸ªæ•°
     * @return å‡ºç°é¢‘ç‡æœ€é«˜çš„kä¸ªæ•°çš„æ•°ç»„
     */
    public int[] topKFrequent(int[] nums, int k) {
        // ä½¿ç”¨å“ˆå¸Œè¡¨æ¥å­˜å‚¨æ¯ä¸ªæ•°å­—å‡ºç°çš„é¢‘ç‡
        HashMap<Integer, Integer> auxiliaryMap = new HashMap<>();
        // ç»“æœæ•°ç»„ï¼Œç”¨äºå­˜å‚¨å‡ºç°é¢‘ç‡æœ€é«˜çš„kä¸ªæ•°
        int[] resultArray = new int[k];
        
        // éå†è¾“å…¥æ•°ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„é¢‘ç‡
        for (int i = 0; i < nums.length; i++) {
            auxiliaryMap.put(nums[i], auxiliaryMap.getOrDefault(nums[i], 0) + 1);
        }
        
        // ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ¥ç»´æŠ¤å‡ºç°é¢‘ç‡æœ€é«˜çš„kä¸ªæ•°ï¼Œé˜Ÿåˆ—çš„æ’åºä¾æ®æ˜¯é¢‘ç‡çš„å¤§å°
        PriorityQueue<Map.Entry<Integer, Integer>> auxiliaryHeap = new PriorityQueue<>(
                (a, b) -> a.getValue() - b.getValue()
        );
        
        // éå†å“ˆå¸Œè¡¨ä¸­çš„æ¯ä¸ªæ¡ç›®ï¼Œå°†æ¡ç›®æ·»åŠ åˆ°ä¼˜å…ˆé˜Ÿåˆ—ä¸­
        for (Map.Entry<Integer, Integer> entry : auxiliaryMap.entrySet()) {
            auxiliaryHeap.add(entry);
            // å¦‚æœä¼˜å…ˆé˜Ÿåˆ—çš„å¤§å°è¶…è¿‡kï¼Œåˆ™ç§»é™¤é˜Ÿé¦–å…ƒç´ ï¼Œä¿è¯é˜Ÿåˆ—ä¸­åªä¿ç•™é¢‘ç‡æœ€é«˜çš„kä¸ªæ•°
            if (auxiliaryHeap.size() > k) {
                auxiliaryHeap.poll();
            }
        }
        
        // ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­æŒ‰é¢‘ç‡ä»é«˜åˆ°ä½çš„é¡ºåºå–å‡ºå…ƒç´ ï¼Œå¡«å……ç»“æœæ•°ç»„
        for (int i = k - 1; i >= 0; i--) {
            resultArray[i] = auxiliaryHeap.poll().getKey();
        }
        
        // è¿”å›ç»“æœæ•°ç»„
        return resultArray;
    }
}
```

### 295.æ•°æ®æµçš„ä¸­ä½æ•°ï¼ˆnew hot100ï¼‰(3.20)

**ä¸­ä½æ•°**æ˜¯æœ‰åºæ•´æ•°åˆ—è¡¨ä¸­çš„ä¸­é—´å€¼ã€‚å¦‚æœåˆ—è¡¨çš„å¤§å°æ˜¯å¶æ•°ï¼Œåˆ™æ²¡æœ‰ä¸­é—´å€¼ï¼Œä¸­ä½æ•°æ˜¯ä¸¤ä¸ªä¸­é—´å€¼çš„å¹³å‡å€¼ã€‚

- ä¾‹å¦‚ `arr = [2,3,4]` çš„ä¸­ä½æ•°æ˜¯ `3` ã€‚
- ä¾‹å¦‚ `arr = [2,3]` çš„ä¸­ä½æ•°æ˜¯ `(2 + 3) / 2 = 2.5` ã€‚

å®ç° MedianFinder ç±»:

- `MedianFinder() `åˆå§‹åŒ– `MedianFinder` å¯¹è±¡ã€‚
- `void addNum(int num)` å°†æ•°æ®æµä¸­çš„æ•´æ•° `num` æ·»åŠ åˆ°æ•°æ®ç»“æ„ä¸­ã€‚
- `double findMedian()` è¿”å›åˆ°ç›®å‰ä¸ºæ­¢æ‰€æœ‰å…ƒç´ çš„ä¸­ä½æ•°ã€‚ä¸å®é™…ç­”æ¡ˆç›¸å·® `10-5` ä»¥å†…çš„ç­”æ¡ˆå°†è¢«æ¥å—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥
["MedianFinder", "addNum", "addNum", "findMedian", "addNum", "findMedian"]
[[], [1], [2], [], [3], []]
è¾“å‡º
[null, null, null, 1.5, null, 2.0]

è§£é‡Š
MedianFinder medianFinder = new MedianFinder();
medianFinder.addNum(1);    // arr = [1]
medianFinder.addNum(2);    // arr = [1, 2]
medianFinder.findMedian(); // è¿”å› 1.5 ((1 + 2) / 2)
medianFinder.addNum(3);    // arr[1, 2, 3]
medianFinder.findMedian(); // return 2.0
```

**çº¯èƒŒï¼Œæ— fuckè¯´**

```java
/**
 * MedianFinder ç±»ç”¨äºåœ¨çº¿è·¯ä¸­å¯»æ‰¾æ•°æ®çš„ä¸­ä½æ•°
 * é€šè¿‡ç»´æŠ¤ä¸¤ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼ˆä¸€ä¸ªæœ€å¤§å †ï¼Œä¸€ä¸ªæœ€å°å †ï¼‰æ¥å®ç°
 * æœ€å¤§å †ï¼ˆmaxHeapï¼‰å­˜å‚¨è¾ƒå°çš„ä¸€åŠæ•°å€¼ï¼Œæœ€å°å †ï¼ˆminHeapï¼‰å­˜å‚¨è¾ƒå¤§çš„ä¸€åŠæ•°å€¼
 */
class MedianFinder {
    // æœ€å¤§å †ï¼Œå­˜å‚¨è¾ƒå°çš„ä¸€åŠæ•°å€¼
    PriorityQueue<Integer> maxHeap;
    // æœ€å°å †ï¼Œå­˜å‚¨è¾ƒå¤§çš„ä¸€åŠæ•°å€¼
    PriorityQueue<Integer> minHeap;

    /**
     * æ„é€ å‡½æ•°åˆå§‹åŒ–ä¸¤ä¸ªä¼˜å…ˆé˜Ÿåˆ—
     * maxHeap ä½¿ç”¨åå‘æ’åºå™¨ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªæœ€å¤§å †
     * minHeap ä½¿ç”¨é»˜è®¤æ’åºå™¨ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªæœ€å°å †
     */
    public MedianFinder() {
        maxHeap = new PriorityQueue<>(Comparator.reverseOrder());
        minHeap = new PriorityQueue<>();
    }
    
    /**
     * å‘æ•°æ®ç»“æ„ä¸­æ·»åŠ ä¸€ä¸ªæ•°å­—
     * é¦–å…ˆå°†æ•°å­—æ·»åŠ åˆ°æœ€å¤§å †ä¸­ï¼Œç„¶åå°†æœ€å¤§å †çš„é¡¶éƒ¨å…ƒç´ ç§»åŠ¨åˆ°æœ€å°å †ä¸­
     * å¦‚æœæœ€å°å †æ¯”æœ€å¤§å †å¤§1ï¼Œå°†æœ€å°å †çš„é¡¶éƒ¨å…ƒç´ ç§»å›æœ€å¤§å †
     * è¿™æ ·å¯ä»¥ç¡®ä¿æœ€å¤§å †å’Œæœ€å°å †çš„å¤§å°ç›¸å·®ä¸è¶…è¿‡1ï¼Œä¸”æœ€å¤§å †çš„é¡¶éƒ¨å…ƒç´ æ˜¯ä¸­ä½æ•°æˆ–ä¸­ä½æ•°ä¹‹ä¸€
     * @param num è¦æ·»åŠ çš„æ•°å­—
     */
    public void addNum(int num) {
        maxHeap.add(num);
        minHeap.add(maxHeap.poll());
        if (minHeap.size() > maxHeap.size()) {
            maxHeap.add(minHeap.poll());
        }
    }
    
    /**
     * è¿”å›å½“å‰æ•°æ®æµçš„ä¸­ä½æ•°
     * å¦‚æœæœ€å¤§å †å’Œæœ€å°å †çš„å¤§å°ç›¸ç­‰ï¼Œè¿”å›ä¸¤å †é¡¶éƒ¨å…ƒç´ çš„å¹³å‡å€¼
     * å¦åˆ™ï¼Œè¿”å›æœ€å¤§å †çš„é¡¶éƒ¨å…ƒç´ ä½œä¸ºä¸­ä½æ•°
     * @return å½“å‰æ•°æ®æµçš„ä¸­ä½æ•°
     */
    public double findMedian() {
        if (maxHeap.size() == minHeap.size()) {
            return (maxHeap.peek() + minHeap.peek()) / 2.0;
        } else {
            return maxHeap.peek();
        }
    }
}

```

# äºŒå‰æ ‘

### 94.äºŒå‰æ ‘çš„ä¸­åºéå†ï¼ˆhot100ï¼‰

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å› *å®ƒçš„ **ä¸­åº** éå†* ã€‚

**ç¤ºä¾‹ 1ï¼š**

<img src="https://assets.leetcode.com/uploads/2020/09/15/inorder_1.jpg" alt="img" style="zoom:50%;" />

```
è¾“å…¥ï¼šroot = [1,null,2,3]
è¾“å‡ºï¼š[1,3,2]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = []
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [1]
è¾“å‡ºï¼š[1]
```

```java
//é€’å½’
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå®ç°äºŒå‰æ ‘çš„ä¸­åºéå†
    public List<Integer> inorderTraversal(TreeNode root) {
        List<Integer> res = new ArrayList<>();// åˆ›å»ºä¸€ä¸ªå­˜æ”¾ç»“æœçš„åˆ—è¡¨
        if (root == null) {
            return res; // å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºåˆ—è¡¨
        }
        Stack<TreeNode> stack = new Stack<>(); // åˆ›å»ºä¸€ä¸ªæ ˆç”¨äºè¾…åŠ©éå†
        TreeNode cur = root;// å½“å‰èŠ‚ç‚¹åˆå§‹åŒ–ä¸ºæ ¹èŠ‚ç‚¹
        while (cur != null || !stack.isEmpty()) { // å¾ªç¯ç›´åˆ°å½“å‰èŠ‚ç‚¹ä¸ºç©ºä¸”æ ˆä¸ºç©º
            while (cur != null) { // å°†å½“å‰èŠ‚ç‚¹åŠå…¶å·¦å­èŠ‚ç‚¹ä¾æ¬¡å…¥æ ˆ
                stack.push(cur);
                cur = cur.left;
            }
            cur = stack.pop(); // å¼¹å‡ºæ ˆé¡¶èŠ‚ç‚¹ï¼Œå°†èŠ‚ç‚¹å€¼åŠ å…¥ç»“æœåˆ—è¡¨
            res.add(cur.val);
            cur = cur.right;  // å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘å³å­èŠ‚ç‚¹ï¼Œç»§ç»­éå†å³å­æ ‘
        }
        // è¿”å›æœ€ç»ˆç»“æœåˆ—è¡¨
        return res;
    }
}

//éé€’å½’
class Solution {
    public List<Integer> inorderTraversal(TreeNode root) {
        List<Integer> resultList = new ArrayList<>();
        if (root == null) {
            return resultList;
        }
        TreeNode tempNode;
        Stack<TreeNode> auxiliaryStack = new Stack<TreeNode>();
        tempNode = root;
        while (tempNode !=null || !auxiliaryStack.empty()) {
            if (tempNode != null) {
                auxiliaryStack.push(tempNode);
                tempNode = tempNode.left;
            } else {
                tempNode = auxiliaryStack.pop();
                resultList.add(tempNode.val);
                tempNode = tempNode.right;
            }
        }
        return resultList;
    }
}
```



### 144.äºŒå‰æ ‘çš„å‰åºéå†

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å›å®ƒèŠ‚ç‚¹å€¼çš„ **å‰åº** éå†ã€‚

**ç¤ºä¾‹ 1ï¼š**

![image-20240625111913951](C:\Users\16083\AppData\Roaming\Typora\typora-user-images\image-20240625111913951.png)

```
è¾“å…¥ï¼šroot = [1,null,2,3]
è¾“å‡ºï¼š[1,2,3]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = []
è¾“å‡ºï¼š[]
```

```java
class Solution {
    public List<Integer> postorderTraversal(TreeNode root) {
        List<Integer> result = new ArrayList<>();
        postorder(result, root);
        return result;
    }

    private void postorder(List<Integer> result,TreeNode root) {
        if (root == null) {
            return;
        }
		result.add(root.val);
        postorder(result, root.left);
        postorder(result, root.right);
        
    }
}


class Solution {
    public List<Integer> preorderTraversal(TreeNode root) {
        List<Integer> resultList = new ArrayList<>();
        if (root == null) {
            return resultList;
        }
        TreeNode tempNode;
        Stack<TreeNode> auxiliaryStack = new Stack<TreeNode>();
        auxiliaryStack.push(root);
        while (!auxiliaryStack.empty()) {
            tempNode = auxiliaryStack.pop();
            resultList.add(tempNode.val);
            if (tempNode.right != null) {
                auxiliaryStack.push(tempNode.right);
            }
            if (tempNode.left != null) {
                auxiliaryStack.push(tempNode.left);
            }
        }
        return resultList;
    }
}
```

### 145.äºŒå‰æ ‘çš„ååºéå†

```java
class Solution {
    public List<Integer> postorderTraversal(TreeNode root) {
        List<Integer> result = new ArrayList<>();
        postorder(result, root);
        return result;
    }

    private void postorder(List<Integer> result,TreeNode root) {
        if (root == null) {
            return;
        }

        postorder(result, root.left);
        postorder(result, root.right);
        result.add(root.val);
    }
}


class Solution {
    public List<Integer> postorderTraversal(TreeNode root) {
        List<Integer> resultList = new ArrayList<>();
        if (root == null) {
            return resultList;
        }
        TreeNode tempNode;
        Stack<TreeNode> auxiliaryStack = new Stack<TreeNode>();
        auxiliaryStack.push(root);
        while (!auxiliaryStack.empty()) {
            tempNode = auxiliaryStack.pop();
            resultList.add(tempNode.val);
            if (tempNode.left != null) {
                auxiliaryStack.push(tempNode.left);
            }
            if (tempNode.right != null) {
                auxiliaryStack.push(tempNode.right);
            }
        }
        Collections.reverse(resultList);
        return resultList;
    }
}
```





### 102.äºŒå‰æ ‘çš„å±‚åºéå†

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„ **å±‚åºéå†** ã€‚ ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

![image-20240625112827066](C:\Users\16083\AppData\Roaming\Typora\typora-user-images\image-20240625112827066.png)

```
è¾“å…¥ï¼šroot = [3,9,20,null,null,15,7]
è¾“å‡ºï¼š[[3],[9,20],[15,7]]
```

```java
/**
 * äºŒå‰æ ‘çš„å±‚åºéå†
 */
class Solution {
    /**
     * å±‚åºéå†äºŒå‰æ ‘
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return è¿”å›äºŒå‰æ ‘å±‚åºéå†çš„ç»“æœ
     */
    public List<List<Integer>> levelOrder(TreeNode root) {
        Queue<TreeNode> queue = new LinkedList<>(); // åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ç”¨äºå±‚åºéå†
        List<List<Integer>> res = new ArrayList<>(); // ç”¨äºå­˜å‚¨å±‚åºéå†çš„ç»“æœ
        if (root == null) {
            return res; // å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºç»“æœ
        }
        queue.add(root); // å°†æ ¹èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
        while (!queue.isEmpty()) {
            int size = queue.size(); // è·å–å½“å‰å±‚çš„èŠ‚ç‚¹ä¸ªæ•°
            List<Integer> list = new ArrayList<>(); // ç”¨äºå­˜å‚¨å½“å‰å±‚çš„èŠ‚ç‚¹å€¼
            for (int i = 0; i < size; i++) {
                TreeNode node = queue.poll(); // ä»é˜Ÿåˆ—ä¸­å–å‡ºèŠ‚ç‚¹
                list.add(node.val); // å°†èŠ‚ç‚¹å€¼åŠ å…¥å½“å‰å±‚çš„åˆ—è¡¨
                if (node.left != null) {
                    queue.add(node.left); // å°†å·¦å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                }
                if (node.right != null) {
                    queue.add(node.right); // å°†å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                }
            }
            res.add(list); // å°†å½“å‰å±‚çš„èŠ‚ç‚¹å€¼åˆ—è¡¨åŠ å…¥ç»“æœåˆ—è¡¨
        }
        return res; // è¿”å›å±‚åºéå†çš„ç»“æœ
    }
}
```

### 107.äºŒå‰æ ‘çš„å±‚æ¬¡éå†II(3.26)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼è‡ªåº•å‘ä¸Šçš„å±‚æ¬¡éå†ã€‚ ï¼ˆå³æŒ‰ä»å¶å­èŠ‚ç‚¹æ‰€åœ¨å±‚åˆ°æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„å±‚ï¼Œé€å±‚ä»å·¦å‘å³éå†ï¼‰

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210203151058308.png" alt="107.äºŒå‰æ ‘çš„å±‚æ¬¡éå†II" style="zoom:50%;" />

```java
class Solution {
    // äºŒå‰æ ‘çš„å±‚åºéå† II
    public List<List<Integer>> levelOrderBottom(TreeNode root) {
        // åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ç”¨äºå±‚åºéå†
        Queue<TreeNode> queue = new LinkedList<>();
        // åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ç”¨äºå­˜å‚¨ç»“æœ
        List<List<Integer>> res = new ArrayList<>();
        // å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºç»“æœåˆ—è¡¨
        if (root == null) {
            return res;
        }
        // å°†æ ¹èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
        queue.add(root);
        // éå†é˜Ÿåˆ—ç›´åˆ°ä¸ºç©º
        while (!queue.isEmpty()) {
            // è·å–å½“å‰å±‚çš„èŠ‚ç‚¹æ•°
            int size = queue.size();
            // åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ç”¨äºå­˜å‚¨å½“å‰å±‚çš„èŠ‚ç‚¹å€¼
            List<Integer> list = new ArrayList<>();
            // éå†å½“å‰å±‚çš„èŠ‚ç‚¹
            for (int i = 0; i < size; i++) {
                // å¼¹å‡ºé˜Ÿé¦–èŠ‚ç‚¹
                TreeNode node = queue.poll();
                // å°†èŠ‚ç‚¹å€¼åŠ å…¥å½“å‰å±‚åˆ—è¡¨
                list.add(node.val);
                // å°†å·¦å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                if (node.left != null) {
                    queue.add(node.left);
                }
                // å°†å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                if (node.right != null) {
                    queue.add(node.right);
                }
            }
            // å°†å½“å‰å±‚åˆ—è¡¨åŠ å…¥ç»“æœåˆ—è¡¨
            res.add(list);
        }
        // å°†ç»“æœåˆ—è¡¨åè½¬
        Collections.reverse(res);
        // è¿”å›ç»“æœåˆ—è¡¨
        return res;
    }
}
```

### 199.äºŒå‰æ ‘çš„å³è§†å›¾

ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œæƒ³è±¡è‡ªå·±ç«™åœ¨å®ƒçš„å³ä¾§ï¼ŒæŒ‰ç…§ä»é¡¶éƒ¨åˆ°åº•éƒ¨çš„é¡ºåºï¼Œè¿”å›ä»å³ä¾§æ‰€èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ã€‚

![199.äºŒå‰æ ‘çš„å³è§†å›¾](https://code-thinking-1253855093.file.myqcloud.com/pics/20210203151307377.png)

```java
class Solution {
    public List<Integer> rightSideView(TreeNode root) {
        List<Integer> resultList = new ArrayList<>();
        if (root == null) {
            return resultList;
        }
        Queue<TreeNode> auxiliaryQueue = new LinkedList<>();
        TreeNode tempNode;
        auxiliaryQueue.add(root);
        int size;
        while (!auxiliaryQueue.isEmpty()) {
            size = auxiliaryQueue.size();
            while (size > 0) {
                tempNode = auxiliaryQueue.poll();
                if (tempNode.left != null) {
                    auxiliaryQueue.add(tempNode.left);
                }
                if (tempNode.right != null) {
                    auxiliaryQueue.add(tempNode.right);
                }
                size--;
                if (size == 0) {
                    resultList.add(tempNode.val);
                }
            }
        }
        return resultList;
    }
}
```

### 637.äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼

ç»™å®šä¸€ä¸ªéç©ºäºŒå‰æ ‘, è¿”å›ä¸€ä¸ªç”±æ¯å±‚èŠ‚ç‚¹å¹³å‡å€¼ç»„æˆçš„æ•°ç»„ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210203151350500.png" alt="637.äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼" style="zoom: 50%;" />

```java
class Solution {
    // è®¡ç®—äºŒå‰æ ‘æ¯å±‚èŠ‚ç‚¹çš„å¹³å‡å€¼
    public List<Double> averageOfLevels(TreeNode root) {
        // ä½¿ç”¨é˜Ÿåˆ—æ¥è¿›è¡Œå±‚æ¬¡éå†
        Queue<TreeNode> queue = new LinkedList<>();
        // ç”¨äºå­˜å‚¨æ¯å±‚èŠ‚ç‚¹çš„å¹³å‡å€¼
        List<Double> list = new ArrayList<>();
        queue.add(root);
        while (!queue.isEmpty()) {
            int size = queue.size();
            double sum = 0;
            // éå†å½“å‰å±‚çš„èŠ‚ç‚¹
            for (int i = 0; i < size; i++) {
                TreeNode node = queue.poll();
                sum += node.val;
                // å°†å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                if (node.left != null) {
                    queue.add(node.left);
                }
                if (node.right != null) {
                    queue.add(node.right);
                }
            }
            // è®¡ç®—å½“å‰å±‚èŠ‚ç‚¹çš„å¹³å‡å€¼å¹¶åŠ å…¥åˆ°ç»“æœåˆ—è¡¨ä¸­
            list.add(sum / size);
        }
        // è¿”å›æ¯å±‚èŠ‚ç‚¹çš„å¹³å‡å€¼åˆ—è¡¨
        return list;
    }
}
```

### 429. Nå‰æ ‘çš„å±‚åºéå†(3.24)

ç»™å®šä¸€ä¸ª N å‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„å±‚åºéå†ã€‚ (å³ä»å·¦åˆ°å³ï¼Œé€å±‚éå†)ã€‚

ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ª 3å‰æ ‘ :

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210203151439168.png" alt="429. Nå‰æ ‘çš„å±‚åºéå†" style="zoom:50%;" />

è¿”å›å…¶å±‚åºéå†:

[ [1], [3,2,4], [5,6] ]

```java
class Solution {
    public List<List<Integer>> levelOrder(Node root) {
        List<List<Integer>> resultList = new ArrayList<>();
        if (root == null) {
            return resultList;
        }
        Queue<Node> auxiliaryQueue = new LinkedList<>();
        Node tempNode;
        int size;
        auxiliaryQueue.add(root);
        while (!auxiliaryQueue.isEmpty()) {
            size = auxiliaryQueue.size();
            List<Integer> listOfLevel = new ArrayList<>();
            while (size > 0) {
                tempNode = auxiliaryQueue.poll();
                for (Node current : tempNode.children) {
                    auxiliaryQueue.add(current);
                }
                listOfLevel.add(tempNode.val);
                size--;
            }
            resultList.add(listOfLevel);
        }
        return resultList;
    }
}
```

### 515.åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼

æ‚¨éœ€è¦åœ¨äºŒå‰æ ‘çš„æ¯ä¸€è¡Œä¸­æ‰¾åˆ°æœ€å¤§çš„å€¼ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210203151532153.png" alt="515.åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼" style="zoom:50%;" />

```java
class Solution {
    public List<Integer> largestValues(TreeNode root) {
        List<Integer> resultList = new ArrayList<>();
        if (root == null) {
            return resultList;
        }
        Queue<TreeNode> auxiliaryQueue = new LinkedList<>();
        TreeNode tempNode;
        auxiliaryQueue.add(root);
        int size;

        while (!auxiliaryQueue.isEmpty()) {
            size = auxiliaryQueue.size();
            int max = Integer.MIN_VALUE;
            while (size > 0) {
                tempNode = auxiliaryQueue.poll();
                max = Math.max(max, tempNode.val);
                if (tempNode.left != null) {
                    auxiliaryQueue.offer(tempNode.left);
                }
                if (tempNode.right != null) {
                    auxiliaryQueue.offer(tempNode.right);
                }
                size--;
            }

            resultList.add(max);
        }
        return resultList;
    }
}
```

### 116.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ(3.28)

ç»™å®šä¸€ä¸ªå®Œç¾äºŒå‰æ ‘ï¼Œå…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ï¼Œæ¯ä¸ªçˆ¶èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚äºŒå‰æ ‘å®šä¹‰å¦‚ä¸‹ï¼š

```cpp
struct Node {
  int val;
  Node *left;
  Node *right;
  Node *next;
}
```

å¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œè®©è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ã€‚å¦‚æœæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œåˆ™å°† next æŒ‡é’ˆè®¾ç½®ä¸º NULLã€‚

åˆå§‹çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰ next æŒ‡é’ˆéƒ½è¢«è®¾ç½®ä¸º NULLã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210203152044855.jpg" alt="116.å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ" style="zoom:50%;" />

**æ¯”è¾ƒä½æ•ˆçš„æ–¹æ³•ï¼ˆä½¿ç”¨äº†æ ˆï¼‰ï¼Œç›´è§‰ã€‚**

```java
class Solution {
    public Node connect(Node root) {
        if (root == null) {
            return root;
        }
        Queue<Node> auxiliaryQueue = new LinkedList<>();
        auxiliaryQueue.add(root);
        Stack<Node> auxiliaryStack = new Stack<Node>();
        int size;
        Node tempNode;
        while (!auxiliaryQueue.isEmpty()) {
            size = auxiliaryQueue.size();
            while (size > 0) {
                tempNode = auxiliaryQueue.poll();
                auxiliaryStack.push(tempNode);
                if (tempNode.left != null) {
                    auxiliaryQueue.offer(tempNode.left);
                }
                if (tempNode.right != null) {
                    auxiliaryQueue.offer(tempNode.right);
                }
                size--;
            }

            tempNode = auxiliaryStack.pop();
            tempNode.next = null;
            while (!auxiliaryStack.empty()) {
                auxiliaryStack.peek().next = tempNode;
                tempNode = auxiliaryStack.pop();
            }
        }
        return root;
    }
}
```

**ä¼˜åŒ–åçš„**

```java
/**
 * å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ
 */
class Solution {
    /**
     * è¿æ¥æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹
     * @param root ç»™å®šçš„æ ¹èŠ‚ç‚¹
     * @return è¿æ¥åçš„æ ¹èŠ‚ç‚¹
     */
    public Node connect(Node root) {
        Queue<Node> queue = new LinkedList<>(); // åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ç”¨äºå±‚åºéå†
        if (root == null) { // å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›
            return root;
        }
        queue.offer(root); // å°†æ ¹èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
        while (!queue.isEmpty()) { // å½“é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶å¾ªç¯
            int size = queue.size(); // è·å–å½“å‰å±‚çš„èŠ‚ç‚¹æ•°é‡
            for (int i = 0; i < size; i++) { // éå†å½“å‰å±‚çš„èŠ‚ç‚¹
                Node node = queue.poll(); // å¼¹å‡ºé˜Ÿé¦–èŠ‚ç‚¹
                if (i < size - 1) { // å¦‚æœä¸æ˜¯å½“å‰å±‚çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹
                    node.next = queue.peek(); // å°†å½“å‰èŠ‚ç‚¹çš„nextæŒ‡å‘é˜Ÿé¦–èŠ‚ç‚¹
                }
                if (node.left != null) { // å¦‚æœå½“å‰èŠ‚ç‚¹æœ‰å·¦å­èŠ‚ç‚¹ï¼Œåˆ™åŠ å…¥é˜Ÿåˆ—
                    queue.offer(node.left);
                }
                if (node.right != null) { // å¦‚æœå½“å‰èŠ‚ç‚¹æœ‰å³å­èŠ‚ç‚¹ï¼Œåˆ™åŠ å…¥é˜Ÿåˆ—
                    queue.offer(node.right);
                }
            }
        }
        return root; // è¿”å›è¿æ¥åçš„æ ¹èŠ‚ç‚¹
    }
}
```





### 226.ç¿»è½¬äºŒå‰æ ‘(3.31)

ç¿»è½¬ä¸€æ£µäºŒå‰æ ‘ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210203192644329.png" alt="226.ç¿»è½¬äºŒå‰æ ‘" style="zoom:50%;" />

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥ç¿»è½¬äºŒå‰æ ‘
 * ç¿»è½¬äºŒå‰æ ‘æ„å‘³ç€äº¤æ¢äºŒå‰æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹
 */
class Solution {
    /**
     * ç¿»è½¬äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * 
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return ç¿»è½¬åçš„äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     */
    public TreeNode invertTree(TreeNode root) {
        // é€šè¿‡sotrOrderæ–¹æ³•æ¥å®ç°äºŒå‰æ ‘çš„ç¿»è½¬
        sotrOrder(root);
        // è¿”å›ç¿»è½¬åçš„äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
        return root;
    }

    /**
     * é€šè¿‡ååºéå†æ¥äº¤æ¢äºŒå‰æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹
     * 
     * @param current å½“å‰éå†åˆ°çš„èŠ‚ç‚¹
     */
    void sotrOrder(TreeNode current) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›ï¼Œä¸å†æ‰§è¡Œç¿»è½¬æ“ä½œ
        if (current == null) {
            return;
        }
        // å…ˆé€’å½’éå†å·¦å­æ ‘
        sotrOrder(current.left);
        // å†é€’å½’éå†å³å­æ ‘
        sotrOrder(current.right);

        // äº¤æ¢å½“å‰èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹
        TreeNode temp = current.left;
        current.left = current.right;
        current.right = temp;
    }
}

```

### 101.å¯¹ç§°äºŒå‰æ ‘(4.2)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦æ˜¯é•œåƒå¯¹ç§°çš„ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210203144607387.png" alt="101. å¯¹ç§°äºŒå‰æ ‘" style="zoom:50%;" />

```java
/**
 * åˆ¤æ–­ç»™å®šçš„äºŒå‰æ ‘æ˜¯å¦æ˜¯å¯¹ç§°äºŒå‰æ ‘
 */
class Solution {
    /**
     * åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦å¯¹ç§°
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return å¦‚æœæ˜¯å¯¹ç§°äºŒå‰æ ‘è¿”å›trueï¼Œå¦åˆ™è¿”å›false
     */
    public boolean isSymmetric(TreeNode root) {
        return compare(root.left, root.right);
    }

    /**
     * æ¯”è¾ƒå·¦å³ä¸¤ä¸ªèŠ‚ç‚¹åŠå…¶å­æ ‘æ˜¯å¦å¯¹ç§°
     * @param left å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param right å³å­æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return å¦‚æœå¯¹ç§°è¿”å›trueï¼Œå¦åˆ™è¿”å›false
     */
    private boolean compare(TreeNode left, TreeNode right) {
        if (left == null && right == null) {
            return true;
        }
        if (left == null || right == null) {
            return false;
        }
        if (left.val != right.val) {
            return false;
        }
        return compare(left.left, right.right) && compare(left.right, right.left);
    }
}
```

### 104.äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚

äºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚

è¯´æ˜: å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

ç¤ºä¾‹ï¼š

ç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]ï¼Œ

![104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦](https://code-thinking-1253855093.file.myqcloud.com/pics/20210203153031914-20230310134849764.png)

è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚

```java
/**
 * Solutionç±»ç”¨äºè§£å†³è®¡ç®—äºŒå‰æ ‘æœ€å¤§æ·±åº¦çš„é—®é¢˜
 */
class Solution {
    /**
     * è®¡ç®—ç»™å®šäºŒå‰æ ‘æ ¹èŠ‚ç‚¹çš„æœ€å¤§æ·±åº¦
     * 
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return æ ¹èŠ‚ç‚¹çš„æœ€å¤§æ·±åº¦
     */
    public int maxDepth(TreeNode root) {
        return sortOrder(root);
    }

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºè®¡ç®—å½“å‰èŠ‚ç‚¹çš„æœ€å¤§æ·±åº¦
     * 
     * @param currentNode å½“å‰éå†çš„èŠ‚ç‚¹
     * @return å½“å‰èŠ‚ç‚¹çš„æœ€å¤§æ·±åº¦
     */
    int sortOrder(TreeNode currentNode) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜å·²ç»åˆ°è¾¾å¶èŠ‚ç‚¹çš„ä¸‹ä¸€å±‚ï¼Œè¿”å›0
        if (currentNode == null) {
            return 0;
        }
        // è®¡ç®—å·¦å­æ ‘çš„æœ€å¤§æ·±åº¦
        int leftLength = sortOrder(currentNode.left) + 1;
        // è®¡ç®—å³å­æ ‘çš„æœ€å¤§æ·±åº¦
        int rightLength = sortOrder(currentNode.right) + 1;
        // è¿”å›å·¦ã€å³å­æ ‘ä¸­çš„æœ€å¤§æ·±åº¦
        return Math.max(leftLength, rightLength);
    }
}
```

### 111.äºŒå‰æ ‘çš„æœ€å°æ·±åº¦(3.31)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å°æ·±åº¦ã€‚

æœ€å°æ·±åº¦æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿‘å¶å­èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°é‡ã€‚

**è¯´æ˜ï¼š**å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/ex_depth.jpg)



```
è¾“å…¥ï¼šroot = [3,9,20,null,null,15,7]
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = [2,null,3,null,4,null,5,null,6]
è¾“å‡ºï¼š5
```

```java
/**
 * Solutionç±»ç”¨äºè§£å†³è®¡ç®—äºŒå‰æ ‘æœ€å°æ·±åº¦çš„é—®é¢˜
 */
class Solution {
    /**
     * è®¡ç®—ç»™å®šäºŒå‰æ ‘çš„æœ€å°æ·±åº¦
     * 
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return è¿”å›äºŒå‰æ ‘çš„æœ€å°æ·±åº¦
     */
    public int minDepth(TreeNode root) {
        // å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å›0ï¼Œè¡¨ç¤ºç©ºæ ‘çš„æ·±åº¦ä¸º0
        if (root == null) {
            return 0;
        }
        // è°ƒç”¨è¾…åŠ©å‡½æ•°sortOrderæ¥è®¡ç®—æœ€å°æ·±åº¦
        return sortOrder(root, 1);
    }

    /**
     * è¾…åŠ©å‡½æ•°ï¼Œç”¨äºé€’å½’åœ°è®¡ç®—å½“å‰èŠ‚ç‚¹çš„æœ€å°æ·±åº¦
     * 
     * @param currentNode å½“å‰èŠ‚ç‚¹
     * @param depth å½“å‰èŠ‚ç‚¹æ‰€åœ¨çš„æ·±åº¦
     * @return è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€å°æ·±åº¦
     */
    int sortOrder(TreeNode currentNode, int depth) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹æ²¡æœ‰å·¦å³å­èŠ‚ç‚¹ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ä¸ªå¶èŠ‚ç‚¹ï¼Œè¿”å›å½“å‰æ·±åº¦
        if (currentNode.left == null && currentNode.right == null) {
            return depth;
        }
        // åˆå§‹åŒ–å·¦å­æ ‘å’Œå³å­æ ‘çš„æœ€å°æ·±åº¦ä¸ºæœ€å¤§æ•´æ•°å€¼ï¼Œä»¥ä¾¿åç»­æ¯”è¾ƒ
        int minLeft = Integer.MAX_VALUE;
        int minRight = Integer.MAX_VALUE;
        // å¦‚æœå½“å‰èŠ‚ç‚¹æœ‰å·¦å­èŠ‚ç‚¹ï¼Œé€’å½’è®¡ç®—å·¦å­æ ‘çš„æœ€å°æ·±åº¦
        if (currentNode.left != null) {
            minLeft = sortOrder(currentNode.left, depth + 1);
        }
        // å¦‚æœå½“å‰èŠ‚ç‚¹æœ‰å³å­èŠ‚ç‚¹ï¼Œé€’å½’è®¡ç®—å³å­æ ‘çš„æœ€å°æ·±åº¦
        if (currentNode.right != null) {
            minRight = sortOrder(currentNode.right, depth + 1);
        }
        // è¿”å›å·¦å³å­æ ‘ä¸­çš„æœ€å°æ·±åº¦
        return Math.min(minLeft, minRight);
    }
}
```

å±‚æ¬¡éå†

```java
// å®šä¹‰Solutionç±»
class Solution {
    // å®šä¹‰minDepthæ–¹æ³•ï¼Œè¿”å›å€¼ä¸ºintç±»å‹ï¼Œå‚æ•°ä¸ºTreeNodeç±»å‹çš„root
    public int minDepth(TreeNode root) {
        // åˆ›å»ºä¸€ä¸ªLinkedListç±»å‹çš„é˜Ÿåˆ—queue
        Queue<TreeNode> queue = new LinkedList<>();
        // å¦‚æœrootä¸ºnullï¼Œè¿”å›0
        if (root == null) {
            return 0;
        }
        // å°†rootåŠ å…¥é˜Ÿåˆ—
        queue.offer(root);
        // åˆå§‹åŒ–æ·±åº¦ä¸º1
        int depth = 1;
        // å½“é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶å¾ªç¯
        while (!queue.isEmpty()) {
            // è·å–å½“å‰é˜Ÿåˆ—çš„å¤§å°
            int size = queue.size();
            // éå†å½“å‰é˜Ÿåˆ—ä¸­çš„èŠ‚ç‚¹
            for (int i = 0; i < size; i++) {
                // ä»é˜Ÿåˆ—ä¸­å–å‡ºèŠ‚ç‚¹
                TreeNode node = queue.poll();
                // å¦‚æœèŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹éƒ½ä¸ºnullï¼Œè¿”å›å½“å‰æ·±åº¦
                if (node.left == null && node.right == null) {
                    return depth;
                }
                // å¦‚æœèŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä¸ä¸ºnullï¼Œå°†å·¦å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                if (node.left != null) {
                    queue.offer(node.left);
                }
                // å¦‚æœèŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ä¸ä¸ºnullï¼Œå°†å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                if (node.right != null) {
                    queue.offer(node.right);
                }
            }
            // æ·±åº¦åŠ ä¸€
            depth++;
        }
        // è¿”å›æ·±åº¦
        return depth;
    }
}
```

### 257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„(4.4)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¿”å›æ‰€æœ‰ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚

è¯´æ˜: å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

ç¤ºä¾‹: <img src="https://code-thinking-1253855093.file.myqcloud.com/pics/2021020415161576.png" alt="257.äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„1" style="zoom:50%;" />

```java
class Solution {
    public List<String> binaryTreePaths(TreeNode root) {
        List<String> resultList = new ArrayList<>();
        if (root == null) {
            return resultList;
        }
        getOrder(root,resultList,"");
        return resultList;
    }

    void getOrder(TreeNode current, List<String> resultList, String path) {
        if (current == null) {
            return;
        }
        path += current.val;
        if (current.left == null && current.right == null) {
            resultList.add(path);
        }
        path += "->";
        getOrder(current.left, resultList, path);
        getOrder(current.right, resultList, path);
    }
}
```

ä½¿ç”¨StringBuilderï¼Œæ³¨æ„å›æº¯æ“ä½œæ€§èƒ½ä¼šç¨é«˜ã€‚

```java

/**
 * Solutionç±»ç”¨äºè§£å†³äºŒå‰æ ‘è·¯å¾„çš„é—®é¢˜
 * å®ƒæä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥è¿”å›ä»æ ¹åˆ°å¶å­çš„æ‰€æœ‰è·¯å¾„çš„å­—ç¬¦ä¸²åˆ—è¡¨
 */
class Solution {
    /**
     * binaryTreePathsæ–¹æ³•è·å–äºŒå‰æ ‘çš„æ‰€æœ‰ä»æ ¹åˆ°å¶å­çš„è·¯å¾„
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return åŒ…å«æ‰€æœ‰è·¯å¾„çš„å­—ç¬¦ä¸²åˆ—è¡¨
     */
    public List<String> binaryTreePaths(TreeNode root) {
        List<String> resultList = new ArrayList<>();
        sortOrder(root, resultList, new StringBuilder());
        return resultList;
    }

    /**
     * sortOrderæ–¹æ³•ç”¨äºé€’å½’éå†äºŒå‰æ ‘å¹¶è®°å½•è·¯å¾„
     * @param current å½“å‰éå†çš„èŠ‚ç‚¹
     * @param resultList å­˜å‚¨æ‰€æœ‰è·¯å¾„çš„åˆ—è¡¨
     * @param SB StringBuilderç”¨äºæ„å»ºå½“å‰è·¯å¾„çš„å­—ç¬¦ä¸²
     */
    void sortOrder(TreeNode current, List<String> resultList, StringBuilder SB) {
        if (current == null) {
            return;
        }
        int length = SB.length();
        // åœ¨è·¯å¾„ä¸­æ·»åŠ å½“å‰èŠ‚ç‚¹çš„å€¼
        SB.append(current.val);
        // å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™å°†å½“å‰è·¯å¾„æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
        if (current.left == null && current.right == null) {
            resultList.add(SB.toString());
        }
        // åœ¨è·¯å¾„ä¸­æ·»åŠ æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ç®­å¤´
        SB.append("->");
        // é€’å½’éå†å·¦å­æ ‘
        sortOrder(current.left, resultList, SB);
        // é€’å½’éå†å³å­æ ‘
        sortOrder(current.right, resultList, SB);
        // å›æº¯ï¼Œæ¢å¤StringBuilderåˆ°è®¿é—®å½“å‰èŠ‚ç‚¹å‰çš„çŠ¶æ€
        SB.setLength(length);
    }
}
```



### 404.å·¦å¶å­ä¹‹å’Œ(2.xx)

è®¡ç®—ç»™å®šäºŒå‰æ ‘çš„æ‰€æœ‰å·¦å¶å­ä¹‹å’Œã€‚

ç¤ºä¾‹ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210204151927654.png" alt="404.å·¦å¶å­ä¹‹å’Œ1" style="zoom:50%;" />

```java
class Solution {
    public int sumOfLeftLeaves(TreeNode root) {
        return getOrder(root);
    }
    int getOrder(TreeNode current) {
        if (current == null) {
            return 0;
        }
        int leftLeavesNum = getOrder(current.left);
        int rightLeavesNum = getOrder(current.right);

        if (current.left != null && (current.left.left == null && current.left.right == null)) {
            return current.left.val + leftLeavesNum + rightLeavesNum;
        }
        return leftLeavesNum + rightLeavesNum;
    }
}
```

æˆ–ç›´æ¥è®°å½•çŠ¶æ€

```java
/**
 * Solutionç±»ç”¨äºè®¡ç®—äºŒå‰æ ‘çš„å·¦å¶å­ä¹‹å’Œ
 */
class Solution {
    /**
     * ä»æ ¹èŠ‚ç‚¹å¼€å§‹è®¡ç®—å·¦å¶å­ä¹‹å’Œ
     * 
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return å·¦å¶å­ä¹‹å’Œ
     */
    public int sumOfLeftLeaves(TreeNode root) {
        // åˆå§‹åŒ–sumä¸º0ï¼Œç”¨äºç´¯åŠ å·¦å¶å­çš„å€¼
        sum = 0;
        // é€’å½’éå†æ ‘ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¸æ˜¯å·¦èŠ‚ç‚¹çš„æƒ…å†µä¼ é€’false
        sortOrder(root, false);
        // è¿”å›è®¡ç®—å¾—åˆ°çš„å·¦å¶å­ä¹‹å’Œ
        return sum;
    }

    // ç”¨äºç´¯åŠ å·¦å¶å­å€¼çš„å˜é‡
    int sum = 0;

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºéå†äºŒå‰æ ‘å¹¶ç´¯åŠ å·¦å¶å­çš„å€¼
     * 
     * @param current å½“å‰èŠ‚ç‚¹
     * @param isLeft  å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºå·¦èŠ‚ç‚¹
     */
    void sortOrder(TreeNode current, boolean isLeft) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›ï¼Œç»“æŸå½“å‰é€’å½’è·¯å¾„
        if (current == null) {
            return;
        }

        // é€’å½’éå†å½“å‰èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ï¼Œä¼ é€’trueè¡¨ç¤ºæ˜¯å·¦èŠ‚ç‚¹
        sortOrder(current.left, true);
        // é€’å½’éå†å½“å‰èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ï¼Œä¼ é€’falseè¡¨ç¤ºä¸æ˜¯å·¦èŠ‚ç‚¹
        sortOrder(current.right, false);
        // å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ä¸”æ˜¯å·¦èŠ‚ç‚¹ï¼Œåˆ™å°†å…¶å€¼ç´¯åŠ åˆ°sum
        if (current.left == null && current.right == null && isLeft) {
            sum += current.val;
        }
    }
}

```



### 513.æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼(4.16)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåœ¨æ ‘çš„æœ€åä¸€è¡Œæ‰¾åˆ°æœ€å·¦è¾¹çš„å€¼ã€‚

```java
/**
 * Solutionç±»ç”¨äºè§£å†³æ‰¾å‡ºäºŒå‰æ ‘æœ€åä¸€è¡Œæœ€å·¦è¾¹çš„å€¼çš„é—®é¢˜
 */
class Solution {
    /**
     * æ‰¾å‡ºäºŒå‰æ ‘æœ€åä¸€è¡Œæœ€å·¦è¾¹çš„å€¼
     * 
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return æœ€åä¸€è¡Œæœ€å·¦è¾¹èŠ‚ç‚¹çš„å€¼
     */
    public int findBottomLeftValue(TreeNode root) {
        // è¾…åŠ©é˜Ÿåˆ—ï¼Œç”¨äºå±‚åºéå†äºŒå‰æ ‘
        Queue<TreeNode> auxiliaryQueue = new LinkedList<>();
        // ç”¨äºè®°å½•å½“å‰å±‚çš„èŠ‚ç‚¹æ•°
        int size;
        // ç”¨äºè®°å½•æœ€åä¸€è¡Œæœ€å·¦è¾¹çš„å€¼
        int num = 0;
        // ä¸´æ—¶èŠ‚ç‚¹ï¼Œç”¨äºéå†
        TreeNode tempNode;
        
        // å°†æ ¹èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—å¼€å§‹å±‚åºéå†
        auxiliaryQueue.add(root);
        
        // å½“é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼Œç»§ç»­éå†
        while (!auxiliaryQueue.isEmpty()) {
            size = auxiliaryQueue.size();
            // flagç”¨äºæ ‡è®°å½“å‰å±‚çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
            int flag = size;
            
            // éå†å½“å‰å±‚çš„æ‰€æœ‰èŠ‚ç‚¹
            while (size > 0) {
                tempNode = auxiliaryQueue.poll();
                
                // å¦‚æœæ˜¯å½“å‰å±‚çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ›´æ–°num
                if (size == flag) {
                    num = tempNode.val;
                }
                
                // å¦‚æœå·¦å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼ŒåŠ å…¥é˜Ÿåˆ—
                if (tempNode.left != null) {
                    auxiliaryQueue.add(tempNode.left);
                }
                // å¦‚æœå³å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼ŒåŠ å…¥é˜Ÿåˆ—
                if (tempNode.right != null) {
                    auxiliaryQueue.add(tempNode.right);
                }
                
                size--;
            }
        }
        
        // è¿”å›æœ€åä¸€è¡Œæœ€å·¦è¾¹çš„å€¼
        return num;
    }
}
```

### 112.è·¯å¾„æ€»å’Œ

```java
class Solution{
	Public boolean haspathSum(TreeNode root,int targetSum){
		if(root == null)
			return false;
		if(root.left == null && root.right == null &&root.val == targetSum)
			return true;
		if(root.left == null && root.right == null)
			return false;
		if(root.left != null)
			if(hasPathSum(root.left, targetSum-root.val))
				return true;
		if(root.right != null)
			if(hasPathSum(root.right, targetSum-root.val))
				return true;
		return false;
	}
}
```



æˆ‘çš„ç›´è§‰ç‰ˆ

```java
class Solution {
    public boolean hasPathSum(TreeNode root, int targetSum) {
        return getorder(root, 0, targetSum);
    }

    boolean getorder(TreeNode current, int sum, int targetSum) {
        if (current == null) {
            return false;
        }

        sum = sum + current.val;
        if (current.left == null && current.right == null) {
            return sum == targetSum;
        }

        boolean left = getorder(current.left, sum, targetSum);
        boolean right = getorder(current.right, sum, targetSum);

        if (left || right) {
            return true;
        } else {
            return false;
        }
    }
}
```



ä¿®æ­£åç‰ˆæœ¬

```java
/**
 * Solutionç±»ç”¨äºè§£å†³äºŒå‰æ ‘è·¯å¾„å’Œé—®é¢˜
 */
class Solution {
    /**
     * åˆ¤æ–­äºŒå‰æ ‘ä¸­æ˜¯å¦å­˜åœ¨ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼Œå…¶è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äºç›®æ ‡å’Œ
     *
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param targetSum ç›®æ ‡å’Œ
     * @return å¦‚æœå­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è·¯å¾„ï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    public boolean hasPathSum(TreeNode root, int targetSum) {
        return sortOrder(root, targetSum);
    }

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ä»å½“å‰èŠ‚ç‚¹å¼€å§‹çš„è·¯å¾„æ˜¯å¦æ»¡è¶³ç›®æ ‡å’Œæ¡ä»¶
     *
     * @param currentNode å½“å‰èŠ‚ç‚¹
     * @param targetSum å½“å‰è·¯å¾„çš„ç›®æ ‡å’Œ
     * @return å¦‚æœä»å½“å‰èŠ‚ç‚¹å¼€å§‹çš„è·¯å¾„æ»¡è¶³ç›®æ ‡å’Œæ¡ä»¶ï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    boolean sortOrder(TreeNode currentNode, int targetSum) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¯´æ˜è·¯å¾„ä¸å­˜åœ¨ï¼Œè¿”å›false
        if (currentNode == null) {
            return false;
        }
        // å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™åˆ¤æ–­å½“å‰èŠ‚ç‚¹çš„å€¼æ˜¯å¦ç­‰äºç›®æ ‡å’Œ
        if (currentNode.left == null && currentNode.right == null) {
            return targetSum == currentNode.val;
        }

        // é€’å½’æ£€æŸ¥å·¦å­æ ‘å’Œå³å­æ ‘çš„è·¯å¾„
        boolean leftboolean = sortOrder(currentNode.left, targetSum - currentNode.val);
        boolean rightboolean = sortOrder(currentNode.right, targetSum - currentNode.val);
        // è¿”å›å·¦å­æ ‘æˆ–å³å­æ ‘çš„è·¯å¾„æ£€æŸ¥ç»“æœ
        return leftboolean || rightboolean;
    }
}
```



### 113.è·¯å¾„æ€»å’ŒII

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ `targetSum` ï¼Œæ‰¾å‡ºæ‰€æœ‰ **ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹** è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚

**å¶å­èŠ‚ç‚¹** æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/pathsumii1.jpg)



```
è¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22
è¾“å‡ºï¼š[[5,4,11,2],[5,8,4,5]]
```

**ç¤ºä¾‹ 2ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/pathsum2.jpg)



```
è¾“å…¥ï¼šroot = [1,2,3], targetSum = 5
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [1,2], targetSum = 0
è¾“å‡ºï¼š[]
```



**æç¤ºï¼š**

- æ ‘ä¸­èŠ‚ç‚¹æ€»æ•°åœ¨èŒƒå›´ `[0, 5000]` å†…
- `-1000 <= Node.val <= 1000`
- `-1000 <= targetSum <= 1000`

```java
class Solution {
    List<List<Integer>> resultList = new ArrayList<>();
    public List<List<Integer>> pathSum(TreeNode root, int targetSum) {
        sortOrder(root, targetSum, new ArrayList<>());
        return resultList;
    }

    void sortOrder(TreeNode currentNode, int targetSum, List<Integer> auxiliaryList) {
        if (currentNode == null) {
            return;
        }
        if (currentNode.left == null && currentNode.right == null) {
            if (targetSum == currentNode.val) {
                auxiliaryList.add(currentNode.val);
                resultList.add(new ArrayList<>(auxiliaryList));
                auxiliaryList.remove(auxiliaryList.size() - 1);
            }
            return;
        }
        auxiliaryList.add(currentNode.val);
        sortOrder(currentNode.left, targetSum - currentNode.val, auxiliaryList);
        sortOrder(currentNode.right, targetSum - currentNode.val, auxiliaryList);
        auxiliaryList.remove(auxiliaryList.size() - 1);
    }
}
```

### 437.è·¯å¾„æ€»å’ŒIIIï¼ˆnew hot 100ï¼‰(4.5)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œå’Œä¸€ä¸ªæ•´æ•° `targetSum` ï¼Œæ±‚è¯¥äºŒå‰æ ‘é‡ŒèŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äº `targetSum` çš„ **è·¯å¾„** çš„æ•°ç›®ã€‚

**è·¯å¾„** ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/pathsum3-1-tree.jpg)

```
è¾“å…¥ï¼šroot = [10,5,-3,3,2,null,11,3,-2,null,1], targetSum = 8
è¾“å‡ºï¼š3
è§£é‡Šï¼šå’Œç­‰äº 8 çš„è·¯å¾„æœ‰ 3 æ¡ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22
è¾“å‡ºï¼š3
```

```java
/**
 * Solutionç±»ç”¨äºè§£å†³è®¡ç®—äºŒå‰æ ‘ä¸­æ‰€æœ‰è·¯å¾„ä¹‹å’Œç­‰äºç»™å®šå€¼çš„è·¯å¾„æ•°é‡çš„é—®é¢˜
 */
class Solution {

    /**
     * è®¡ç®—äºŒå‰æ ‘ä¸­æ‰€æœ‰è·¯å¾„ä¹‹å’Œç­‰äºç»™å®šå€¼çš„è·¯å¾„æ•°é‡
     *
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param targetSum ç›®æ ‡å’Œ
     * @return è·¯å¾„æ•°é‡
     */
    public int pathSum(TreeNode root, int targetSum) {
        // å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜æ²¡æœ‰è·¯å¾„ï¼Œè¿”å›0
        if (root == null) {
            return 0;
        }
        // è®¡ç®—å½“å‰èŠ‚ç‚¹å¼€å§‹çš„è·¯å¾„æ•°ï¼ŒåŠ ä¸Šå·¦å­æ ‘å’Œå³å­æ ‘ä¸­çš„è·¯å¾„æ•°
        return sortOrder(root, targetSum) + pathSum(root.left, targetSum) + pathSum(root.right, targetSum);
    }

    /**
     * åœ¨å½“å‰èŠ‚ç‚¹å¼€å§‹çš„è·¯å¾„ä¸­ï¼Œè®¡ç®—è·¯å¾„ä¹‹å’Œç­‰äºç»™å®šå€¼çš„è·¯å¾„æ•°é‡
     *
     * @param current å½“å‰èŠ‚ç‚¹
     * @param targetSum ç›®æ ‡å’Œ
     * @return å½“å‰èŠ‚ç‚¹å¼€å§‹çš„è·¯å¾„ä¸­ï¼Œæ»¡è¶³æ¡ä»¶çš„è·¯å¾„æ•°é‡
     */
    int sortOrder(TreeNode current, long targetSum) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜æ²¡æœ‰è·¯å¾„ï¼Œè¿”å›0
        if (current == null) {
            return 0;
        }

        int count = 0;
        // å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ç­‰äºç›®æ ‡å’Œï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€æ¡è·¯å¾„ï¼Œè®¡æ•°åŠ 1
        if (current.val == targetSum) {
            count++;
        }

        // ç»§ç»­åœ¨å·¦å­æ ‘å’Œå³å­æ ‘ä¸­å¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„è·¯å¾„ï¼Œå¹¶ç´¯åŠ è®¡æ•°
        count += sortOrder(current.left, targetSum - current.val);
        count += sortOrder(current.right, targetSum - current.val);

        // è¿”å›å½“å‰èŠ‚ç‚¹å¼€å§‹çš„è·¯å¾„ä¸­ï¼Œæ»¡è¶³æ¡ä»¶çš„è·¯å¾„æ•°é‡
        return count;
    }
}
```



### 106.ä¸­åºå’Œååºéå†æ„é€ äºŒå‰æ ‘ï¼ˆ3.31ï¼‰

ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ `inorder` å’Œ `postorder` ï¼Œå…¶ä¸­ `inorder` æ˜¯äºŒå‰æ ‘çš„ä¸­åºéå†ï¼Œ `postorder` æ˜¯åŒä¸€æ£µæ ‘çš„ååºéå†ï¼Œè¯·ä½ æ„é€ å¹¶è¿”å›è¿™é¢— *äºŒå‰æ ‘* ã€‚



**ç¤ºä¾‹ 1:**

![img](æ–‡æ¡£å›¾ç‰‡/tree.jpg)



```
è¾“å…¥ï¼šinorder = [9,3,15,20,7], postorder = [9,15,7,20,3]
è¾“å‡ºï¼š[3,9,20,null,null,15,7]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥ï¼šinorder = [-1], postorder = [-1]
è¾“å‡ºï¼š[-1]
```



**æç¤º:**

- `1 <= inorder.length <= 3000`
- `postorder.length == inorder.length`
- `-3000 <= inorder[i], postorder[i] <= 3000`
- `inorder` å’Œ `postorder` éƒ½ç”± **ä¸åŒ** çš„å€¼ç»„æˆ
- `postorder` ä¸­æ¯ä¸€ä¸ªå€¼éƒ½åœ¨ `inorder` ä¸­
- `inorder` **ä¿è¯**æ˜¯æ ‘çš„ä¸­åºéå†
- `postorder` **ä¿è¯**æ˜¯æ ‘çš„ååºéå†

```java
class Solution {
    // åˆ›å»ºå“ˆå¸Œè¡¨ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾ä¸­åºéå†ä¸­èŠ‚ç‚¹å€¼å¯¹åº”çš„ç´¢å¼•
    HashMap<Integer, Integer> auxiliarymap = new HashMap<>();
    
    public TreeNode buildTree(int[] inorder, int[] postorder) {
        // å°†ä¸­åºéå†çš„èŠ‚ç‚¹å€¼åŠå…¶ç´¢å¼•å­˜å…¥å“ˆå¸Œè¡¨
        for (int i = 0; i < inorder.length; i++) {
            auxiliarymap.put(inorder[i], i);
        }
        
        // è°ƒç”¨è¾…åŠ©æ–¹æ³•æ„å»ºæ ‘ï¼Œä¼ å…¥å®Œæ•´çš„ä¸­åºå’Œååºéå†æ•°ç»„ï¼ˆä½¿ç”¨å‰é—­åå¼€åŒºé—´ï¼‰
        return getorder(inorder, 0, inorder.length, postorder, 0, postorder.length);
    }

    // è¾…åŠ©æ–¹æ³•ï¼šæ ¹æ®ä¸­åºå’Œååºéå†çš„å­æ•°ç»„æ„å»ºæ ‘
    TreeNode getorder(int[] inorder, int inBegin, int inEnd, int[] postorder, int postBegin, int postEnd) {
        // å¦‚æœå­æ•°ç»„ä¸ºç©ºï¼Œè¿”å›nullï¼ˆé€’å½’ç»ˆæ­¢æ¡ä»¶ï¼‰
        if (inBegin >= inEnd || postBegin >= postEnd) {
            return null;
        }

        // è·å–ååºéå†æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆå½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼‰åœ¨ä¸­åºéå†ä¸­çš„ç´¢å¼•
        int currentIndexOfInorder = auxiliarymap.get(postorder[postEnd - 1]);
        // åˆ›å»ºå½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹
        TreeNode current = new TreeNode(inorder[currentIndexOfInorder]);
        // è®¡ç®—å·¦å­æ ‘çš„èŠ‚ç‚¹æ•°é‡
        int leftInorderSize = currentIndexOfInorder - inBegin;

        // é€’å½’æ„å»ºå·¦å­æ ‘
        current.left = getorder(inorder, inBegin, currentIndexOfInorder, 
                                postorder, postBegin, postBegin + leftInorderSize);
        // é€’å½’æ„å»ºå³å­æ ‘
        current.right = getorder(inorder, currentIndexOfInorder + 1, inEnd, 
                                 postorder, postBegin + leftInorderSize, postEnd - 1);

        // è¿”å›æ„å»ºå¥½çš„å­æ ‘æ ¹èŠ‚ç‚¹
        return current;
    }
}
```

### 105.ä¸­åºå’Œå‰åºéå†æ„é€ äºŒå‰æ ‘ï¼ˆ3.24ï¼‰

ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ `preorder` å’Œ `inorder` ï¼Œå…¶ä¸­ `preorder` æ˜¯äºŒå‰æ ‘çš„**å…ˆåºéå†**ï¼Œ `inorder` æ˜¯åŒä¸€æ£µæ ‘çš„**ä¸­åºéå†**ï¼Œè¯·æ„é€ äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚



**ç¤ºä¾‹ 1:**

![img](æ–‡æ¡£å›¾ç‰‡/tree-1739496535071.jpg)



```
è¾“å…¥: preorder = [3,9,20,15,7], inorder = [9,3,15,20,7]
è¾“å‡º: [3,9,20,null,null,15,7]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: preorder = [-1], inorder = [-1]
è¾“å‡º: [-1]
```



**æç¤º:**

- `1 <= preorder.length <= 3000`
- `inorder.length == preorder.length`
- `-3000 <= preorder[i], inorder[i] <= 3000`
- `preorder` å’Œ `inorder` å‡ **æ— é‡å¤** å…ƒç´ 
- `inorder` å‡å‡ºç°åœ¨ `preorder`
- `preorder` **ä¿è¯** ä¸ºäºŒå‰æ ‘çš„å‰åºéå†åºåˆ—
- `inorder` **ä¿è¯** ä¸ºäºŒå‰æ ‘çš„ä¸­åºéå†åºåˆ—

```java
class Solution {
    // åˆ›å»ºå“ˆå¸Œè¡¨ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾ä¸­åºéå†ä¸­èŠ‚ç‚¹å€¼å¯¹åº”çš„ç´¢å¼•
    HashMap<Integer, Integer> auxiliaryMap = new HashMap<>();
    
    public TreeNode buildTree(int[] preorder, int[] inorder) {
        // å°†ä¸­åºéå†çš„èŠ‚ç‚¹å€¼åŠå…¶ç´¢å¼•å­˜å…¥å“ˆå¸Œè¡¨
        for (int i = 0; i < inorder.length; i++) {
            auxiliaryMap.put(inorder[i], i);
        }
        
        // è°ƒç”¨è¾…åŠ©æ–¹æ³•æ„å»ºæ ‘ï¼Œä¼ å…¥å®Œæ•´çš„ä¸­åºå’Œå‰åºéå†æ•°ç»„ï¼ˆä½¿ç”¨å‰é—­åå¼€åŒºé—´ï¼‰
        return getOrder(inorder, 0, preorder.length, preorder, 0, preorder.length);
    }

    // è¾…åŠ©æ–¹æ³•ï¼šæ ¹æ®ä¸­åºå’Œå‰åºéå†çš„å­æ•°ç»„æ„å»ºæ ‘
    TreeNode getOrder(int[] inorder, int inBegin, int inEnd, int[] preorder, int preBegin, int preEnd) {
        // å¦‚æœå­æ•°ç»„ä¸ºç©ºï¼Œè¿”å›nullï¼ˆé€’å½’ç»ˆæ­¢æ¡ä»¶ï¼‰
        if (inBegin >= inEnd || preBegin >= preEnd) {
            return null;
        }

        // è·å–å‰åºéå†ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆå½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼‰åœ¨ä¸­åºéå†ä¸­çš„ç´¢å¼•
        int currentIndexOfInorder = auxiliaryMap.get(preorder[preBegin]);
        // åˆ›å»ºå½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹
        TreeNode current = new TreeNode(inorder[currentIndexOfInorder]);
        // è®¡ç®—å·¦å­æ ‘çš„èŠ‚ç‚¹æ•°é‡
        int leftOfSize = currentIndexOfInorder - inBegin;

        // é€’å½’æ„å»ºå·¦å­æ ‘
        current.left = getOrder(inorder, inBegin, inBegin + leftOfSize, 
                                preorder, preBegin + 1, preBegin + leftOfSize + 1);
        // é€’å½’æ„å»ºå³å­æ ‘
        current.right = getOrder(inorder, currentIndexOfInorder + 1, inEnd, 
                                 preorder, preBegin + leftOfSize + 1, preEnd);
        
        // è¿”å›æ„å»ºå¥½çš„å­æ ‘æ ¹èŠ‚ç‚¹
        return current;
    }
}
```

### 654.æœ€å¤§äºŒå‰æ ‘(4.6)

ç»™å®šä¸€ä¸ªä¸é‡å¤çš„æ•´æ•°æ•°ç»„ `nums` ã€‚ **æœ€å¤§äºŒå‰æ ‘** å¯ä»¥ç”¨ä¸‹é¢çš„ç®—æ³•ä» `nums` é€’å½’åœ°æ„å»º:

1. åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå…¶å€¼ä¸º `nums` ä¸­çš„æœ€å¤§å€¼ã€‚
2. é€’å½’åœ°åœ¨æœ€å¤§å€¼ **å·¦è¾¹** çš„ **å­æ•°ç»„å‰ç¼€ä¸Š** æ„å»ºå·¦å­æ ‘ã€‚
3. é€’å½’åœ°åœ¨æœ€å¤§å€¼ **å³è¾¹** çš„ **å­æ•°ç»„åç¼€ä¸Š** æ„å»ºå³å­æ ‘ã€‚

è¿”å› *nums æ„å»ºçš„* **æœ€å¤§äºŒå‰æ ‘** ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/tree1.jpg)

```
è¾“å…¥ï¼šnums = [3,2,1,6,0,5]
è¾“å‡ºï¼š[6,3,5,null,2,0,null,null,1]
è§£é‡Šï¼šé€’å½’è°ƒç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š
- [3,2,1,6,0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 6 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [3,2,1] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [0,5] ã€‚
    - [3,2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 3 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [2,1] ã€‚
        - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚
        - [2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 2 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [1] ã€‚
            - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚
            - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 1 çš„èŠ‚ç‚¹ã€‚
    - [0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 5 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [0] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [] ã€‚
        - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 0 çš„èŠ‚ç‚¹ã€‚
        - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/tree2.jpg)

```
è¾“å…¥ï¼šnums = [3,2,1]
è¾“å‡ºï¼š[3,null,2,null,1]
```

```java
class Solution {
    public TreeNode constructMaximumBinaryTree(int[] nums) {
        return getOrder(nums, 0, nums.length);
    }

    TreeNode getOrder(int[] nums, int numsBegin, int numsEnd) {
        if (numsBegin >= numsEnd) {
            return null;
        }

        int maxValue = nums[numsBegin];
        int maxIndex = numsBegin;
        for (int i = numsBegin; i < numsEnd; i++) {
            if (nums[i] > maxValue) {
                maxValue = nums[i];
                maxIndex = i;
            }
        }

        TreeNode current = new TreeNode(maxValue);

        current.left = getOrder(nums, numsBegin, maxIndex);
        current.right = getOrder(nums, maxIndex + 1, numsEnd);

        return current;


    }

}
```

### 108.å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘(3.28)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œå…¶ä¸­å…ƒç´ å·²ç»æŒ‰ **å‡åº** æ’åˆ—ï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºä¸€æ£µ å¹³è¡¡ äºŒå‰æœç´¢æ ‘ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](../leetcode%E5%88%B7%E9%A2%98/%E6%96%87%E6%A1%A3%E5%9B%BE%E7%89%87/btree1.jpg)



```
è¾“å…¥ï¼šnums = [-10,-3,0,5,9]
è¾“å‡ºï¼š[0,-3,9,-10,null,5]
è§£é‡Šï¼š[0,-10,5,null,-3,null,9] ä¹Ÿå°†è¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆï¼š
```

![img](../leetcode%E5%88%B7%E9%A2%98/%E6%96%87%E6%A1%A3%E5%9B%BE%E7%89%87/btree2-1733319830735.jpg)

**ç¤ºä¾‹ 2ï¼š**

![img](../leetcode%E5%88%B7%E9%A2%98/%E6%96%87%E6%A1%A3%E5%9B%BE%E7%89%87/btree.jpg)



```
è¾“å…¥ï¼šnums = [1,3]
è¾“å‡ºï¼š[3,1]
è§£é‡Šï¼š[1,null,3] å’Œ [3,1] éƒ½æ˜¯é«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚
```

```java
class Solution {
    // å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘
    public TreeNode sortedArrayToBST(int[] nums) {
        // è°ƒç”¨é€’å½’å‡½æ•°ï¼Œå°†æ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘
        return getOrder(nums, 0, nums.length);
    }

    // é€’å½’å‡½æ•°ï¼Œå°†æ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘
    TreeNode getOrder(int[] nums, int numBegin, int numEnd) {
        // å¦‚æœèµ·å§‹ä½ç½®å¤§äºç­‰äºç»“æŸä½ç½®ï¼Œåˆ™è¿”å›null
        if (numBegin >= numEnd) {
            return null;
        }

        // è®¡ç®—ä¸­é—´ä½ç½®
        int mid = (numBegin + numEnd) / 2;
        // åˆ›å»ºå½“å‰èŠ‚ç‚¹
        TreeNode current = new TreeNode(nums[mid]);

        // é€’å½’è°ƒç”¨ï¼Œå°†å·¦åŠéƒ¨åˆ†æ•°ç»„è½¬æ¢ä¸ºå·¦å­æ ‘
        current.left = getOrder(nums, numBegin, mid);
        // é€’å½’è°ƒç”¨ï¼Œå°†å³åŠéƒ¨åˆ†æ•°ç»„è½¬æ¢ä¸ºå³å­æ ‘
        current.right = getOrder(nums, mid + 1, numEnd);

        // è¿”å›å½“å‰èŠ‚ç‚¹
        return current;

    }
}
```

### 617.åˆå¹¶äºŒå‰æ ‘(4.12)

ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ï¼š `root1` å’Œ `root2` ã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ å°†å…¶ä¸­ä¸€æ£µè¦†ç›–åˆ°å¦ä¸€æ£µä¹‹ä¸Šæ—¶ï¼Œä¸¤æ£µæ ‘ä¸Šçš„ä¸€äº›èŠ‚ç‚¹å°†ä¼šé‡å ï¼ˆè€Œå¦ä¸€äº›ä¸ä¼šï¼‰ã€‚ä½ éœ€è¦å°†è¿™ä¸¤æ£µæ ‘åˆå¹¶æˆä¸€æ£µæ–°äºŒå‰æ ‘ã€‚åˆå¹¶çš„è§„åˆ™æ˜¯ï¼šå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹é‡å ï¼Œé‚£ä¹ˆå°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŠ ä½œä¸ºåˆå¹¶åèŠ‚ç‚¹çš„æ–°å€¼ï¼›å¦åˆ™ï¼Œ**ä¸ä¸º** null çš„èŠ‚ç‚¹å°†ç›´æ¥ä½œä¸ºæ–°äºŒå‰æ ‘çš„èŠ‚ç‚¹ã€‚

è¿”å›åˆå¹¶åçš„äºŒå‰æ ‘ã€‚

**æ³¨æ„:** åˆå¹¶è¿‡ç¨‹å¿…é¡»ä»ä¸¤ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/merge.jpg)



```
è¾“å…¥ï¼šroot1 = [1,3,2,5], root2 = [2,1,3,null,4,null,7]
è¾“å‡ºï¼š[3,4,5,5,4,null,7]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot1 = [1], root2 = [1,2]
è¾“å‡ºï¼š[2,2]
```

**åˆæ˜ è±¡ï¼Œå¾ˆå†—ä½™ä½†å¾ˆç›´è§‰**

```java
class Solution {
    /**
     * åˆå¹¶ä¸¤æ£µäºŒå‰æ ‘
     * 
     * @param root1 ç¬¬ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param root2 ç¬¬äºŒæ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return è¿”å›åˆå¹¶åçš„äºŒå‰æ ‘æ ¹èŠ‚ç‚¹
     */
    public TreeNode mergeTrees(TreeNode root1, TreeNode root2) {
        return sortOrder(root1, root2);
    }

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºåˆå¹¶å½“å‰èŠ‚ç‚¹
     * 
     * @param current1 ç¬¬ä¸€æ£µäºŒå‰æ ‘çš„å½“å‰èŠ‚ç‚¹
     * @param current2 ç¬¬äºŒæ£µäºŒå‰æ ‘çš„å½“å‰èŠ‚ç‚¹
     * @return è¿”å›åˆå¹¶åå½“å‰èŠ‚ç‚¹
     */
    TreeNode sortOrder(TreeNode current1, TreeNode current2) {
        // å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œåˆ™è¿”å›ç©ºèŠ‚ç‚¹
        if (current1 == null && current2 == null) {
            return null;
        }

        // åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œå€¼ä¸ºä¸¤ä¸ªèŠ‚ç‚¹å€¼ä¹‹å’Œ
        TreeNode current = new TreeNode((current1 == null ? 0 : current1.val) + (current2 == null ? 0 : current2.val));
        // é€’å½’åˆå¹¶å·¦å­æ ‘
        current.left = sortOrder(current1 == null ? null :current1.left, current2 == null ? null :current2.left);
        // é€’å½’åˆå¹¶å³å­æ ‘
        current.right = sortOrder(current1 == null ? null :current1.right, current2 == null ? null :current2.right);
        return current;
    }
}
```



ä¼˜åŒ–å

```java
/**
 * Solutionç±»ç”¨äºåˆå¹¶ä¸¤æ£µäºŒå‰æ ‘
 */
class Solution {
    /**
     * åˆå¹¶ä¸¤æ£µäºŒå‰æ ‘
     *
     * @param root1 ç¬¬ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param root2 ç¬¬äºŒæ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return è¿”å›åˆå¹¶åçš„äºŒå‰æ ‘æ ¹èŠ‚ç‚¹
     */
    public TreeNode mergeTrees(TreeNode root1, TreeNode root2) {
        return sortOrder(root1, root2);
    }

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºåˆå¹¶ä¸¤æ£µäºŒå‰æ ‘çš„èŠ‚ç‚¹
     *
     * @param current1 ç¬¬ä¸€æ£µäºŒå‰æ ‘çš„å½“å‰èŠ‚ç‚¹
     * @param current2 ç¬¬äºŒæ£µäºŒå‰æ ‘çš„å½“å‰èŠ‚ç‚¹
     * @return è¿”å›åˆå¹¶åçš„å½“å‰èŠ‚ç‚¹
     */
    TreeNode sortOrder(TreeNode current1, TreeNode current2) {
        // å¦‚æœç¬¬ä¸€æ£µæ ‘çš„å½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ç¬¬äºŒæ£µæ ‘çš„å½“å‰èŠ‚ç‚¹
        if (current1 == null) {
            return current2;
        }
        // å¦‚æœç¬¬äºŒæ£µæ ‘çš„å½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ç¬¬ä¸€æ£µæ ‘çš„å½“å‰èŠ‚ç‚¹
        if (current2 == null) {
            return current1;
        }
        // å°†ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŠ ï¼Œä½œä¸ºåˆå¹¶åèŠ‚ç‚¹çš„å€¼
        current1.val = current1.val + current2.val;
        // é€’å½’åˆå¹¶å·¦å­æ ‘
        current1.left = sortOrder(current1.left, current2.left);
        // é€’å½’åˆå¹¶å³å­æ ‘
        current1.right = sortOrder(current1.right, current2.right);
        // è¿”å›åˆå¹¶åçš„å½“å‰èŠ‚ç‚¹
        return current1;
    }
}
```

1. **æ£€æŸ¥æ ¹èŠ‚ç‚¹æ˜¯å¦ä¸ºç©º**ï¼š
   - å¦‚æœ `root1` ä¸º `null`ï¼Œç›´æ¥è¿”å› `root2`ã€‚è¿™æ„å‘³ç€å¦‚æœç¬¬ä¸€æ£µæ ‘çš„å½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œé‚£ä¹ˆåˆå¹¶åçš„ç»“æœå°±æ˜¯ç¬¬äºŒæ£µæ ‘çš„å½“å‰èŠ‚ç‚¹ã€‚
   - å¦‚æœ `root2` ä¸º `null`ï¼Œç›´æ¥è¿”å› `root1`ã€‚è¿™æ„å‘³ç€å¦‚æœç¬¬äºŒæ£µæ ‘çš„å½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œé‚£ä¹ˆåˆå¹¶åçš„ç»“æœå°±æ˜¯ç¬¬ä¸€æ£µæ ‘çš„å½“å‰èŠ‚ç‚¹ã€‚
2. **åˆ›å»ºåˆå¹¶åçš„èŠ‚ç‚¹**ï¼š
   - å¦‚æœ `root1` å’Œ `root2` éƒ½ä¸ä¸º `null`ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œå…¶å€¼ä¸ºä¸¤è€…å€¼ä¹‹å’Œã€‚
3. **é€’å½’åˆå¹¶å·¦å³å­æ ‘**ï¼š
   - é€’å½’åˆå¹¶å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œåˆ†åˆ«è®¾ç½®ä¸ºåˆå¹¶åèŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘ã€‚

### 700.äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢

ç»™å®šäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹å’Œä¸€ä¸ªå€¼ã€‚ ä½ éœ€è¦åœ¨BSTä¸­æ‰¾åˆ°èŠ‚ç‚¹å€¼ç­‰äºç»™å®šå€¼çš„èŠ‚ç‚¹ã€‚ è¿”å›ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ã€‚ å¦‚æœèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› NULLã€‚

<img src="C:\Users\16083\AppData\Roaming\Typora\typora-user-images\image-20240104114017223.png" alt="image-20240104114017223" style="zoom: 80%;" />

```java
/**
 * Solutionç±»ç”¨äºè§£å†³äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢é—®é¢˜
 */
class Solution {
    /**
     * åœ¨äºŒå‰æœç´¢æ ‘ä¸­æœç´¢ç»™å®šå€¼
     *
     * @param root äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param val éœ€è¦æœç´¢çš„å€¼
     * @return å¦‚æœæ‰¾åˆ°å«æœ‰ç»™å®šå€¼çš„èŠ‚ç‚¹ï¼Œåˆ™è¿”å›è¯¥èŠ‚ç‚¹ï¼›å¦åˆ™è¿”å›null
     */
    public TreeNode searchBST(TreeNode root, int val) {
        return sortOrder(root, val);
    }

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºåœ¨äºŒå‰æ ‘ä¸­æœç´¢ç»™å®šå€¼
     *
     * @param currentNode å½“å‰èŠ‚ç‚¹
     * @param val éœ€è¦æœç´¢çš„å€¼
     * @return å¦‚æœæ‰¾åˆ°å«æœ‰ç»™å®šå€¼çš„èŠ‚ç‚¹ï¼Œåˆ™è¿”å›è¯¥èŠ‚ç‚¹ï¼›å¦åˆ™è¿”å›null
     */
    TreeNode sortOrder(TreeNode currentNode, int val) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜æœªæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œè¿”å›null
        if (currentNode == null) {
            return null;
        }
        // å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ç­‰äºç›®æ ‡å€¼ï¼Œè¯´æ˜æ‰¾åˆ°äº†ç›®æ ‡èŠ‚ç‚¹ï¼Œè¿”å›å½“å‰èŠ‚ç‚¹
        if (currentNode.val == val) {
            return currentNode;
        }
        // åœ¨å·¦å­æ ‘ä¸­é€’å½’æœç´¢ç›®æ ‡å€¼
        TreeNode left = sortOrder(currentNode.left, val);
        // åœ¨å³å­æ ‘ä¸­é€’å½’æœç´¢ç›®æ ‡å€¼
        TreeNode right = sortOrder(currentNode.right, val);
        // å¦‚æœå·¦å³å­æ ‘éƒ½æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œè¿”å›null
        if (left == null && right == null) {
            return null;
        } else {
            // å¦‚æœåœ¨å·¦å­æ ‘ä¸­æ‰¾åˆ°äº†ç›®æ ‡èŠ‚ç‚¹ï¼Œåˆ™è¿”å›å·¦å­æ ‘çš„æœç´¢ç»“æœï¼›å¦åˆ™è¿”å›å³å­æ ‘çš„æœç´¢ç»“æœ
            return left == null ? right : left;
        }
    }
}
```

### 98.éªŒè¯äºŒå‰æœç´¢æ ‘

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚

å‡è®¾ä¸€ä¸ªäºŒå‰æœç´¢æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š

- èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å«å°äºå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚

- èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å«å¤§äºå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚

- æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚

  <img src="C:\Users\16083\AppData\Roaming\Typora\typora-user-images\image-20240104113914046.png" alt="image-20240104113914046" style="zoom: 67%;" />

```java
/**
 * Solutionç±»ç”¨äºæ£€æŸ¥äºŒå‰æ ‘æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘
 */
class Solution {
    // preNodeç”¨äºè®°å½•ä¸­åºéå†çš„å‰ä¸€ä¸ªèŠ‚ç‚¹
    TreeNode preNode;

    /**
     * åˆ¤æ–­ä»¥rootä¸ºæ ¹çš„æ ‘æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return å¦‚æœæ˜¯äºŒå‰æœç´¢æ ‘è¿”å›trueï¼Œå¦åˆ™è¿”å›false
     */
    public boolean isValidBST(TreeNode root) {
        return sortOrder(root);
    }

    /**
     * ä¸­åºéå†äºŒå‰æ ‘ï¼Œæ£€æŸ¥èŠ‚ç‚¹å€¼æ˜¯å¦é€’å¢
     * @param currentNode å½“å‰éå†åˆ°çš„èŠ‚ç‚¹
     * @return å¦‚æœéå†è¿‡ç¨‹ä¸­å‘ç°ä¸æ»¡è¶³äºŒå‰æœç´¢æ ‘æ¡ä»¶ï¼Œè¿”å›falseï¼Œå¦åˆ™è¿”å›true
     */
    boolean sortOrder(TreeNode currentNode) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜å½“å‰å­æ ‘ä¸ºç©ºï¼Œæ˜¯äºŒå‰æœç´¢æ ‘
        if (currentNode == null) {
            return true;
        }
        // é€’å½’æ£€æŸ¥å·¦å­æ ‘æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘
        boolean leftIsBST = sortOrder(currentNode.left);
        // å¦‚æœå½“å‰èŠ‚ç‚¹å€¼å°äºç­‰äºå‰ä¸€ä¸ªèŠ‚ç‚¹å€¼ï¼Œè¯´æ˜ä¸æ»¡è¶³äºŒå‰æœç´¢æ ‘æ¡ä»¶
        if (preNode != null && preNode.val >= currentNode.val) {
            return false;
        }
        // æ›´æ–°å‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹
        preNode = currentNode;
        // é€’å½’æ£€æŸ¥å³å­æ ‘æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘
        boolean rightIsBST = sortOrder(currentNode.right);
        // è¿”å›æ•´ä¸ªæ ‘æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘çš„ç»“æœ
        return leftIsBST && rightIsBST;
    }
}
```

### 530.äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®

ç»™ä½ ä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å› **æ ‘ä¸­ä»»æ„ä¸¤ä¸åŒèŠ‚ç‚¹å€¼ä¹‹é—´çš„æœ€å°å·®å€¼** ã€‚

å·®å€¼æ˜¯ä¸€ä¸ªæ­£æ•°ï¼Œå…¶æ•°å€¼ç­‰äºä¸¤å€¼ä¹‹å·®çš„ç»å¯¹å€¼ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20201014223400123.png" alt="530äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®" style="zoom:50%;" />

```java

class Solution {
    TreeNode pre; // ç”¨äºè®°å½•å‰ä¸€ä¸ªéå†åˆ°çš„èŠ‚ç‚¹
    int minDifference = Integer.MAX_VALUE; // å­˜å‚¨æœ€å°ç»å¯¹å·®å€¼

    // è·å–äºŒå‰æœç´¢æ ‘ä¸­çš„æœ€å°ç»å¯¹å·®
    public int getMinimumDifference(TreeNode root) {
        getOrder(root); // è°ƒç”¨é€’å½’å‡½æ•°è¿›è¡Œä¸­åºéå†
        return minDifference; // è¿”å›æœ€å°ç»å¯¹å·®å€¼
    }

    // ä¸­åºéå†äºŒå‰æœç´¢æ ‘ï¼Œå¹¶æ›´æ–°æœ€å°ç»å¯¹å·®
    void getOrder(TreeNode current) {
        if (current == null) { // é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼Œå½“å‰èŠ‚ç‚¹ä¸ºç©º
            return;
        }

        getOrder(current.left); // éå†å·¦å­æ ‘

        // å¦‚æœå‰ä¸€ä¸ªèŠ‚ç‚¹å­˜åœ¨ä¸”å½“å‰èŠ‚ç‚¹å€¼ä¸å‰ä¸€ä¸ªèŠ‚ç‚¹å€¼ä¹‹å·®å°äºå½“å‰æœ€å°ç»å¯¹å·®
        if (pre != null && current.val - pre.val < minDifference) {
            minDifference = current.val - pre.val; // æ›´æ–°æœ€å°ç»å¯¹å·®
        }
        pre = current; // æ›´æ–°å‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹

        getOrder(current.right); // éå†å³å­æ ‘
    }
}
```

### 501.äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°(3.22)

ç»™ä½ ä¸€ä¸ªå«é‡å¤å€¼çš„äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œæ‰¾å‡ºå¹¶è¿”å› BST ä¸­çš„æ‰€æœ‰ [ä¼—æ•°](https://baike.baidu.com/item/%E4%BC%97%E6%95%B0/44796)ï¼ˆå³ï¼Œå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ï¼‰ã€‚

å¦‚æœæ ‘ä¸­æœ‰ä¸æ­¢ä¸€ä¸ªä¼—æ•°ï¼Œå¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ã€‚

å‡å®š BST æ»¡è¶³å¦‚ä¸‹å®šä¹‰ï¼š

- ç»“ç‚¹å·¦å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼ **å°äºç­‰äº** å½“å‰èŠ‚ç‚¹çš„å€¼
- ç»“ç‚¹å³å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼ **å¤§äºç­‰äº** å½“å‰èŠ‚ç‚¹çš„å€¼
- å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘



**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode.com/uploads/2021/03/11/mode-tree.jpg)



```
è¾“å…¥ï¼šroot = [1,null,2,2]
è¾“å‡ºï¼š[2]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = [0]
è¾“å‡ºï¼š[0]
```



```java
class Solution {
    // å­˜å‚¨ä¼—æ•°ç»“æœçš„åˆ—è¡¨
    ArrayList<Integer> resultList = new ArrayList<>();
    // ä¸Šä¸€ä¸ªéå†çš„èŠ‚ç‚¹
    TreeNode pre;
    // ä¼—æ•°å‡ºç°çš„æœ€å¤§æ¬¡æ•°
    int maxNum = Integer.MIN_VALUE;
    // å½“å‰èŠ‚ç‚¹å€¼å‡ºç°çš„æ¬¡æ•°
    int sameNum = 0;
    // æŸ¥æ‰¾äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°
    public int[] findMode(TreeNode root) {
        // è·å–æœ‰åºèŠ‚ç‚¹å€¼
        getOrder(root);
        // å°†åˆ—è¡¨è½¬æ¢ä¸ºæ•´æ•°æ•°ç»„å¹¶è¿”å›
        return resultList.stream().mapToInt(Integer::intValue).toArray();
    }

    // è·å–æœ‰åºèŠ‚ç‚¹å€¼å¹¶è®¡ç®—ä¼—æ•°
    void getOrder(TreeNode current) {
        // é€’å½’éå†å·¦å­æ ‘
        if (current == null) {
            return;
        }

        // é€’å½’éå†å·¦å­æ ‘
        getOrder(current.left);
        // åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹æˆ–ä¸å‰ä¸€ä¸ªèŠ‚ç‚¹å€¼ä¸åŒ
        if (pre == null) {
            sameNum = 1;
        } else if (pre.val == current.val) {
            // å½“å‰èŠ‚ç‚¹å€¼ä¸å‰ä¸€ä¸ªèŠ‚ç‚¹å€¼ç›¸åŒï¼Œå¢åŠ è®¡æ•°
            sameNum++;
        } else {
            // å½“å‰èŠ‚ç‚¹å€¼ä¸å‰ä¸€ä¸ªèŠ‚ç‚¹å€¼ä¸åŒï¼Œé‡ç½®è®¡æ•°
            sameNum = 1;
        }

        // å¦‚æœå½“å‰èŠ‚ç‚¹å€¼å‡ºç°çš„æ¬¡æ•°ç­‰äºå½“å‰ä¼—æ•°å‡ºç°çš„æ¬¡æ•°
        if (sameNum == maxNum) {
            // å°†å½“å‰èŠ‚ç‚¹å€¼æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
            resultList.add(current.val);
        } else if (sameNum > maxNum) {
            // å¦‚æœå½“å‰èŠ‚ç‚¹å€¼å‡ºç°çš„æ¬¡æ•°å¤§äºå½“å‰ä¼—æ•°å‡ºç°çš„æ¬¡æ•°
            // æ›´æ–°ä¼—æ•°å‡ºç°çš„æ¬¡æ•°
            maxNum = sameNum;
            // æ¸…ç©ºç»“æœåˆ—è¡¨
            resultList.clear();
            // å°†å½“å‰èŠ‚ç‚¹å€¼æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
            resultList.add(current.val);
        }
        // æ›´æ–°å‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå½“å‰èŠ‚ç‚¹
        pre = current;

        // é€’å½’éå†å³å­æ ‘
        getOrder(current.right);
    }
}
```

### 236.äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ(4.10)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚

[ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/8918834?fr=aladdin)ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªèŠ‚ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªèŠ‚ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆ**ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆ**ï¼‰ã€‚â€

 

**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode.com/uploads/2018/12/14/binarytree.png)

```
è¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1
è¾“å‡ºï¼š3
è§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 3 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

![img](https://assets.leetcode.com/uploads/2018/12/14/binarytree.png)

```
è¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4
è¾“å‡ºï¼š5
è§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 5 ã€‚å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [1,2], p = 1, q = 2
è¾“å‡ºï¼š1
```

```java
/**
 * Solutionç±»ç”¨äºè§£å†³äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜
 */
class Solution {
    /**
     * å¯»æ‰¾äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹på’Œqçš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
     * 
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param p ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
     * @param q ç¬¬äºŒä¸ªèŠ‚ç‚¹
     * @return è¿”å›æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹
     */
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        return sortOrder(root, p, q);
    }

    /**
     * è¾…åŠ©å‡½æ•°ï¼Œç”¨äºåœ¨å½“å‰èŠ‚ç‚¹åŠå…¶å­æ ‘ä¸­å¯»æ‰¾èŠ‚ç‚¹på’Œqçš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
     * 
     * @param current å½“å‰èŠ‚ç‚¹
     * @param p ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
     * @param q ç¬¬äºŒä¸ªèŠ‚ç‚¹
     * @return å¦‚æœæ‰¾åˆ°æœ€è¿‘å…¬å…±ç¥–å…ˆåˆ™è¿”å›è¯¥èŠ‚ç‚¹ï¼Œå¦åˆ™è¿”å›null
     */
    TreeNode sortOrder(TreeNode current, TreeNode p, TreeNode q) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›nullï¼Œè¡¨ç¤ºæœªæ‰¾åˆ°pæˆ–q
        if (current == null) {
            return null;
        }
        // å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯pæˆ–qï¼Œåˆ™è¿”å›å½“å‰èŠ‚ç‚¹ï¼Œè¡¨ç¤ºæ‰¾åˆ°äº†pæˆ–q
        if (p == current || q == current) {
            return current;
        }

        // åœ¨å·¦å­æ ‘ä¸­å¯»æ‰¾på’Œqçš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
        TreeNode leftNode = sortOrder(current.left, p, q);
        // åœ¨å³å­æ ‘ä¸­å¯»æ‰¾på’Œqçš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
        TreeNode rightNode = sortOrder(current.right, p, q);

        // å¦‚æœå·¦å³å­æ ‘éƒ½æ‰¾åˆ°äº†æœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œé‚£ä¹ˆå½“å‰èŠ‚ç‚¹å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ
        if (leftNode != null && rightNode != null) {
            return current;
        } 
        // å¦‚æœå·¦å­æ ‘æ²¡æœ‰æ‰¾åˆ°ï¼Œä½†å³å­æ ‘æ‰¾åˆ°äº†ï¼Œé‚£ä¹ˆå³å­æ ‘æ‰¾åˆ°çš„å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ
        else if (leftNode == null && rightNode != null) {
            return rightNode;
        } 
        // å¦‚æœå³å­æ ‘æ²¡æœ‰æ‰¾åˆ°ï¼Œä½†å·¦å­æ ‘æ‰¾åˆ°äº†ï¼Œé‚£ä¹ˆå·¦å­æ ‘æ‰¾åˆ°çš„å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ
        else if (leftNode != null && rightNode == null) {
            return leftNode;
        } 
        // å¦‚æœå·¦å³å­æ ‘éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£ä¹ˆè¿”å›nullï¼Œè¡¨ç¤ºæœªæ‰¾åˆ°pæˆ–q
        else {
            return null;
        }
    }
}
```

### 235.äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆ3.20ï¼‰

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚

[ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88/8918834?fr=aladdin)ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆ**ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆ**ï¼‰ã€‚â€

ä¾‹å¦‚ï¼Œç»™å®šå¦‚ä¸‹äºŒå‰æœç´¢æ ‘: root = [6,2,8,0,4,7,9,null,null,3,5]

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/binarysearchtree_improved.png)



**ç¤ºä¾‹ 1:**

```
è¾“å…¥: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 8
è¾“å‡º: 6 
è§£é‡Š: èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 8 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ 6ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 4
è¾“å‡º: 2
è§£é‡Š: èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ 2, å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚
```

```java

/**
 * Solutionç±»ç”¨äºè§£å†³äºŒå‰æœç´¢æ ‘ä¸­çš„æœ€è¿‘å…¬å…±ç¥–å…ˆé—®é¢˜
 */
class Solution {
    /**
     * å¯»æ‰¾äºŒå‰æœç´¢æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
     * 
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param p ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
     * @param q ç¬¬äºŒä¸ªèŠ‚ç‚¹
     * @return è¿”å›æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹
     */
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        // ç¡®ä¿pçš„å€¼å°äºqçš„å€¼ï¼Œä»¥ä¾¿ç®€åŒ–é—®é¢˜å¤„ç†
        if (p.val < q.val) {
            return sortOrder(root, p, q);
        } else {
            return sortOrder(root, q, p);
        }
    }

    /**
     * è¾…åŠ©å‡½æ•°ï¼Œç”¨äºå®é™…æ‰§è¡Œå¯»æ‰¾æœ€è¿‘å…¬å…±ç¥–å…ˆçš„é€»è¾‘
     * 
     * @param current å½“å‰èŠ‚ç‚¹
     * @param p å€¼è¾ƒå°çš„èŠ‚ç‚¹
     * @param q å€¼è¾ƒå¤§çš„èŠ‚ç‚¹
     * @return è¿”å›æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹æˆ–null
     */
    TreeNode sortOrder(TreeNode current, TreeNode p, TreeNode q) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›null
        if (current == null) {
            return null;
        }
        // å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ä»‹äºpå’Œqä¹‹é—´ï¼ˆåŒ…æ‹¬på’Œqçš„å€¼ï¼‰ï¼Œåˆ™æ‰¾åˆ°æœ€è¿‘å…¬å…±ç¥–å…ˆ
        if (current.val >= p.val && current.val <= q.val) {
            return current;
        }
        // å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼å°äºpçš„å€¼ï¼Œåˆ™åœ¨å³å­æ ‘ä¸­ç»§ç»­å¯»æ‰¾
        if (current.val < p.val) {
            return sortOrder(current.right, p, q);
        } else {
            // å¦åˆ™åœ¨å·¦å­æ ‘ä¸­ç»§ç»­å¯»æ‰¾
            return sortOrder(current.left, p, q);
        }
    }
}
```

### 701.äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ(3.28)

ç»™å®šäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹ `root` å’Œè¦æ’å…¥æ ‘ä¸­çš„å€¼ `value` ï¼Œå°†å€¼æ’å…¥äºŒå‰æœç´¢æ ‘ã€‚ è¿”å›æ’å…¥åäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚ è¾“å…¥æ•°æ® **ä¿è¯** ï¼Œæ–°å€¼å’ŒåŸå§‹äºŒå‰æœç´¢æ ‘ä¸­çš„ä»»æ„èŠ‚ç‚¹å€¼éƒ½ä¸åŒã€‚

**æ³¨æ„**ï¼Œå¯èƒ½å­˜åœ¨å¤šç§æœ‰æ•ˆçš„æ’å…¥æ–¹å¼ï¼Œåªè¦æ ‘åœ¨æ’å…¥åä»ä¿æŒä¸ºäºŒå‰æœç´¢æ ‘å³å¯ã€‚ ä½ å¯ä»¥è¿”å› **ä»»æ„æœ‰æ•ˆçš„ç»“æœ** ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode.com/uploads/2020/10/05/insertbst.jpg)

```
è¾“å…¥ï¼šroot = [4,2,7,1,3], val = 5
è¾“å‡ºï¼š[4,2,7,1,3,5]
```

è§£é‡Šï¼šå¦ä¸€ä¸ªæ»¡è¶³é¢˜ç›®è¦æ±‚å¯ä»¥é€šè¿‡çš„æ ‘æ˜¯ï¼š

![img](https://assets.leetcode.com/uploads/2020/10/05/bst.jpg)

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = [40,20,60,10,30,50,70], val = 25
è¾“å‡ºï¼š[40,20,60,10,30,50,70,null,null,25]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [4,2,7,1,3,null,null,null,null,null,null], val = 5
è¾“å‡ºï¼š[4,2,7,1,3,5]
```

```java
class Solution {
    /**
     * æ’å…¥ä¸€ä¸ªæ–°å€¼åˆ°äºŒå‰æœç´¢æ ‘ä¸­
     * å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜æ ‘ä¸ºç©ºï¼Œç›´æ¥åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°èŠ‚ç‚¹
     * å¦åˆ™ï¼Œè°ƒç”¨è¾…åŠ©æ–¹æ³•sortOrderæ¥æ‰¾åˆ°åˆé€‚çš„ä½ç½®æ’å…¥æ–°å€¼
     *
     * @param root BSTçš„æ ¹èŠ‚ç‚¹ï¼Œå¯èƒ½ä¸ºç©º
     * @param val è¦æ’å…¥çš„æ–°å€¼
     * @return æ’å…¥æ–°å€¼åçš„BSTçš„æ ¹èŠ‚ç‚¹
     */
    public TreeNode insertIntoBST(TreeNode root, int val) {
        // å¦‚æœæ ‘æ˜¯ç©ºçš„ï¼Œç›´æ¥è¿”å›æ–°èŠ‚ç‚¹
        if (root == null) {
            return new TreeNode(val);
        }
        // è°ƒç”¨é€’å½’æ–¹æ³•æ’å…¥èŠ‚ç‚¹
        sortOrder(root, val);
        return root;
    }
    /**
     * é€’å½’åœ°åœ¨BSTä¸­ä¸ºæ–°å€¼æ‰¾åˆ°åˆé€‚çš„ä½ç½®å¹¶æ’å…¥
     * å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼å°äºæ–°å€¼ï¼Œè¯´æ˜æ–°å€¼åº”è¯¥æ’å…¥åˆ°å½“å‰èŠ‚ç‚¹çš„å³å­æ ‘ä¸­
     * å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼å¤§äºæ–°å€¼ï¼Œè¯´æ˜æ–°å€¼åº”è¯¥æ’å…¥åˆ°å½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸­
     * å½“æ‰¾åˆ°ä¸€ä¸ªç©ºçš„ä½ç½®æ—¶ï¼Œå°±åœ°æ’å…¥æ–°å€¼
     *
     * @param current å½“å‰æ­£åœ¨è€ƒå¯Ÿçš„èŠ‚ç‚¹
     * @param val è¦æ’å…¥çš„æ–°å€¼
     */
    void sortOrder(TreeNode currentNode, int val) {
        // é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼šå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼ˆè¿™ç§æƒ…å†µåœ¨è¿™é‡Œä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºè°ƒç”¨æ—¶æ£€æŸ¥äº† nullï¼‰
        if (currentNode == null) {
            return;
        }
        // å¦‚æœ val åº”æ’å…¥å·¦å­æ ‘
        if (val < currentNode.val) {
            if (currentNode.left == null) {
                currentNode.left = new TreeNode(val);
                return; // æ’å…¥åç›´æ¥è¿”å›
            } else {
                sortOrder(currentNode.left, val);
            }
        }
        // å¦‚æœ val åº”æ’å…¥å³å­æ ‘
        else { // val > currentNode.val
            if (currentNode.right == null) {
                currentNode.right = new TreeNode(val);
                return; // æ’å…¥åç›´æ¥è¿”å›
            } else {
                sortOrder(currentNode.right, val);
            }
        }
    }
}

```

### 450.åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹(3.27)

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ **root** å’Œä¸€ä¸ªå€¼ **key**ï¼Œåˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„ **key** å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¹¶ä¿è¯äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ä¸å˜ã€‚è¿”å›äºŒå‰æœç´¢æ ‘ï¼ˆæœ‰å¯èƒ½è¢«æ›´æ–°ï¼‰çš„æ ¹èŠ‚ç‚¹çš„å¼•ç”¨ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œåˆ é™¤èŠ‚ç‚¹å¯åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š

1. é¦–å…ˆæ‰¾åˆ°éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼›
2. å¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ é™¤å®ƒã€‚



**ç¤ºä¾‹ 1:**

![img](æ–‡æ¡£å›¾ç‰‡/del_node_1.jpg)

```
è¾“å…¥ï¼šroot = [5,3,6,2,4,null,7], key = 3
è¾“å‡ºï¼š[5,4,6,2,null,null,7]
è§£é‡Šï¼šç»™å®šéœ€è¦åˆ é™¤çš„èŠ‚ç‚¹å€¼æ˜¯ 3ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæ‰¾åˆ° 3 è¿™ä¸ªèŠ‚ç‚¹ï¼Œç„¶ååˆ é™¤å®ƒã€‚
ä¸€ä¸ªæ­£ç¡®çš„ç­”æ¡ˆæ˜¯ [5,4,6,2,null,null,7], å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
å¦ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆæ˜¯ [5,2,6,null,4,null,7]ã€‚
```

![img](æ–‡æ¡£å›¾ç‰‡/del_node_supp.jpg)

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: root = [5,3,6,2,4,null,7], key = 0
è¾“å‡º: [5,3,6,2,4,null,7]
è§£é‡Š: äºŒå‰æ ‘ä¸åŒ…å«å€¼ä¸º 0 çš„èŠ‚ç‚¹
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: root = [], key = 0
è¾“å‡º: []
```

```java
/**
 * Solutionç±»æä¾›äº†ä¸€ç§åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­ç‰¹å®šèŠ‚ç‚¹çš„æ–¹æ³•
 */
class Solution {
    /**
     * ä»äºŒå‰æœç´¢æ ‘ä¸­åˆ é™¤æŒ‡å®šå€¼çš„èŠ‚ç‚¹
     * 
     * @param root äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param key éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹çš„å€¼
     * @return åˆ é™¤èŠ‚ç‚¹åçš„äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹
     */
    public TreeNode deleteNode(TreeNode root, int key) {
        return sortOrder(root, key);
    }

    /**
     * é€’å½’åœ°åœ¨äºŒå‰æœç´¢æ ‘ä¸­åˆ é™¤æŒ‡å®šå€¼çš„èŠ‚ç‚¹
     * 
     * @param current å½“å‰éå†åˆ°çš„èŠ‚ç‚¹
     * @param key éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹çš„å€¼
     * @return åˆ é™¤èŠ‚ç‚¹åçš„å­æ ‘çš„æ ¹èŠ‚ç‚¹
     */
    TreeNode sortOrder(TreeNode current, int key) {
        if (current == null) {
            return null;
        }

        if (current.val == key) {
            // å½“è¢«åˆ é™¤èŠ‚ç‚¹åªæœ‰å³å­æ ‘æ—¶ï¼Œç”¨å³å­æ ‘æ›¿æ¢è¯¥èŠ‚ç‚¹
            if (current.left == null) {
                return current.right;
            }
            // å½“è¢«åˆ é™¤èŠ‚ç‚¹åªæœ‰å·¦å­æ ‘æ—¶ï¼Œç”¨å·¦å­æ ‘æ›¿æ¢è¯¥èŠ‚ç‚¹
            if (current.right == null) {
                return current.left;
            }
            // å½“è¢«åˆ é™¤èŠ‚ç‚¹æ—¢æœ‰å·¦å­æ ‘åˆæœ‰å³å­æ ‘æ—¶ï¼Œæ‰¾åˆ°å³å­æ ‘ä¸­æœ€å°çš„èŠ‚ç‚¹æ›¿æ¢è¯¥èŠ‚ç‚¹
            TreeNode minNode = getMin(current.right);
            current.val = minNode.val;
            // é€’å½’åœ°åœ¨å³å­æ ‘ä¸­åˆ é™¤æ›¿æ¢åçš„èŠ‚ç‚¹
            current.right = sortOrder(current.right, minNode.val);
        } else if (current.val > key) {
            // å½“å‰èŠ‚ç‚¹å€¼å¤§äºkeyï¼Œé€’å½’åœ°åœ¨å·¦å­æ ‘ä¸­åˆ é™¤keyå€¼çš„èŠ‚ç‚¹
            current.left = sortOrder(current.left, key);
        } else {
            // å½“å‰èŠ‚ç‚¹å€¼å°äºkeyï¼Œé€’å½’åœ°åœ¨å³å­æ ‘ä¸­åˆ é™¤keyå€¼çš„èŠ‚ç‚¹
            current.right = sortOrder(current.right, key);
        }

        return current;
    }

    /**
     * è·å–äºŒå‰æœç´¢æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹
     * 
     * @param current å½“å‰éå†åˆ°çš„èŠ‚ç‚¹
     * @return æœ€å°èŠ‚ç‚¹
     */
    TreeNode getMin(TreeNode current) {
        while (current.left != null) {
            current = current.left;
        }
        return current;
    }
}
```

### 669.ä¿®å‰ªäºŒå‰æœç´¢æ ‘(4.2)

ç»™ä½ äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼ŒåŒæ—¶ç»™å®šæœ€å°è¾¹ç•Œ`low` å’Œæœ€å¤§è¾¹ç•Œ `high`ã€‚é€šè¿‡ä¿®å‰ªäºŒå‰æœç´¢æ ‘ï¼Œä½¿å¾—æ‰€æœ‰èŠ‚ç‚¹çš„å€¼åœ¨`[low, high]`ä¸­ã€‚ä¿®å‰ªæ ‘ **ä¸åº”è¯¥** æ”¹å˜ä¿ç•™åœ¨æ ‘ä¸­çš„å…ƒç´ çš„ç›¸å¯¹ç»“æ„ (å³ï¼Œå¦‚æœæ²¡æœ‰è¢«ç§»é™¤ï¼ŒåŸæœ‰çš„çˆ¶ä»£å­ä»£å…³ç³»éƒ½åº”å½“ä¿ç•™)ã€‚ å¯ä»¥è¯æ˜ï¼Œå­˜åœ¨ **å”¯ä¸€çš„ç­”æ¡ˆ** ã€‚

æ‰€ä»¥ç»“æœåº”å½“è¿”å›ä¿®å‰ªå¥½çš„äºŒå‰æœç´¢æ ‘çš„æ–°çš„æ ¹èŠ‚ç‚¹ã€‚æ³¨æ„ï¼Œæ ¹èŠ‚ç‚¹å¯èƒ½ä¼šæ ¹æ®ç»™å®šçš„è¾¹ç•Œå‘ç”Ÿæ”¹å˜ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/trim1.jpg)



```
è¾“å…¥ï¼šroot = [1,0,2], low = 1, high = 2
è¾“å‡ºï¼š[1,null,2]
```

**ç¤ºä¾‹ 2ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/trim2.jpg)



```
è¾“å…¥ï¼šroot = [3,0,4,null,2,null,null,1], low = 1, high = 3
è¾“å‡ºï¼š[3,2,null,1]
```

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode() {}
 *     TreeNode(int val) { this.val = val; }
 *     TreeNode(int val, TreeNode left, TreeNode right) {
 *         this.val = val;
 *         this.left = left;
 *         this.right = right;
 *     }
 * }
 */
/**
 * Solutionç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥ä¿®å‰ªäºŒå‰æœç´¢æ ‘ï¼Œä½¿å…¶åªåŒ…å«åœ¨æŒ‡å®šèŒƒå›´å†…çš„èŠ‚ç‚¹
 */
class Solution {
    /**
     * ä¿®å‰ªäºŒå‰æœç´¢æ ‘ï¼Œä½¿å…¶åªåŒ…å«èŠ‚ç‚¹å€¼åœ¨[low, high]èŒƒå›´å†…çš„èŠ‚ç‚¹
     *
     * @param root äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param low ä¿®å‰ªåæ ‘ä¸­èŠ‚ç‚¹å€¼çš„ä¸‹é™
     * @param high ä¿®å‰ªåæ ‘ä¸­èŠ‚ç‚¹å€¼çš„ä¸Šé™
     * @return ä¿®å‰ªåçš„äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹
     */
    public TreeNode trimBST(TreeNode root, int low, int high) {
        return sortOrder(root, low, high);
    }

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºä¿®å‰ªäºŒå‰æœç´¢æ ‘ä¸­å½“å‰èŠ‚ç‚¹åŠå…¶å­æ ‘
     *
     * @param currentNode å½“å‰èŠ‚ç‚¹
     * @param low ä¿®å‰ªåæ ‘ä¸­èŠ‚ç‚¹å€¼çš„ä¸‹é™
     * @param high ä¿®å‰ªåæ ‘ä¸­èŠ‚ç‚¹å€¼çš„ä¸Šé™
     * @return ä¿®å‰ªåçš„å½“å‰èŠ‚ç‚¹æˆ–å…¶æ›¿ä»£èŠ‚ç‚¹
     */
    TreeNode sortOrder(TreeNode currentNode, int low, int high) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›ç©ºï¼Œè¡¨ç¤ºå·²ç»åˆ°è¾¾æ ‘çš„åº•éƒ¨æˆ–å½“å‰åˆ†æ”¯æ— éœ€è¿›ä¸€æ­¥å¤„ç†
        if (currentNode == null) {
            return null;
        }
        // å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼å°äºæŒ‡å®šçš„ä¸‹é™lowï¼Œåˆ™è¯´æ˜å½“å‰èŠ‚ç‚¹åŠå…¶å·¦å­æ ‘éƒ½ä¸ç¬¦åˆè¦æ±‚ï¼Œå› æ­¤é€’å½’å¤„ç†å…¶å³å­æ ‘
        if (currentNode.val < low) {
            return sortOrder(currentNode.right, low, high);
        }
        // å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼å¤§äºæŒ‡å®šçš„ä¸Šé™highï¼Œåˆ™è¯´æ˜å½“å‰èŠ‚ç‚¹åŠå…¶å³å­æ ‘éƒ½ä¸ç¬¦åˆè¦æ±‚ï¼Œå› æ­¤é€’å½’å¤„ç†å…¶å·¦å­æ ‘
        if (currentNode.val > high) {
            return sortOrder(currentNode.left, low, high);
        }
        // å½“å‰èŠ‚ç‚¹çš„å€¼åœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œå› æ­¤é€’å½’å¤„ç†å…¶å·¦å³å­æ ‘ï¼Œä»¥ç¡®ä¿æ•´ä¸ªæ ‘ç¬¦åˆè¦æ±‚
        currentNode.left = sortOrder(currentNode.left, low, high);
        currentNode.right = sortOrder(currentNode.right, low, high);
        // è¿”å›å½“å‰èŠ‚ç‚¹ï¼Œè¡¨ç¤ºå½“å‰èŠ‚ç‚¹åŠå…¶ä¿®å‰ªåçš„å­æ ‘
        return currentNode;
    }
}
```

### 538.å°†äºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘(4.2)

ç»™å‡ºäºŒå‰ **æœç´¢** æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¯¥æ ‘çš„èŠ‚ç‚¹å€¼å„ä¸ç›¸åŒï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºç´¯åŠ æ ‘ï¼ˆGreater Sum Treeï¼‰ï¼Œä½¿æ¯ä¸ªèŠ‚ç‚¹ `node` çš„æ–°å€¼ç­‰äºåŸæ ‘ä¸­å¤§äºæˆ–ç­‰äº `node.val` çš„å€¼ä¹‹å’Œã€‚

æé†’ä¸€ä¸‹ï¼ŒäºŒå‰æœç´¢æ ‘æ»¡è¶³ä¸‹åˆ—çº¦æŸæ¡ä»¶ï¼š

- èŠ‚ç‚¹çš„å·¦å­æ ‘ä»…åŒ…å«é”® **å°äº** èŠ‚ç‚¹é”®çš„èŠ‚ç‚¹ã€‚
- èŠ‚ç‚¹çš„å³å­æ ‘ä»…åŒ…å«é”® **å¤§äº** èŠ‚ç‚¹é”®çš„èŠ‚ç‚¹ã€‚
- å·¦å³å­æ ‘ä¹Ÿå¿…é¡»æ˜¯äºŒå‰æœç´¢æ ‘ã€‚

**æ³¨æ„ï¼š**æœ¬é¢˜å’Œ 1038: <https://leetcode-cn.com/problems/binary-search-tree-to-greater-sum-tree/> ç›¸åŒ

**è½¬æ¢çš„è§„åˆ™æ˜¯ï¼šå¯¹äºæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå®ƒçš„æ–°å€¼å°†å˜æˆåŸæ ‘ä¸­æ‰€æœ‰å¤§äºæˆ–ç­‰äºè¯¥èŠ‚ç‚¹å€¼çš„èŠ‚ç‚¹çš„å€¼çš„æ€»å’Œã€‚**

**ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š**

- **å‡è®¾æœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼æ˜¯5**
- **è½¬æ¢åï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„æ–°å€¼å°†æ˜¯æ ‘ä¸­æ‰€æœ‰å¤§äºæˆ–ç­‰äº5çš„èŠ‚ç‚¹å€¼çš„æ€»å’Œ**

**è¿™ä¸ªè½¬æ¢è¿‡ç¨‹éœ€è¦ä½ é‡æ–°è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ª"ç´¯åŠ "çš„å€¼ã€‚**

**ç¤ºä¾‹ 1ï¼š**

**![img](æ–‡æ¡£å›¾ç‰‡/tree.png)**

```
è¾“å…¥ï¼š[4,1,6,0,2,5,7,null,null,null,3,null,null,null,8]
è¾“å‡ºï¼š[30,36,21,36,35,26,15,null,null,null,33,null,null,null,8]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = [0,null,1]
è¾“å‡ºï¼š[1,null,1]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [1,0,2]
è¾“å‡ºï¼š[3,3,2]
```

**ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼šroot = [3,2,4,1]
è¾“å‡ºï¼š[7,9,4,10]
```

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡preï¼Œç”¨äºè®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹
    TreeNode pre;
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•convertBSTï¼Œç”¨äºå°†äºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘
    public TreeNode convertBST(TreeNode root) {
        // è°ƒç”¨getOrderæ–¹æ³•ï¼Œå¯¹äºŒå‰æ ‘è¿›è¡Œä¸­åºéå†
        getOrder(root);
        // è¿”å›æ ¹èŠ‚ç‚¹
        return root;
    }

    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•getOrderï¼Œç”¨äºä¸­åºéå†äºŒå‰æ ‘
    void getOrder(TreeNode current) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›
        if (current == null) {
            return;
        }

        // é€’å½’éå†å³å­æ ‘
        getOrder(current.right);
        // å¦‚æœå‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œåˆ™å°†å½“å‰èŠ‚ç‚¹çš„å€¼åŠ ä¸Šå‰ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼
        if (pre != null) {
            current.val = current.val + pre.val;
        }
        // å°†å½“å‰èŠ‚ç‚¹èµ‹å€¼ç»™å‰ä¸€ä¸ªèŠ‚ç‚¹
        pre = current;
        // é€’å½’éå†å·¦å­æ ‘
        getOrder(current.left);
    }
}
```

### 543.äºŒå‰æ ‘çš„ç›´å¾„(3.26)

ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¿”å›è¯¥æ ‘çš„ **ç›´å¾„** ã€‚

äºŒå‰æ ‘çš„ **ç›´å¾„** æ˜¯æŒ‡æ ‘ä¸­ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ€é•¿è·¯å¾„çš„ **é•¿åº¦** ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç»è¿‡ä¹Ÿå¯èƒ½ä¸ç»è¿‡æ ¹èŠ‚ç‚¹ `root` ã€‚

ä¸¤èŠ‚ç‚¹ä¹‹é—´è·¯å¾„çš„ **é•¿åº¦** ç”±å®ƒä»¬ä¹‹é—´è¾¹æ•°è¡¨ç¤ºã€‚

**ç¤ºä¾‹ 1ï¼š**

<img src="https://assets.leetcode.com/uploads/2021/03/06/diamtree.jpg" alt="img" style="zoom:50%;" />

```
è¾“å…¥ï¼šroot = [1,2,3,4,5]
è¾“å‡ºï¼š3
è§£é‡Šï¼š3 ï¼Œå–è·¯å¾„ [4,2,1,3] æˆ– [5,2,1,3] çš„é•¿åº¦ã€‚
```

**æ³¨ï¼šè™½ç„¶æ˜¯åœ¨æ±‚äºŒå‰æ ‘æœ€å¤§æ·±åº¦çš„ä»£ç åŸºç¡€ä¸Šä¿®æ”¹ï¼Œä½†ä¸èƒ½ç®€å•ç†è§£ä¸ºç›´å¾„æ˜¯æ ¹èŠ‚ç‚¹å·¦å³å­æ ‘æœ€å¤§é«˜åº¦ä¹‹å’Œï¼Œå› ä¸ºäºŒå‰æ ‘ç›´å¾„å¯èƒ½ä¸åŒ…æ‹¬æ ¹èŠ‚ç‚¹**

```java
/**
 * Solutionç±»ç”¨äºè®¡ç®—äºŒå‰æ ‘çš„ç›´å¾„
 */
class Solution {
    /**
     * ç”¨äºå­˜å‚¨äºŒå‰æ ‘çš„æœ€å¤§ç›´å¾„
     */
    int dia = 0;

    /**
     * è®¡ç®—äºŒå‰æ ‘çš„ç›´å¾„
     * ç›´å¾„çš„å®šä¹‰æ˜¯äºŒå‰æ ‘ä¸­ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ€é•¿è·¯å¾„çš„é•¿åº¦
     *
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return è¿”å›äºŒå‰æ ‘çš„ç›´å¾„
     */
    public int diameterOfBinaryTree(TreeNode root) {
        // é€šè¿‡æ·±åº¦ä¼˜å…ˆæœç´¢è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„
        sortOrder(root);
        // è¿”å›è®¡ç®—å¾—åˆ°çš„æœ€å¤§ç›´å¾„
        return dia;
    }

    /**
     * æ·±åº¦ä¼˜å…ˆæœç´¢éå†äºŒå‰æ ‘ï¼Œè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„
     *
     * @param current å½“å‰éå†çš„èŠ‚ç‚¹
     * @return è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„
     */
    int sortOrder(TreeNode current) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å›0
        if (current == null) {
            return 0;
        }
        // è®¡ç®—å·¦å­æ ‘çš„æœ€é•¿è·¯å¾„
        int leftLegth = sortOrder(current.left);
        // è®¡ç®—å³å­æ ‘çš„æœ€é•¿è·¯å¾„
        int rightLegth = sortOrder(current.right);
        // æ›´æ–°æœ€å¤§ç›´å¾„ï¼Œç›´å¾„ä¸ºå·¦å­æ ‘æœ€é•¿è·¯å¾„åŠ å³å­æ ‘æœ€é•¿è·¯å¾„
        dia = Math.max(dia, leftLegth + rightLegth);

        // è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ï¼Œå–å·¦å­æ ‘å’Œå³å­æ ‘æœ€é•¿è·¯å¾„çš„æœ€å¤§å€¼ï¼Œå†åŠ 1
        return Math.max(leftLegth, rightLegth) + 1;
    }
}

```

### 124.äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œï¼ˆnew hot 100ï¼‰(3.27)

äºŒå‰æ ‘ä¸­çš„ **è·¯å¾„** è¢«å®šä¹‰ä¸ºä¸€æ¡èŠ‚ç‚¹åºåˆ—ï¼Œåºåˆ—ä¸­æ¯å¯¹ç›¸é‚»èŠ‚ç‚¹ä¹‹é—´éƒ½å­˜åœ¨ä¸€æ¡è¾¹ã€‚åŒä¸€ä¸ªèŠ‚ç‚¹åœ¨ä¸€æ¡è·¯å¾„åºåˆ—ä¸­ **è‡³å¤šå‡ºç°ä¸€æ¬¡** ã€‚è¯¥è·¯å¾„ **è‡³å°‘åŒ…å«ä¸€ä¸ª** èŠ‚ç‚¹ï¼Œä¸”ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ã€‚

**è·¯å¾„å’Œ** æ˜¯è·¯å¾„ä¸­å„èŠ‚ç‚¹å€¼çš„æ€»å’Œã€‚

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å›å…¶ **æœ€å¤§è·¯å¾„å’Œ** ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](../leetcode%E5%88%B7%E9%A2%98/%E6%96%87%E6%A1%A3%E5%9B%BE%E7%89%87/exx1.jpg)



```
è¾“å…¥ï¼šroot = [1,2,3]
è¾“å‡ºï¼š6
è§£é‡Šï¼šæœ€ä¼˜è·¯å¾„æ˜¯ 2 -> 1 -> 3 ï¼Œè·¯å¾„å’Œä¸º 2 + 1 + 3 = 6
```

**ç¤ºä¾‹ 2ï¼š**

![img](../leetcode%E5%88%B7%E9%A2%98/%E6%96%87%E6%A1%A3%E5%9B%BE%E7%89%87/exx2.jpg)



```
è¾“å…¥ï¼šroot = [-10,9,20,null,null,15,7]
è¾“å‡ºï¼š42
è§£é‡Šï¼šæœ€ä¼˜è·¯å¾„æ˜¯ 15 -> 20 -> 7 ï¼Œè·¯å¾„å’Œä¸º 15 + 20 + 7 = 42
```

```java
class Solution {
    // è®°å½•å…¨å±€æœ€å¤§è·¯å¾„å’Œ
    int maxDis = Integer.MIN_VALUE;

    /**
     * è®¡ç®—äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     * @return æœ€å¤§è·¯å¾„å’Œ
     */
    public int maxPathSum(TreeNode root) {
        // è°ƒç”¨è¾…åŠ©å‡½æ•°è®¡ç®—ä»æ ¹èŠ‚ç‚¹å‡ºå‘çš„æœ€å¤§è·¯å¾„å’Œ
        sortOrder(root);
        // è¿”å›å…¨å±€æœ€å¤§è·¯å¾„å’Œ
        return maxDis;
    }

    /**
     * è®¡ç®—ä»å½“å‰èŠ‚ç‚¹å‡ºå‘çš„æœ€å¤§è·¯å¾„å’Œ
     * @param current å½“å‰èŠ‚ç‚¹
     * @return ä»å½“å‰èŠ‚ç‚¹å‡ºå‘çš„æœ€å¤§è·¯å¾„å’Œ
     */
    int sortOrder(TreeNode current) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å›0
        if (current == null) {
            return 0;
        }

        // é€’å½’è®¡ç®—å·¦å­æ ‘çš„æœ€å¤§è·¯å¾„å’Œï¼Œå¦‚æœä¸ºè´Ÿåˆ™ä¸è€ƒè™‘ï¼Œå–0
        int leftMax = Math.max(0,sortOrder(current.left));
        // é€’å½’è®¡ç®—å³å­æ ‘çš„æœ€å¤§è·¯å¾„å’Œï¼Œå¦‚æœä¸ºè´Ÿåˆ™ä¸è€ƒè™‘ï¼Œå–0
        int rightMax = Math.max(0,sortOrder(current.right));

        // æ›´æ–°å…¨å±€æœ€å¤§è·¯å¾„å’Œï¼Œè€ƒè™‘å½“å‰èŠ‚ç‚¹å’Œå·¦å³å­æ ‘çš„æœ€å¤§è·¯å¾„å’Œ
        maxDis = Math.max(maxDis, current.val + leftMax + rightMax);

        // è¿”å›ä»å½“å‰èŠ‚ç‚¹å‡ºå‘çš„æœ€å¤§è·¯å¾„å’Œï¼Œåªèƒ½é€‰æ‹©å·¦å³å­æ ‘ä¸­è¾ƒå¤§çš„ä¸€ä¸ª
        return current.val + Math.max(leftMax, rightMax);
    }
}
```

### 



### 230.äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ ï¼ˆnew hot 100ï¼‰(4.6)

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œå’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªç®—æ³•æŸ¥æ‰¾å…¶ä¸­ç¬¬ `k` å°çš„å…ƒç´ ï¼ˆä» 1 å¼€å§‹è®¡æ•°ï¼‰ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/kthtree1.jpg)



```
è¾“å…¥ï¼šroot = [3,1,4,null,2], k = 1
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 2ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/kthtree2.jpg)



```
è¾“å…¥ï¼šroot = [5,3,6,2,4,null,null,1], k = 3
è¾“å‡ºï¼š3
```

```java
/**
 * Solutionç±»ç”¨äºè§£å†³äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ é—®é¢˜
 */
class Solution {
    // resultç”¨äºå­˜å‚¨æœ€ç»ˆçš„ç»“æœ
    // sumç”¨äºåœ¨ä¸­åºéå†è¿‡ç¨‹ä¸­è®¡æ•°å½“å‰è®¿é—®çš„èŠ‚ç‚¹æ•°
    int result, sum = 0;

    /**
     * è·å–äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ 
     * @param root äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹
     * @param k æŒ‡å®šçš„ç¬¬Kå°çš„å…ƒç´ çš„Kå€¼
     * @return è¿”å›ç¬¬Kå°çš„å…ƒç´ çš„å€¼
     */
    public int kthSmallest(TreeNode root, int k) {
        // è°ƒç”¨ä¸­åºéå†å‡½æ•°ï¼Œå› ä¸ºä¸­åºéå†äºŒå‰æœç´¢æ ‘å¯ä»¥å¾—åˆ°å‡åºçš„èŠ‚ç‚¹å€¼
        sortOrder(root, k);
        // è¿”å›æ‰¾åˆ°çš„ç¬¬Kå°çš„å…ƒç´ çš„å€¼
        return result;
    }

    /**
     * ä¸­åºéå†äºŒå‰æœç´¢æ ‘
     * @param current å½“å‰è®¿é—®çš„èŠ‚ç‚¹
     * @param k æŒ‡å®šçš„ç¬¬Kå°çš„å…ƒç´ çš„Kå€¼
     */
    void sortOrder(TreeNode current, int k) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›ï¼Œç»“æŸé€’å½’
        if (current == null) {
            return;
        }

        // å…ˆé€’å½’éå†å·¦å­æ ‘ï¼Œå› ä¸ºå·¦å­æ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å°äºæ ¹èŠ‚ç‚¹
        sortOrder(current.left, k);
        // å¯¹å½“å‰è®¿é—®çš„èŠ‚ç‚¹è¿›è¡Œè®¡æ•°
        sum++;
        // å¦‚æœå½“å‰è®¡æ•°å€¼ç­‰äºKï¼Œåˆ™è¯´æ˜æ‰¾åˆ°äº†ç¬¬Kå°çš„å…ƒç´ 
        if (k == sum) {
            // å°†å½“å‰èŠ‚ç‚¹çš„å€¼èµ‹ç»™resultï¼Œå¹¶è¿”å›ï¼Œç»“æŸé€’å½’
            result = current.val;
            return;
        }
        // å¦‚æœå½“å‰è®¡æ•°å€¼ä¸ç­‰äºKï¼Œåˆ™ç»§ç»­é€’å½’éå†å³å­æ ‘ï¼Œå› ä¸ºå³å­æ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å¤§äºæ ¹èŠ‚ç‚¹
        sortOrder(current.right, k);
    }
}

```



### 114.äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨ï¼ˆnew hot 100ï¼‰(3.28)

ç»™ä½ äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹ `root` ï¼Œè¯·ä½ å°†å®ƒå±•å¼€ä¸ºä¸€ä¸ªå•é“¾è¡¨ï¼š

- å±•å¼€åçš„å•é“¾è¡¨åº”è¯¥åŒæ ·ä½¿ç”¨ `TreeNode` ï¼Œå…¶ä¸­ `right` å­æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œè€Œå·¦å­æŒ‡é’ˆå§‹ç»ˆä¸º `null` ã€‚
- å±•å¼€åçš„å•é“¾è¡¨åº”è¯¥ä¸äºŒå‰æ ‘ [**å…ˆåºéå†**](https://baike.baidu.com/item/%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86/6442839?fr=aladdin) é¡ºåºç›¸åŒã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/flaten.jpg)



```
è¾“å…¥ï¼šroot = [1,2,5,3,4,null,6]
è¾“å‡ºï¼š[1,null,2,null,3,null,4,null,5,null,6]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = []
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [0]
è¾“å‡ºï¼š[0]
```



```java

/**
 * Solutionç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥å°†äºŒå‰æ ‘è½¬æ¢ä¸ºæ‰å¹³åŒ–çš„é“¾è¡¨
 */
class Solution {
    /**
     * å°†ç»™å®šçš„äºŒå‰æ ‘è½¬æ¢ä¸ºæ‰å¹³åŒ–çš„é“¾è¡¨
     * 
     * @param root äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹
     */
    public void flatten(TreeNode root) {
        sortOrder(root);
    }

    /**
     * è¾…åŠ©å‡½æ•°ï¼Œé€šè¿‡å‰åºéå†çš„æ–¹å¼è½¬æ¢äºŒå‰æ ‘
     * 
     * @param current å½“å‰èŠ‚ç‚¹
     */
    void sortOrder(TreeNode current) {
        if (current == null) {
            return;
        }

        // é€’å½’è½¬æ¢å·¦å­æ ‘å’Œå³å­æ ‘
        sortOrder(current.left);
        sortOrder(current.right);

        // ä¿å­˜å½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘
        TreeNode left = current.left;
        TreeNode right = current.right;

        // å°†å½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘ç½®ä¸ºç©ºï¼Œå³å­æ ‘æ”¹ä¸ºå·¦å­æ ‘
        current.left = null;
        current.right = left;

        // æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„æœ€å³è¾¹çš„èŠ‚ç‚¹ï¼Œå°†å…¶å³å­æ ‘è®¾ä¸ºä¹‹å‰çš„å³å­æ ‘
        TreeNode cur = current;
        while (cur.right != null) {
            cur = cur.right;
        }
        cur.right = right;
    }
}
```





### 297.äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ˆhot100ï¼‰ï¼ˆ3.21ï¼‰

åºåˆ—åŒ–æ˜¯å°†ä¸€ä¸ªæ•°æ®ç»“æ„æˆ–è€…å¯¹è±¡è½¬æ¢ä¸ºè¿ç»­çš„æ¯”ç‰¹ä½çš„æ“ä½œï¼Œè¿›è€Œå¯ä»¥å°†è½¬æ¢åçš„æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶æˆ–è€…å†…å­˜ä¸­ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ä¸ªè®¡ç®—æœºç¯å¢ƒï¼Œé‡‡å–ç›¸åæ–¹å¼é‡æ„å¾—åˆ°åŸæ•°æ®ã€‚

è¯·è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥å®ç°äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚è¿™é‡Œä¸é™å®šä½ çš„åºåˆ— / ååºåˆ—åŒ–ç®—æ³•æ‰§è¡Œé€»è¾‘ï¼Œä½ åªéœ€è¦ä¿è¯ä¸€ä¸ªäºŒå‰æ ‘å¯ä»¥è¢«åºåˆ—åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”å°†è¿™ä¸ªå­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºåŸå§‹çš„æ ‘ç»“æ„ã€‚

**æç¤º:** è¾“å…¥è¾“å‡ºæ ¼å¼ä¸ LeetCode ç›®å‰ä½¿ç”¨çš„æ–¹å¼ä¸€è‡´ï¼Œè¯¦æƒ…è¯·å‚é˜… [LeetCode åºåˆ—åŒ–äºŒå‰æ ‘çš„æ ¼å¼](https://support.leetcode.cn/hc/kb/article/1567641/)ã€‚ä½ å¹¶éå¿…é¡»é‡‡å–è¿™ç§æ–¹å¼ï¼Œä½ ä¹Ÿå¯ä»¥é‡‡ç”¨å…¶ä»–çš„æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

**ç¤ºä¾‹ 1ï¼š**

<img src="https://assets.leetcode.com/uploads/2020/09/15/serdeser.jpg" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šroot = [1,2,3,null,null,4,5]
è¾“å‡ºï¼š[1,2,3,null,null,4,5]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = []
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [1]
è¾“å‡ºï¼š[1]
```

**ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼šroot = [1,2]
è¾“å‡ºï¼š[1,2]
```

```java
public class Codec {
    // åºåˆ—åŒ–äºŒå‰æ ‘
    public String serialize(TreeNode root) {
        StringBuilder sb = new StringBuilder();
        Queue<TreeNode> queue = new LinkedList<>();
        queue.offer(root);
        while (!queue.isEmpty()) {
            TreeNode node = queue.poll();
            if (node != null) {
                sb.append(node.val).append(","); // å°†èŠ‚ç‚¹å€¼æ·»åŠ åˆ°åºåˆ—åŒ–å­—ç¬¦ä¸²ä¸­
                queue.offer(node.left); // å°†å·¦å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                queue.offer(node.right); // å°†å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
            } else {
                sb.append("_").append(","); // å¦‚æœèŠ‚ç‚¹ä¸ºç©ºï¼Œç”¨"_"è¡¨ç¤º
            }
        }
        return sb.toString(); // è¿”å›åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²
    }
    // ååºåˆ—åŒ–äºŒå‰æ ‘
    public TreeNode deserialize(String data) {
        String[] nodes = data.split(",");
        Queue<TreeNode> queue = new LinkedList<>();
        TreeNode root = getNode(nodes[0]); // è·å–æ ¹èŠ‚ç‚¹
        queue.offer(root);

        for (int i = 1; i < nodes.length; ) {
            TreeNode parent = queue.poll(); // å‡ºé˜Ÿçˆ¶èŠ‚ç‚¹
            parent.left = getNode(nodes[i++]); // è®¾ç½®å·¦å­èŠ‚ç‚¹
            parent.right = getNode(nodes[i++]); // è®¾ç½®å³å­èŠ‚ç‚¹

            if (parent.left != null) {
                queue.offer(parent.left); // å°†å·¦å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
            }
            if (parent.right != null) {
                queue.offer(parent.right); // å°†å³å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
            }
        }
        return root; // è¿”å›ååºåˆ—åŒ–åçš„æ ¹èŠ‚ç‚¹
    }
    // æ ¹æ®èŠ‚ç‚¹å€¼è·å–èŠ‚ç‚¹
    private TreeNode getNode(String val) {
        if (val.equals("_")) {
            return null; // å¦‚æœèŠ‚ç‚¹å€¼ä¸º"_"ï¼Œè¡¨ç¤ºä¸ºç©ºèŠ‚ç‚¹
        }
        return new TreeNode(Integer.parseInt(val)); // åˆ›å»ºæ–°èŠ‚ç‚¹
    }
}
```





# å›æº¯

### 77.ç»„åˆ(3.23)

ç»™å®šä¸¤ä¸ªæ•´æ•° `n` å’Œ `k`ï¼Œè¿”å›èŒƒå›´ `[1, n]` ä¸­æ‰€æœ‰å¯èƒ½çš„ `k` ä¸ªæ•°çš„ç»„åˆã€‚

ä½ å¯ä»¥æŒ‰ **ä»»ä½•é¡ºåº** è¿”å›ç­”æ¡ˆã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 4, k = 2
è¾“å‡ºï¼š
[
  [2,4],
  [3,4],
  [2,3],
  [1,2],
  [1,3],
  [1,4],
]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 1, k = 1
è¾“å‡ºï¼š[[1]]
```



```java
/**
 * Solutionç±»ç”¨äºè§£å†³ç»„åˆé—®é¢˜ï¼Œå³ä»1åˆ°nçš„æ•°å­—ä¸­é€‰å‡ºkä¸ªæ•°çš„æ‰€æœ‰å¯èƒ½ç»„åˆ
 */
class Solution {
    /**
     * ç”Ÿæˆä»1åˆ°nçš„æ•°å­—ä¸­é€‰å‡ºkä¸ªæ•°çš„æ‰€æœ‰å¯èƒ½ç»„åˆ
     *
     * @param n èŒƒå›´çš„ä¸Šé™ï¼Œå³æ•°å­—1åˆ°n
     * @param k æ¯ä¸ªç»„åˆä¸­æ•°å­—çš„æ•°é‡
     * @return åŒ…å«æ‰€æœ‰å¯èƒ½ç»„åˆçš„åˆ—è¡¨
     */
    public List<List<Integer>> combine(int n, int k) {
        List<List<Integer>> result = new ArrayList<>();
        List<Integer> path = new ArrayList<>();
        sortOrder(n, k, 1, result, path);
        return result;
    }

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºç”Ÿæˆç»„åˆ
     *
     * @param n èŒƒå›´çš„ä¸Šé™ï¼Œå³æ•°å­—1åˆ°n
     * @param k æ¯ä¸ªç»„åˆä¸­æ•°å­—çš„æ•°é‡
     * @param start å½“å‰å¯é€‰æ•°å­—çš„èµ·å§‹ç‚¹
     * @param result å­˜å‚¨æ‰€æœ‰å¯èƒ½ç»„åˆçš„åˆ—è¡¨
     * @param path å½“å‰çš„ç»„åˆè·¯å¾„
     */
    void sortOrder(int n, int k, int start, List<List<Integer>> result, List<Integer> path) {
        // å½“å½“å‰è·¯å¾„é•¿åº¦è¾¾åˆ°kæ—¶ï¼Œå°†å…¶æ·»åŠ åˆ°ç»“æœä¸­
        if (path.size() == k) {
            result.add(new ArrayList<>(path));
            return;
        }

        // éå†ä»startåˆ°n-(k-path.size())+1çš„æ•°å­—ï¼Œå·²ç»é€‰æ‹©çš„å…ƒç´ ä¸ªæ•°ï¼špath.size();è¿˜éœ€è¦çš„å…ƒç´ ä¸ªæ•°ä¸º: k - path.size();åœ¨é›†åˆnä¸­è‡³å¤šè¦ä»è¯¥èµ·å§‹ä½ç½® : n - (k - path.size()) + 1ï¼Œä¸ºä»€ä¹ˆæœ‰ä¸ª+1å‘¢ï¼Œå› ä¸ºåŒ…æ‹¬èµ·å§‹ä½ç½®ï¼Œæˆ‘ä»¬è¦æ˜¯ä¸€ä¸ªå·¦é—­çš„é›†åˆã€‚ä¸¾ä¸ªä¾‹å­ï¼Œn = 4ï¼Œk = 3ï¼Œ ç›®å‰å·²ç»é€‰å–çš„å…ƒç´ ä¸º0ï¼ˆpath.sizeä¸º0ï¼‰ï¼Œn - (k - 0) + 1 å³ 4 - ( 3 - 0) + 1 = 2ã€‚åˆ°2æˆªæ­¢æœç´¢æ˜¯åˆç†çš„ï¼Œä¸ºäº†é˜²æ­¢åé¢æ²¡æœ‰å¯æœç´¢çš„ã€‚
        //å…³é”®ç‚¹åœ¨äºï¼šç¡®ä¿åœ¨æœç´¢è¿‡ç¨‹ä¸­ï¼Œå‰©ä½™çš„å…ƒç´ æ•°é‡å§‹ç»ˆè¶³å¤Ÿç»„æˆç›®æ ‡é•¿åº¦çš„ç»„åˆã€‚è¿™æ˜¯ä¸€ç§éå¸¸å…¸å‹çš„å›æº¯ç®—æ³•ä¼˜åŒ–æŠ€å·§ã€‚
        for (int i = start; i <= n - (k - path.size()) + 1; i++) {
            path.add(i); // å°†å½“å‰æ•°å­—æ·»åŠ åˆ°è·¯å¾„ä¸­
            sortOrder(n, k, i + 1, result, path); // é€’å½’è°ƒç”¨ï¼Œå°è¯•ä¸‹ä¸€ä¸ªæ•°å­—
            path.remove(path.size() - 1); // å›æº¯ï¼Œç§»é™¤å½“å‰æ•°å­—ï¼Œå°è¯•ä¸‹ä¸€ä¸ªå¯èƒ½çš„æ•°å­—
        }
    }
}
```

### 216.ç»„åˆæ€»å’ŒIII(3.22)

æ‰¾å‡ºæ‰€æœ‰ç›¸åŠ ä¹‹å’Œä¸º `n` çš„ `k` ä¸ªæ•°çš„ç»„åˆï¼Œä¸”æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼š

- åªä½¿ç”¨æ•°å­—1åˆ°9
- æ¯ä¸ªæ•°å­— **æœ€å¤šä½¿ç”¨ä¸€æ¬¡**

è¿”å› *æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆç»„åˆçš„åˆ—è¡¨* ã€‚è¯¥åˆ—è¡¨ä¸èƒ½åŒ…å«ç›¸åŒçš„ç»„åˆä¸¤æ¬¡ï¼Œç»„åˆå¯ä»¥ä»¥ä»»ä½•é¡ºåºè¿”å›ã€‚



**ç¤ºä¾‹ 1:**

```
è¾“å…¥: k = 3, n = 7
è¾“å‡º: [[1,2,4]]
è§£é‡Š:
1 + 2 + 4 = 7
æ²¡æœ‰å…¶ä»–ç¬¦åˆçš„ç»„åˆäº†ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: k = 3, n = 9
è¾“å‡º: [[1,2,6], [1,3,5], [2,3,4]]
è§£é‡Š:
1 + 2 + 6 = 9
1 + 3 + 5 = 9
2 + 3 + 4 = 9
æ²¡æœ‰å…¶ä»–ç¬¦åˆçš„ç»„åˆäº†ã€‚
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: k = 4, n = 1
è¾“å‡º: []
è§£é‡Š: ä¸å­˜åœ¨æœ‰æ•ˆçš„ç»„åˆã€‚
åœ¨[1,9]èŒƒå›´å†…ä½¿ç”¨4ä¸ªä¸åŒçš„æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°çš„æœ€å°å’Œæ˜¯1+2+3+4 = 10ï¼Œå› ä¸º10 > 1ï¼Œæ²¡æœ‰æœ‰æ•ˆçš„ç»„åˆã€‚
```

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œç”¨äºå¯»æ‰¾æ‰€æœ‰å¯èƒ½çš„ç»„åˆï¼Œä½¿å¾—ç»„åˆä¸­çš„æ•°å­—ä¹‹å’Œç­‰äºç»™å®šçš„ç›®æ ‡å€¼
 */
class Solution {
    /**
     * å¯»æ‰¾æ‰€æœ‰å¯èƒ½çš„ç»„åˆï¼Œä½¿å¾—ç»„åˆä¸­çš„æ•°å­—ä¹‹å’Œç­‰äºç»™å®šçš„ç›®æ ‡å€¼
     *
     * @param k ç»„åˆä¸­æ•°å­—çš„ä¸ªæ•°
     * @param n ç›®æ ‡å€¼
     * @return æ‰€æœ‰å¯èƒ½çš„ç»„åˆåˆ—è¡¨
     */
    public List<List<Integer>> combinationSum3(int k, int n) {
        List<List<Integer>> result = new ArrayList<>();
        List<Integer> path = new ArrayList<>();
        sortOrder(n, k, 1, result, path);
        return result;
    }

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„ç»„åˆ
     *
     * @param n ç›®æ ‡å€¼
     * @param k ç»„åˆä¸­æ•°å­—çš„ä¸ªæ•°
     * @param start å½“å‰æœç´¢çš„èµ·å§‹æ•°å­—
     * @param result å­˜å‚¨æ‰€æœ‰å¯èƒ½ç»„åˆçš„ç»“æœåˆ—è¡¨
     * @param path å½“å‰çš„ç»„åˆè·¯å¾„
     */
    void sortOrder(int n, int k, int start, List<List<Integer>> result, List<Integer> path) {

        if (path.size() == k) {
            if (n == 0) {
                result.add(new ArrayList<>(path));
            }
            return;
        }

        // ä»startå¼€å§‹éå†ï¼Œå°è¯•å°†æ¯ä¸ªæ•°å­—åŠ å…¥å½“å‰çš„ç»„åˆè·¯å¾„ä¸­
        for (int i = start; i <= 9 - (k - path.size()) + 1; i++) {
            path.add(i); // å°†å½“å‰æ•°å­—åŠ å…¥è·¯å¾„
            sortOrder(n - i, k, i + 1, result, path); // é€’å½’è°ƒç”¨ï¼Œç»§ç»­ç”Ÿæˆç»„åˆ
            path.remove(path.size() - 1); // å›æº¯ï¼Œç§»é™¤æœ€åä¸€ä¸ªæ•°å­—ï¼Œå°è¯•æ–°çš„ç»„åˆ
        }
    }
}

```

### 17.ç”µè¯å·ç çš„å­—æ¯ç»„åˆ(3.20)

ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— `2-9` çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ã€‚

ç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„ 1 ä¸å¯¹åº”ä»»ä½•å­—æ¯ã€‚

![img](æ–‡æ¡£å›¾ç‰‡/200px-telephone-keypad2svg.png)



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šdigits = "23"
è¾“å‡ºï¼š["ad","ae","af","bd","be","bf","cd","ce","cf"]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šdigits = ""
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šdigits = "2"
è¾“å‡ºï¼š["a","b","c"]
```

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºç”Ÿæˆæ•°å­—å¯¹åº”çš„å­—æ¯ç»„åˆ
    public List<String> letterCombinations(String digits) {
        // åˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨ç»“æœ
        List<String> result = new ArrayList<>();
        // å¦‚æœè¾“å…¥çš„æ•°å­—ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ç©ºåˆ—è¡¨
        if (digits.length() == 0) {
            return result;
        }
        // å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œç”¨äºå­˜å‚¨æ•°å­—å¯¹åº”çš„å­—æ¯
        String[] map = new String[]{"", "", "abc", "def", "ghi", "jkl", "mno", "pqrs", "tuv", "wxyz"};
        // è°ƒç”¨å›æº¯æ–¹æ³•ï¼Œç”Ÿæˆå­—æ¯ç»„åˆ
        backtracking(result, map, new StringBuilder(), digits, 0);
        // è¿”å›ç»“æœ
        return result;
    }

    // å®šä¹‰ä¸€ä¸ªå›æº¯æ–¹æ³•ï¼Œç”¨äºç”Ÿæˆå­—æ¯ç»„åˆ
    void backtracking(List<String> result, String[] map, StringBuilder auxiliaryStringBuilder, String digits, int index) {
        // å¦‚æœå½“å‰ç´¢å¼•ç­‰äºè¾“å…¥æ•°å­—çš„é•¿åº¦ï¼Œåˆ™å°†ç”Ÿæˆçš„å­—æ¯ç»„åˆæ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
        if (index == digits.length()) {
            result.add(auxiliaryStringBuilder.toString());
            return;
        }
        // è·å–å½“å‰æ•°å­—å¯¹åº”çš„å­—æ¯
        String letters = map[digits.charAt(index) - '0'];
        // éå†å½“å‰æ•°å­—å¯¹åº”çš„å­—æ¯
        for (int i = 0; i < letters.length(); i++) {
            // å°†å½“å‰å­—æ¯æ·»åŠ åˆ°è¾…åŠ©å­—ç¬¦ä¸²ä¸­
            auxiliaryStringBuilder.append(letters.charAt(i));
            // é€’å½’è°ƒç”¨å›æº¯æ–¹æ³•ï¼Œç”Ÿæˆä¸‹ä¸€ä¸ªå­—æ¯ç»„åˆ
            backtracking(result, map, auxiliaryStringBuilder, digits, index + 1);
            // å°†è¾…åŠ©å­—ç¬¦ä¸²ä¸­çš„æœ€åä¸€ä¸ªå­—æ¯åˆ é™¤ï¼Œä»¥ä¾¿ç”Ÿæˆä¸‹ä¸€ä¸ªå­—æ¯ç»„åˆ
            auxiliaryStringBuilder.deleteCharAt(auxiliaryStringBuilder.length() - 1);
        }
    }
}
```

### 39.ç»„åˆæ€»å’Œ(3.20)

ç»™ä½ ä¸€ä¸ª **æ— é‡å¤å…ƒç´ ** çš„æ•´æ•°æ•°ç»„ `candidates` å’Œä¸€ä¸ªç›®æ ‡æ•´æ•° `target` ï¼Œæ‰¾å‡º `candidates` ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° `target` çš„ æ‰€æœ‰ **ä¸åŒç»„åˆ** ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›è¿™äº›ç»„åˆã€‚

`candidates` ä¸­çš„ **åŒä¸€ä¸ª** æ•°å­—å¯ä»¥ **æ— é™åˆ¶é‡å¤è¢«é€‰å–** ã€‚å¦‚æœè‡³å°‘ä¸€ä¸ªæ•°å­—çš„è¢«é€‰æ•°é‡ä¸åŒï¼Œåˆ™ä¸¤ç§ç»„åˆæ˜¯ä¸åŒçš„ã€‚

å¯¹äºç»™å®šçš„è¾“å…¥ï¼Œä¿è¯å’Œä¸º `target` çš„ä¸åŒç»„åˆæ•°å°‘äº `150` ä¸ªã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šcandidates = [2,3,6,7], target = 7
è¾“å‡ºï¼š[[2,2,3],[7]]
è§£é‡Šï¼š
2 å’Œ 3 å¯ä»¥å½¢æˆä¸€ç»„å€™é€‰ï¼Œ2 + 2 + 3 = 7 ã€‚æ³¨æ„ 2 å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚
7 ä¹Ÿæ˜¯ä¸€ä¸ªå€™é€‰ï¼Œ 7 = 7 ã€‚
ä»…æœ‰è¿™ä¸¤ç§ç»„åˆã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥: candidates = [2,3,5], target = 8
è¾“å‡º: [[2,2,2,2],[2,3,3],[3,5]]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥: candidates = [2], target = 1
è¾“å‡º: []
```

```java
class Solution {
    // ä¸»å‡½æ•°ï¼Œè¾“å…¥å€™é€‰æ•°ç»„candidateså’Œç›®æ ‡å€¼targetï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„ç»„åˆ
    public List<List<Integer>> combinationSum(int[] candidates, int target) {
        // åˆ›å»ºç»“æœåˆ—è¡¨
        List<List<Integer>> result = new ArrayList<>();
        // åˆ›å»ºè·¯å¾„åˆ—è¡¨
        List<Integer> path = new ArrayList<>();
        // è°ƒç”¨å›æº¯å‡½æ•°
        backtracking(0, candidates, target, path, result);
        // è¿”å›ç»“æœåˆ—è¡¨
        return result;
    }

    // å›æº¯å‡½æ•°ï¼Œè¾“å…¥èµ·å§‹ç´¢å¼•startIndexï¼Œå€™é€‰æ•°ç»„candidatesï¼Œç›®æ ‡å€¼targetï¼Œè·¯å¾„åˆ—è¡¨pathå’Œç»“æœåˆ—è¡¨result
    void backtracking(int startIndex, int[] candidates, int target, List<Integer> path, List<List<Integer>> result) {
        // å¦‚æœç›®æ ‡å€¼ä¸º0ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ç»„ç»„åˆï¼Œå°†å…¶åŠ å…¥ç»“æœåˆ—è¡¨
        if (target == 0) {
            result.add(new ArrayList<>(path));
            return;
        // å¦‚æœç›®æ ‡å€¼å°äº0ï¼Œè¯´æ˜å½“å‰ç»„åˆä¸æ»¡è¶³æ¡ä»¶ï¼Œç›´æ¥è¿”å›
        } else if (target < 0) {
            return;
        }

        // éå†å€™é€‰æ•°ç»„
        for (int i = startIndex; i < candidates.length; i++) {
            // å°†å½“å‰å€™é€‰æ•°åŠ å…¥è·¯å¾„åˆ—è¡¨
            path.add(candidates[i]);
            // é€’å½’è°ƒç”¨å›æº¯å‡½æ•°ï¼Œä¼ å…¥å½“å‰ç´¢å¼•iï¼Œç›®æ ‡å€¼å‡å»å½“å‰å€™é€‰æ•°ï¼Œè·¯å¾„åˆ—è¡¨å’Œç»“æœåˆ—è¡¨
            backtracking(i, candidates, target - candidates[i], path, result);
            // å°†è·¯å¾„åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ç§»é™¤ï¼Œå›æº¯
            path.remove(path.size() - 1);
        }
    }
}
```

### 40.ç»„åˆæ€»å’ŒII(3.20)

ç»™å®šä¸€ä¸ªæ•°ç»„ candidates å’Œä¸€ä¸ªç›®æ ‡æ•° target ï¼Œæ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º target çš„ç»„åˆã€‚

candidates ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

è¯´æ˜ï¼š æ‰€æœ‰æ•°å­—ï¼ˆåŒ…æ‹¬ç›®æ ‡æ•°ï¼‰éƒ½æ˜¯æ­£æ•´æ•°ã€‚è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚

- ç¤ºä¾‹ 1:
- è¾“å…¥: candidates = [10,1,2,7,6,1,5], target = 8,
- æ‰€æ±‚è§£é›†ä¸º:

```text
[
  [1, 7],
  [1, 2, 5],
  [2, 6],
  [1, 1, 6]
]
```

- ç¤ºä¾‹ 2:
- è¾“å…¥: candidates = [2,5,2,1,2], target = 5,
- æ‰€æ±‚è§£é›†ä¸º:

```text
[
  [1,2,2],
  [5]
]
```

```java
class Solution7 {
    // ä¸»å‡½æ•°ï¼Œè¾“å…¥å€™é€‰æ•°ç»„candidateså’Œç›®æ ‡å€¼targetï¼Œè¿”å›æ‰€æœ‰å’Œä¸ºtargetçš„ç»„åˆ
    public List<List<Integer>> combinationSum2(int[] candidates, int target) {
        List<List<Integer>> result = new ArrayList<>();
        List<Integer> path = new ArrayList<>();
        // å¯¹å€™é€‰æ•°ç»„è¿›è¡Œæ’åºï¼Œæ–¹ä¾¿åç»­å»é‡
        Arrays.sort(candidates);
        // è°ƒç”¨å›æº¯å‡½æ•°
        backtracking(0, candidates, target, path, result);
        return result;
    }

    // å›æº¯å‡½æ•°ï¼Œè¾“å…¥èµ·å§‹ç´¢å¼•startIndexï¼Œå€™é€‰æ•°ç»„candidatesï¼Œç›®æ ‡å€¼targetï¼Œå½“å‰è·¯å¾„pathå’Œç»“æœresult
    void backtracking(int startIndex, int[] candidates, int target, List<Integer> path, List<List<Integer>> result) {
        // å¦‚æœç›®æ ‡å€¼ä¸º0ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ç»„å’Œä¸ºtargetçš„ç»„åˆï¼Œå°†å…¶åŠ å…¥ç»“æœä¸­
        if (target == 0) {
            result.add(new ArrayList<>(path));
            return;
            // å¦‚æœç›®æ ‡å€¼å°äº0ï¼Œè¯´æ˜å½“å‰è·¯å¾„çš„å’Œå·²ç»è¶…è¿‡äº†targetï¼Œç›´æ¥è¿”å›
        } else if (target < 0) {
            return;
        }

        // éå†å€™é€‰æ•°ç»„
        for (int i = startIndex; i < candidates.length; i++) {
            // å¦‚æœå½“å‰å…ƒç´ å’Œå‰ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œåˆ™è·³è¿‡ï¼Œé¿å…é‡å¤ç»„åˆ
            if (i > startIndex && candidates[i] == candidates[i - 1]) {
                continue;
            }
            // å¦‚æœå½“å‰å…ƒç´ å¤§äºç›®æ ‡å€¼ï¼Œåˆ™ç›´æ¥è·³å‡ºå¾ªç¯ï¼Œå› ä¸ºåé¢çš„å…ƒç´ åªä¼šæ›´å¤§ï¼Œå‰ªæ
            if (candidates[i] > target) {
                break;
            }
            // å°†å½“å‰å…ƒç´ åŠ å…¥è·¯å¾„
            path.add(candidates[i]);
            // é€’å½’è°ƒç”¨å›æº¯å‡½æ•°ï¼Œä¼ å…¥ä¸‹ä¸€ä¸ªèµ·å§‹ç´¢å¼•ï¼Œç›®æ ‡å€¼å‡å»å½“å‰å…ƒç´ ï¼Œå½“å‰è·¯å¾„å’Œç»“æœ
            backtracking(i + 1, candidates, target - candidates[i], path, result);
            // å›æº¯ï¼Œå°†å½“å‰å…ƒç´ ä»è·¯å¾„ä¸­ç§»é™¤
            path.remove(path.size() - 1);
        }
    }
}
```

### 131.åˆ†å‰²å›æ–‡ä¸²(3.21)

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œå°† s åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯å›æ–‡ä¸²ã€‚

è¿”å› s æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚

ç¤ºä¾‹: è¾“å…¥: "aab" è¾“å‡º: [ ["aa","b"], ["a","a","b"] ]



ä¹Ÿå¯ä»¥åœ¨å›æº¯å‡½æ•°çš„æœ€ç»ˆæƒ…å†µåˆ¤æ–­pathä¸­çš„æ˜¯å¦éƒ½æ˜¯å›æ–‡ä¸²ï¼Œä½†æ—¶é—´å¤æ‚åº¦å¯èƒ½ä¼šé«˜

```java
class Solution {
    // ä¸»å‡½æ•°ï¼Œè¿”å›å­—ç¬¦ä¸²sçš„æ‰€æœ‰å›æ–‡å­ä¸²çš„é›†åˆ
    public List<List<String>> partition(String s) {
        // åˆ›å»ºç»“æœé›†
        List<List<String>> result = new ArrayList<>();
        // å¦‚æœå­—ç¬¦ä¸²sä¸ºç©ºæˆ–é•¿åº¦ä¸º0ï¼Œç›´æ¥è¿”å›ç»“æœé›†
        if (s == null || s.length() == 0) {
            return result;
        }
        // åˆ›å»ºè·¯å¾„é›†
        List<String> path = new ArrayList<>();
        // è°ƒç”¨å›æº¯å‡½æ•°
        backtracking(s, 0, path, result);
        // è¿”å›ç»“æœé›†
        return result;
    }

    // å›æº¯å‡½æ•°ï¼Œç”¨äºç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å›æ–‡å­ä¸²
    void backtracking(String str,int startIndex,List<String> path,List<List<String>> result) {
        // å¦‚æœèµ·å§‹ç´¢å¼•ç­‰äºå­—ç¬¦ä¸²é•¿åº¦ï¼Œè¯´æ˜å·²ç»ç”Ÿæˆäº†ä¸€ä¸ªå®Œæ•´çš„å›æ–‡å­ä¸²ï¼Œå°†å…¶åŠ å…¥ç»“æœé›†
        if (startIndex == str.length()) {
            result.add(new ArrayList<>(path));
            return;
        }
        // éå†å­—ç¬¦ä¸²ï¼Œä»èµ·å§‹ç´¢å¼•å¼€å§‹ï¼Œä¾æ¬¡æˆªå–å­ä¸²
        for (int i = startIndex; i < str.length(); i++) {
            // å¦‚æœå­ä¸²æ˜¯å›æ–‡ï¼Œå°†å…¶åŠ å…¥è·¯å¾„é›†ï¼Œå¹¶ç»§ç»­é€’å½’
            if (ispalindromicStrings(str, startIndex, i)) {
                path.add(str.substring(startIndex, i + 1));
                backtracking(str, i + 1, path, result);
                // å›æº¯ï¼Œç§»é™¤è·¯å¾„é›†ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ 
                path.remove(path.size() - 1);
            }
        }
    }

    // åˆ¤æ–­å­ä¸²æ˜¯å¦ä¸ºå›æ–‡
    boolean ispalindromicStrings(String str, int begin, int end) {
        // å¦‚æœèµ·å§‹ç´¢å¼•ç­‰äºç»“æŸç´¢å¼•ï¼Œè¯´æ˜å­ä¸²åªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œç›´æ¥è¿”å›true
        if (begin == end) {
            return true;
        }
        // åŒæŒ‡é’ˆæ³•ï¼Œä»å­ä¸²çš„é¦–å°¾å¼€å§‹æ¯”è¾ƒå­—ç¬¦
        while (begin <= end) {
            // å¦‚æœå­—ç¬¦ä¸ç›¸ç­‰ï¼Œè¯´æ˜ä¸æ˜¯å›æ–‡ï¼Œè¿”å›false
            if (str.charAt(begin) != str.charAt(end)) {
                return false;
            }
            // ç§»åŠ¨æŒ‡é’ˆ
            begin++;
            end--;
        }
        // å¦‚æœéå†å®Œæ‰€æœ‰å­—ç¬¦ï¼Œè¯´æ˜æ˜¯å›æ–‡ï¼Œè¿”å›true
        return true;
    }
}
```

### 93.å¤åŸIPåœ°å€(3.21)

ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸²ï¼Œå¤åŸå®ƒå¹¶è¿”å›æ‰€æœ‰å¯èƒ½çš„ IP åœ°å€æ ¼å¼ã€‚

æœ‰æ•ˆçš„ IP åœ°å€ æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•´æ•°ä½äº 0 åˆ° 255 ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ 0ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ '.' åˆ†éš”ã€‚

ä¾‹å¦‚ï¼š"0.1.2.201" å’Œ "192.168.1.1" æ˜¯ æœ‰æ•ˆçš„ IP åœ°å€ï¼Œä½†æ˜¯ "0.011.255.245"ã€"192.168.1.312" å’Œ "192.168@1.1" æ˜¯ æ— æ•ˆçš„ IP åœ°å€ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šs = "25525511135"
- è¾“å‡ºï¼š["255.255.11.135","255.255.111.35"]

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šs = "0000"
- è¾“å‡ºï¼š["0.0.0.0"]

ç¤ºä¾‹ 3ï¼š

- è¾“å…¥ï¼šs = "1111"
- è¾“å‡ºï¼š["1.1.1.1"]

ç¤ºä¾‹ 4ï¼š

- è¾“å…¥ï¼šs = "010010"

- è¾“å‡ºï¼š["0.10.0.10","0.100.1.0"]

  

```java
class Solution {
    public List<String> restoreIpAddresses(String s) {
        // åˆå§‹åŒ–ç»“æœåˆ—è¡¨
        List<String> result = new ArrayList<>();
        
        // å¦‚æœå­—ç¬¦ä¸²é•¿åº¦å°äº4ï¼Œåˆ™ä¸å¯èƒ½å½¢æˆæœ‰æ•ˆçš„IPåœ°å€ï¼Œç›´æ¥è¿”å›ç©ºç»“æœ
        if (s.length() < 4) {
            return result;
        }
        
        // è°ƒç”¨å›æº¯å‡½æ•°å¼€å§‹ç”ŸæˆIPåœ°å€
        backtracking(0, 0, s, result, new StringBuilder());
        
        // è¿”å›ç”Ÿæˆçš„æ‰€æœ‰å¯èƒ½çš„IPåœ°å€åˆ—è¡¨
        return result;
    }

    /**
     * å›æº¯å‡½æ•°ï¼Œç”¨äºç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆIPåœ°å€
     * @param startIndex å½“å‰å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®
     * @param number     å½“å‰IPåœ°å€ä¸­å·²æœ‰çš„æ®µæ•°
     * @param str        åŸå§‹è¾“å…¥å­—ç¬¦ä¸²
     * @param result     å­˜å‚¨æ‰€æœ‰æœ‰æ•ˆIPåœ°å€çš„ç»“æœåˆ—è¡¨
     * @param auxiliaryBuilder å½“å‰æ„å»ºçš„IPåœ°å€
     */
    void backtracking(int startIndex, int number, String str, List<String> result, StringBuilder auxiliaryBuilder) {
        // å¦‚æœå·²ç»åˆ°è¾¾å­—ç¬¦ä¸²æœ«å°¾ä¸”IPåœ°å€å·²ç»åˆ†ä¸º4æ®µï¼Œåˆ™å°†å½“å‰æ„å»ºçš„IPåœ°å€æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
        if (startIndex == str.length() && number == 4) {
            result.add(auxiliaryBuilder.toString());
            return;
        }
        
        // å¦‚æœå·²ç»åˆ°è¾¾å­—ç¬¦ä¸²æœ«å°¾æˆ–IPåœ°å€å·²ç»æœ‰4æ®µï¼Œä½†æ¡ä»¶ä¸æ»¡è¶³ï¼Œåˆ™ç›´æ¥è¿”å›
        if (startIndex == str.length() || number == 4) {
            return;
        }

        // å°è¯•ä»å½“å‰ä½ç½®å¼€å§‹åˆ†å‰²å­—ç¬¦ä¸²ï¼Œå½¢æˆIPåœ°å€çš„ä¸€æ®µ
        for (int i = startIndex; i < str.length() && i - startIndex < 3 && Integer.parseInt(str.substring(startIndex, i + 1)) >= 0 && Integer.parseInt(str.substring(startIndex, i + 1)) <= 255; i++) {

            // å¦‚æœåˆ†å‰²åå‘ç°æ•°å­—ä»¥0å¼€å¤´ä¸”é•¿åº¦è¶…è¿‡1ï¼Œåˆ™è¯¥æ®µæ— æ•ˆï¼Œè·³è¿‡è¯¥æ®µ
            if (i > startIndex && str.charAt(startIndex) == '0') {
                continue;
            }
            
            // å°†å½“å‰æ®µæ·»åŠ åˆ°IPåœ°å€æ„å»ºå™¨ä¸­
            auxiliaryBuilder.append(str.substring(startIndex, i + 1));
            
            // å¦‚æœè¿˜æ²¡æœ‰è¾¾åˆ°4æ®µï¼Œåˆ™åœ¨å½“å‰æ®µåé¢æ·»åŠ ä¸€ä¸ªç‚¹
            if (number < 3) {
                auxiliaryBuilder.append('.');
            }
            
            // å¢åŠ å½“å‰IPåœ°å€çš„æ®µæ•°ï¼Œå¹¶é€’å½’å¤„ç†ä¸‹ä¸€ä¸ªæ®µ
            number++;
            backtracking(i + 1, number, str, result, auxiliaryBuilder);
            
            // å›æº¯ï¼šæ¢å¤å½“å‰æ®µæ•°ï¼Œå¹¶ç§»é™¤åˆšåˆšæ·»åŠ çš„IPåœ°å€æ®µ
            number--;
            auxiliaryBuilder.delete(startIndex + number, i + 2 + number);
        }
    }
}




åœ¨ restoreIpAddresses æ–¹æ³•ä¸­åˆ›å»ºä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²åˆ—è¡¨ resultã€‚
å®šä¹‰å…¬å…±æ–¹æ³• restoreIpAddressesï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² s ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ã€‚
åœ¨ restoreIpAddresses æ–¹æ³•ä¸­ï¼Œé¦–å…ˆæ£€æŸ¥è¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯å¦å°äº 4ã€‚å¦‚æœæ˜¯ï¼Œç›´æ¥è¿”å›ç©ºç»“æœï¼Œå› ä¸ºä¸å¯èƒ½å½¢æˆæœ‰æ•ˆçš„ IP åœ°å€ã€‚
è°ƒç”¨ç§æœ‰æ–¹æ³• backtrackingï¼Œä¼ å…¥å‚æ•°ï¼šèµ·å§‹ç´¢å¼• 0ï¼Œå½“å‰ IP æ®µæ•° 0ï¼ŒåŸå§‹å­—ç¬¦ä¸² sï¼Œç»“æœåˆ—è¡¨ resultï¼Œä»¥åŠä¸€ä¸ªæ–°çš„ StringBuilder å¯¹è±¡ã€‚
åœ¨ backtracking æ–¹æ³•ä¸­ï¼Œé¦–å…ˆåˆ¤æ–­å¦‚æœ startIndex ç­‰äº str çš„é•¿åº¦ä¸” number ç­‰äº 4ï¼Œè¯´æ˜å·²ç»æ‰¾åˆ°äº†ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„ IP åœ°å€ï¼Œå°† auxiliaryBuilder è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶æ·»åŠ åˆ° result åˆ—è¡¨ä¸­ï¼Œç„¶åè¿”å›ã€‚
æ¥ç€åˆ¤æ–­å¦‚æœ startIndex ç­‰äº str çš„é•¿åº¦ä½†æ˜¯ IP æ®µçš„æ•°é‡ä¸ä¸º 4ï¼Œæˆ–è€… IP æ®µçš„æ•°é‡ä¸º 4 ä½†æ˜¯ startIndex å°äº str çš„é•¿åº¦ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚
ä½¿ç”¨ä¸€ä¸ªå¾ªç¯éå†å­—ç¬¦ä¸² strï¼Œä» startIndex å¼€å§‹åˆ° str çš„é•¿åº¦ï¼Œå¹¶ä¸”é™åˆ¶æ¯ä¸ªæ•°å­—çš„é•¿åº¦ä¸è¶…è¿‡ 3ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°å­—çš„å€¼åœ¨ 0 åˆ° 255 ä¹‹é—´ã€‚
åœ¨å¾ªç¯ä¸­ï¼Œé¦–å…ˆåˆ¤æ–­å¦‚æœå½“å‰æ•°å­—çš„é•¿åº¦å¤§äº 1 å¹¶ä¸”ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸º 0ï¼Œè¯´æ˜è¯¥æ•°å­—ä¸ç¬¦åˆè§„åˆ™ï¼ˆæœ‰å‰å¯¼é›¶ï¼‰ï¼Œç›´æ¥è·³è¿‡ã€‚
å°†å½“å‰æœ‰æ•ˆçš„ IP æ®µæ·»åŠ åˆ° auxiliaryBuilder ä¸­ã€‚
å¦‚æœ number å°äº 3ï¼Œè¯´æ˜è¿˜éœ€è¦æ·»åŠ ç‚¹å·ï¼Œå°†ç‚¹å·æ·»åŠ åˆ° auxiliaryBuilder ä¸­ã€‚
å¢åŠ  number çš„å€¼ã€‚
é€’å½’è°ƒç”¨ backtracking æ–¹æ³•ï¼Œä¼ å…¥å‚æ•° strã€i+1 å’Œæ–°çš„ numberã€‚
é€’å½’è°ƒç”¨è¿”å›åï¼Œå‡å°‘ number çš„å€¼ï¼ˆå›æº¯ï¼‰ã€‚
åˆ é™¤ auxiliaryBuilder ä¸­ä» startIndex + number åˆ° i + 1 + numberï¼ˆjavaä¸­çš„StringBuilder.deleteåŒºé—´æ˜¯å·¦é—­å³å¼€ï¼‰çš„å­—ç¬¦ï¼ˆå›æº¯ï¼‰ï¼›é’ˆå¯¹æœ€åä¸€ä¸ªIPæ®µi + 2 + numberå¯èƒ½è¶Šç•Œä½†StringBuilder.delete end å‚æ•°æŒ‡å®šçš„ç´¢å¼•å¤§äº StringBuilder å½“å‰çš„å­—ç¬¦åºåˆ—é•¿åº¦ï¼Œdelete æ–¹æ³•ä¼šè°ƒæ•´åˆ é™¤æ“ä½œä»¥é€‚åº”å½“å‰åºåˆ—çš„å®é™…é•¿åº¦æ‰€ä»¥ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
å¾ªç¯ç»“æŸåï¼Œè¿”å›åˆ°ä¸Šä¸€å±‚é€’å½’è°ƒç”¨çš„ä½ç½®ã€‚
æœ€åï¼ŒrestoreIpAddresses æ–¹æ³•è¿”å› result åˆ—è¡¨ä½œä¸ºæœ€ç»ˆç»“æœï¼ŒåŒ…å«æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆ IP åœ°å€ã€‚
```

### 22.æ‹¬å·ç”Ÿæˆï¼ˆnew hot100ï¼‰(3.22)

æ•°å­— `n` ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” **æœ‰æ•ˆçš„** æ‹¬å·ç»„åˆã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 3
è¾“å‡ºï¼š["((()))","(()())","(())()","()(())","()()()"]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š["()"]
```

```java
/**
 * Solutionç±»ç”¨äºç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„nå¯¹æ‹¬å·çš„ç»„åˆ
 */
class Solution {
    /**
     * ç”Ÿæˆnå¯¹æ‹¬å·çš„æ‰€æœ‰å¯èƒ½ç»„åˆ
     *
     * @param n æŒ‡å®šçš„æ‹¬å·å¯¹æ•°
     * @return åŒ…å«æ‰€æœ‰å¯èƒ½ç»„åˆçš„å­—ç¬¦ä¸²åˆ—è¡¨
     */
    public List<String> generateParenthesis(int n) {
        List<String> resultList = new ArrayList<>();
        StringBuilder SB = new StringBuilder();
        sortOrder(n, resultList, SB, n, n);
        return resultList;
    }

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºç”Ÿæˆæ‹¬å·ç»„åˆ
     *
     * @param n æ€»çš„æ‹¬å·å¯¹æ•°
     * @param resultList å­˜å‚¨ç»“æœçš„åˆ—è¡¨
     * @param SB ç”¨äºæ„å»ºå­—ç¬¦ä¸²çš„StringBuilder
     * @param left å‰©ä½™å¯ç”¨çš„å·¦æ‹¬å·æ•°é‡
     * @param right å‰©ä½™å¯ç”¨çš„å³æ‹¬å·æ•°é‡
     */
    void sortOrder(int n, List<String> resultList, StringBuilder SB, int left, int right) {
        // å½“æ²¡æœ‰å‰©ä½™çš„æ‹¬å·æ—¶ï¼Œå°†å½“å‰æ„å»ºçš„å­—ç¬¦ä¸²æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
        if (left == 0 && right == 0) {
            resultList.add(SB.toString());
            return;
        }

        // å¦‚æœè¿˜æœ‰å·¦æ‹¬å·å¯ç”¨ï¼Œåˆ™æ·»åŠ ä¸€ä¸ªå·¦æ‹¬å·å¹¶é€’å½’è°ƒç”¨
        if (left > 0) {
            SB.append('(');
            sortOrder(n, resultList, SB, left - 1, right);
            // å›æº¯ï¼Œç§»é™¤æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œä»¥å°è¯•å…¶ä»–å¯èƒ½çš„ç»„åˆ
            SB.deleteCharAt(SB.length() - 1);
        }

        // å¦‚æœå³æ‹¬å·çš„æ•°é‡å¤§äºå·¦æ‹¬å·çš„æ•°é‡ï¼Œåˆ™æ·»åŠ ä¸€ä¸ªå³æ‹¬å·å¹¶é€’å½’è°ƒç”¨
        if (right > left) {
            SB.append(')');
            sortOrder(n, resultList, SB, left, right - 1);
            // å›æº¯ï¼Œç§»é™¤æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œä»¥å°è¯•å…¶ä»–å¯èƒ½çš„ç»„åˆ
            SB.deleteCharAt(SB.length() - 1);
        }
    }
}
```

### 301.åˆ é™¤æ— æ•ˆçš„æ‹¬å·(hot100)(3.28)

ç»™ä½ ä¸€ä¸ªç”±è‹¥å¹²æ‹¬å·å’Œå­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² `s` ï¼Œåˆ é™¤æœ€å°æ•°é‡çš„æ— æ•ˆæ‹¬å·ï¼Œä½¿å¾—è¾“å…¥çš„å­—ç¬¦ä¸²æœ‰æ•ˆã€‚

è¿”å›æ‰€æœ‰å¯èƒ½çš„ç»“æœã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "()())()"
è¾“å‡ºï¼š["(())()","()()()"]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "(a)())()"
è¾“å‡ºï¼š["(a())()","(a)()()"]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = ")("
è¾“å‡ºï¼š[""]
```

```java
import java.util.*;

class Solution {
    public List<String> removeInvalidParentheses(String s) {
        // å…ˆè®¡ç®—éœ€è¦åˆ é™¤çš„å·¦æ‹¬å·å’Œå³æ‹¬å·æ•°é‡
        int leftRemove = 0, rightRemove = 0;
        for (char c : s.toCharArray()) {
            if (c == '(') {
                leftRemove++;
            } else if (c == ')') {
                if (leftRemove == 0) {
                    rightRemove++;
                } else {
                    leftRemove--;
                }
            }
        }
        Set<String> res = new HashSet<>();
        dfs(s, 0, leftRemove, rightRemove, res);
        return new ArrayList<>(res);
    }

    // DFS å‡½æ•°ï¼šä»å­—ç¬¦ä¸² s çš„ start ä½ç½®å¼€å§‹ï¼Œåˆ é™¤ leftRemove ä¸ª '(' å’Œ rightRemove ä¸ª ')'
    private void dfs(String s, int start, int leftRemove, int rightRemove, Set<String> res) {
        // å½“åˆ é™¤è¦æ±‚å…¨éƒ¨æ»¡è¶³æ—¶ï¼Œåˆ¤æ–­ s æ˜¯å¦æœ‰æ•ˆ
        if (leftRemove == 0 && rightRemove == 0) {
            if (isValid(s)) {
                res.add(s);
            }
            return;
        }

        // éå†å­—ç¬¦ä¸²ï¼Œå°è¯•åˆ é™¤ä¸€ä¸ªæ‹¬å·
        for (int i = start; i < s.length(); i++) {
            // å‰ªæï¼šå¦‚æœå½“å‰å­—ç¬¦ä¸å‰ä¸€ä¸ªç›¸åŒï¼Œå°±è·³è¿‡ï¼Œé¿å…é‡å¤åˆ é™¤ç›¸åŒæƒ…å†µ
            if (i != start && s.charAt(i) == s.charAt(i - 1)) continue;
            // åªæœ‰æ‹¬å·æ‰æœ‰åˆ é™¤çš„æ„ä¹‰
            if (s.charAt(i) != '(' && s.charAt(i) != ')') continue;

            // æ„é€ æ–°çš„å­—ç¬¦ä¸²ï¼šåˆ é™¤ç¬¬ i ä¸ªå­—ç¬¦
            String cur = s.substring(0, i) + s.substring(i + 1);
            // å¦‚æœå½“å‰å­—ç¬¦æ˜¯å³æ‹¬å·ä¸”è¿˜æœ‰ rightRemove è¦åˆ é™¤ï¼Œåˆ™å°è¯•åˆ é™¤
            if (rightRemove > 0 && s.charAt(i) == ')') {
                dfs(cur, i, leftRemove, rightRemove - 1, res);
            }
            // å¦‚æœå½“å‰å­—ç¬¦æ˜¯å·¦æ‹¬å·ä¸”è¿˜æœ‰ leftRemove è¦åˆ é™¤ï¼Œåˆ™å°è¯•åˆ é™¤
            else if (leftRemove > 0 && s.charAt(i) == '(') {
                dfs(cur, i, leftRemove - 1, rightRemove, res);
            }
        }
    }

    // æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²
    private boolean isValid(String s) {
        int count = 0;
        for (char c : s.toCharArray()) {
            if (c == '(') count++;
            if (c == ')') count--;
            if (count < 0) return false;
        }
        return count == 0;
    }
}

```



### 79.å•è¯æœç´¢ï¼ˆnew hot100ï¼‰(4.8)

ç»™å®šä¸€ä¸ª `m x n` äºŒç»´å­—ç¬¦ç½‘æ ¼ `board` å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ `word` ã€‚å¦‚æœ `word` å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/word2.jpg)



```
è¾“å…¥ï¼šboard = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "ABCCED"
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/word-1.jpg)



```
è¾“å…¥ï¼šboard = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "SEE"
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 3ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/word3.jpg)



```
è¾“å…¥ï¼šboard = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "ABCB"
è¾“å‡ºï¼šfalse
```



```java
/**
 * Solutionç±»ç”¨äºè§£å†³å•è¯æœç´¢é—®é¢˜
 * å®ƒæä¾›äº†ä¸€ä¸ªå…¬å…±æ–¹æ³•existï¼Œç”¨äºåˆ¤æ–­ç»™å®šçš„å•è¯æ˜¯å¦å­˜åœ¨äºäºŒç»´ç½‘æ ¼ä¸­
 */
class Solution {
    /**
     * åˆ¤æ–­ç»™å®šçš„å•è¯æ˜¯å¦å­˜åœ¨äºäºŒç»´ç½‘æ ¼ä¸­
     * 
     * @param board äºŒç»´å­—ç¬¦æ•°ç»„ï¼Œä»£è¡¨ç½‘æ ¼
     * @param word å¾…æœç´¢çš„å•è¯
     * @return å¦‚æœå•è¯å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    public boolean exist(char[][] board, String word) {
        // éå†äºŒç»´ç½‘æ ¼çš„æ¯ä¸ªä½ç½®
        for (int i = 0; i < board.length; i++) {
            for (int j = 0; j < board[0].length; j++) {
                // å¦‚æœå½“å‰ä½ç½®çš„å­—ç¬¦ä¸å•è¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç›¸åŒï¼Œè¿›ä¸€æ­¥è°ƒç”¨sortOrderæ–¹æ³•æ£€æŸ¥
                if (sortOrder(board, word, i, j, 0)) {
                    return true;
                }
            }
        }
        return false;
    }

    /**
     * æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼Œç”¨äºæ£€æŸ¥å•è¯æ˜¯å¦åœ¨ç½‘æ ¼ä¸­
     * 
     * @param board äºŒç»´å­—ç¬¦æ•°ç»„ï¼Œä»£è¡¨ç½‘æ ¼
     * @param word å¾…æœç´¢çš„å•è¯
     * @param i å½“å‰è¡Œçš„ä½ç½®
     * @param j å½“å‰åˆ—çš„ä½ç½®
     * @param startIndex å½“å‰å•è¯çš„ç´¢å¼•
     * @return å¦‚æœä»å½“å‰ä½ç½®å¼€å§‹ï¼Œèƒ½å¤Ÿæ‰¾åˆ°å•è¯ï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    boolean sortOrder(char[][] board, String word, int i, int j, int startIndex) {
        // å¦‚æœå½“å‰ç´¢å¼•ç­‰äºå•è¯é•¿åº¦ï¼Œè¯´æ˜å·²ç»æ‰¾åˆ°å®Œæ•´çš„å•è¯
        if (startIndex == word.length()) {
            return true;
        }

        // æ£€æŸ¥å½“å‰ä½ç½®æ˜¯å¦è¶…å‡ºç½‘æ ¼èŒƒå›´æˆ–è€…å½“å‰ä½ç½®çš„å­—ç¬¦ä¸å•è¯å½“å‰ç´¢å¼•çš„å­—ç¬¦ä¸åŒ
        if (i < 0 || j < 0 || i >= board.length || j >= board[0].length || word.charAt(startIndex) != board[i][j]) {
            return false;
        }

        // ä¸´æ—¶ä¿å­˜å½“å‰ä½ç½®çš„å­—ç¬¦ï¼Œå¹¶æ ‡è®°ä¸ºå·²è®¿é—®
        char temp = board[i][j];
        board[i][j] = '#';

        // é€’å½’æ£€æŸ¥ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘
        boolean flag = sortOrder(board, word, i + 1, j, startIndex + 1)
                || sortOrder(board, word, i - 1, j, startIndex + 1)
                || sortOrder(board, word, i, j + 1, startIndex + 1)
                || sortOrder(board, word, i, j - 1, startIndex + 1);

        // å›æº¯ï¼Œæ¢å¤å½“å‰ä½ç½®çš„å­—ç¬¦
        board[i][j] = temp;
        return flag;
    }
}
```



### 78.å­é›†(4.9)

ç»™å®šä¸€ç»„ä¸å«é‡å¤å…ƒç´ çš„æ•´æ•°æ•°ç»„ numsï¼Œè¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è¯´æ˜ï¼šè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„å­é›†ã€‚

ç¤ºä¾‹: è¾“å…¥: nums = [1,2,3] è¾“å‡º: [ [3],  [1],  [2],  [1,2,3],  [1,3],  [2,3],  [1,2],  [] ]

```java
è¯¥ä»£ç å®ç°çš„åŠŸèƒ½æ˜¯ç”Ÿæˆç»™å®šæ•°ç»„çš„æ‰€æœ‰å­é›†ã€‚
ä»£ç çš„å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š
1. åˆ›å»ºä¸€ä¸ªç©ºçš„åˆ—è¡¨`res`ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰å­é›†ã€‚
2. åˆ›å»ºä¸€ä¸ªç©ºçš„åˆ—è¡¨`list`ï¼Œç”¨äºå­˜å‚¨å½“å‰æ­£åœ¨æ„å»ºçš„å­é›†ã€‚
3. å°†ç©ºåˆ—è¡¨`list`æ·»åŠ åˆ°`res`ä¸­ï¼Œä½œä¸ºåˆå§‹çš„ç©ºå­é›†ã€‚
4. è°ƒç”¨`backtrack`å‡½æ•°ï¼Œå¼€å§‹æ„å»ºå­é›†ã€‚
5. åœ¨`backtrack`å‡½æ•°ä¸­ï¼Œå¦‚æœ`start`ç­‰äºæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™è¡¨ç¤ºå·²ç»éå†å®Œæ‰€æœ‰å…ƒç´ ï¼Œç›´æ¥è¿”å›ã€‚
6. ä½¿ç”¨ä¸€ä¸ªå¾ªç¯ï¼Œä»`start`å¼€å§‹éå†æ•°ç»„ä¸­çš„å…ƒç´ ã€‚
7. å°†å½“å‰å…ƒç´ æ·»åŠ åˆ°`list`ä¸­ã€‚
8. å°†`list`æ·»åŠ åˆ°`res`ä¸­ï¼Œä½œä¸ºä¸€ä¸ªæ–°çš„å­é›†ã€‚
9. é€’å½’è°ƒç”¨`backtrack`å‡½æ•°ï¼Œä¼ å…¥æ›´æ–°åçš„`list`ã€`res`ã€`nums`å’Œ`i + 1`ä½œä¸ºå‚æ•°ï¼Œç»§ç»­æ„å»ºå­é›†ã€‚
10. åœ¨é€’å½’è°ƒç”¨è¿”å›åï¼Œå°†`list`ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ç§»é™¤ï¼Œä»¥ä¾¿å°è¯•ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚
11. é‡å¤æ­¥éª¤6-10ï¼Œç›´åˆ°éå†å®Œæ‰€æœ‰å…ƒç´ ã€‚
12. è¿”å›æœ€ç»ˆçš„å­é›†åˆ—è¡¨`res`ã€‚
/**
 * å­é›†
 */
class Solution {
    /**
     * ç”Ÿæˆç»™å®šæ•°ç»„çš„æ‰€æœ‰å­é›†
     * @param nums ç»™å®šçš„æ•°ç»„
     * @return æ‰€æœ‰å­é›†çš„åˆ—è¡¨
     */
    public List<List<Integer>> subsets(int[] nums) {
        List<List<Integer>> res = new ArrayList<>(); // å­˜å‚¨ç»“æœçš„åˆ—è¡¨
        List<Integer> list = new ArrayList<>(); // å­˜å‚¨å½“å‰å­é›†çš„åˆ—è¡¨
        res.add(new ArrayList<>(list)); // å°†ç©ºé›†æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
        backtrack(res, list, nums, 0); // å›æº¯ç”Ÿæˆæ‰€æœ‰å­é›†
        return res; // è¿”å›ç»“æœåˆ—è¡¨
    }

    /**
     * å›æº¯ç”Ÿæˆæ‰€æœ‰å­é›†
     * @param res ç»“æœåˆ—è¡¨
     * @param list å½“å‰å­é›†çš„åˆ—è¡¨
     * @param nums ç»™å®šçš„æ•°ç»„
     * @param start å½“å‰å›æº¯çš„èµ·å§‹ä½ç½®
     */
    private void backtrack(List<List<Integer>> res, List<Integer> list, int[] nums, int start) {
        if (start == nums.length) // å¦‚æœå›æº¯çš„èµ·å§‹ä½ç½®ç­‰äºæ•°ç»„é•¿åº¦ï¼Œè¯´æ˜å·²ç»éå†å®Œæ‰€æœ‰å…ƒç´ ï¼Œè¿”å›
            return;
        for (int i = start; i < nums.length; i++){ // ä»èµ·å§‹ä½ç½®å¼€å§‹éå†æ•°ç»„
            list.add(nums[i]); // å°†å½“å‰å…ƒç´ åŠ å…¥å½“å‰å­é›†
            res.add(new ArrayList<>(list)); // å°†å½“å‰å­é›†æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
            backtrack(res, list, nums, i + 1); // é€’å½’å›æº¯ç”Ÿæˆä¸‹ä¸€ä¸ªå­é›†
            list.remove(list.size() - 1); // å›æº¯ï¼Œç§»é™¤å½“å‰å­é›†çš„æœ€åä¸€ä¸ªå…ƒç´ 
        }
    }
}
```

### 90.å­é›†II(4.9)

ç»™å®šä¸€ä¸ªå¯èƒ½åŒ…å«é‡å¤å…ƒç´ çš„æ•´æ•°æ•°ç»„ numsï¼Œè¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è¯´æ˜ï¼šè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„å­é›†ã€‚

ç¤ºä¾‹:

- è¾“å…¥: [1,2,2]
- è¾“å‡º: [ [2], [1], [1,2,2], [2,2], [1,2], [] ]

```java
è¯¥ä»£ç å®ç°çš„åŠŸèƒ½æ˜¯æ‰¾å‡ºç»™å®šæ•°ç»„çš„æ‰€æœ‰å­é›†ï¼ŒåŒ…æ‹¬é‡å¤å…ƒç´ ã€‚
ä»£ç çš„å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š
1. åˆ›å»ºä¸€ä¸ªç©ºçš„ç»“æœåˆ—è¡¨`res`å’Œä¸€ä¸ªç©ºçš„åˆ—è¡¨`list`ã€‚
2. å¯¹ç»™å®šæ•°ç»„`nums`è¿›è¡Œæ’åºã€‚
3. å°†ç©ºåˆ—è¡¨`list`æ·»åŠ åˆ°ç»“æœåˆ—è¡¨`res`ä¸­ã€‚
4. è°ƒç”¨å›æº¯å‡½æ•°`backtrack`ï¼Œä¼ å…¥ç»“æœåˆ—è¡¨`res`ã€ç©ºåˆ—è¡¨`list`ã€æ’åºåçš„æ•°ç»„`nums`å’Œèµ·å§‹ç´¢å¼•0ã€‚
5. åœ¨å›æº¯å‡½æ•°ä¸­ï¼Œä»èµ·å§‹ç´¢å¼•å¼€å§‹éå†æ•°ç»„`nums`ã€‚
6. å¦‚æœå½“å‰ç´¢å¼•å¤§äºèµ·å§‹ç´¢å¼•ä¸”å½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œåˆ™è·³è¿‡å½“å‰å¾ªç¯ã€‚
7. å°†å½“å‰å…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨`list`ä¸­ã€‚
8. å°†åˆ—è¡¨`list`çš„å‰¯æœ¬æ·»åŠ åˆ°ç»“æœåˆ—è¡¨`res`ä¸­ã€‚
9. é€’å½’è°ƒç”¨å›æº¯å‡½æ•°`backtrack`ï¼Œä¼ å…¥ç»“æœåˆ—è¡¨`res`ã€åˆ—è¡¨`list`ã€æ•°ç»„`nums`å’Œå½“å‰ç´¢å¼•åŠ 1ã€‚
10. ç§»é™¤åˆ—è¡¨`list`çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä»¥ä¾¿è¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ã€‚
11. è¿”å›ç»“æœåˆ—è¡¨`res`ã€‚
class Solution {
    public List<List<Integer>> subsetsWithDup(int[] nums) {
        List<List<Integer>> res = new ArrayList<>(); // åˆ›å»ºä¸€ä¸ªå­˜å‚¨ç»“æœçš„åˆ—è¡¨
        List<Integer> list = new ArrayList<>(); // åˆ›å»ºä¸€ä¸ªä¸´æ—¶åˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªå­é›†
        Arrays.sort(nums); // å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œä»¥ä¾¿å¤„ç†é‡å¤å…ƒç´ 
        res.add(new ArrayList<>(list)); // å°†ç©ºåˆ—è¡¨æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­ï¼Œä½œä¸ºåˆå§‹å­é›†
        backtrack(res, new ArrayList<>(), nums, 0); // å›æº¯ç”Ÿæˆæ‰€æœ‰å­é›†
        return res; // è¿”å›ç»“æœåˆ—è¡¨
    }

    private void backtrack(List<List<Integer>> res, List<Integer> list, int[] nums, int start) {
        for (int i = start; i < nums.length; i++){ // éå†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ 
            if (i > start && nums[i] == nums[i - 1]) { // å¦‚æœå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œè·³è¿‡è¯¥å…ƒç´ ï¼Œé¿å…ç”Ÿæˆé‡å¤çš„å­é›†
                continue;
            }
            list.add(nums[i]); // å°†å½“å‰å…ƒç´ æ·»åŠ åˆ°ä¸´æ—¶åˆ—è¡¨ä¸­
            res.add(new ArrayList<>(list)); // å°†ä¸´æ—¶åˆ—è¡¨æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å­é›†
            backtrack(res, list, nums, i + 1); // é€’å½’è°ƒç”¨ï¼Œç»§ç»­ç”Ÿæˆä¸‹ä¸€ä¸ªå…ƒç´ çš„å­é›†
            list.remove(list.size() - 1); // å›æº¯ï¼Œç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä»¥ä¾¿ç”Ÿæˆå…¶ä»–å­é›†
        }
    }
}
```

### 491.éé€’å‡å­åºåˆ—(3.24)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾å‡ºå¹¶è¿”å›æ‰€æœ‰è¯¥æ•°ç»„ä¸­ä¸åŒçš„é€’å¢å­åºåˆ—ï¼Œé€’å¢å­åºåˆ—ä¸­ **è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´ ** ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

æ•°ç»„ä¸­å¯èƒ½å«æœ‰é‡å¤å…ƒç´ ï¼Œå¦‚å‡ºç°ä¸¤ä¸ªæ•´æ•°ç›¸ç­‰ï¼Œä¹Ÿå¯ä»¥è§†ä½œé€’å¢åºåˆ—çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [4,6,7,7]
è¾“å‡ºï¼š[[4,6],[4,6,7],[4,6,7,7],[4,7],[4,7,7],[6,7],[6,7,7],[7,7]]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [4,4,3,2,1]
è¾“å‡ºï¼š[[4,4]]
```

```java
// è§£å†³æ–¹æ¡ˆç±»ï¼Œç”¨äºå¯»æ‰¾æ•°ç»„ä¸­çš„æ‰€æœ‰é€’å¢å­åºåˆ—
class Solution {
    /**
     * å¯»æ‰¾ç»™å®šæ•°ç»„ä¸­çš„æ‰€æœ‰é€’å¢å­åºåˆ—
     *
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @return æ‰€æœ‰é€’å¢å­åºåˆ—çš„åˆ—è¡¨
     */
    public List<List<Integer>> findSubsequences(int[] nums) {
        // å­˜å‚¨æ‰€æœ‰é€’å¢å­åºåˆ—çš„ç»“æœåˆ—è¡¨
        List<List<Integer>> resultList = new ArrayList<>();
        // è¾…åŠ©åˆ—è¡¨ï¼Œç”¨äºåœ¨é€’å½’è¿‡ç¨‹ä¸­æ„å»ºé€’å¢å­åºåˆ—
        List<Integer> auxiliaryList = new ArrayList<>();
        // ä»æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œé€’å½’å¯»æ‰¾æ‰€æœ‰é€’å¢å­åºåˆ—
        sortOrder(nums, resultList, auxiliaryList, 0);
        return resultList;
    }

    /**
     * é€’å½’å‡½æ•°ï¼Œç”¨äºå¯»æ‰¾é€’å¢å­åºåˆ—
     *
     * @param nums è¾“å…¥çš„æ•´æ•°æ•°ç»„
     * @param resultList å­˜å‚¨æ‰€æœ‰é€’å¢å­åºåˆ—çš„åˆ—è¡¨
     * @param auxiliaryList è¾…åŠ©åˆ—è¡¨ï¼Œç”¨äºåœ¨é€’å½’è¿‡ç¨‹ä¸­æ„å»ºé€’å¢å­åºåˆ—
     * @param startIndex å½“å‰æœç´¢çš„èµ·å§‹ç´¢å¼•
     */
    void sortOrder(int[] nums, List<List<Integer>> resultList, List<Integer> auxiliaryList, int startIndex) {
        // å¦‚æœè¾…åŠ©åˆ—è¡¨çš„é•¿åº¦è¶…è¿‡1ï¼Œåˆ™å½“å‰çš„é€’å¢å­åºåˆ—ç¬¦åˆæ¡ä»¶ï¼Œå°†å…¶æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
        if (auxiliaryList.size() > 1) {
            resultList.add(new ArrayList<>(auxiliaryList));
        }
        // è¾…åŠ©é›†åˆï¼Œç”¨äºåœ¨å½“å‰é€’å½’å±‚çº§ä¸Šè®°å½•å·²ç»å¤„ç†è¿‡çš„æ•°å­—ï¼Œé¿å…é‡å¤å¤„ç†
        HashSet<Integer> auxiliarySet = new HashSet<>();
        // ä»å½“å‰èµ·å§‹ç´¢å¼•å¼€å§‹éå†æ•°ç»„
        for (int i = startIndex; i < nums.length; i++) {
            // å¦‚æœè¾…åŠ©åˆ—è¡¨ä¸ä¸ºç©ºä¸”å½“å‰æ•°å­—å°äºè¾…åŠ©åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªæ•°å­—ï¼Œè¯´æ˜ä¸æ»¡è¶³é€’å¢æ¡ä»¶ï¼Œè·³è¿‡å½“å‰æ•°å­—
            if (!auxiliaryList.isEmpty() && nums[i] < auxiliaryList.get(auxiliaryList.size() - 1)) {
                continue;
            }
            // å¦‚æœå½“å‰æ•°å­—å·²ç»åœ¨è¾…åŠ©é›†åˆä¸­å‡ºç°è¿‡ï¼Œè¯´æ˜åœ¨å½“å‰é€’å½’å±‚çº§ä¸Šå·²ç»å¤„ç†è¿‡è¯¥æ•°å­—ï¼Œè·³è¿‡ä»¥é¿å…é‡å¤
            if (auxiliarySet.contains(nums[i])) {
                continue;
            }
            // å°†å½“å‰æ•°å­—æ·»åŠ åˆ°è¾…åŠ©é›†åˆä¸­ï¼Œè¡¨ç¤ºåœ¨å½“å‰é€’å½’å±‚çº§ä¸Šå·²ç»å¤„ç†è¯¥æ•°å­—
            auxiliarySet.add(nums[i]);
            // å°†å½“å‰æ•°å­—æ·»åŠ åˆ°è¾…åŠ©åˆ—è¡¨ä¸­ï¼Œå°è¯•æ„å»ºæ–°çš„é€’å¢å­åºåˆ—
            auxiliaryList.add(nums[i]);
            // é€’å½’è°ƒç”¨ï¼Œä»ä¸‹ä¸€ä¸ªç´¢å¼•å¼€å§‹ï¼Œç»§ç»­å¯»æ‰¾é€’å¢å­åºåˆ—
            sortOrder(nums, resultList, auxiliaryList, i + 1);
            // å›æº¯ï¼Œç§»é™¤è¾…åŠ©åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªæ•°å­—ï¼Œå°è¯•å…¶ä»–å¯èƒ½çš„é€’å¢å­åºåˆ—
            auxiliaryList.remove(auxiliaryList.size() - 1);
        }
    }
}
```

### 46.å…¨æ’åˆ—(3.24)

ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ `nums` ï¼Œè¿”å›å…¶ *æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—* ã€‚ä½ å¯ä»¥ **æŒ‰ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0,1]
è¾“å‡ºï¼š[[0,1],[1,0]]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1]
è¾“å‡ºï¼š[[1]]
```

```java
class Solution {
    // ç”Ÿæˆå…¨æ’åˆ—
    public List<List<Integer>> permute(int[] nums) {
        List<List<Integer>> res = new ArrayList<>(); // å­˜å‚¨ç»“æœçš„åˆ—è¡¨
        if (nums == null || nums.length == 0) {
            return res; // å¦‚æœè¾“å…¥æ•°ç»„ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ç©ºç»“æœåˆ—è¡¨
        }
        int len = nums.length; // æ•°ç»„é•¿åº¦
        boolean[] visited = new boolean[len]; // æ ‡è®°å…ƒç´ æ˜¯å¦è¢«è®¿é—®è¿‡çš„æ•°ç»„
        List<Integer> path = new ArrayList<>(); // å­˜å‚¨å½“å‰è·¯å¾„çš„åˆ—è¡¨
        backtrack(nums, len, 0, visited, path, res); // å›æº¯ç”Ÿæˆå…¨æ’åˆ—
        return res; // è¿”å›ç»“æœåˆ—è¡¨
    }

    // å›æº¯ç”Ÿæˆå…¨æ’åˆ—
    private void backtrack(int[] nums, int len, int depth, boolean[] visited, List<Integer> path, List<List<Integer>> res) {
        if (depth == len) { // å¦‚æœå½“å‰æ·±åº¦ç­‰äºæ•°ç»„é•¿åº¦ï¼Œè¯´æ˜æ‰¾åˆ°ä¸€ä¸ªå…¨æ’åˆ—
            res.add(new ArrayList<>(path)); // å°†å½“å‰è·¯å¾„åŠ å…¥ç»“æœåˆ—è¡¨
            return;
        }
        for (int i = 0; i < len; i++) {
            if (visited[i]) { // å¦‚æœå…ƒç´ å·²ç»è¢«è®¿é—®è¿‡ï¼Œåˆ™è·³è¿‡
                continue;
            }
            path.add(nums[i]); // å°†å½“å‰å…ƒç´ åŠ å…¥è·¯å¾„
            visited[i] = true; // æ ‡è®°å½“å‰å…ƒç´ ä¸ºå·²è®¿é—®
            backtrack(nums, len, depth + 1, visited, path, res); // é€’å½’è¿›å…¥ä¸‹ä¸€å±‚
            path.remove(path.size() - 1); // å›æº¯ï¼Œç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ 
            visited[i] = false; // æ ‡è®°å½“å‰å…ƒç´ ä¸ºæœªè®¿é—®ï¼Œä»¥ä¾¿å…¶ä»–è·¯å¾„ä½¿ç”¨
        } 
    }
}
```

### 47.å…¨æ’åˆ—II(3.23)

ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— `nums` ï¼Œ***æŒ‰ä»»æ„é¡ºåº*** è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,2]
è¾“å‡ºï¼š
[[1,1,2],
 [1,2,1],
 [2,1,1]]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 8`
- `-10 <= nums[i] <= 10`

```java
class Solution {
    // ä¸»å‡½æ•°ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„æ’åˆ—
    public List<List<Integer>> permuteUnique(int[] nums) {
        // ç»“æœåˆ—è¡¨
        List<List<Integer>> result = new ArrayList<>();
        // å¦‚æœæ•°ç»„ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç»“æœåˆ—è¡¨
        if (nums.length == 0) {
            return result;
        }
        // è·¯å¾„åˆ—è¡¨
        List<Integer> path = new ArrayList<>();
        // æ ‡è®°æ•°ç»„ï¼Œè®°å½•å…ƒç´ æ˜¯å¦è¢«ä½¿ç”¨
        boolean[] usedArray = new boolean[nums.length];
        // å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œæ–¹ä¾¿å»é‡
        Arrays.sort(nums);
        // è°ƒç”¨å›æº¯å‡½æ•°
        backtracking(usedArray, nums, path, result);
        return result;
    }

    // å›æº¯å‡½æ•°
    void backtracking(boolean[] usedArray, int[] nums, List<Integer> path, List<List<Integer>> result) {
        // å¦‚æœè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦ï¼Œè¯´æ˜å·²ç»æ‰¾åˆ°ä¸€ä¸ªæ’åˆ—
        if (path.size() == nums.length) {
            // å°†è·¯å¾„æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
            result.add(new ArrayList<>(path));
            return;
        }
        // éå†æ•°ç»„
        for (int i = 0; i < nums.length; i++) {
            // å¦‚æœå…ƒç´ å·²ç»è¢«ä½¿ç”¨ï¼Œæˆ–è€…å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ ç›¸åŒä¸”å‰ä¸€ä¸ªå…ƒç´ æœªè¢«ä½¿ç”¨ï¼Œåˆ™è·³è¿‡
            if (usedArray[i] || (i > 0 && nums[i] == nums[i - 1] && !usedArray[i - 1])) {
                continue;
            }
            // æ ‡è®°å…ƒç´ ä¸ºå·²ä½¿ç”¨
            usedArray[i] = true;
            // å°†å…ƒç´ æ·»åŠ åˆ°è·¯å¾„ä¸­
            path.add(nums[i]);
            // é€’å½’è°ƒç”¨å›æº¯å‡½æ•°
            backtracking(usedArray, nums, path, result);
            // æ ‡è®°å…ƒç´ ä¸ºæœªä½¿ç”¨
            usedArray[i] = false;
            // ä»è·¯å¾„ä¸­ç§»é™¤å…ƒç´ 
            path.remove(path.size() - 1);
        }
    }
}
```

### 51.Nçš‡å

æŒ‰ç…§å›½é™…è±¡æ£‹çš„è§„åˆ™ï¼Œçš‡åå¯ä»¥æ”»å‡»ä¸ä¹‹å¤„åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—æˆ–åŒä¸€æ–œçº¿ä¸Šçš„æ£‹å­ã€‚

**n çš‡åé—®é¢˜** ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† `n` ä¸ªçš‡åæ”¾ç½®åœ¨ `nÃ—n` çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„ **n çš‡åé—®é¢˜** çš„è§£å†³æ–¹æ¡ˆã€‚

æ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªä¸åŒçš„ **n çš‡åé—®é¢˜** çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­ `'Q'` å’Œ `'.'` åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode.com/uploads/2020/11/13/queens.jpg)

```
è¾“å…¥ï¼šn = 4
è¾“å‡ºï¼š[[".Q..","...Q","Q...","..Q."],["..Q.","Q...","...Q",".Q.."]]
è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š[["Q"]]
```

 

**æç¤ºï¼š**

- `1 <= n <= 9`

```java
/**
 * Nçš‡åé—®é¢˜çš„è§£å†³æ–¹æ¡ˆç±»
 * è¯¥ç±»æä¾›äº†æ–¹æ³•æ¥è§£å†³å¦‚ä½•åœ¨n*nçš„æ£‹ç›˜ä¸Šæ”¾ç½®nä¸ªçš‡åï¼Œä½¿å¾—å®ƒä»¬äº’ä¸æ”»å‡»çš„é—®é¢˜
 */
class Solution {
    /**
     * è§£å†³Nçš‡åé—®é¢˜çš„ä¸»è¦æ–¹æ³•
     * @param n æ£‹ç›˜çš„å¤§å°ï¼Œå³çš‡åçš„æ•°é‡
     * @return åŒ…å«æ‰€æœ‰è§£å†³æ–¹æ¡ˆçš„åˆ—è¡¨ï¼Œæ¯ä¸ªè§£å†³æ–¹æ¡ˆéƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œè¡¨ç¤ºæ£‹ç›˜çš„æ¯ä¸€è¡Œ
     */
    public List<List<String>> solveNQueens(int n) {
        List<List<String>> resultList = new ArrayList<>();
        char[][] chessBoard = new char[n][n];
        // åˆå§‹åŒ–æ£‹ç›˜ï¼Œæ‰€æœ‰ä½ç½®éƒ½æ”¾ç½®ä¸ºç©ºï¼ˆ'.'ï¼‰
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                chessBoard[i][j] = '.';
            }
        }
        // ä»ç¬¬ä¸€è¡Œå¼€å§‹å°è¯•æ”¾ç½®çš‡å
        sortOrder(n, resultList, chessBoard, 0);
        return resultList;
    }

    /**
     * å°è¯•åœ¨æ£‹ç›˜ä¸Šæ”¾ç½®çš‡åçš„æ–¹æ³•
     * @param n æ£‹ç›˜çš„å¤§å°
     * @param resultList å­˜æ”¾æ‰€æœ‰è§£å†³æ–¹æ¡ˆçš„åˆ—è¡¨
     * @param chessBoard å½“å‰å°è¯•çš„æ£‹ç›˜çŠ¶æ€
     * @param rowIndex å½“å‰å°è¯•æ”¾ç½®çš‡åçš„è¡Œå·
     */
    void sortOrder(int n, List<List<String>> resultList, char[][] chessBoard, int rowIndex) {
        // å¦‚æœå·²ç»åˆ°è¾¾æœ€åä¸€è¡Œçš„ä¸‹ä¸€è¡Œï¼Œè¯´æ˜å·²ç»æ‰¾åˆ°äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ
        if (rowIndex == n) {
            resultList.add(buider(n, chessBoard));
            return;
        }

        // å°è¯•åœ¨å½“å‰è¡Œçš„æ¯ä¸€åˆ—æ”¾ç½®çš‡å
        for (int i = 0; i < n; i++) {
            // æ£€æŸ¥å½“å‰ä½ç½®æ˜¯å¦å®‰å…¨ï¼Œå³æ²¡æœ‰å…¶ä»–çš‡åå¯ä»¥æ”»å‡»åˆ°
            if (isSafe(i, chessBoard, rowIndex)) {
                // æ”¾ç½®çš‡å
                chessBoard[rowIndex][i] = 'Q';
                // ç»§ç»­å°è¯•æ”¾ç½®ä¸‹ä¸€è¡Œçš„çš‡å
                sortOrder(n, resultList, chessBoard, rowIndex + 1);
                // å›æº¯ï¼Œæ’¤é”€å½“å‰ä½ç½®çš„çš‡å
                chessBoard[rowIndex][i] = '.';
            }
        }
    }

    /**
     * æ£€æŸ¥å½“å‰ä½ç½®æ˜¯å¦å®‰å…¨ï¼Œå³æ²¡æœ‰å…¶ä»–çš‡åå¯ä»¥æ”»å‡»åˆ°
     * @param index å½“å‰åˆ—å·
     * @param chessBoard å½“å‰å°è¯•çš„æ£‹ç›˜çŠ¶æ€
     * @param rowIndex å½“å‰è¡Œå·
     * @return å¦‚æœå½“å‰ä½ç½®å®‰å…¨è¿”å›trueï¼Œå¦åˆ™è¿”å›false
     */
    boolean isSafe(int index, char[][] chessBoard, int rowIndex) {
        // æ£€æŸ¥å½“å‰åˆ—æ˜¯å¦æœ‰çš‡å
        for (int i = 0; i < rowIndex; i++) {
            if (chessBoard[i][index] == 'Q') {
                return false;
            }
        }

        // æ£€æŸ¥å·¦å¯¹è§’çº¿æ˜¯å¦æœ‰çš‡å
        for (int i = rowIndex - 1, j = index - 1; i >= 0 && j >= 0; i--, j--) {
            if (chessBoard[i][j] == 'Q') {
                return false;
            }
        }

        // æ£€æŸ¥å³å¯¹è§’çº¿æ˜¯å¦æœ‰çš‡å
        for (int i = rowIndex - 1, j = index + 1; i >= 0 && j < chessBoard.length; i--, j++) {
            if (chessBoard[i][j] == 'Q') {
                return false;
            }
        }
        // å½“å‰ä½ç½®å®‰å…¨
        return true;
    }

    /**
     * æ ¹æ®å½“å‰æ£‹ç›˜çŠ¶æ€æ„å»ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆ
     * @param n æ£‹ç›˜çš„å¤§å°
     * @param chessBoard å½“å‰çš„æ£‹ç›˜çŠ¶æ€
     * @return ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œè¡¨ç¤ºå½“å‰çš„æ£‹ç›˜çŠ¶æ€
     */
    List<String> buider(int n,char[][] chessBoard) {
        List<String> tempList = new ArrayList<>();
        StringBuilder SB = new StringBuilder();
        // éå†æ£‹ç›˜ï¼Œæ„å»ºæ¯ä¸ªä½ç½®çš„å­—ç¬¦è¡¨ç¤º
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                SB.append(chessBoard[i][j]);
            }
            tempList.add(SB.toString());
            SB.setLength(0);
        }
        return tempList;
    }
}
```

**å¯¹äºisSafeå‡½æ•°åªæ£€æŸ¥ä¸Šæ–¹ï¼Œå·¦ä¸Šæ–¹ï¼Œå³ä¸Šçš„åŸå› æ˜¯ï¼š**

æˆ‘ä»¬åªéœ€è¦æ£€æŸ¥è¿™äº›æ–¹å‘çš„åŸå› æ˜¯ï¼šæˆ‘ä»¬æ˜¯ä»ä¸Šåˆ°ä¸‹é€è¡Œæ”¾ç½®çš‡åï¼Œå¹¶ä¸”æ¯æ¬¡åªè€ƒè™‘å½“å‰è¡Œ `row` æ˜¯å¦å¯ä»¥æ”¾ç½®çš‡åã€‚æ‰€ä»¥ï¼Œåœ¨æ£€æŸ¥å½“å‰ä½ç½® `(row, col)` æ˜¯å¦å®‰å…¨æ—¶ï¼Œåªéœ€è¦æ£€æŸ¥ï¼š

- åŒä¸€åˆ—ä¸Šæ–¹çš„çš‡åï¼Œå› ä¸ºåœ¨ä¸‹æ–¹è¿˜æ²¡æœ‰æ”¾ç½®ä»»ä½•çš‡åã€‚
- å·¦ä¸Šå’Œå³ä¸Šçš„å¯¹è§’çº¿ï¼Œå› ä¸ºè¿™äº›æ–¹å‘æœ‰å¯èƒ½å­˜åœ¨å·²æ”¾ç½®çš„çš‡åã€‚

### 37.è§£æ•°ç‹¬

ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡å¡«å……ç©ºæ ¼æ¥è§£å†³æ•°ç‹¬é—®é¢˜ã€‚

æ•°ç‹¬çš„è§£æ³•éœ€ **éµå¾ªå¦‚ä¸‹è§„åˆ™**ï¼š

1. æ•°å­— `1-9` åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
2. æ•°å­— `1-9` åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
3. æ•°å­— `1-9` åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ `3x3` å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰

æ•°ç‹¬éƒ¨åˆ†ç©ºæ ¼å†…å·²å¡«å…¥äº†æ•°å­—ï¼Œç©ºç™½æ ¼ç”¨ `'.'` è¡¨ç¤ºã€‚

 

**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2021/04/12/250px-sudoku-by-l2g-20050714svg.png)

```
è¾“å…¥ï¼šboard = [["5","3",".",".","7",".",".",".","."],["6",".",".","1","9","5",".",".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".",".","3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],[".",".",".",".","8",".",".","7","9"]]
è¾“å‡ºï¼š[["5","3","4","6","7","8","9","1","2"],["6","7","2","1","9","5","3","4","8"],["1","9","8","3","4","2","5","6","7"],["8","5","9","7","6","1","4","2","3"],["4","2","6","8","5","3","7","9","1"],["7","1","3","9","2","4","8","5","6"],["9","6","1","5","3","7","2","8","4"],["2","8","7","4","1","9","6","3","5"],["3","4","5","2","8","6","1","7","9"]]
```

**è§£é‡Šï¼š**è¾“å…¥çš„æ•°ç‹¬å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå”¯ä¸€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹æ‰€ç¤ºï¼š

 ![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2021/04/12/250px-sudoku-by-l2g-20050714_solutionsvg.png)

**æç¤ºï¼š**

- `board.length == 9`
- `board[i].length == 9`
- `board[i][j]` æ˜¯ä¸€ä½æ•°å­—æˆ–è€… `'.'`
- é¢˜ç›®æ•°æ® **ä¿è¯** è¾“å…¥æ•°ç‹¬ä»…æœ‰ä¸€ä¸ªè§£

```java
class Solution {
    // ä¸»å‡½æ•°ï¼Œè°ƒç”¨å›æº¯å‡½æ•°
    public void solveSudoku(char[][] board) {
        backtracking(board);
    }

    // å›æº¯å‡½æ•°ï¼Œç”¨äºè§£å†³æ•°ç‹¬é—®é¢˜
    boolean backtracking(char[][] board) {
        // éå†æ•°ç‹¬çš„æ¯ä¸€ä¸ªæ ¼å­
        for (int i = 0; i < board.length; i++) {
            for (int j = 0; j < board[0].length; j++) {
                // å¦‚æœå½“å‰æ ¼å­ä¸ºç©ºï¼Œåˆ™å°è¯•å¡«å…¥æ•°å­—
                if (board[i][j] == '.') {
                    // å°è¯•å¡«å…¥1-9çš„æ•°å­—
                    for (char k = '1'; k <= '9'; k++) {
                        // åˆ¤æ–­å¡«å…¥çš„æ•°å­—æ˜¯å¦åˆæ³•
                        if (isSafe(i, j, k, board)) {
                            // å¦‚æœåˆæ³•ï¼Œåˆ™å¡«å…¥æ•°å­—
                            board[i][j] = k;
                            // é€’å½’è°ƒç”¨å›æº¯å‡½æ•°ï¼Œç»§ç»­å¡«ä¸‹ä¸€ä¸ªæ ¼å­
                            if (backtracking(board)) {
                                return true;
                            }
                            // å¦‚æœé€’å½’è°ƒç”¨è¿”å›falseï¼Œåˆ™å›æº¯ï¼Œå°†å½“å‰æ ¼å­é‡æ–°ç½®ä¸ºç©º
                            board[i][j] = '.';
                        }
                    }
                    // å¦‚æœ1-9çš„æ•°å­—éƒ½ä¸åˆæ³•ï¼Œåˆ™è¿”å›false
                    return false;
                }
            }
        }
        // å¦‚æœæ‰€æœ‰æ ¼å­éƒ½å¡«æ»¡äº†ï¼Œåˆ™è¿”å›true
        return true;
    }

    // åˆ¤æ–­å¡«å…¥çš„æ•°å­—æ˜¯å¦åˆæ³•
    boolean isSafe(int i, int j, char k, char[][] board) {
        // åˆ¤æ–­å½“å‰è¡Œæ˜¯å¦åˆæ³•
        for (int l = 0; l < board.length; l++) {
            if (board[i][l] == k) {
                return false;
            }
        }

        // åˆ¤æ–­å½“å‰åˆ—æ˜¯å¦åˆæ³•
        for (int l = 0; l < board.length; l++) {
            if (board[l][j] == k) {
                return false;
            }
        }
        // åˆ¤æ–­å½“å‰3x3çš„å°æ–¹æ ¼æ˜¯å¦åˆæ³•
        int rowStart = (i / 3) * 3;
        int columnStart = (j / 3) * 3;

        for (int l = rowStart; l < rowStart + 3; l++) {
            for (int m = columnStart; m < columnStart + 3; m++) {
                if (board[l][m] == k) {
                    return false;
                }
            }
        }

        // å¦‚æœå½“å‰è¡Œã€åˆ—ã€3x3å°æ–¹æ ¼éƒ½åˆæ³•ï¼Œåˆ™è¿”å›true
        return true;
    }
}
```



# è´ªå¿ƒ

### 455.åˆ†å‘é¥¼å¹²

å‡è®¾ä½ æ˜¯ä¸€ä½å¾ˆæ£’çš„å®¶é•¿ï¼Œæƒ³è¦ç»™ä½ çš„å­©å­ä»¬ä¸€äº›å°é¥¼å¹²ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªå­©å­æœ€å¤šåªèƒ½ç»™ä¸€å—é¥¼å¹²ã€‚

å¯¹æ¯ä¸ªå­©å­ `i`ï¼Œéƒ½æœ‰ä¸€ä¸ªèƒƒå£å€¼ `g[i]`ï¼Œè¿™æ˜¯èƒ½è®©å­©å­ä»¬æ»¡è¶³èƒƒå£çš„é¥¼å¹²çš„æœ€å°å°ºå¯¸ï¼›å¹¶ä¸”æ¯å—é¥¼å¹² `j`ï¼Œéƒ½æœ‰ä¸€ä¸ªå°ºå¯¸ `s[j]` ã€‚å¦‚æœ `s[j] >= g[i]`ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªé¥¼å¹² `j` åˆ†é…ç»™å­©å­ `i` ï¼Œè¿™ä¸ªå­©å­ä¼šå¾—åˆ°æ»¡è¶³ã€‚ä½ çš„ç›®æ ‡æ˜¯å°½å¯èƒ½æ»¡è¶³è¶Šå¤šæ•°é‡çš„å­©å­ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªæœ€å¤§æ•°å€¼ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: g = [1,2,3], s = [1,1]
è¾“å‡º: 1
è§£é‡Š: 
ä½ æœ‰ä¸‰ä¸ªå­©å­å’Œä¸¤å—å°é¥¼å¹²ï¼Œ3ä¸ªå­©å­çš„èƒƒå£å€¼åˆ†åˆ«æ˜¯ï¼š1,2,3ã€‚
è™½ç„¶ä½ æœ‰ä¸¤å—å°é¥¼å¹²ï¼Œç”±äºä»–ä»¬çš„å°ºå¯¸éƒ½æ˜¯1ï¼Œä½ åªèƒ½è®©èƒƒå£å€¼æ˜¯1çš„å­©å­æ»¡è¶³ã€‚
æ‰€ä»¥ä½ åº”è¯¥è¾“å‡º1ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: g = [1,2], s = [1,2,3]
è¾“å‡º: 2
è§£é‡Š: 
ä½ æœ‰ä¸¤ä¸ªå­©å­å’Œä¸‰å—å°é¥¼å¹²ï¼Œ2ä¸ªå­©å­çš„èƒƒå£å€¼åˆ†åˆ«æ˜¯1,2ã€‚
ä½ æ‹¥æœ‰çš„é¥¼å¹²æ•°é‡å’Œå°ºå¯¸éƒ½è¶³ä»¥è®©æ‰€æœ‰å­©å­æ»¡è¶³ã€‚
æ‰€ä»¥ä½ åº”è¯¥è¾“å‡º2.
```

**æç¤ºï¼š**

- `1 <= g.length <= 3 * 104`
- `0 <= s.length <= 3 * 104`
- `1 <= g[i], s[j] <= 231 - 1`

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„å­©å­æ•°é‡
    public int findContentChildren(int[] g, int[] s) {
        // å¯¹å­©å­çš„éœ€æ±‚æ•°ç»„è¿›è¡Œæ’åº
        Arrays.sort(g);
        // å¯¹é¥¼å¹²å¤§å°æ•°ç»„è¿›è¡Œæ’åº
        Arrays.sort(s);
        // å®šä¹‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºè®°å½•æ»¡è¶³æ¡ä»¶çš„å­©å­æ•°é‡
        int count = 0;
        // å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘é¥¼å¹²å¤§å°æ•°ç»„å’Œå­©å­çš„éœ€æ±‚æ•°ç»„çš„æœ«å°¾
        int i = s.length - 1, j = g.length - 1;
        // å½“ä¸¤ä¸ªæŒ‡é’ˆéƒ½å¤§äºç­‰äº0æ—¶ï¼Œå¾ªç¯æ‰§è¡Œ
        while (i >= 0 && j >= 0) {
            // å¦‚æœå½“å‰æœ€å¤§çš„é¥¼å¹²å¯ä»¥æ»¡è¶³å½“å‰æœ€å¤§çš„å­©å­éœ€æ±‚
            if (s[i] >= g[j]) {
                // å°†é¥¼å¹²æŒ‡é’ˆå‘å‰ç§»åŠ¨ä¸€ä½
                i--;
                // å°†å­©å­éœ€æ±‚æŒ‡é’ˆå‘å‰ç§»åŠ¨ä¸€ä½
                j--;
                // æ»¡è¶³æ¡ä»¶çš„å­©å­æ•°é‡åŠ 1
                count++;
            } else {
                // å¦‚æœå½“å‰æœ€å¤§çš„é¥¼å¹²ä¸èƒ½æ»¡è¶³å½“å‰æœ€å¤§çš„å­©å­éœ€æ±‚ï¼Œå°†å­©å­éœ€æ±‚æŒ‡é’ˆå‘å‰ç§»åŠ¨ä¸€ä½
                j--;
            }
        }

        // è¿”å›æ»¡è¶³æ¡ä»¶çš„å­©å­æ•°é‡
        return count;
    }
}
```

### 376.æ‘†åŠ¨åºåˆ—

å¦‚æœè¿ç»­æ•°å­—ä¹‹é—´çš„å·®ä¸¥æ ¼åœ°åœ¨æ­£æ•°å’Œè´Ÿæ•°ä¹‹é—´äº¤æ›¿ï¼Œåˆ™æ•°å­—åºåˆ—ç§°ä¸º **æ‘†åŠ¨åºåˆ— ã€‚**ç¬¬ä¸€ä¸ªå·®ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰å¯èƒ½æ˜¯æ­£æ•°æˆ–è´Ÿæ•°ã€‚ä»…æœ‰ä¸€ä¸ªå…ƒç´ æˆ–è€…å«ä¸¤ä¸ªä¸ç­‰å…ƒç´ çš„åºåˆ—ä¹Ÿè§†ä½œæ‘†åŠ¨åºåˆ—ã€‚

- ä¾‹å¦‚ï¼Œ `[1, 7, 4, 9, 2, 5]` æ˜¯ä¸€ä¸ª **æ‘†åŠ¨åºåˆ—** ï¼Œå› ä¸ºå·®å€¼ `(6, -3, 5, -7, 3)` æ˜¯æ­£è´Ÿäº¤æ›¿å‡ºç°çš„ã€‚
- ç›¸åï¼Œ`[1, 4, 7, 2, 5]` å’Œ `[1, 7, 4, 5, 5]` ä¸æ˜¯æ‘†åŠ¨åºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—æ˜¯å› ä¸ºå®ƒçš„å‰ä¸¤ä¸ªå·®å€¼éƒ½æ˜¯æ­£æ•°ï¼Œç¬¬äºŒä¸ªåºåˆ—æ˜¯å› ä¸ºå®ƒçš„æœ€åä¸€ä¸ªå·®å€¼ä¸ºé›¶ã€‚

**å­åºåˆ—** å¯ä»¥é€šè¿‡ä»åŸå§‹åºåˆ—ä¸­åˆ é™¤ä¸€äº›ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ï¼‰å…ƒç´ æ¥è·å¾—ï¼Œå‰©ä¸‹çš„å…ƒç´ ä¿æŒå…¶åŸå§‹é¡ºåºã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œè¿”å› `nums` ä¸­ä½œä¸º **æ‘†åŠ¨åºåˆ—** çš„ **æœ€é•¿å­åºåˆ—çš„é•¿åº¦** ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,7,4,9,2,5]
è¾“å‡ºï¼š6
è§£é‡Šï¼šæ•´ä¸ªåºåˆ—å‡ä¸ºæ‘†åŠ¨åºåˆ—ï¼Œå„å…ƒç´ ä¹‹é—´çš„å·®å€¼ä¸º (6, -3, 5, -7, 3) ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,17,5,10,13,15,10,5,16,8]
è¾“å‡ºï¼š7
è§£é‡Šï¼šè¿™ä¸ªåºåˆ—åŒ…å«å‡ ä¸ªé•¿åº¦ä¸º 7 æ‘†åŠ¨åºåˆ—ã€‚
å…¶ä¸­ä¸€ä¸ªæ˜¯ [1, 17, 10, 13, 10, 16, 8] ï¼Œå„å…ƒç´ ä¹‹é—´çš„å·®å€¼ä¸º (16, -7, 3, -3, 6, -8) ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3,4,5,6,7,8,9]
è¾“å‡ºï¼š2
```

**æç¤ºï¼š**

- `1 <= nums.length <= 1000`
- `0 <= nums[i] <= 1000`

**åˆè§ï¼Œæœ‰bugï¼Œä½†å¯ä»¥é€šè¿‡**

```java
class Solution {
    // è®¡ç®—æ•°ç»„ä¸­æ³¢å³°æ³¢è°·çš„æ•°é‡
    public int wiggleMaxLength(int[] nums) {
        // å¦‚æœæ•°ç»„é•¿åº¦ä¸º1ï¼Œåˆ™è¿”å›1
        if (nums.length == 1) {
            return 1;
        }
        // åˆå§‹åŒ–è®¡æ•°å™¨
        int count = 0;
        // è®¡ç®—ç¬¬äºŒä¸ªæ•°ä¸ç¬¬ä¸€ä¸ªæ•°çš„å·®å€¼
        int num = nums[1] - nums[0];
        // å¦‚æœå·®å€¼ä¸ä¸º0ï¼Œåˆ™è®¡æ•°å™¨åŠ 1
        if (num != 0) {
            count++;
        }
        // éå†æ•°ç»„ï¼Œä»ç¬¬ä¸‰ä¸ªæ•°å¼€å§‹
        for (int i = 2; i < nums.length; i++) {
            // å¦‚æœå½“å‰æ•°ä¸å‰ä¸€ä¸ªæ•°ç›¸ç­‰ï¼Œåˆ™è·³è¿‡
            if (nums[i] == nums[i - 1]) {
                continue;
            }
            // å¦‚æœå‰ä¸€ä¸ªå·®å€¼ä¸ä¸º0ï¼Œä¸”å½“å‰å·®å€¼ä¸å‰ä¸€ä¸ªå·®å€¼çš„ä¹˜ç§¯å°äº0ï¼Œæˆ–è€…å‰ä¸€ä¸ªå·®å€¼ä¸º0ï¼Œä¸”å½“å‰å·®å€¼ä¸å‰ä¸€ä¸ªå·®å€¼ä¸ç›¸ç­‰ï¼Œåˆ™è®¡æ•°å™¨åŠ 1
            if ((num != 0 && num * (nums[i] - nums[i - 1]) < 0) || (num == 0 && nums[i] - nums[i - 1] != 0)) {
                count++;
            }

            // æ›´æ–°å·®å€¼
            num = nums[i] - nums[i - 1];
        }
        // è¿”å›è®¡æ•°å™¨åŠ 1ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ•°ä¹Ÿç®—ä¸€ä¸ªæ³¢å³°æˆ–æ³¢è°·
        return count + 1;
    }
}
```

æ¯”è¾ƒå¥½è®°çš„ç­”æ¡ˆï¼Œæ¨èã€‚

```java
class Solution {
    // è®¡ç®—æ•°ç»„ä¸­æ³¢å³°æ³¢è°·çš„æ•°é‡
    public int wiggleMaxLength(int[] nums) {
        // å¦‚æœæ•°ç»„é•¿åº¦ä¸º1ï¼Œåˆ™è¿”å›1
        if (nums.length == 1) {
            return 1;
        }

        // åˆå§‹åŒ–upå’Œdownä¸º1
        int up = 1, down = 1;

        // éå†æ•°ç»„
        for (int i = 1; i < nums.length; i++) {
            // å¦‚æœå½“å‰å…ƒç´ å¤§äºå‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™upç­‰äºdownåŠ 1
            if (nums[i] > nums[i - 1]) {
                up = down + 1;
            // å¦‚æœå½“å‰å…ƒç´ å°äºå‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™downç­‰äºupåŠ 1
            } else if (nums[i] < nums[i - 1]) {
                down = up + 1;
            }
        }

        // è¿”å›upå’Œdownä¸­çš„è¾ƒå¤§å€¼
        return Math.max(up, down);
    }
}
```



### 53.æœ€å¤§å­æ•°ç»„å’Œ

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œè¯·ä½ æ‰¾å‡ºä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚

**å­æ•°ç»„** æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªè¿ç»­éƒ¨åˆ†ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [-2,1,-3,4,-1,2,1,-5,4]
è¾“å‡ºï¼š6
è§£é‡Šï¼šè¿ç»­å­æ•°ç»„ [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1]
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [5,4,-1,7,8]
è¾“å‡ºï¼š23
```



**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `-104 <= nums[i] <= 104`



**è¿›é˜¶ï¼š**å¦‚æœä½ å·²ç»å®ç°å¤æ‚åº¦ä¸º `O(n)` çš„è§£æ³•ï¼Œå°è¯•ä½¿ç”¨æ›´ä¸ºç²¾å¦™çš„ **åˆ†æ²»æ³•** æ±‚è§£ã€‚

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¡ç®—æ•°ç»„ä¸­æœ€å¤§å­æ•°ç»„çš„å’Œ
    public int maxSubArray(int[] nums) {
        // å®šä¹‰ä¸€ä¸ªå˜é‡sumï¼Œç”¨äºå­˜å‚¨å½“å‰å­æ•°ç»„çš„å’Œ
        int sum = 0;
        // å®šä¹‰ä¸€ä¸ªå˜é‡maxSumï¼Œç”¨äºå­˜å‚¨æœ€å¤§å­æ•°ç»„çš„å’Œï¼Œåˆå§‹å€¼ä¸ºIntegerçš„æœ€å°å€¼
        int maxSum = Integer.MIN_VALUE;
        // éå†æ•°ç»„
        for (int i = 0; i < nums.length; i++) {
            // å°†å½“å‰å…ƒç´ åŠ åˆ°sumä¸­
            sum = sum + nums[i];
            // å¦‚æœsumå¤§äºmaxSumï¼Œåˆ™æ›´æ–°maxSumçš„å€¼
            if (sum > maxSum) {
                maxSum = sum;
            }
            // å¦‚æœsumå°äº0ï¼Œåˆ™å°†sumé‡ç½®ä¸º0
            if (sum < 0) {
                sum = 0;
            }
        }
        // è¿”å›æœ€å¤§å­æ•°ç»„çš„å’Œ
        return maxSum;
    }
}
```



### 122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII

ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬  i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰ã€‚

æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚

ç¤ºä¾‹ 1:

- è¾“å…¥: [7,1,5,3,6,4]
- è¾“å‡º: 7
- è§£é‡Š: åœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 3 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5-1 = 4ã€‚éšåï¼Œåœ¨ç¬¬ 4 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 3ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6-3 = 3 ã€‚

ç¤ºä¾‹ 2:

- è¾“å…¥: [1,2,3,4,5]
- è¾“å‡º: 4
- è§£é‡Š: åœ¨ç¬¬ 1 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5-1 = 4 ã€‚æ³¨æ„ä½ ä¸èƒ½åœ¨ç¬¬ 1 å¤©å’Œç¬¬ 2 å¤©æ¥è¿è´­ä¹°è‚¡ç¥¨ï¼Œä¹‹åå†å°†å®ƒä»¬å–å‡ºã€‚å› ä¸ºè¿™æ ·å±äºåŒæ—¶å‚ä¸äº†å¤šç¬”äº¤æ˜“ï¼Œä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ã€‚

ç¤ºä¾‹  3:

- è¾“å…¥: [7,6,4,3,1]
- è¾“å‡º: 0
- è§£é‡Š: åœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚

**å±€éƒ¨æœ€ä¼˜ï¼šæ”¶é›†æ¯å¤©çš„æ­£åˆ©æ¶¦ï¼Œå…¨å±€æœ€ä¼˜ï¼šæ±‚å¾—æœ€å¤§åˆ©æ¶¦**ã€‚

```java
//è´ªå¿ƒç®—æ³•
// å®šä¹‰ä¸€ä¸ªSolutionç±»
prices[3] - prices[0]è¡¨ç¤ºä»ç¬¬4å¤©åˆ°ç¬¬1å¤©çš„åˆ©æ¶¦ï¼ŒåŒæ—¶å¯ä»¥æ‹†è§£ä¸ºprices[3] - prices[0] = (p3 - p2) + (p2 - p1) + (p1 - p0),è€Œprices[i] - prices[i - 1]æ˜¯ç›¸é‚»å¤©æ•°åˆ©æ¶¦ï¼Œå–æ¯å¤©ä¸ºæ­£å³å¯ã€‚
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¡ç®—ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº
    public int maxProfit(int[] prices) {
        // åˆå§‹åŒ–æœ€å¤§åˆ©æ¶¦ä¸º0
        int ans = 0;
        // éå†è‚¡ç¥¨ä»·æ ¼æ•°ç»„
        for (int i = 1; i < prices.length; ++i) {
            // è®¡ç®—å½“å‰ä»·æ ¼ä¸å‰ä¸€å¤©ä»·æ ¼çš„å·®å€¼ï¼Œå¦‚æœå·®å€¼å¤§äº0ï¼Œåˆ™å°†å·®å€¼ç´¯åŠ åˆ°æœ€å¤§åˆ©æ¶¦ä¸­
            ans += Math.max(0, prices[i] - prices[i - 1]);
        }
        // è¿”å›æœ€å¤§åˆ©æ¶¦
        return ans;
    }
}
```

### 55.è·³è·ƒæ¸¸æˆ

ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚

æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚

åˆ¤æ–­ä½ æ˜¯å¦èƒ½å¤Ÿåˆ°è¾¾æœ€åä¸€ä¸ªä½ç½®ã€‚

ç¤ºä¾‹  1:

- è¾“å…¥: [2,3,1,1,4]
- è¾“å‡º: true
- è§£é‡Š: æˆ‘ä»¬å¯ä»¥å…ˆè·³ 1 æ­¥ï¼Œä»ä½ç½® 0 åˆ°è¾¾ ä½ç½® 1, ç„¶åå†ä»ä½ç½® 1 è·³ 3 æ­¥åˆ°è¾¾æœ€åä¸€ä¸ªä½ç½®ã€‚

ç¤ºä¾‹  2:

- è¾“å…¥: [3,2,1,0,4]

- è¾“å‡º: false

- è§£é‡Š: æ— è®ºæ€æ ·ï¼Œä½ æ€»ä¼šåˆ°è¾¾ç´¢å¼•ä¸º 3 çš„ä½ç½®ã€‚ä½†è¯¥ä½ç½®çš„æœ€å¤§è·³è·ƒé•¿åº¦æ˜¯ 0 ï¼Œ æ‰€ä»¥ä½ æ°¸è¿œä¸å¯èƒ½åˆ°è¾¾æœ€åä¸€ä¸ªä½ç½®ã€‚

  **è´ªå¿ƒç®—æ³•å±€éƒ¨æœ€ä¼˜è§£ï¼šæ¯æ¬¡å–æœ€å¤§è·³è·ƒæ­¥æ•°ï¼ˆå–æœ€å¤§è¦†ç›–èŒƒå›´ï¼‰ï¼Œæ•´ä½“æœ€ä¼˜è§£ï¼šæœ€åå¾—åˆ°æ•´ä½“æœ€å¤§è¦†ç›–èŒƒå›´ï¼Œçœ‹æ˜¯å¦èƒ½åˆ°ç»ˆç‚¹**ã€‚

  å±€éƒ¨æœ€ä¼˜æ¨å‡ºå…¨å±€æœ€ä¼˜ï¼Œæ‰¾ä¸å‡ºåä¾‹ï¼Œè¯•è¯•è´ªå¿ƒï¼

  å¦‚å›¾ï¼š

  <img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20230203105634.png" alt="img" style="zoom: 50%;" />

```java
// å®šä¹‰ä¸€ä¸ªåä¸ºSolutionçš„ç±»
class Solution {
    // å®šä¹‰ä¸€ä¸ªåä¸ºcanJumpçš„å…¬å…±æ–¹æ³•ï¼Œè¿”å›å€¼ä¸ºå¸ƒå°”ç±»å‹ï¼Œå‚æ•°ä¸ºä¸€ä¸ªæ•´å‹æ•°ç»„nums
    public boolean canJump(int[] nums) {
        // å®šä¹‰ä¸€ä¸ªæ•´å‹å˜é‡coverï¼Œåˆå§‹å€¼ä¸º0ï¼Œè¡¨ç¤ºå½“å‰èƒ½å¤Ÿè¦†ç›–çš„æœ€è¿œè·ç¦»
        int cover = 0;
        // ä½¿ç”¨forå¾ªç¯éå†æ•°ç»„numsï¼Œå¾ªç¯æ¡ä»¶ä¸ºiå°äºç­‰äºcover
        for (int i = 0; i <= cover; i++) {
            // æ›´æ–°coverçš„å€¼ï¼Œå–å½“å‰coverå’Œi+nums[i]çš„è¾ƒå¤§å€¼
            cover = Math.max(cover, i + nums[i]);
            // å¦‚æœcoverå¤§äºç­‰äºæ•°ç»„é•¿åº¦å‡1ï¼Œè¯´æ˜å¯ä»¥è·³åˆ°æœ€åä¸€ä¸ªä½ç½®ï¼Œè¿”å›true
            if (cover >= nums.length - 1) {
                return true;
            }
        }
        // å¾ªç¯ç»“æŸåï¼Œå¦‚æœæ²¡æœ‰è¿”å›trueï¼Œåˆ™è¿”å›false
        return false;
    }
}
```

### 45.è·³è·ƒæ¸¸æˆII

ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚

æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚

ä½ çš„ç›®æ ‡æ˜¯ä½¿ç”¨æœ€å°‘çš„è·³è·ƒæ¬¡æ•°åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚

ç¤ºä¾‹:

- è¾“å…¥: [2,3,1,1,4]
- è¾“å‡º: 2
- è§£é‡Š: è·³åˆ°æœ€åä¸€ä¸ªä½ç½®çš„æœ€å°è·³è·ƒæ•°æ˜¯ 2ã€‚ä»ä¸‹æ ‡ä¸º 0 è·³åˆ°ä¸‹æ ‡ä¸º 1 çš„ä½ç½®ï¼Œè·³  1 æ­¥ï¼Œç„¶åè·³  3 æ­¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚

è¯´æ˜: å‡è®¾ä½ æ€»æ˜¯å¯ä»¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¡ç®—è·³è·ƒæ¬¡æ•°
    public int jump(int[] nums) {
        // å¦‚æœæ•°ç»„é•¿åº¦ä¸º1ï¼Œåˆ™ä¸éœ€è¦è·³è·ƒï¼Œè¿”å›0
        if (nums.length == 1) {
            return 0;
        }
        // å®šä¹‰å½“å‰è¦†ç›–èŒƒå›´
        int currentCover = 0;
        // å®šä¹‰ä¸‹ä¸€ä¸ªè¦†ç›–èŒƒå›´
        int nextCover = 0;
        // å®šä¹‰è·³è·ƒæ¬¡æ•°
        int count = 0;
        // éå†æ•°ç»„
        for (int i = 0; i < nums.length; i++) {
            // æ›´æ–°ä¸‹ä¸€ä¸ªè¦†ç›–èŒƒå›´
            nextCover = Math.max(nextCover, i + nums[i]);
            // å¦‚æœå½“å‰è¦†ç›–èŒƒå›´ç­‰äºå½“å‰ä½ç½®
            if (i == currentCover) {
                // è·³è·ƒæ¬¡æ•°åŠ 1
                count++;
                // æ›´æ–°å½“å‰è¦†ç›–èŒƒå›´
                currentCover = nextCover;
                // å¦‚æœå½“å‰è¦†ç›–èŒƒå›´å¤§äºç­‰äºæ•°ç»„é•¿åº¦å‡1ï¼Œåˆ™è·³å‡ºå¾ªç¯
                if (currentCover >= nums.length - 1) {
                    break;
                }
            }
        }
        // è¿”å›è·³è·ƒæ¬¡æ•°
        return count;
    }
}
```

è¯¥é—®é¢˜è§£æ³•æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œè´ªå¿ƒç­–ç•¥å¦‚ä¸‹ï¼š

1. **å®šä¹‰å½“å‰è·³è·ƒçš„èŒƒå›´**ï¼š`currentCover` è¡¨ç¤ºå½“å‰è·³è·ƒèŒƒå›´çš„æœ€è¿œä½ç½®ï¼Œ`nextCover` è¡¨ç¤ºåœ¨ä¸‹ä¸€è·³ä¸­èƒ½å¤Ÿåˆ°è¾¾çš„æœ€è¿œä½ç½®ã€‚
2. **æ¯æ¬¡éƒ½è·³åˆ°èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®**ï¼šåœ¨éå†æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬ä¸æ–­æ›´æ–° `nextCover`ï¼Œå³åœ¨å½“å‰ä½ç½®èƒ½è·³åˆ°çš„æœ€è¿œä½ç½®ã€‚æ¯å½“åˆ°è¾¾ `currentCover` æ—¶ï¼Œæ„å‘³ç€éœ€è¦è·³è·ƒä¸€æ¬¡ï¼Œæ›´æ–° `currentCover` ä¸º `nextCover`ã€‚
3. **ç»ˆæ­¢æ¡ä»¶**ï¼šä¸€æ—¦ `currentCover` è¾¾åˆ°æˆ–è¶…è¿‡äº†ç›®æ ‡ä½ç½® `nums.length - 1`ï¼Œè¯´æ˜å·²ç»èƒ½å¤Ÿåˆ°è¾¾æ•°ç»„çš„æœ€åä½ç½®ï¼Œè·³è·ƒçš„æ¬¡æ•°å·²ç»å¾—å‡ºã€‚

æ¯æ¬¡é€‰æ‹©è·³åˆ°å½“å‰è·³è·ƒèŒƒå›´å†…èƒ½åˆ°è¾¾çš„æœ€è¿œä½ç½®ã€‚è¿™ä¿è¯äº†æˆ‘ä»¬æ¯æ¬¡éƒ½åœ¨å°½å¯èƒ½è¿œçš„åœ°æ–¹è¿›è¡Œè·³è·ƒï¼Œä»è€Œå‡å°‘è·³è·ƒæ¬¡æ•°ã€‚



### 1005. Kæ¬¡å–ååæœ€å¤§åŒ–çš„æ•°ç»„å’Œ

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ Aï¼Œæˆ‘ä»¬åªèƒ½ç”¨ä»¥ä¸‹æ–¹æ³•ä¿®æ”¹è¯¥æ•°ç»„ï¼šæˆ‘ä»¬é€‰æ‹©æŸä¸ªç´¢å¼• i å¹¶å°† A[i] æ›¿æ¢ä¸º -A[i]ï¼Œç„¶åæ€»å…±é‡å¤è¿™ä¸ªè¿‡ç¨‹ K æ¬¡ã€‚ï¼ˆæˆ‘ä»¬å¯ä»¥å¤šæ¬¡é€‰æ‹©åŒä¸€ä¸ªç´¢å¼• iã€‚ï¼‰

ä»¥è¿™ç§æ–¹å¼ä¿®æ”¹æ•°ç»„åï¼Œè¿”å›æ•°ç»„å¯èƒ½çš„æœ€å¤§å’Œã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šA = [4,2,3], K = 1
- è¾“å‡ºï¼š5
- è§£é‡Šï¼šé€‰æ‹©ç´¢å¼• (1,) ï¼Œç„¶å A å˜ä¸º [4,-2,3]ã€‚

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šA = [3,-1,0,2], K = 3
- è¾“å‡ºï¼š6
- è§£é‡Šï¼šé€‰æ‹©ç´¢å¼• (1, 2, 2) ï¼Œç„¶å A å˜ä¸º [3,1,0,2]ã€‚

ç¤ºä¾‹ 3ï¼š

- è¾“å…¥ï¼šA = [2,-3,-1,5,-4], K = 2
- è¾“å‡ºï¼š13
- è§£é‡Šï¼šé€‰æ‹©ç´¢å¼• (1, 4) ï¼Œç„¶å A å˜ä¸º [2,3,-1,5,4]ã€‚

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¡ç®—æ•°ç»„ä¸­å…ƒç´ ç»è¿‡kæ¬¡å–ååçš„æœ€å¤§å’Œ
    public int largestSumAfterKNegations(int[] nums, int k) {
        // å¯¹æ•°ç»„è¿›è¡Œæ’åº
        Arrays.sort(nums);
        // éå†æ•°ç»„ï¼Œå¦‚æœå…ƒç´ å°äºç­‰äº0ä¸”kå¤§äº0ï¼Œåˆ™å°†å…ƒç´ å–åï¼Œå¹¶å°†kå‡1
        for (int i = 0;i < nums.length && nums[i] <= 0 && k > 0; i++, k--) {
            // å¦‚æœå…ƒç´ ç­‰äº0ï¼Œåˆ™ç›´æ¥è¿”å›æ•°ç»„çš„å’Œ
            if (nums[i] == 0) {
                return Arrays.stream(nums).sum();
            }
            // å°†å…ƒç´ å–å
            nums[i] = -nums[i];
        }
        // å†æ¬¡å¯¹æ•°ç»„è¿›è¡Œæ’åº
        Arrays.sort(nums);
        // å¦‚æœkä¸ºå¶æ•°ï¼Œåˆ™è¿”å›æ•°ç»„çš„å’Œ
        return k % 2 == 0 ? Arrays.stream(nums).sum() : Arrays.stream(nums).sum() - (2 * nums[0]);
    }
}
```

### 134.åŠ æ²¹ç«™

åœ¨ä¸€æ¡ç¯è·¯ä¸Šæœ‰ N ä¸ªåŠ æ²¹ç«™ï¼Œå…¶ä¸­ç¬¬ i ä¸ªåŠ æ²¹ç«™æœ‰æ±½æ²¹ gas[i] å‡ã€‚

ä½ æœ‰ä¸€è¾†æ²¹ç®±å®¹é‡æ— é™çš„çš„æ±½è½¦ï¼Œä»ç¬¬ i ä¸ªåŠ æ²¹ç«™å¼€å¾€ç¬¬ i+1 ä¸ªåŠ æ²¹ç«™éœ€è¦æ¶ˆè€—æ±½æ²¹ cost[i] å‡ã€‚ä½ ä»å…¶ä¸­çš„ä¸€ä¸ªåŠ æ²¹ç«™å‡ºå‘ï¼Œå¼€å§‹æ—¶æ²¹ç®±ä¸ºç©ºã€‚

å¦‚æœä½ å¯ä»¥ç»•ç¯è·¯è¡Œé©¶ä¸€å‘¨ï¼Œåˆ™è¿”å›å‡ºå‘æ—¶åŠ æ²¹ç«™çš„ç¼–å·ï¼Œå¦åˆ™è¿”å› -1ã€‚

è¯´æ˜:

- å¦‚æœé¢˜ç›®æœ‰è§£ï¼Œè¯¥ç­”æ¡ˆå³ä¸ºå”¯ä¸€ç­”æ¡ˆã€‚
- è¾“å…¥æ•°ç»„å‡ä¸ºéç©ºæ•°ç»„ï¼Œä¸”é•¿åº¦ç›¸åŒã€‚
- è¾“å…¥æ•°ç»„ä¸­çš„å…ƒç´ å‡ä¸ºéè´Ÿæ•°ã€‚

ç¤ºä¾‹ 1: è¾“å…¥:

- gas = [1,2,3,4,5]
- cost = [3,4,5,1,2]

è¾“å‡º: 3 è§£é‡Š:

- ä» 3 å·åŠ æ²¹ç«™(ç´¢å¼•ä¸º 3 å¤„)å‡ºå‘ï¼Œå¯è·å¾— 4 å‡æ±½æ²¹ã€‚æ­¤æ—¶æ²¹ç®±æœ‰ = 0 + 4 = 4 å‡æ±½æ²¹
- å¼€å¾€ 4 å·åŠ æ²¹ç«™ï¼Œæ­¤æ—¶æ²¹ç®±æœ‰ 4 - 1 + 5 = 8 å‡æ±½æ²¹
- å¼€å¾€ 0 å·åŠ æ²¹ç«™ï¼Œæ­¤æ—¶æ²¹ç®±æœ‰ 8 - 2 + 1 = 7 å‡æ±½æ²¹
- å¼€å¾€ 1 å·åŠ æ²¹ç«™ï¼Œæ­¤æ—¶æ²¹ç®±æœ‰ 7 - 3 + 2 = 6 å‡æ±½æ²¹
- å¼€å¾€ 2 å·åŠ æ²¹ç«™ï¼Œæ­¤æ—¶æ²¹ç®±æœ‰ 6 - 4 + 3 = 5 å‡æ±½æ²¹
- å¼€å¾€ 3 å·åŠ æ²¹ç«™ï¼Œä½ éœ€è¦æ¶ˆè€— 5 å‡æ±½æ²¹ï¼Œæ­£å¥½è¶³å¤Ÿä½ è¿”å›åˆ° 3 å·åŠ æ²¹ç«™ã€‚
- å› æ­¤ï¼Œ3 å¯ä¸ºèµ·å§‹ç´¢å¼•ã€‚

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ¤æ–­æ˜¯å¦èƒ½å®Œæˆä¸€åœˆ
    public int canCompleteCircuit(int[] gas, int[] cost) {
        // å®šä¹‰æ€»æ²¹é‡
        int totalOre = 0;
        // å®šä¹‰å½“å‰æ²¹é‡
        int currentOre = 0;
        // å®šä¹‰èµ·å§‹ç´¢å¼•
        int startIndex = 0;
        // éå†æ•°ç»„
        for (int i = 0; i < gas.length; i++) {
            // å½“å‰æ²¹é‡ç­‰äºå½“å‰æ²¹é‡åŠ ä¸Šå½“å‰åŠ æ²¹ç«™æä¾›çš„æ²¹é‡å‡å»å½“å‰åŠ æ²¹ç«™æ¶ˆè€—çš„æ²¹é‡
            currentOre = currentOre + gas[i] - cost[i];
            // æ€»æ²¹é‡ç­‰äºæ€»æ²¹é‡åŠ ä¸Šå½“å‰åŠ æ²¹ç«™æä¾›çš„æ²¹é‡å‡å»å½“å‰åŠ æ²¹ç«™æ¶ˆè€—çš„æ²¹é‡
            totalOre = totalOre + gas[i] - cost[i];
            // å¦‚æœå½“å‰æ²¹é‡å°äº0ï¼Œè¯´æ˜ä»å½“å‰åŠ æ²¹ç«™å‡ºå‘æ— æ³•å®Œæˆä¸€åœˆï¼Œå°†èµ·å§‹ç´¢å¼•è®¾ä¸ºä¸‹ä¸€ä¸ªåŠ æ²¹ç«™ï¼Œå½“å‰æ²¹é‡ç½®ä¸º0
            if (currentOre < 0) {
                startIndex = i + 1;
                currentOre = 0;
            }
        }
        // å¦‚æœæ€»æ²¹é‡å°äº0ï¼Œè¯´æ˜æ— æ³•å®Œæˆä¸€åœˆï¼Œè¿”å›-1
        if (totalOre < 0) {
            return -1;
        }
        // è¿”å›èµ·å§‹ç´¢å¼•
        return startIndex;
    }
}
```



è¿™é“é¢˜çš„è´ªå¿ƒç­–ç•¥çš„å…³é”®ç‚¹åœ¨äºï¼š

1. ç´¯è®¡æ²¹é‡ï¼šéå†æ‰€æœ‰åŠ æ²¹ç«™æ—¶ï¼Œæˆ‘ä»¬ç»´æŠ¤ä¸¤ä¸ªå˜é‡ï¼š
   - `currentOre`ï¼šå½“å‰ä»æŸä¸ªåŠ æ²¹ç«™å¼€å§‹è¡Œé©¶æ—¶ï¼Œæ±½è½¦çš„æ²¹é‡ã€‚
   - `totalOre`ï¼šå…¨å±€æ²¹é‡ï¼Œè®°å½•æ•´ä¸ªè¡Œç¨‹çš„æ²¹é‡å˜åŒ–ï¼ˆæ€»æ²¹é‡ï¼‰ã€‚
2. å¦‚æœå½“å‰æ²¹é‡ä¸ºè´Ÿï¼Œè¯´æ˜ä»å½“å‰åŠ æ²¹ç«™å‡ºå‘ï¼Œæ±½è½¦æ— æ³•åˆ°è¾¾ä¸‹ä¸€ä¸ªåŠ æ²¹ç«™ã€‚å› æ­¤ï¼Œå½“å‰çš„èµ·ç‚¹ä¸åˆé€‚ï¼Œéœ€è¦å°†èµ·ç‚¹è°ƒæ•´ä¸ºä¸‹ä¸€ä¸ªåŠ æ²¹ç«™ã€‚è°ƒæ•´èµ·ç‚¹æ—¶ï¼š
   - å°† `currentOre` é‡ç½®ä¸º 0ï¼Œå› ä¸ºå¦‚æœå½“å‰æ²¹é‡ä¸è¶³ï¼Œè¯´æ˜ä»å½“å‰åŠ æ²¹ç«™å‡ºå‘å·²ç»å¤±è´¥ï¼Œæ–°çš„èµ·ç‚¹åº”è¯¥æ˜¯ä¸‹ä¸€ä¸ªåŠ æ²¹ç«™ã€‚
3. **æ€»æ²¹é‡åˆ¤æ–­**ï¼šå¦‚æœæ‰€æœ‰åŠ æ²¹ç«™çš„æ€»æ²¹é‡ï¼ˆ`totalOre`ï¼‰å°äº 0ï¼Œæ„å‘³ç€å³ä½¿ä»æŸä¸ªèµ·ç‚¹å‡ºå‘ï¼Œä¹Ÿæ²¡æœ‰è¶³å¤Ÿçš„æ²¹é‡å®Œæˆæ•´ä¸ªç¯è·¯ã€‚æ‰€ä»¥å¦‚æœ `totalOre < 0`ï¼Œè¿”å› -1ã€‚



### 135.åˆ†å‘ç³–æœ



`n` ä¸ªå­©å­ç«™æˆä¸€æ’ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `ratings` è¡¨ç¤ºæ¯ä¸ªå­©å­çš„è¯„åˆ†ã€‚

ä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹è¦æ±‚ï¼Œç»™è¿™äº›å­©å­åˆ†å‘ç³–æœï¼š

- æ¯ä¸ªå­©å­è‡³å°‘åˆ†é…åˆ° `1` ä¸ªç³–æœã€‚
- ç›¸é‚»ä¸¤ä¸ªå­©å­è¯„åˆ†æ›´é«˜çš„å­©å­ä¼šè·å¾—æ›´å¤šçš„ç³–æœã€‚

è¯·ä½ ç»™æ¯ä¸ªå­©å­åˆ†å‘ç³–æœï¼Œè®¡ç®—å¹¶è¿”å›éœ€è¦å‡†å¤‡çš„ **æœ€å°‘ç³–æœæ•°ç›®** ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šratings = [1,0,2]
è¾“å‡ºï¼š5
è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå­©å­åˆ†å‘ 2ã€1ã€2 é¢—ç³–æœã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šratings = [1,2,2]
è¾“å‡ºï¼š4
è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå­©å­åˆ†å‘ 1ã€2ã€1 é¢—ç³–æœã€‚
     ç¬¬ä¸‰ä¸ªå­©å­åªå¾—åˆ° 1 é¢—ç³–æœï¼Œè¿™æ»¡è¶³é¢˜é¢ä¸­çš„ä¸¤ä¸ªæ¡ä»¶ã€‚
```

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¡ç®—ç³–æœæ•°é‡
    public int candy(int[] ratings) {
        // å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªå­©å­å¾—åˆ°çš„ç³–æœæ•°é‡
        int[] result = new int[ratings.length];
        // åˆå§‹åŒ–æ¯ä¸ªå­©å­å¾—åˆ°çš„ç³–æœæ•°é‡ä¸º1
        for (int i = 0; i < result.length; i++) {
            result[i] = 1;
        }
        // ä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œå¦‚æœå½“å‰å­©å­çš„è¯„åˆ†æ¯”å‰ä¸€ä¸ªå­©å­é«˜ï¼Œåˆ™å½“å‰å­©å­å¾—åˆ°çš„ç³–æœæ•°é‡ä¸ºå‰ä¸€ä¸ªå­©å­å¾—åˆ°çš„ç³–æœæ•°é‡åŠ 1
        for (int i = 1; i < ratings.length; i++) {
            if (ratings[i] > ratings[i - 1]) {
                result[i] = result[i - 1] + 1;
            }
        }

        // ä»å³åˆ°å·¦éå†æ•°ç»„ï¼Œå¦‚æœå½“å‰å­©å­çš„è¯„åˆ†æ¯”åä¸€ä¸ªå­©å­é«˜ï¼Œåˆ™å½“å‰å­©å­å¾—åˆ°çš„ç³–æœæ•°é‡ä¸ºå‰ä¸€ä¸ªå­©å­å¾—åˆ°çš„ç³–æœæ•°é‡åŠ 1
        for (int i = result.length - 2; i >= 0; i--) {
            if (ratings[i] > ratings[i + 1]) {
                result[i] = Math.max(result[i], result[i + 1] + 1);
            }
        }
        // è¿”å›æ‰€æœ‰å­©å­å¾—åˆ°çš„ç³–æœæ•°é‡ä¹‹å’Œ
        return Arrays.stream(result).sum();
    }
}
```

### 860.æŸ æª¬æ°´æ‰¾é›¶

åœ¨æŸ æª¬æ°´æ‘Šä¸Šï¼Œæ¯ä¸€æ¯æŸ æª¬æ°´çš„å”®ä»·ä¸º `5` ç¾å…ƒã€‚é¡¾å®¢æ’é˜Ÿè´­ä¹°ä½ çš„äº§å“ï¼Œï¼ˆæŒ‰è´¦å• `bills` æ”¯ä»˜çš„é¡ºåºï¼‰ä¸€æ¬¡è´­ä¹°ä¸€æ¯ã€‚

æ¯ä½é¡¾å®¢åªä¹°ä¸€æ¯æŸ æª¬æ°´ï¼Œç„¶åå‘ä½ ä»˜ `5` ç¾å…ƒã€`10` ç¾å…ƒæˆ– `20` ç¾å…ƒã€‚ä½ å¿…é¡»ç»™æ¯ä¸ªé¡¾å®¢æ­£ç¡®æ‰¾é›¶ï¼Œä¹Ÿå°±æ˜¯è¯´å‡€äº¤æ˜“æ˜¯æ¯ä½é¡¾å®¢å‘ä½ æ”¯ä»˜ `5` ç¾å…ƒã€‚

æ³¨æ„ï¼Œä¸€å¼€å§‹ä½ æ‰‹å¤´æ²¡æœ‰ä»»ä½•é›¶é’±ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `bills` ï¼Œå…¶ä¸­ `bills[i]` æ˜¯ç¬¬ `i` ä½é¡¾å®¢ä»˜çš„è´¦ã€‚å¦‚æœä½ èƒ½ç»™æ¯ä½é¡¾å®¢æ­£ç¡®æ‰¾é›¶ï¼Œè¿”å› `true` ï¼Œå¦åˆ™è¿”å› `false` ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šbills = [5,5,5,10,20]
è¾“å‡ºï¼štrue
è§£é‡Šï¼š
å‰ 3 ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æŒ‰é¡ºåºæ”¶å– 3 å¼  5 ç¾å…ƒçš„é’ç¥¨ã€‚
ç¬¬ 4 ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æ”¶å–ä¸€å¼  10 ç¾å…ƒçš„é’ç¥¨ï¼Œå¹¶è¿”è¿˜ 5 ç¾å…ƒã€‚
ç¬¬ 5 ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æ‰¾è¿˜ä¸€å¼  10 ç¾å…ƒçš„é’ç¥¨å’Œä¸€å¼  5 ç¾å…ƒçš„é’ç¥¨ã€‚
ç”±äºæ‰€æœ‰å®¢æˆ·éƒ½å¾—åˆ°äº†æ­£ç¡®çš„æ‰¾é›¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¾“å‡º trueã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šbills = [5,5,10,10,20]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼š
å‰ 2 ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æŒ‰é¡ºåºæ”¶å– 2 å¼  5 ç¾å…ƒçš„é’ç¥¨ã€‚
å¯¹äºæ¥ä¸‹æ¥çš„ 2 ä½é¡¾å®¢ï¼Œæˆ‘ä»¬æ”¶å–ä¸€å¼  10 ç¾å…ƒçš„é’ç¥¨ï¼Œç„¶åè¿”è¿˜ 5 ç¾å…ƒã€‚
å¯¹äºæœ€åä¸€ä½é¡¾å®¢ï¼Œæˆ‘ä»¬æ— æ³•é€€å› 15 ç¾å…ƒï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨åªæœ‰ä¸¤å¼  10 ç¾å…ƒçš„é’ç¥¨ã€‚
ç”±äºä¸æ˜¯æ¯ä½é¡¾å®¢éƒ½å¾—åˆ°äº†æ­£ç¡®çš„æ‰¾é›¶ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ falseã€‚
```

```java
/**
 * è§£å†³æ–¹æ¡ˆç±»ï¼Œç”¨äºå¤„ç†æŸ æª¬æ°´æ‰¾é›¶é—®é¢˜
 */
class Solution {
    /**
     * æ£€æŸ¥æ˜¯å¦èƒ½å¤Ÿç»™æ¯ä¸ªé¡¾å®¢æ­£ç¡®æ‰¾é›¶
     * 
     * @param bills é¡¾å®¢æ”¯ä»˜çš„é’ç¥¨æ•°ç»„ï¼Œåªèƒ½æ˜¯5ã€10æˆ–20ç¾å…ƒ
     * @return å¦‚æœèƒ½ç»™æ¯ä¸ªé¡¾å®¢æ­£ç¡®æ‰¾é›¶ï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™è¿”å›false
     */
    public boolean lemonadeChange(int[] bills) {
        // fiveå’Œtenåˆ†åˆ«è®°å½•å½“å‰æ‹¥æœ‰çš„5ç¾å…ƒå’Œ10ç¾å…ƒé’ç¥¨çš„æ•°é‡
        int five = 0, ten = 0;
        
        // éå†æ¯ä¸ªé¡¾å®¢æ”¯ä»˜çš„é’ç¥¨
        for (int i = 0; i < bills.length; i++) {
            // å½“é¡¾å®¢æ”¯ä»˜20ç¾å…ƒæ—¶
            if (bills[i] == 20) {
                // å¦‚æœæœ‰10ç¾å…ƒé’ç¥¨ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨10ç¾å…ƒå’Œ5ç¾å…ƒæ‰¾é›¶
                if (ten > 0) {
                    ten--;
                    five--;
                } else {
                    // æ²¡æœ‰10ç¾å…ƒé’ç¥¨æ—¶ï¼Œä½¿ç”¨ä¸‰å¼ 5ç¾å…ƒæ‰¾é›¶
                    five = five - 3;
                }
            } else if (bills[i] == 10) {
                // å½“é¡¾å®¢æ”¯ä»˜10ç¾å…ƒæ—¶ï¼Œä½¿ç”¨5ç¾å…ƒæ‰¾é›¶ï¼Œå¹¶å°†10ç¾å…ƒæ”¶ä¸‹
                ten++;
                five--;
            } else {
                // å½“é¡¾å®¢æ”¯ä»˜5ç¾å…ƒæ—¶ï¼Œæ— éœ€æ‰¾é›¶ï¼Œç›´æ¥æ”¶ä¸‹
                five++;
            }
            // å¦‚æœåœ¨ä»»ä½•æ—¶åˆ»5ç¾å…ƒæˆ–10ç¾å…ƒçš„æ•°é‡å°äº0ï¼Œè¯´æ˜æ— æ³•ç»™æ¯ä¸ªé¡¾å®¢æ­£ç¡®æ‰¾é›¶
            if (ten < 0 || five < 0) {
                return false;
            }
        }
        // å¦‚æœèƒ½éå†å®Œæ‰€æœ‰é¡¾å®¢å¹¶ç»™æ¯ä¸ªäººæ­£ç¡®æ‰¾é›¶ï¼Œåˆ™è¿”å›true
        return true;
    }
}
```

### 406.æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—

å‡è®¾æœ‰æ‰“ä¹±é¡ºåºçš„ä¸€ç¾¤äººç«™æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ•°ç»„ people è¡¨ç¤ºé˜Ÿåˆ—ä¸­ä¸€äº›äººçš„å±æ€§ï¼ˆä¸ä¸€å®šæŒ‰é¡ºåºï¼‰ã€‚æ¯ä¸ª people[i] = [hi, ki] è¡¨ç¤ºç¬¬ i ä¸ªäººçš„èº«é«˜ä¸º hi ï¼Œå‰é¢ æ­£å¥½ æœ‰ ki ä¸ªèº«é«˜å¤§äºæˆ–ç­‰äº hi çš„äººã€‚

è¯·ä½ é‡æ–°æ„é€ å¹¶è¿”å›è¾“å…¥æ•°ç»„ people æ‰€è¡¨ç¤ºçš„é˜Ÿåˆ—ã€‚è¿”å›çš„é˜Ÿåˆ—åº”è¯¥æ ¼å¼åŒ–ä¸ºæ•°ç»„ queue ï¼Œå…¶ä¸­ queue[j] = [hj, kj] æ˜¯é˜Ÿåˆ—ä¸­ç¬¬ j ä¸ªäººçš„å±æ€§ï¼ˆqueue[0] æ˜¯æ’åœ¨é˜Ÿåˆ—å‰é¢çš„äººï¼‰ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼špeople = [[7,0],[4,4],[7,1],[5,0],[6,1],[5,2]]
- è¾“å‡ºï¼š[[5,0],[7,0],[5,2],[6,1],[4,4],[7,1]]
- è§£é‡Šï¼š
  - ç¼–å·ä¸º 0 çš„äººèº«é«˜ä¸º 5 ï¼Œæ²¡æœ‰èº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ã€‚
  - ç¼–å·ä¸º 1 çš„äººèº«é«˜ä¸º 7 ï¼Œæ²¡æœ‰èº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ã€‚
  - ç¼–å·ä¸º 2 çš„äººèº«é«˜ä¸º 5 ï¼Œæœ‰ 2 ä¸ªèº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ï¼Œå³ç¼–å·ä¸º 0 å’Œ 1 çš„äººã€‚
  - ç¼–å·ä¸º 3 çš„äººèº«é«˜ä¸º 6 ï¼Œæœ‰ 1 ä¸ªèº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ï¼Œå³ç¼–å·ä¸º 1 çš„äººã€‚
  - ç¼–å·ä¸º 4 çš„äººèº«é«˜ä¸º 4 ï¼Œæœ‰ 4 ä¸ªèº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ï¼Œå³ç¼–å·ä¸º 0ã€1ã€2ã€3 çš„äººã€‚
  - ç¼–å·ä¸º 5 çš„äººèº«é«˜ä¸º 7 ï¼Œæœ‰ 1 ä¸ªèº«é«˜æ›´é«˜æˆ–è€…ç›¸åŒçš„äººæ’åœ¨ä»–å‰é¢ï¼Œå³ç¼–å·ä¸º 1 çš„äººã€‚
  - å› æ­¤ [[5,0],[7,0],[5,2],[6,1],[4,4],[7,1]] æ˜¯é‡æ–°æ„é€ åçš„é˜Ÿåˆ—ã€‚



åˆè§ï¼ŒåŸåœ°ç§»åŠ¨æ•°ç»„ï¼Œä¸å¤ªå¥½è®°ã€‚

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºé‡æ„é˜Ÿåˆ—
    public int[][] reconstructQueue(int[][] people) {
        // å¯¹peopleæ•°ç»„è¿›è¡Œæ’åºï¼ŒæŒ‰ç…§hiä»å¤§åˆ°å°æ’åºï¼Œå¦‚æœhiç›¸åŒï¼Œåˆ™æŒ‰ç…§kiä»å°åˆ°å¤§æ’åº
        Arrays.sort(people, (a, b) -> {
            if (a[0] != b[0]) {
                return b[0] - a[0]; // hiä»å¤§åˆ°å°æ’åº
            } else {
                return a[1] - b[1]; // kiä»å°åˆ°å¤§æ’åº
            }
        });

        // éå†æ’åºåçš„æ•°ç»„
        for (int i = 0; i < people.length; i++) {
            // è·å–å½“å‰å…ƒç´ çš„æ’å…¥ä½ç½®
            int insertPos = people[i][1];
            // å¦‚æœæ’å…¥ä½ç½®ä¸ç­‰äºå½“å‰ç´¢å¼•ï¼Œåˆ™è¿›è¡Œæ’å…¥æ“ä½œ
            if (insertPos != i) {
                // å®šä¹‰ä¸€ä¸ªä¸´æ—¶æ•°ç»„ï¼Œç”¨äºå­˜å‚¨å½“å‰å…ƒç´ 
                int[] tempArray = people[i];
                // å°†å½“å‰å…ƒç´ åé¢çš„å…ƒç´ ä¾æ¬¡å‘åç§»åŠ¨ä¸€ä½
                for (int j = i; j > insertPos; j--) {
                    people[j] = people[j - 1];
                }
                // å°†å½“å‰å…ƒç´ æ’å…¥åˆ°æ­£ç¡®çš„ä½ç½®
                people[insertPos] = tempArray;
            }
        }
        // è¿”å›é‡æ„åçš„é˜Ÿåˆ—
        return people;
    }
}
```



è¿™ä¸ªå¾ˆæ–¹ä¾¿ã€‚æ¨èè®°å¿†

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºé‡æ„é˜Ÿåˆ—
    public int[][] reconstructQueue(int[][] people) {
        // å¯¹peopleæ•°ç»„è¿›è¡Œæ’åºï¼ŒæŒ‰ç…§hiä»å¤§åˆ°å°æ’åºï¼Œå¦‚æœhiç›¸åŒï¼Œåˆ™æŒ‰ç…§kiä»å°åˆ°å¤§æ’åº
        Arrays.sort(people, (a, b) -> {
            if (a[0] != b[0]) {
                return b[0] - a[0]; // hiä»å¤§åˆ°å°æ’åº
            } else {
                return a[1] - b[1]; // kiä»å°åˆ°å¤§æ’åº
            }
        });

        // å®šä¹‰ä¸€ä¸ªListï¼Œç”¨äºå­˜å‚¨ç»“æœ
        List<int[]> result = new LinkedList<>();
        // éå†peopleæ•°ç»„
        for (int i = 0; i < people.length; i++) {
            // å°†people[i]æ’å…¥åˆ°resultçš„kiä½ç½®
            result.add(people[i][1], people[i]);
        }
        // å°†resultè½¬æ¢ä¸ºäºŒç»´æ•°ç»„å¹¶è¿”å›
        return result.toArray(new int[people.length][2]);
    }
}
```



### 452.ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ

ç»™ä½ ä¸€ä¸ªæ•°ç»„ points ï¼Œå…¶ä¸­ points [i] = [xstart,xend] ï¼Œè¿”å›å¼•çˆ†æ‰€æœ‰æ°”çƒæ‰€å¿…é¡»å°„å‡ºçš„æœ€å°å¼“ç®­æ•°ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼špoints = [[10,16],[2,8],[1,6],[7,12]]
- è¾“å‡ºï¼š2
- è§£é‡Šï¼šå¯¹äºè¯¥æ ·ä¾‹ï¼Œx = 6 å¯ä»¥å°„çˆ† [2,8],[1,6] ä¸¤ä¸ªæ°”çƒï¼Œä»¥åŠ x = 11 å°„çˆ†å¦å¤–ä¸¤ä¸ªæ°”çƒ

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ‰¾åˆ°æœ€å°‘çš„ç®­å°„æ•°
    public int findMinArrowShots(int[][] points) {
        // å¯¹pointsæ•°ç»„è¿›è¡Œæ’åºï¼ŒæŒ‰ç…§æ¯ä¸ªæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¿›è¡Œå‡åºæ’åºï¼Œå¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ ç›¸ç­‰ï¼Œåˆ™æŒ‰ç…§ç¬¬äºŒä¸ªå…ƒç´ è¿›è¡Œå‡åºæ’åºï¼ŒInteger.compare(a[0], b[0])ç›¸æ¯”a[0]-b[0]ï¼Œæ›´åŠ å‹å¥½ï¼Œèƒ½å¤Ÿå¤„ç†intæ•°ç»„è¾¹ç•Œé—®é¢˜
        Arrays.sort(points, (a, b) -> {
            int compareFirst = Integer.compare(a[0], b[0]); 
            if (compareFirst != 0) {
                return compareFirst;
            }
            return Integer.compare(a[1], b[1]); 
        });
        // å®šä¹‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºè®°å½•ç®­çš„æ•°é‡
        int count = 0;
        // éå†pointsæ•°ç»„
        for (int i = 1; i < points.length; i++) {
            // å¦‚æœå½“å‰æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¤§äºå‰ä¸€ä¸ªæ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œè¯´æ˜éœ€è¦å¢åŠ ç®­çš„æ•°é‡
            if (points[i][0] > points[i - 1][1]) {
                count++;
            } else {
                // å¦åˆ™ï¼Œå°†å½“å‰æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ æ›´æ–°ä¸ºå‰ä¸€ä¸ªæ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ å’Œå½“å‰æ•°ç»„ç¬¬äºŒä¸ªå…ƒç´ çš„æœ€å°å€¼
                points[i][1] = Math.min(points[i][1], points[i - 1][1]);
            }
        }
        // è¿”å›ç®­çš„æ•°é‡åŠ 1
        return count + 1;
    }
}
```

### 435.æ— é‡å åŒºé—´

ç»™å®šä¸€ä¸ªåŒºé—´çš„é›†åˆï¼Œæ‰¾åˆ°éœ€è¦ç§»é™¤åŒºé—´çš„æœ€å°æ•°é‡ï¼Œä½¿å‰©ä½™åŒºé—´äº’ä¸é‡å ã€‚

æ³¨æ„: å¯ä»¥è®¤ä¸ºåŒºé—´çš„ç»ˆç‚¹æ€»æ˜¯å¤§äºå®ƒçš„èµ·ç‚¹ã€‚ åŒºé—´ [1,2] å’Œ [2,3] çš„è¾¹ç•Œç›¸äº’â€œæ¥è§¦â€ï¼Œä½†æ²¡æœ‰ç›¸äº’é‡å ã€‚

ç¤ºä¾‹ 1:

- è¾“å…¥: [ [1,2], [2,3], [3,4], [1,3] ]
- è¾“å‡º: 1
- è§£é‡Š: ç§»é™¤ [1,3] åï¼Œå‰©ä¸‹çš„åŒºé—´æ²¡æœ‰é‡å ã€‚

ç¤ºä¾‹ 2:

- è¾“å…¥: [ [1,2], [1,2], [1,2] ]
- è¾“å‡º: 2
- è§£é‡Š: ä½ éœ€è¦ç§»é™¤ä¸¤ä¸ª [1,2] æ¥ä½¿å‰©ä¸‹çš„åŒºé—´æ²¡æœ‰é‡å ã€‚

ç¤ºä¾‹ 3:

- è¾“å…¥: [ [1,2], [2,3] ]
- è¾“å‡º: 0
- è§£é‡Š: ä½ ä¸éœ€è¦ç§»é™¤ä»»ä½•åŒºé—´ï¼Œå› ä¸ºå®ƒä»¬å·²ç»æ˜¯æ— é‡å çš„äº†ã€‚

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºåˆ é™¤é‡å çš„åŒºé—´
    public int eraseOverlapIntervals(int[][] intervals) {
        // å¯¹åŒºé—´æŒ‰ç…§èµ·å§‹ä½ç½®è¿›è¡Œæ’åºï¼Œå¦‚æœèµ·å§‹ä½ç½®ç›¸åŒï¼Œåˆ™æŒ‰ç…§ç»“æŸä½ç½®è¿›è¡Œæ’åº
        Arrays.sort(intervals,(a,b) -> {
            int compareResult = Integer.compare(a[0], b[0]);
            if (compareResult != 0) {
                return compareResult;
            }
            return Integer.compare(a[1], b[1]);
        });

        // å®šä¹‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºè®°å½•åˆ é™¤çš„åŒºé—´æ•°é‡
        int count = 0;
        // éå†åŒºé—´
        for (int i = 1; i < intervals.length; i++) {
            // å¦‚æœå½“å‰åŒºé—´çš„èµ·å§‹ä½ç½®å°äºå‰ä¸€ä¸ªåŒºé—´çš„ç»“æŸä½ç½®ï¼Œè¯´æ˜æœ‰é‡å 
            if (intervals[i][0] < intervals[i - 1][1]) {
                // å°†å½“å‰åŒºé—´çš„ç»“æŸä½ç½®æ›´æ–°ä¸ºä¸å‰ä¸€ä¸ªåŒºé—´çš„ç»“æŸä½ç½®çš„æœ€å°å€¼
                intervals[i][1] = Math.min(intervals[i][1], intervals[i - 1][1]);
                // è®¡æ•°å™¨åŠ ä¸€
                count++;
            }
        }
        // è¿”å›åˆ é™¤çš„åŒºé—´æ•°é‡
        return count;
    }
}
```

### 763.åˆ’åˆ†å­—æ¯åŒºé—´

å­—ç¬¦ä¸² S ç”±å°å†™å­—æ¯ç»„æˆã€‚æˆ‘ä»¬è¦æŠŠè¿™ä¸ªå­—ç¬¦ä¸²åˆ’åˆ†ä¸ºå°½å¯èƒ½å¤šçš„ç‰‡æ®µï¼ŒåŒä¸€å­—æ¯æœ€å¤šå‡ºç°åœ¨ä¸€ä¸ªç‰‡æ®µä¸­ã€‚è¿”å›ä¸€ä¸ªè¡¨ç¤ºæ¯ä¸ªå­—ç¬¦ä¸²ç‰‡æ®µçš„é•¿åº¦çš„åˆ—è¡¨ã€‚

ç¤ºä¾‹ï¼š

- è¾“å…¥ï¼šS = "ababcbacadefegdehijhklij"
- è¾“å‡ºï¼š[9,7,8] è§£é‡Šï¼š åˆ’åˆ†ç»“æœä¸º "ababcbaca", "defegde", "hijhklij"ã€‚ æ¯ä¸ªå­—æ¯æœ€å¤šå‡ºç°åœ¨ä¸€ä¸ªç‰‡æ®µä¸­ã€‚ åƒ "ababcbacadefegde", "hijhklij" çš„åˆ’åˆ†æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºåˆ’åˆ†çš„ç‰‡æ®µæ•°è¾ƒå°‘ã€‚



åœ¨éå†çš„è¿‡ç¨‹ä¸­ç›¸å½“äºæ˜¯è¦æ‰¾æ¯ä¸€ä¸ªå­—æ¯çš„è¾¹ç•Œï¼Œ**å¦‚æœæ‰¾åˆ°ä¹‹å‰éå†è¿‡çš„æ‰€æœ‰å­—æ¯çš„æœ€è¿œè¾¹ç•Œï¼Œè¯´æ˜è¿™ä¸ªè¾¹ç•Œå°±æ˜¯åˆ†å‰²ç‚¹äº†**ã€‚æ­¤æ—¶å‰é¢å‡ºç°è¿‡æ‰€æœ‰å­—æ¯ï¼Œæœ€è¿œä¹Ÿå°±åˆ°è¿™ä¸ªè¾¹ç•Œäº†ã€‚

å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š

- ç»Ÿè®¡æ¯ä¸€ä¸ªå­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®
- ä»å¤´éå†å­—ç¬¦ï¼Œå¹¶æ›´æ–°å­—ç¬¦çš„æœ€è¿œå‡ºç°ä¸‹æ ‡ï¼Œå¦‚æœæ‰¾åˆ°å­—ç¬¦æœ€è¿œå‡ºç°ä½ç½®ä¸‹æ ‡å’Œå½“å‰ä¸‹æ ‡ç›¸ç­‰äº†ï¼Œåˆ™æ‰¾åˆ°äº†åˆ†å‰²ç‚¹

å¦‚å›¾ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20201222191924417.png" alt="763.åˆ’åˆ†å­—æ¯åŒºé—´" style="zoom: 50%;" />

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå°†å­—ç¬¦ä¸²såˆ†å‰²æˆå°½å¯èƒ½å¤šçš„è¿ç»­å­ä¸²
    public List<Integer> partitionLabels(String s) {
        // åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨åˆ†å‰²åçš„å­ä¸²é•¿åº¦
        List<Integer> result = new ArrayList<>();
        // åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªå­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­æœ€åå‡ºç°çš„ä½ç½®
        HashMap<Character, Integer> auxiliaryMap = new HashMap<>();
        // éå†å­—ç¬¦ä¸²ï¼Œå°†æ¯ä¸ªå­—ç¬¦åŠå…¶æœ€åå‡ºç°çš„ä½ç½®å­˜å…¥å“ˆå¸Œè¡¨ä¸­
        for (int i = 0; i < s.length(); i++) {
                auxiliaryMap.put(s.charAt(i), i);
        }
        // å®šä¹‰ä¸€ä¸ªå˜é‡coverï¼Œç”¨äºè®°å½•å½“å‰å­ä¸²ä¸­å­—ç¬¦çš„æœ€å¤§ä½ç½®
        int cover = 0;
        // å®šä¹‰ä¸€ä¸ªå˜é‡legthï¼Œç”¨äºè®°å½•å½“å‰å­ä¸²çš„é•¿åº¦
        int legth = 1;
        // éå†å­—ç¬¦ä¸²ï¼Œæ›´æ–°coverå’Œlegthçš„å€¼
        for (int i = 0; i < s.length(); i++, legth++) {
            // æ›´æ–°coverçš„å€¼ä¸ºå½“å‰å­ä¸²ä¸­å­—ç¬¦çš„æœ€å¤§ä½ç½®
            cover = Math.max(cover, auxiliaryMap.get(s.charAt(i)));
            // å¦‚æœå½“å‰å­—ç¬¦çš„ä½ç½®ç­‰äºcoverï¼Œè¯´æ˜å½“å‰å­ä¸²å·²ç»éå†å®Œæ¯•ï¼Œå°†å…¶é•¿åº¦æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
            if (i == cover) {
                result.add(legth);
                // é‡ç½®legthçš„å€¼ä¸º0ï¼Œå¼€å§‹è®¡ç®—ä¸‹ä¸€ä¸ªå­ä¸²çš„é•¿åº¦
                legth = 0;
            }
        }
        // è¿”å›ç»“æœåˆ—è¡¨
        return result;
    }
}
```

### 56.åˆå¹¶åŒºé—´

ç»™å‡ºä¸€ä¸ªåŒºé—´çš„é›†åˆï¼Œè¯·åˆå¹¶æ‰€æœ‰é‡å çš„åŒºé—´ã€‚

ç¤ºä¾‹ 1:

- è¾“å…¥: intervals = [[1,3],[2,6],[8,10],[15,18]]
- è¾“å‡º: [[1,6],[8,10],[15,18]]
- è§£é‡Š: åŒºé—´ [1,3] å’Œ [2,6] é‡å , å°†å®ƒä»¬åˆå¹¶ä¸º [1,6].

ç¤ºä¾‹ 2:

- è¾“å…¥: intervals = [[1,4],[4,5]]
- è¾“å‡º: [[1,5]]
- è§£é‡Š: åŒºé—´ [1,4] å’Œ [4,5] å¯è¢«è§†ä¸ºé‡å åŒºé—´ã€‚

```java
class Solution {
    // åˆå¹¶åŒºé—´
    public int[][] merge(int[][] intervals) {
        // å¯¹åŒºé—´æŒ‰ç…§èµ·å§‹ä½ç½®è¿›è¡Œæ’åº
        Arrays.sort(intervals,(a,b) -> {
            int compareResult = Integer.compare(a[0], b[0]);
            if (compareResult != 0) {
                return compareResult;
            }
            // å¦‚æœèµ·å§‹ä½ç½®ç›¸åŒï¼Œåˆ™æŒ‰ç…§ç»“æŸä½ç½®è¿›è¡Œæ’åº
            return Integer.compare(a[1], b[1]);
        });
        // åˆ›å»ºä¸€ä¸ªé“¾è¡¨æ¥å­˜å‚¨åˆå¹¶åçš„åŒºé—´
        List<int[]> result = new LinkedList<>();
        // éå†æ’åºåçš„åŒºé—´
        for (int i = 0; i < intervals.length; i++) {
            // å¦‚æœå½“å‰åŒºé—´çš„èµ·å§‹ä½ç½®å°äºç­‰äºå‰ä¸€ä¸ªåŒºé—´çš„ç»“æŸä½ç½®ï¼Œåˆ™è¯´æ˜ä¸¤ä¸ªåŒºé—´æœ‰é‡å 
            if (i > 0 && intervals[i][0] <= intervals[i - 1][1]) {
                // æ›´æ–°å½“å‰åŒºé—´çš„ç»“æŸä½ç½®ä¸ºä¸¤ä¸ªåŒºé—´ç»“æŸä½ç½®çš„æœ€å¤§å€¼
                intervals[i][1] = Math.max(intervals[i][1], intervals[i - 1][1]);
                // å°†å‰ä¸€ä¸ªåŒºé—´ä»ç»“æœé“¾è¡¨ä¸­ç§»é™¤ï¼Œå¹¶å°†æ›´æ–°åçš„åŒºé—´æ·»åŠ åˆ°ç»“æœé“¾è¡¨ä¸­
                result.add(new int[]{result.remove(result.size() - 1)[0], intervals[i][1]});
            } else {
                // å¦‚æœå½“å‰åŒºé—´ä¸å‰ä¸€ä¸ªåŒºé—´æ²¡æœ‰é‡å ï¼Œåˆ™ç›´æ¥å°†å½“å‰åŒºé—´æ·»åŠ åˆ°ç»“æœé“¾è¡¨ä¸­
                result.add(intervals[i]);
            }
        }

        // å°†ç»“æœé“¾è¡¨è½¬æ¢ä¸ºäºŒç»´æ•°ç»„å¹¶è¿”å›
        return result.toArray(new int[result.size()][2]);
    }
}
```

### 253.ä¼šè®®å®¤II (hot 100)*

![1739367103382](æ–‡æ¡£å›¾ç‰‡/1739367103382.png)



**è¿™ä¸ªé—®é¢˜å’Œä¸Šé¢çš„é—®é¢˜å¤§ä¸ç›¸åŒï¼Œ LeetCode 452ã€435ã€56æ€æƒ³æ˜¯æ±‚è§£éœ€è¦åˆ é™¤çš„åŒºé—´æ•°é‡ä»¥é¿å…é‡å çš„é—®é¢˜**ï¼Œè€Œ253.ä¼šè®®å®¤IIæ˜¯**æ‰¾åˆ°æœ€å°‘çš„åºåˆ—ï¼ˆä¼šè®®å®¤ï¼‰**ï¼Œä½¿å¾—æ¯ä¸ªåºåˆ—ä¸­çš„åŒºé—´ï¼ˆä¼šè®®ï¼‰ä¸é‡å çš„é—®é¢˜ã€‚

åˆ é™¤åŒºé—´é—®é¢˜å…³æ³¨çš„æ˜¯ **åˆ é™¤æ“ä½œ**ï¼Œè€Œä¼šè®®å®¤ II é—®é¢˜å…³æ³¨çš„æ˜¯ **èµ„æºåˆ†é…**ã€‚å‰è€…é€šå¸¸ç”¨è´ªå¿ƒç®—æ³•ï¼Œåè€…é€šå¸¸ç”¨è´ªå¿ƒç®—æ³• + å°æ ¹å †ã€‚



å…ˆå¯¹æ‰€æœ‰çš„ä¼šè®®æ—¶é—´æŒ‰å¼€å§‹æ—¶é—´ä»å°åˆ°å¤§æ’åºã€‚

â€ƒâ€ƒæ¥ç€å®šä¹‰ä¸€ä¸ªå°é¡¶å †ä½œä¸ºä¼šè®®å®¤ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼æ˜¯ä¼šè®®çš„ç»“æŸæ—¶é—´ã€‚

â€ƒâ€ƒå°é¡¶å †åœ¨æˆ‘çš„ä»£ç ä¸­æ˜¯ç”¨ä¼˜å…ˆé˜Ÿåˆ—ã€‚æ— è®ºåŠ å…¥å¤šå°‘ä¸ªé˜Ÿåˆ—ï¼Œå°é¡¶å †çš„å †é¡¶å°±æ˜¯å½“å‰ä½¿ç”¨ä¼šè®®å®¤ä¸­æœ€æ—©çš„ç»“æŸæ—¶é—´ï¼Œå¹¶ä¸”å°é¡¶å †çš„å…ƒç´ ä¸ªæ•°å³ä¼šè®®å®¤å½“å‰å ç”¨çš„é—´æ•°ã€‚

â€ƒâ€ƒæœ€æ—©å¼€å§‹çš„ä¼šè®®çš„ç»“æŸæ—¶é—´ add åˆ°å°é¡¶å †ä¸­ã€‚

â€ƒâ€ƒæ¥ç€å¯¹ [1, size-1] ä¸ªä¼šè®®ä¾æ¬¡è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š

â€ƒâ€ƒ1ã€å¯¹æ¯”å½“å‰ä¼šè®®çš„å¼€å§‹æ—¶é—´å’Œå°é¡¶å †çš„å †é¡¶å…ƒç´ å€¼ï¼Œè‹¥å°äºï¼Œè¯´æ˜å½“å‰æ‰€æœ‰ä¼šè®®å®¤æ­£åœ¨è¿›è¡Œçš„ä¼šè®®ä¸­ï¼Œæœ€æ—©ç»“æŸçš„éƒ½è¿˜æ²¡ç»“æŸï¼Œåªèƒ½æ–°å»ºä¼šè®®å®¤äº†ï¼›

â€ƒâ€ƒ2ã€è‹¥å½“å‰ä¼šè®®çš„å¼€å§‹æ—¶é—´å¤§äºå°é¡¶å †çš„å †é¡¶å…ƒç´ å€¼ï¼Œè¯´æ˜ä¼šè®®å®¤æ­£åœ¨è¿›è¡Œçš„ä¼šè®®ä¸­ï¼Œæœ€æ—©ç»“æŸçš„ä¼šè®®å·²ç»ç»“æŸï¼Œå¯ä»¥æŠŠå®ƒä»å°é¡¶å †åˆ é™¤ï¼Œè‡ªå·±è¿›å…¥å°é¡¶å †ï¼ˆé‡å¤åˆ©ç”¨ä¼šè®®å®¤ï¼‰ã€‚

â€ƒâ€ƒç­‰æœ€åä¸€ä¸ªä¼šè®®æ—¶é—´è¿›å…¥å°é¡¶å †ï¼Œæ­¤æ—¶çš„å°é¡¶å †å…ƒç´ ä¸ªæ•°å³è‡³å°‘éœ€è¦çš„ä¼šè®®å®¤æ•°é‡ã€‚

```java
class Solution {
    public int minMeetingRooms(int[][] intervals) {
        if (intervals.length == 0) return 0;

        // æœ€å°å †
        PriorityQueue<Integer> allocator = new PriorityQueue<Integer>();

        // å¯¹æ—¶é—´è¡¨æŒ‰ç…§å¼€å§‹æ—¶é—´ä»å°åˆ°å¤§æ’åº
        Arrays.sort(intervals, (a, b) -> a[0] - b[0]);

        // æ·»åŠ ç¬¬ä¸€åœºä¼šè®®çš„ç»“æŸæ—¶é—´
        allocator.add(intervals[0][1]);

        // éå†é™¤ç¬¬ä¸€åœºä¹‹å¤–çš„æ‰€æœ‰ä¼šè®®
        for (int i = 1; i < intervals.length; i++) {
            if (intervals[i][0] >= allocator.peek()) {
                // å¦‚æœå½“å‰ä¼šè®®çš„å¼€å§‹æ—¶é—´å¤§äºå‰é¢å·²ç»å¼€å§‹çš„ä¼šè®®ä¸­æœ€æ™šç»“æŸçš„æ—¶é—´
                // è¯´æ˜æœ‰ä¼šè®®å®¤ç©ºé—²å‡ºæ¥äº†ï¼Œå¯ä»¥ç›´æ¥é‡å¤åˆ©ç”¨
                // å½“å‰æ—¶é—´å·²ç»æ˜¯ intervals[i][0]ï¼Œå› æ­¤æŠŠå·²ç»ç»“æŸçš„ä¼šè®®åˆ é™¤
                allocator.poll();
            }
            // æŠŠå½“å‰ä¼šè®®çš„ç»“æŸæ—¶é—´åŠ å…¥æœ€å°å †ä¸­
            allocator.add(intervals[i][1]);
        }

        // å½“æ‰€æœ‰ä¼šè®®éå†å®Œæ¯•ï¼Œè¿˜åœ¨æœ€å°å †é‡Œé¢çš„ï¼Œè¯´æ˜ä¼šè®®è¿˜æ²¡ç»“æŸï¼Œæ­¤æ—¶çš„æ•°é‡å°±æ˜¯ä¼šè®®å®¤çš„æœ€å°‘æ•°é‡
        return allocator.size();
    }
}

```



### 738.å•è°ƒé€’å¢çš„æ•°å­—

ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° Nï¼Œæ‰¾å‡ºå°äºæˆ–ç­‰äº N çš„æœ€å¤§çš„æ•´æ•°ï¼ŒåŒæ—¶è¿™ä¸ªæ•´æ•°éœ€è¦æ»¡è¶³å…¶å„ä¸ªä½æ•°ä¸Šçš„æ•°å­—æ˜¯å•è°ƒé€’å¢ã€‚

ï¼ˆå½“ä¸”ä»…å½“æ¯ä¸ªç›¸é‚»ä½æ•°ä¸Šçš„æ•°å­— x å’Œ y æ»¡è¶³ x <= y æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªæ•´æ•°æ˜¯å•è°ƒé€’å¢çš„ã€‚ï¼‰

ç¤ºä¾‹ 1:

- è¾“å…¥: N = 10
- è¾“å‡º: 9

ç¤ºä¾‹ 2:

- è¾“å…¥: N = 1234
- è¾“å‡º: 1234

ç¤ºä¾‹ 3:

- è¾“å…¥: N = 332
- è¾“å‡º: 299

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå°†ä¸€ä¸ªæ•´æ•°è½¬æ¢ä¸ºå•è°ƒé€’å¢çš„æ•´æ•°
    public int monotoneIncreasingDigits(int n) {
        // å°†æ•´æ•°nè½¬æ¢ä¸ºå­—ç¬¦ä¸²
        String auxlilaryStr = Integer.toString(n);
        // å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç”¨äºè®°å½•å­—ç¬¦ä¸²çš„é•¿åº¦
        int flag = auxlilaryStr.length();
        // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„
        char[] resultArray = auxlilaryStr.toCharArray();
        // ä»å­—ç¬¦æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹å‘å‰éå†
        for (int i = resultArray.length - 1; i > 0; i--) {
            // å¦‚æœå½“å‰å…ƒç´ å°äºå‰ä¸€ä¸ªå…ƒç´ 
            if (resultArray[i] < resultArray[i - 1]) {
                // å°†flagè®¾ç½®ä¸ºå½“å‰å…ƒç´ çš„ç´¢å¼•
                flag = i;
                // å°†å‰ä¸€ä¸ªå…ƒç´ å‡1
                resultArray[i - 1]--;
            }
        }

        // ä»flagå¼€å§‹ï¼Œå°†å­—ç¬¦æ•°ç»„ä¸­çš„å…ƒç´ å…¨éƒ¨è®¾ç½®ä¸º'9'
        for (int i = flag; i < resultArray.length; i++) {
            resultArray[i] = '9';
        }

        // å°†å­—ç¬¦æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è½¬æ¢ä¸ºæ•´æ•°è¿”å›
        return Integer.valueOf(new String(resultArray));
    }
}
```

### 968.ç›‘æ§äºŒå‰æ ‘

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæˆ‘ä»¬åœ¨æ ‘çš„èŠ‚ç‚¹ä¸Šå®‰è£…æ‘„åƒå¤´ã€‚

èŠ‚ç‚¹ä¸Šçš„æ¯ä¸ªæ‘„å½±å¤´éƒ½å¯ä»¥ç›‘è§†**å…¶çˆ¶å¯¹è±¡ã€è‡ªèº«åŠå…¶ç›´æ¥å­å¯¹è±¡ã€‚**

è®¡ç®—ç›‘æ§æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹æ‰€éœ€çš„æœ€å°æ‘„åƒå¤´æ•°é‡ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/bst_cameras_01.png)

```
è¾“å…¥ï¼š[0,0,null,0,0]
è¾“å‡ºï¼š1
è§£é‡Šï¼šå¦‚å›¾æ‰€ç¤ºï¼Œä¸€å°æ‘„åƒå¤´è¶³ä»¥ç›‘æ§æ‰€æœ‰èŠ‚ç‚¹ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/bst_cameras_02.png)

```
è¾“å…¥ï¼š[0,0,null,0,null,0,null,null,0]
è¾“å‡ºï¼š2
è§£é‡Šï¼šéœ€è¦è‡³å°‘ä¸¤ä¸ªæ‘„åƒå¤´æ¥ç›‘è§†æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ ä¸Šå›¾æ˜¾ç¤ºäº†æ‘„åƒå¤´æ”¾ç½®çš„æœ‰æ•ˆä½ç½®ä¹‹ä¸€ã€‚
```

```java
class Solution {
    // å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡countï¼Œç”¨äºè®°å½•éœ€è¦å®‰è£…çš„æ‘„åƒå¤´æ•°é‡
    int count = 0;
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•minCameraCoverï¼Œç”¨äºè®¡ç®—éœ€è¦å®‰è£…çš„æ‘„åƒå¤´æ•°é‡
    public int minCameraCover(TreeNode root) {
        // å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›count+1
        if (getOrder(root) == 0) {
            return count + 1;
        } else {
            // å¦åˆ™è¿”å›count
            return count;
        }
    }
    
    
	//æ¯ä¸ªäºŒå‰æ ‘ä¸‰ç§çŠ¶æ€,0è¡¨ç¤ºæ²¡æœ‰è¢«è¦†ç›–ï¼Œ1è¡¨ç¤ºè‡ªå·±æ˜¯æ‘„åƒå¤´ï¼Œ2è¡¨ç¤ºè‡ªå·±è¢«è¦†ç›–ã€‚
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•getOrderï¼Œç”¨äºè·å–å½“å‰èŠ‚ç‚¹çš„çŠ¶æ€
    int getOrder(TreeNode current) {
        // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›2ï¼Œè¡¨ç¤ºæœ‰è¦†ç›–
        if (current == null) {
            return 2;
        }
        // è·å–å·¦å­æ ‘å’Œå³å­æ ‘çš„çŠ¶æ€
        int leftState = getOrder(current.left);
        int rightState = getOrder(current.right);
        // å¦‚æœå·¦å­æ ‘å’Œå³å­æ ‘çš„çŠ¶æ€éƒ½ä¸º2ï¼Œåˆ™è¿”å›0ï¼Œè¡¨ç¤ºæ— è¦†ç›–
        if (leftState == 2 && rightState == 2) {
            return 0;
        }
        // å¦‚æœå·¦å­æ ‘æˆ–å³å­æ ‘çš„çŠ¶æ€ä¸º0ï¼Œåˆ™è¿”å›1ï¼Œè¡¨ç¤ºæœ‰æ‘„åƒå¤´ï¼Œå¹¶å¢åŠ count
        if (leftState == 0 || rightState == 0) {
            count++;
            return 1;
        }
        // å¦‚æœå·¦å­æ ‘æˆ–å³å­æ ‘çš„çŠ¶æ€ä¸º1ï¼Œåˆ™è¿”å›2ï¼Œè¡¨ç¤ºæœ‰è¦†ç›–
        if (leftState == 1 || rightState == 1) {
            return 2;
        }

        // å¦‚æœä»¥ä¸Šæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™è¿”å›-1
        return -1;
    }
}
```



# åŠ¨æ€è§„åˆ’

### 509.æ–æ³¢é‚£å¥‘æ•°

**æ–æ³¢é‚£å¥‘æ•°** ï¼ˆé€šå¸¸ç”¨ `F(n)` è¡¨ç¤ºï¼‰å½¢æˆçš„åºåˆ—ç§°ä¸º **æ–æ³¢é‚£å¥‘æ•°åˆ—** ã€‚è¯¥æ•°åˆ—ç”± `0` å’Œ `1` å¼€å§‹ï¼Œåé¢çš„æ¯ä¸€é¡¹æ•°å­—éƒ½æ˜¯å‰é¢ä¸¤é¡¹æ•°å­—çš„å’Œã€‚ä¹Ÿå°±æ˜¯ï¼š

```
F(0) = 0ï¼ŒF(1) = 1
F(n) = F(n - 1) + F(n - 2)ï¼Œå…¶ä¸­ n > 1
```

ç»™å®š `n` ï¼Œè¯·è®¡ç®— `F(n)` ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 2
è¾“å‡ºï¼š1
è§£é‡Šï¼šF(2) = F(1) + F(0) = 1 + 0 = 1
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 3
è¾“å‡ºï¼š2
è§£é‡Šï¼šF(3) = F(2) + F(1) = 1 + 1 = 2
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šn = 4
è¾“å‡ºï¼š3
è§£é‡Šï¼šF(4) = F(3) + F(2) = 2 + 1 = 3
```

```java
/**
 * Solutionç±»ç”¨äºè§£å†³æ–æ³¢é‚£å¥‘æ•°åˆ—é—®é¢˜
 * æ–æ³¢é‚£å¥‘æ•°åˆ—æ˜¯ä¸€ä¸ªè‘—åçš„æ•°åˆ—ï¼Œå…¶ä¸­æ¯ä¸ªæ•°å­—æ˜¯å‰ä¸¤ä¸ªæ•°å­—çš„å’Œï¼Œèµ·ç‚¹æ˜¯0å’Œ1
 */
class Solution {
    /**
     * è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬nä¸ªæ•°å­—
     * 
     * @param n æŒ‡å®šçš„æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä½ç½®ï¼Œä»0å¼€å§‹è®¡æ•°
     * @return è¿”å›æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬nä¸ªæ•°å­—
     */
    public int fib(int n) {
        // å¦‚æœnå°äº1ï¼Œç›´æ¥è¿”å›0ï¼Œå› ä¸ºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬0ä¸ªæ•°å­—æ˜¯0
        if (n < 1) {
            return 0;
        }
        // åˆ›å»ºä¸€ä¸ªæ•°ç»„ç”¨äºå­˜å‚¨æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰n+1ä¸ªæ•°å­—ï¼Œä»¥ä¾¿é€šè¿‡ä¸‹æ ‡ç›´æ¥è®¿é—®
        int[] dp = new int[n + 1];
        // åˆå§‹åŒ–æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ä¸€ä¸ªæ•°å­—
        dp[0] = 0;
        // åˆå§‹åŒ–æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬äºŒä¸ªæ•°å­—
        dp[1] = 1;
        // ä»ç¬¬3ä¸ªæ•°å­—å¼€å§‹ï¼Œè®¡ç®—æ¯ä¸ªæ–æ³¢é‚£å¥‘æ•°å­—ï¼Œå¹¶å­˜å‚¨åˆ°æ•°ç»„ä¸­
        for (int i = 2; i < n + 1; i++) {
            dp[i] = dp[i - 1] + dp[i - 2];
        }
        // è¿”å›æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬nä¸ªæ•°å­—
        return dp[n];
    }
```

### 70.çˆ¬æ¥¼æ¢¯

å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ n é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚

æ¯æ¬¡ä½ å¯ä»¥çˆ¬ 1 æˆ– 2 ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ

æ³¨æ„ï¼šç»™å®š n æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼š 2
- è¾“å‡ºï¼š 2
- è§£é‡Šï¼š æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚
  - 1 é˜¶ + 1 é˜¶
  - 2 é˜¶

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼š 3
- è¾“å‡ºï¼š 3
- è§£é‡Šï¼š æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚
  - 1 é˜¶ + 1 é˜¶ + 1 é˜¶
  - 1 é˜¶ + 2 é˜¶
  - 2 é˜¶ + 1 é˜¶

```java
// å®šä¹‰ä¸€ä¸ªSolutionç±»
class Solution {
    // å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¡ç®—çˆ¬æ¥¼æ¢¯çš„æ–¹æ³•æ•°
    public int climbStairs(int n) {
        // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸ºn+1çš„æ•°ç»„dpï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªå°é˜¶çš„çˆ¬æ¥¼æ¢¯æ–¹æ³•æ•°
        int[] dp = new int[n + 1];
        // åˆå§‹åŒ–dpæ•°ç»„çš„å‰ä¸¤ä¸ªå…ƒç´ 
        dp[0] = 1;
        dp[1] = 1;
        // ä»ç¬¬ä¸‰ä¸ªå°é˜¶å¼€å§‹ï¼Œè®¡ç®—æ¯ä¸ªå°é˜¶çš„çˆ¬æ¥¼æ¢¯æ–¹æ³•æ•°
        for (int i = 2; i <= n; i++) {
            // å½“å‰å°é˜¶çš„çˆ¬æ¥¼æ¢¯æ–¹æ³•æ•°ç­‰äºå‰ä¸¤ä¸ªå°é˜¶çš„çˆ¬æ¥¼æ¢¯æ–¹æ³•æ•°ä¹‹å’Œ
            dp[i] = dp[i - 1] + dp[i - 2];
        }
        // è¿”å›ç¬¬nä¸ªå°é˜¶çš„çˆ¬æ¥¼æ¢¯æ–¹æ³•æ•°
        return dp[n];
    }
}
```



### 746.ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯

æ•°ç»„çš„æ¯ä¸ªä¸‹æ ‡ä½œä¸ºä¸€ä¸ªé˜¶æ¢¯ï¼Œç¬¬ i ä¸ªé˜¶æ¢¯å¯¹åº”ç€ä¸€ä¸ªéè´Ÿæ•°çš„ä½“åŠ›èŠ±è´¹å€¼ cost[i]ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚

æ¯å½“ä½ çˆ¬ä¸Šä¸€ä¸ªé˜¶æ¢¯ä½ éƒ½è¦èŠ±è´¹å¯¹åº”çš„ä½“åŠ›å€¼ï¼Œä¸€æ—¦æ”¯ä»˜äº†ç›¸åº”çš„ä½“åŠ›å€¼ï¼Œä½ å°±å¯ä»¥é€‰æ‹©å‘ä¸Šçˆ¬ä¸€ä¸ªé˜¶æ¢¯æˆ–è€…çˆ¬ä¸¤ä¸ªé˜¶æ¢¯ã€‚

è¯·ä½ æ‰¾å‡ºè¾¾åˆ°æ¥¼å±‚é¡¶éƒ¨çš„æœ€ä½èŠ±è´¹ã€‚åœ¨å¼€å§‹æ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©ä»ä¸‹æ ‡ä¸º 0 æˆ– 1 çš„å…ƒç´ ä½œä¸ºåˆå§‹é˜¶æ¢¯ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šcost = [10, 15, 20]
- è¾“å‡ºï¼š15
- è§£é‡Šï¼šæœ€ä½èŠ±è´¹æ˜¯ä» cost[1] å¼€å§‹ï¼Œç„¶åèµ°ä¸¤æ­¥å³å¯åˆ°é˜¶æ¢¯é¡¶ï¼Œä¸€å…±èŠ±è´¹ 15 ã€‚

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šcost = [1, 100, 1, 1, 1, 100, 1, 1, 100, 1]
- è¾“å‡ºï¼š6
- è§£é‡Šï¼šæœ€ä½èŠ±è´¹æ–¹å¼æ˜¯ä» cost[0] å¼€å§‹ï¼Œé€ä¸ªç»è¿‡é‚£äº› 1 ï¼Œè·³è¿‡ cost[3] ï¼Œä¸€å…±èŠ±è´¹ 6 ã€‚

```java
/**
 * ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯
 */
class Solution {
    /**
     * è®¡ç®—çˆ¬æ¥¼æ¢¯çš„æœ€å°èŠ±è´¹
     * @param cost æ¯ä¸ªæ¥¼æ¢¯çš„èŠ±è´¹æ•°ç»„
     * @return æœ€å°èŠ±è´¹
     */
    public int minCostClimbingStairs(int[] cost) {
        int n = cost.length; // æ¥¼æ¢¯çš„æ€»æ•°
        int[] dp = new int[n + 1]; // åŠ¨æ€è§„åˆ’æ•°ç»„ï¼Œdp[i]è¡¨ç¤ºåˆ°è¾¾ç¬¬iä¸ªæ¥¼æ¢¯çš„æœ€å°èŠ±è´¹
        dp[0] = 0; // åˆå§‹çŠ¶æ€ï¼Œåˆ°è¾¾ç¬¬0ä¸ªæ¥¼æ¢¯çš„æœ€å°èŠ±è´¹ä¸º0
        dp[1] = 0; // åˆå§‹çŠ¶æ€ï¼Œåˆ°è¾¾ç¬¬1ä¸ªæ¥¼æ¢¯çš„æœ€å°èŠ±è´¹ä¸º0
        for (int i = 2; i <= n; i++) {
            // åŠ¨æ€è§„åˆ’è½¬ç§»æ–¹ç¨‹ï¼Œåˆ°è¾¾ç¬¬iä¸ªæ¥¼æ¢¯çš„æœ€å°èŠ±è´¹ä¸ºåˆ°è¾¾ç¬¬i-1ä¸ªæ¥¼æ¢¯çš„æœ€å°èŠ±è´¹åŠ ä¸Šä»ç¬¬i-1ä¸ªæ¥¼æ¢¯åˆ°ç¬¬iä¸ªæ¥¼æ¢¯çš„èŠ±è´¹ï¼Œ
            // æˆ–è€…åˆ°è¾¾ç¬¬i-2ä¸ªæ¥¼æ¢¯çš„æœ€å°èŠ±è´¹åŠ ä¸Šä»ç¬¬i-2ä¸ªæ¥¼æ¢¯åˆ°ç¬¬iä¸ªæ¥¼æ¢¯çš„èŠ±è´¹ï¼Œå–ä¸¤è€…ä¸­çš„è¾ƒå°å€¼
            dp[i] = Math.min(dp[i - 1] + cost[i - 1], dp[i - 2] + cost[i - 2]);
        }
        // è¿”å›åˆ°è¾¾æœ€åä¸€ä¸ªæ¥¼æ¢¯çš„æœ€å°èŠ±è´¹
        return dp[n];
    }
}
```



### 62.ä¸åŒè·¯å¾„

ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œStartâ€ ï¼‰ã€‚

æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œFinishâ€ ï¼‰ã€‚

é—®æ€»å…±æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ

ç¤ºä¾‹ 1ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210110174033215.png" alt="img" style="zoom:50%;" />

- è¾“å…¥ï¼šm = 3, n = 7
- è¾“å‡ºï¼š28

```java
class Solution {
    public int uniquePaths(int m, int n) {
        int dp[][] = new int[m][n];  // åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„dpï¼Œç”¨äºå­˜å‚¨è·¯å¾„æ•°é‡
        for (int i = 0; i < m; i++) {
            dp[i][0] = 1;  // åˆå§‹åŒ–ç¬¬ä¸€åˆ—çš„è·¯å¾„æ•°é‡ä¸º1ï¼Œå› ä¸ºåªèƒ½å‘ä¸‹èµ°
        }
        for (int i = 0; i < n; i++) {
            dp[0][i] = 1;  // åˆå§‹åŒ–ç¬¬ä¸€è¡Œçš„è·¯å¾„æ•°é‡ä¸º1ï¼Œå› ä¸ºåªèƒ½å‘å³èµ°
        }
        for (int i = 1; i < m; i++) {
            for (int j = 1; j < n; j++) {
                dp[i][j] = dp[i - 1][j] + dp[i][j - 1];  // åŠ¨æ€è§„åˆ’ï¼Œå½“å‰ä½ç½®çš„è·¯å¾„æ•°é‡ç­‰äºä¸Šæ–¹ä½ç½®å’Œå·¦æ–¹ä½ç½®çš„è·¯å¾„æ•°é‡ä¹‹å’Œ
            }
        }
        return  dp[m - 1][n - 1];  // è¿”å›å³ä¸‹è§’ä½ç½®çš„è·¯å¾„æ•°é‡
    }
}
```

### 63.ä¸åŒè·¯å¾„II

ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œStartâ€ ï¼‰ã€‚

æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œFinishâ€ï¼‰ã€‚

ç°åœ¨è€ƒè™‘ç½‘æ ¼ä¸­æœ‰éšœç¢ç‰©ã€‚é‚£ä¹ˆä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’å°†ä¼šæœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210111204901338.png" alt="img" style="zoom:50%;" />

ç½‘æ ¼ä¸­çš„éšœç¢ç‰©å’Œç©ºä½ç½®åˆ†åˆ«ç”¨ 1 å’Œ 0 æ¥è¡¨ç¤ºã€‚

ç¤ºä¾‹ 1ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210111204939971.png" alt="img" style="zoom:67%;" />

- è¾“å…¥ï¼šobstacleGrid = [[0,0,0],[0,1,0],[0,0,0]]
- è¾“å‡ºï¼š2 

```java
/**
 * è¯¥ç±»å®ç°äº†ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¡ç®—ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„ä¸åŒè·¯å¾„æ•°é‡ï¼Œå…¶ä¸­åŒ…å«éšœç¢ç‰©çš„ç½‘æ ¼ã€‚
 */
class Solution {
    /**
     * è®¡ç®—ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„ä¸åŒè·¯å¾„æ•°é‡
     * @param obstacleGrid åŒ…å«éšœç¢ç‰©çš„ç½‘æ ¼
     * @return ä¸åŒè·¯å¾„æ•°é‡
     */
    public int uniquePathsWithObstacles(int[][] obstacleGrid) {
        // è·å–ç½‘æ ¼çš„è¡Œæ•°å’Œåˆ—æ•°
        int m = obstacleGrid.length;
        int n = obstacleGrid[0].length;
        
        // åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„dpï¼Œç”¨äºå­˜å‚¨åˆ°è¾¾æ¯ä¸ªä½ç½®çš„ä¸åŒè·¯å¾„æ•°é‡
        int[][] dp = new int[m][n];
        
        // åˆå§‹åŒ–ç¬¬ä¸€åˆ—çš„è·¯å¾„æ•°é‡
        for (int i = 0; i < m; i++) {
            if (obstacleGrid[i][0] == 1) {
                dp[i][0] = 0; // å¦‚æœç¬¬ä¸€åˆ—æŸä¸ªæœ‰éšœç¢ç‰©ï¼Œåˆ™æ— æ³•åˆ°è¾¾è¯¥ä½ç½®ï¼Œè·¯å¾„æ•°é‡ä¸º0
                break; // å¦‚æœé‡åˆ°éšœç¢ç‰©ï¼Œåé¢çš„ä½ç½®éƒ½æ— æ³•åˆ°è¾¾ï¼Œç›´æ¥è·³å‡ºå¾ªç¯
            }
            dp[i][0] = 1; // å¦‚æœç¬¬ä¸€åˆ—æ²¡æœ‰éšœç¢ç‰©ï¼Œåˆ™è·¯å¾„æ•°é‡ä¸º1
        }
        
        // åˆå§‹åŒ–ç¬¬ä¸€è¡Œçš„è·¯å¾„æ•°é‡
        for (int i = 0; i < n; i++) {
            if (obstacleGrid[0][i] == 1) {
                dp[0][i] = 0; // å¦‚æœç¬¬ä¸€è¡Œæœ‰éšœç¢ç‰©ï¼Œåˆ™æ— æ³•åˆ°è¾¾è¯¥ä½ç½®ï¼Œè·¯å¾„æ•°é‡ä¸º0
                break; // å¦‚æœé‡åˆ°éšœç¢ç‰©ï¼Œåé¢çš„ä½ç½®éƒ½æ— æ³•åˆ°è¾¾ï¼Œç›´æ¥è·³å‡ºå¾ªç¯
            }
            dp[0][i] = 1; // å¦‚æœç¬¬ä¸€è¡Œæ²¡æœ‰éšœç¢ç‰©ï¼Œåˆ™è·¯å¾„æ•°é‡ä¸º1
        }
        
        // è®¡ç®—å…¶ä»–ä½ç½®çš„è·¯å¾„æ•°é‡
        for (int i = 1; i < m; i++) {
            for (int j = 1; j < n; j++) {
                if (obstacleGrid[i][j] == 1) {
                    dp[i][j] = 0; // å¦‚æœå½“å‰ä½ç½®æœ‰éšœç¢ç‰©ï¼Œåˆ™æ— æ³•åˆ°è¾¾è¯¥ä½ç½®ï¼Œè·¯å¾„æ•°é‡ä¸º0
                } else {
                    dp[i][j] = dp[i - 1][j] + dp[i][j - 1]; // å¦‚æœå½“å‰ä½ç½®æ²¡æœ‰éšœç¢ç‰©ï¼Œåˆ™è·¯å¾„æ•°é‡ç­‰äºä¸Šæ–¹ä½ç½®å’Œå·¦æ–¹ä½ç½®çš„è·¯å¾„æ•°é‡ä¹‹å’Œ
                }
            }
        }
        
        // è¿”å›ç»ˆç‚¹ä½ç½®çš„è·¯å¾„æ•°é‡
        return dp[m - 1][n - 1];
    }
}
```

### 64.æœ€å°è·¯å¾„å’Œï¼ˆnew hot100ï¼‰

ç»™å®šä¸€ä¸ªåŒ…å«éè´Ÿæ•´æ•°çš„ `m * n` ç½‘æ ¼ `grid` ï¼Œè¯·æ‰¾å‡ºä¸€æ¡ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ•°å­—æ€»å’Œä¸ºæœ€å°ã€‚

**è¯´æ˜ï¼š**æ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šgrid = [[1,3,1],[1,5,1],[4,2,1]]
è¾“å‡ºï¼š7
è§£é‡Šï¼šå› ä¸ºè·¯å¾„ 1â†’3â†’1â†’1â†’1 çš„æ€»å’Œæœ€å°ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šgrid = [[1,2,3],[4,5,6]]
è¾“å‡ºï¼š12
```

```java
class Solution {
    public int minPathSum(int[][] grid) {
        // Step 1: ç¡®å®š dp æ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºä» grid çš„å·¦ä¸Šè§’ (0,0) å‡ºå‘åˆ°è¾¾ä½ç½® (i,j) çš„æœ€å°è·¯å¾„å’Œã€‚

        int[][] dp = new int[grid.length][grid[0].length];

        // Step 3: åˆå§‹åŒ– dp æ•°ç»„
        // åˆå§‹åŒ–ç¬¬ä¸€åˆ—ï¼šåªèƒ½ä»ä¸Šæ–¹åˆ°è¾¾ï¼Œå› æ­¤ç´¯åŠ æ¯ä¸€è¡Œçš„å…ƒç´ ã€‚
        for (int i = 0, sum = 0; i < grid.length; i++) {
            sum += grid[i][0];
            dp[i][0] = sum;
        }

        // åˆå§‹åŒ–ç¬¬ä¸€è¡Œï¼šåªèƒ½ä»å·¦ä¾§åˆ°è¾¾ï¼Œå› æ­¤ç´¯åŠ æ¯ä¸€åˆ—çš„å…ƒç´ ã€‚
        for (int i = 0, sum = 0; i < grid[0].length; i++) {
            sum += grid[0][i];
            dp[0][i] = sum;
        }

        // Step 2: ç¡®å®šé€’æ¨å…¬å¼
        // å¯¹äºä½ç½® (i,j)ï¼Œå¯ä»¥ä»ä¸Šæ–¹ (i-1,j) æˆ–å·¦ä¾§ (i,j-1) åˆ°è¾¾ã€‚
        // æ‰€ä»¥ dp[i][j] = Math.min(dp[i-1][j], dp[i][j-1]) + grid[i][j]ã€‚

        // Step 4: ç¡®å®šéå†é¡ºåº
        // éå†é¡ºåºæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ï¼Œå…ˆéå†è¡Œå†éå†åˆ—ã€‚
        for (int i = 1; i < grid.length; i++) {
            for (int j = 1; j < grid[0].length; j++) {
                dp[i][j] = Math.min(dp[i - 1][j], dp[i][j - 1]) + grid[i][j];
            }
        }

        // è¿”å› dp æ•°ç»„å³ä¸‹è§’çš„å€¼ï¼Œå³ä¸ºä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„æœ€å°è·¯å¾„å’Œã€‚
        return dp[grid.length - 1][grid[0].length - 1];
    }
}

```



### 221.æœ€å¤§æ­£æ–¹å½¢ï¼ˆhot 100ï¼‰ï¼ˆ3.25ï¼‰

åœ¨ä¸€ä¸ªç”± `'0'` å’Œ `'1'` ç»„æˆçš„äºŒç»´çŸ©é˜µå†…ï¼Œæ‰¾åˆ°åªåŒ…å« `'1'` çš„æœ€å¤§æ­£æ–¹å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚

**ç¤ºä¾‹ 1ï¼š**

<img src="https://assets.leetcode.com/uploads/2020/11/26/max1grid.jpg" alt="img" style="zoom:50%;" />

```
è¾“å…¥ï¼šmatrix = [["1","0","1","0","0"],["1","0","1","1","1"],["1","1","1","1","1"],["1","0","0","1","0"]]
è¾“å‡ºï¼š4
```

```java
class Solution {
    // è®¡ç®—æœ€å¤§æ­£æ–¹å½¢çš„é¢ç§¯
    public int maximalSquare(char[][] matrix) {
        // è·å–çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°
        int xSize = matrix.length;
        int ySize = matrix[0].length;
        // åˆå§‹åŒ–è¿”å›å€¼ä¸º-1
        int ret = -1;
        // åˆ›å»ºäºŒç»´æ•°ç»„dpç”¨äºå­˜å‚¨ä»¥å½“å‰ç‚¹ä¸ºå³ä¸‹è§’çš„æœ€å¤§æ­£æ–¹å½¢çš„è¾¹é•¿
        int[][] dp = new int[xSize][ySize];

        // éå†çŸ©é˜µä¸­çš„æ¯ä¸ªç‚¹
        for (int i = 0; i < xSize; i++) {
            for (int j = 0; j < ySize; j++) {
                // å°†å­—ç¬¦è½¬æ¢ä¸ºæ•°å­—å­˜å…¥dpæ•°ç»„
                dp[i][j] = matrix[i][j] - '0';
                // å¦‚æœå½“å‰ç‚¹ä¸åœ¨ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ä¸”å½“å‰ç‚¹ä¸º1
                if (i > 0 && j > 0 && dp[i][j] != 0) {
                    // éè¾¹ç•Œæƒ…å†µï¼Œæ ¹æ®å·¦ã€ä¸Šã€å·¦ä¸Šä¸‰ä¸ªä½ç½®çš„æœ€å°å€¼åŠ 1å¾—åˆ°å½“å‰ä½ç½®çš„æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿
                    dp[i][j] = Math.min(dp[i - 1][j], Math.min(dp[i - 1][j - 1], dp[i][j - 1])) + 1;
                }
                // æ›´æ–°æœ€å¤§æ­£æ–¹å½¢çš„è¾¹é•¿
                ret = Math.max(dp[i][j], ret);
            }
        }

        // è¿”å›æœ€å¤§æ­£æ–¹å½¢çš„é¢ç§¯
        return ret * ret;
    }
}
```

### 85.æœ€å¤§çŸ©å½¢ï¼ˆhot100ï¼‰(3.24)

ç»™å®šä¸€ä¸ªä»…åŒ…å« `0` å’Œ `1` ã€å¤§å°ä¸º `rows x cols` çš„äºŒç»´äºŒè¿›åˆ¶çŸ©é˜µï¼Œæ‰¾å‡ºåªåŒ…å« `1` çš„æœ€å¤§çŸ©å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚

**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/1722912576-boIxpm-image.png)

```
è¾“å…¥ï¼šmatrix = [["1","0","1","0","0"],["1","0","1","1","1"],["1","1","1","1","1"],["1","0","0","1","0"]]
è¾“å‡ºï¼š6
è§£é‡Šï¼šæœ€å¤§çŸ©å½¢å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šmatrix = [["0"]]
è¾“å‡ºï¼š0
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šmatrix = [["1"]]
è¾“å‡ºï¼š1
```

```java
public class Solution {
    public int maximalRectangle(char[][] matrix) {
        // æ£€æŸ¥è¾“å…¥çŸ©é˜µæ˜¯å¦ä¸ºç©ºï¼Œæˆ–è€…è¡Œæ•°ä¸º0ï¼Œæˆ–è€…åˆ—æ•°ä¸º0
        if (matrix == null || matrix.length == 0 || matrix[0].length == 0) {
            return 0; // å¦‚æœçŸ©é˜µæ— æ•ˆï¼Œç›´æ¥è¿”å›é¢ç§¯ä¸º0
        }

        // è·å–çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°
        int rows = matrix.length;
        int cols = matrix[0].length;

        // åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„dpï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªä½ç½®å·¦è¾¹è¿ç»­1çš„ä¸ªæ•°
        // dp[i][j] è¡¨ç¤ºåœ¨ç¬¬iè¡Œï¼Œåˆ°ç¬¬jåˆ—ä¸ºæ­¢å·¦è¾¹è¿ç»­1çš„æ•°é‡
        int[][] dp = new int[rows][cols];

        // åˆå§‹åŒ–æœ€å¤§çŸ©å½¢é¢ç§¯ä¸º0
        int maxArea = 0;

        // éå†çŸ©é˜µçš„æ¯ä¸€è¡Œ
        for (int i = 0; i < rows; i++) {
            // éå†çŸ©é˜µçš„æ¯ä¸€åˆ—
            for (int j = 0; j < cols; j++) {
                // å¦‚æœå½“å‰ä½ç½®æ˜¯'1'
                if (matrix[i][j] == '1') {
                    // è®¡ç®—å½“å‰ä½ç½®å·¦è¾¹è¿ç»­1çš„ä¸ªæ•°
                    // å¦‚æœj > 0ï¼Œåˆ™dp[i][j]ç­‰äºå·¦è¾¹ä½ç½®çš„dpå€¼åŠ 1ï¼›å¦åˆ™ä¸º1
                    dp[i][j] = (j > 0 ? dp[i][j - 1] : 0) + 1;

                    // åˆå§‹åŒ–å½“å‰æœ€å°å®½åº¦ä¸ºdp[i][j]
                    int minWidth = dp[i][j];

                    // ä»å½“å‰è¡Œiå‘ä¸Šéå†åˆ°ç¬¬0è¡Œï¼Œå¯»æ‰¾ä»¥(i,j)ä¸ºå³ä¸‹è§’çš„æœ€å¤§çŸ©å½¢
                    for (int k = i; k >= 0; k--) {
                        // å¦‚æœdp[k][j]ä¸º0ï¼Œè¯´æ˜ç¬¬kè¡Œç¬¬jåˆ—æ²¡æœ‰1ï¼Œæ— æ³•å½¢æˆçŸ©å½¢ï¼Œç›´æ¥è·³å‡ºå¾ªç¯
                        if (dp[k][j] == 0) {
                            break;
                        }

                        // æ›´æ–°æœ€å°å®½åº¦ï¼Œå–å½“å‰æœ€å°å®½åº¦å’Œdp[k][j]çš„è¾ƒå°å€¼
                        minWidth = Math.min(minWidth, dp[k][j]);

                        // è®¡ç®—å½“å‰çŸ©å½¢çš„é¢ç§¯ï¼šæœ€å°å®½åº¦ä¹˜ä»¥é«˜åº¦ï¼ˆi - k + 1ï¼‰
                        int currentArea = minWidth * (i - k + 1);

                        // æ›´æ–°æœ€å¤§çŸ©å½¢é¢ç§¯
                        maxArea = Math.max(maxArea, currentArea);
                    }
                }
            }
        }

        // è¿”å›æœ€å¤§çŸ©å½¢é¢ç§¯
        return maxArea;
    }
}
```





### 343.æ•´æ•°æ‹†åˆ†ï¼ˆ4.7ï¼‰

ç»™å®šä¸€ä¸ªæ­£æ•´æ•° nï¼Œå°†å…¶æ‹†åˆ†ä¸ºè‡³å°‘ä¸¤ä¸ªæ­£æ•´æ•°çš„å’Œï¼Œå¹¶ä½¿è¿™äº›æ•´æ•°çš„ä¹˜ç§¯æœ€å¤§åŒ–ã€‚ è¿”å›ä½ å¯ä»¥è·å¾—çš„æœ€å¤§ä¹˜ç§¯ã€‚

ç¤ºä¾‹ 1:

- è¾“å…¥: 2
- è¾“å‡º: 1
- è§£é‡Š: 2 = 1 + 1, 1 Ã— 1 = 1ã€‚

ç¤ºä¾‹ 2:

- è¾“å…¥: 10
- è¾“å‡º: 36
- è§£é‡Š: 10 = 3 + 3 + 4, 3 Ã— 3 Ã— 4 = 36ã€‚
- è¯´æ˜: ä½ å¯ä»¥å‡è®¾ n ä¸å°äº 2 ä¸”ä¸å¤§äº 58ã€‚

```java
/**
 * æ•´æ•°æ‹†åˆ†
 */
class Solution {
    /**
     * è®¡ç®—æ•´æ•°æ‹†åˆ†çš„æœ€å¤§ä¹˜ç§¯
     * @param n å¾…æ‹†åˆ†çš„æ•´æ•°
     * @return æ‹†åˆ†åçš„æœ€å¤§ä¹˜ç§¯
     */
    public int integerBreak(int n) {
        // åˆ›å»ºä¸€ä¸ªæ•°ç»„ç”¨äºå­˜å‚¨æ‹†åˆ†åçš„æœ€å¤§ä¹˜ç§¯
        int [] dp = new int[n + 1];
        // åˆå§‹åŒ–æ‹†åˆ†åçš„æœ€å¤§ä¹˜ç§¯
        dp[1] = 1;
        // éå†ä»3åˆ°nçš„æ•´æ•°
        for (int i = 2; i <= n; i++) {
            // éå†ä»1åˆ°i/2çš„æ•´æ•°ï¼Œè®¡ç®—æ‹†åˆ†åçš„æœ€å¤§ä¹˜ç§¯
            for (int j = 1; j <= i / 2; j++) {
                // æ›´æ–°æ‹†åˆ†åçš„æœ€å¤§ä¹˜ç§¯
                dp[i] = Math.max(dp[i], Math.max(j * (i - j), j * dp[i - j]));
            }
        }
        // è¿”å›æ‹†åˆ†åçš„æœ€å¤§ä¹˜ç§¯
        return  dp[n];
    }
}
```

è¿™é“é¢˜çš„æ ¸å¿ƒæ˜¯è¦å°†ä¸€ä¸ªæ­£æ•´æ•° n æ‹†åˆ†æˆè‡³å°‘ä¸¤ä¸ªæ­£æ•´æ•°çš„å’Œï¼Œä½¿å¾—è¿™äº›æ­£æ•´æ•°çš„ä¹˜ç§¯æœ€å¤§ã€‚åœ¨ä»£ç ä¸­é€’æ¨å…¬å¼ä¸ºï¼š

```java
dp[i] = Math.max(dp[i], Math.max(j * (i - j), j * dp[i - j]));
```

è€ƒè™‘äº†ä¸¤ç§æƒ…å†µï¼š

1. `j * (i - j)`ï¼š
   - å°†æ•°å­— i æ‹†åˆ†æˆä¸¤ä¸ªæ•°ï¼šj å’Œ (i-j)
   - è¿™ç§æƒ…å†µæ˜¯ç›´æ¥å°† i æ‹†æˆä¸¤ä¸ªæ•°ç›¸ä¹˜

2. `j * dp[i - j]`ï¼š
   - å°†æ•°å­— i æ‹†åˆ†æˆ j å’Œ (i-j)ï¼Œä½†æ˜¯ (i-j) è¿™éƒ¨åˆ†ç»§ç»­æ‹†åˆ†**ï¼ˆä½†è¿™éƒ¨åˆ†æ‹†åˆ†çš„æœ€å¥½çš„ç»“æœå·²ç»è¢«dp[i - j] è®°å½•å¯ç›´æ¥ä½¿ç”¨ï¼‰**
   - dp[i-j] è¡¨ç¤ºå°† (i-j) ç»§ç»­æ‹†åˆ†èƒ½å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯

ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ n = 4ï¼š
- å½“ i = 4, j = 1 æ—¶ï¼š
  - 1 * (4-1) = 1 * 3 = 3
  - 1 * dp[3] = 1 * 2 = 2
- å½“ i = 4, j = 2 æ—¶ï¼š
  - 2 * (4-2) = 2 * 2 = 4
  - 2 * dp[2] = 2 * 1 = 2

å–æ‰€æœ‰å¯èƒ½ä¸­çš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥ dp[4] = 4ã€‚



### 96.ä¸åŒçš„äºŒå‰æœç´¢æ ‘ï¼ˆ4.8ï¼‰

ç»™ä½ ä¸€ä¸ªæ•´æ•° `n` ï¼Œæ±‚æ°ç”± `n` ä¸ªèŠ‚ç‚¹ç»„æˆä¸”èŠ‚ç‚¹å€¼ä» `1` åˆ° `n` äº’ä¸ç›¸åŒçš„ **äºŒå‰æœç´¢æ ‘** æœ‰å¤šå°‘ç§ï¼Ÿè¿”å›æ»¡è¶³é¢˜æ„çš„äºŒå‰æœç´¢æ ‘çš„ç§æ•°ã€‚



**ç¤ºä¾‹ 1ï¼š**

![img](æ–‡æ¡£å›¾ç‰‡/uniquebstn3.jpg)



```
è¾“å…¥ï¼šn = 3
è¾“å‡ºï¼š5
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š1
```

```java
class Solution {
    /**
     * è®¡ç®—ç”±nä¸ªèŠ‚ç‚¹ç»„æˆçš„ç‹¬ç‰¹äºŒå‰æœç´¢æ ‘çš„æ•°é‡
     * 
     * @param n æ•´æ•°ï¼Œè¡¨ç¤ºäºŒå‰æœç´¢æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡
     * @return è¿”å›æ•´æ•°ï¼Œè¡¨ç¤ºå¯ä»¥ç”Ÿæˆçš„ç‹¬ç‰¹äºŒå‰æœç´¢æ ‘çš„æ•°é‡
     */
    public int numTrees(int n) {
        // åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºå­˜å‚¨å­é—®é¢˜çš„è§£
        int[] dp = new int[n + 1];
        // å½“æ²¡æœ‰èŠ‚ç‚¹æˆ–åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œåªæœ‰ä¸€ç§äºŒå‰æœç´¢æ ‘
        dp[0] = 1;
        dp[1] = 1;
        // ä»2ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œè®¡ç®—æ‰€æœ‰èŠ‚ç‚¹æ•°ç›®çš„äºŒå‰æœç´¢æ ‘æ•°é‡
        for (int i = 2; i < dp.length; i++) {
            // éå†1åˆ°içš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œè®¡ç®—iä¸ªèŠ‚ç‚¹æ—¶çš„äºŒå‰æœç´¢æ ‘æ•°é‡
            for (int j = 1; j <= i; j++) {
                // ç´¯åŠ ä»¥æ¯ä¸ªèŠ‚ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹æ—¶ï¼Œå·¦å³å­æ ‘ç»„åˆçš„æ•°é‡ä¹‹å’Œ
                dp[i] += dp[j - 1] * dp[i - j];
            }
        }

        // è¿”å›nä¸ªèŠ‚ç‚¹æ—¶çš„ç‹¬ç‰¹äºŒå‰æœç´¢æ ‘æ•°é‡
        return dp[dp.length - 1];
    }
}

```

### 118.æ¨è¾‰ä¸‰è§’ï¼ˆnew hot100ï¼‰ï¼ˆ3.25ï¼‰

ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° *numRowsï¼Œ*ç”Ÿæˆã€Œæ¨è¾‰ä¸‰è§’ã€çš„å‰ *numRows* è¡Œã€‚

åœ¨ã€Œæ¨è¾‰ä¸‰è§’ã€ä¸­ï¼Œæ¯ä¸ªæ•°æ˜¯å®ƒå·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹çš„æ•°çš„å’Œã€‚

![img](æ–‡æ¡£å›¾ç‰‡/1626927345-DZmfxB-PascalTriangleAnimated2.gif)

 

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: numRows = 5
è¾“å‡º: [[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1]]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: numRows = 1
è¾“å‡º: [[1]]
```

```java
class Solution {
    public List<List<Integer>> generate(int numRows) {
        // 1. ç¡®å®š dp æ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp æ•°ç»„åœ¨è¿™é‡Œä½“ç°åœ¨ resultList ä¸­ã€‚
        // resultList.get(i) è¡¨ç¤ºæ¨è¾‰ä¸‰è§’çš„ç¬¬ i è¡Œï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ï¼Œ
        // resultList.get(i).get(j) è¡¨ç¤ºç¬¬ i è¡Œçš„ç¬¬ j åˆ—ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰å¯¹åº”çš„å€¼ã€‚

        List<List<Integer>> resultList = new ArrayList<>();

        // 2. dp æ•°ç»„åˆå§‹åŒ–
        // åˆå§‹åŒ–ä¸ºä¸€ä¸ªç©ºçš„äºŒç»´åˆ—è¡¨ï¼Œæ¯ä¸€è¡Œåœ¨å¾ªç¯ä¸­é€æ¸ç”Ÿæˆå¹¶æ·»åŠ åˆ° resultList ä¸­ã€‚

        for (int i = 0; i < numRows; i++) {
            List<Integer> row = new ArrayList<>();
            // éå†å½“å‰è¡Œçš„æ¯ä¸ªå…ƒç´ 
            for (int j = 0; j <= i; j++) {
                if (j == 0 || j == i) {
                    // æ¨è¾‰ä¸‰è§’çš„æ¯è¡Œé¦–å°¾å…ƒç´ éƒ½æ˜¯ 1
                    row.add(1);
                } else {
                    // 3. ç¡®å®šé€’æ¨å…¬å¼
                    // å½“å‰å…ƒç´ å€¼ = ä¸Šä¸€è¡Œçš„å‰ä¸€åˆ—å…ƒç´ å€¼ + ä¸Šä¸€è¡Œçš„å½“å‰åˆ—å…ƒç´ å€¼
                    // å³ row[j] = resultList.get(i - 1).get(j - 1) + resultList.get(i - 1).get(j)
                    row.add(resultList.get(i - 1).get(j - 1) + resultList.get(i - 1).get(j));
                }
            }
            // å°†ç”Ÿæˆçš„å½“å‰è¡Œæ·»åŠ åˆ° resultList ä¸­
            resultList.add(row);
        }

        // 4. ç¡®å®šéå†é¡ºåº
        // å¤–å±‚å¾ªç¯ä»ç¬¬ 0 è¡Œå¼€å§‹éå†åˆ°ç¬¬ numRows - 1 è¡Œï¼›
        // å†…å±‚å¾ªç¯ä»ç¬¬ 0 åˆ—éå†åˆ°ç¬¬ i åˆ—ï¼Œé€æ­¥ç”Ÿæˆå½“å‰è¡Œã€‚

        return resultList;
    }
}

```



### 0-1èƒŒåŒ…é—®é¢˜ï¼ˆæ¯é¢˜ï¼‰

01èƒŒåŒ…é—®é¢˜æ˜¯ä¸€ä¸ªç»å…¸çš„åŠ¨æ€è§„åˆ’é—®é¢˜ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œåœ¨ç»™å®šçš„é‡é‡é™åˆ¶ä¸‹ï¼Œé€‰æ‹©ä¸€äº›ç‰©å“ä½¿å¾—å®ƒä»¬çš„æ€»ä»·å€¼æœ€å¤§åŒ–ã€‚

**é¢˜ç›®æè¿°**

ä½ æœ‰ä¸€ä¸ªèƒŒåŒ…ï¼Œå®¹é‡ä¸º `W`ã€‚ç°åœ¨æœ‰ `N` ä»¶ç‰©å“ï¼Œæ¯ä»¶ç‰©å“æœ‰ä¸¤ä¸ªå±æ€§ï¼šé‡é‡ `weights[i]` å’Œä»·å€¼ `values[i]`ã€‚ä½ çš„ä»»åŠ¡æ˜¯é€‰æ‹©è‹¥å¹²ä»¶ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œä½¿å¾—åœ¨ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡çš„å‰æä¸‹ï¼Œèƒ½å¤Ÿè£…å…¥èƒŒåŒ…çš„ç‰©å“æ€»ä»·å€¼æœ€å¤§åŒ–ã€‚

è¯·ä½ å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œæ¥è®¡ç®—åœ¨ç»™å®šå®¹é‡ `W` çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿè£…å…¥èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€‚

å‡½æ•°ç­¾å

```java
public int knapsack(int W, int[] weights, int[] values);
```

è¾“å…¥

- `int W`ï¼šèƒŒåŒ…çš„å®¹é‡ï¼Œ1 <= W <= 1000ã€‚
- `int[] weights`ï¼šæ¯ä»¶ç‰©å“çš„é‡é‡æ•°ç»„ï¼Œ1 <= weights[i] <= 1000ã€‚
- `int[] values`ï¼šæ¯ä»¶ç‰©å“çš„ä»·å€¼æ•°ç»„ï¼Œ1 <= values[i] <= 1000ã€‚
- `N`ï¼šç‰©å“æ•°é‡ï¼Œå³ `weights` å’Œ `values` æ•°ç»„çš„é•¿åº¦ï¼Œ1 <= N <= 1000ã€‚

è¾“å‡º

- `int`ï¼šèƒ½å¤Ÿè£…å…¥èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€‚

ç¤ºä¾‹

ç¤ºä¾‹ 1:

```java
è¾“å…¥: W = 50, weights = [10, 20, 30], values = [60, 100, 120]
è¾“å‡º: 220
è§£é‡Š: é€‰æ‹©ç‰©å“ 2 å’Œ 3ï¼Œé‡é‡ä¸º 20 + 30 = 50ï¼Œä»·å€¼ä¸º 100 + 120 = 220ã€‚
```

ç¤ºä¾‹ 2:

```java
è¾“å…¥: W = 10, weights = [1, 3, 4, 6], values = [20, 30, 50, 60]
è¾“å‡º: 80
è§£é‡Š: é€‰æ‹©ç‰©å“ 1 å’Œ 3ï¼Œé‡é‡ä¸º 1 + 4 = 5ï¼Œä»·å€¼ä¸º 20 + 50 = 70ã€‚
```

æç¤º

- æ¯ä¸ªç‰©å“åªèƒ½é€‰æ‹©ä¸€æ¬¡ï¼ˆå³01èƒŒåŒ…é—®é¢˜ï¼‰ã€‚
- ä½ å¯ä»¥å‡è®¾æ‰€æœ‰è¾“å…¥éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚

```java
äºŒç»´dpæ•°ç»„è§£æ³•
class Solution {
    /**
     * è§£å†³0/1èƒŒåŒ…é—®é¢˜
     * @param W èƒŒåŒ…çš„å®¹é‡
     * @param weights ç‰©å“çš„é‡é‡æ•°ç»„
     * @param values ç‰©å“çš„ä»·å€¼æ•°ç»„
     * @return èƒŒåŒ…èƒ½å¤Ÿå®¹çº³çš„æœ€å¤§ä»·å€¼
     */
    public int knapsack(int W, int[] weights, int[] values) {
        // 1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºä»å‰iä¸ªç‰©å“ä¸­é€‰æ‹©æ”¾å…¥å®¹é‡ä¸ºjçš„èƒŒåŒ…ä¸­çš„æœ€å¤§ä»·å€¼
        int[][] dp = new int[weights.length][W + 1];

        // 3. dpæ•°ç»„åˆå§‹åŒ–
        // åˆå§‹åŒ–ç¬¬ä¸€è¡Œï¼Œåªè€ƒè™‘ç¬¬ä¸€ä¸ªç‰©å“
        for (int j = 0; j < dp[0].length; j++) {
            if (j >= weights[0]) {
                dp[0][j] = values[0];
            }
        }

        // 4. ç¡®å®šéå†é¡ºåº
        // å…ˆéå†ç‰©å“ï¼Œå†éå†èƒŒåŒ…å®¹é‡
        for (int i = 1; i < dp.length; i++) {
            for (int j = 0; j < dp[0].length; j++) {
                // 2. ç¡®å®šé€’æ¨å…¬å¼
                if (j >= weights[i]) {
                    // å½“å‰èƒŒåŒ…å®¹é‡å¯ä»¥æ”¾å…¥ç¬¬iä¸ªç‰©å“æ—¶ï¼Œè€ƒè™‘æ”¾æˆ–ä¸æ”¾
                    dp[i][j] = Math.max(dp[i - 1][j], dp[i - 1][j - weights[i]] + values[i]);
                } else {
                    // å½“å‰èƒŒåŒ…å®¹é‡ä¸è¶³ä»¥æ”¾å…¥ç¬¬iä¸ªç‰©å“ï¼Œåªèƒ½æ²¿ç”¨ä¹‹å‰çš„ç»“æœ
                    dp[i][j] = dp[i - 1][j];
                }
            }
        }

        // è¿”å›consideringæ‰€æœ‰ç‰©å“å’Œæœ€å¤§å®¹é‡æ—¶çš„ç»“æœ
        return dp[dp.length - 1][dp[0].length - 1];
    }
}
```



1. **äºŒç»´dpçš„æƒ…å†µ**
    åœ¨äºŒç»´dpä¸­ï¼Œ`dp[i][j]` è¡¨ç¤ºï¼š
- i: è€ƒè™‘å‰iä¸ªç‰©å“
- j: èƒŒåŒ…å®¹é‡ä¸ºjæ—¶
- `dp[i][j]`: èƒ½è·å¾—çš„æœ€å¤§ä»·å€¼

äºŒç»´çš„é€’æ¨å…¬å¼æ˜¯ï¼š
```java
dp[i][j] = Math.max(
    dp[i-1][j],                    // ä¸æ”¾å…¥ç¬¬iä¸ªç‰©å“
    dp[i-1][j-weights[i]] + values[i]  // æ”¾å…¥ç¬¬iä¸ªç‰©å“
)
```

è§‚å¯ŸäºŒç»´é€’æ¨å…¬å¼ï¼Œå‘ç°è®¡ç®— `dp[i][j]` æ—¶åªç”¨åˆ°äº†ï¼š
- `dp[i-1][j]` (ä¸Šä¸€è¡ŒåŒåˆ—)
- `dp[i-1][j-weights[i]]` (ä¸Šä¸€è¡Œå·¦è¾¹æŸåˆ—)

- å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¤ç”¨åŒä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œä½†å¿…é¡»ä»åå¾€å‰éå†


ä»åå‘å‰éå†çš„åŸå› æ˜¯å‡è®¾æœ‰ä¸€ä¸ªç‰©å“é‡é‡æ˜¯2ï¼Œä»·å€¼æ˜¯3ï¼Œæˆ‘ä»¬çœ‹çœ‹ä¸¤ç§éå†æ–¹å‘çš„åŒºåˆ«ï¼š

æ­£å‘éå†(é”™è¯¯):
```
dp[0] -> dp[2] -> dp[4] 
å½“è®¡ç®—dp[4]æ—¶ï¼Œdp[2]å·²ç»æ˜¯æ–°å€¼ï¼Œç›¸å½“äºç‰©å“è¢«ä½¿ç”¨äº†ä¸¤æ¬¡ï¼
```

åå‘éå†(æ­£ç¡®):
```
dp[4] -> dp[2] -> dp[0]
å½“è®¡ç®—dp[4]æ—¶ï¼Œdp[2]è¿˜æ˜¯æ—§å€¼ï¼Œä¿è¯äº†ç‰©å“æœ€å¤šä½¿ç”¨ä¸€æ¬¡
```

**ä¸¾ä¸ªå…·ä½“ä¾‹å­**
ç‰©å“ï¼šé‡é‡[2,3,4]ï¼Œä»·å€¼[3,4,5]ï¼ŒèƒŒåŒ…å®¹é‡=5

ç¬¬ä¸€è½®å¾ªç¯(i=0)ï¼Œè€ƒè™‘ç¬¬ä¸€ä¸ªç‰©å“ï¼š
```
j=5: dp[5] = max(dp[5], dp[3]+3)
j=4: dp[4] = max(dp[4], dp[2]+3)
j=3: dp[3] = max(dp[3], dp[1]+3)
j=2: dp[2] = max(dp[2], dp[0]+3)
```

è¿™æ ·ï¼Œä¸€ç»´æ•°ç»„åœ¨æ¯ä¸ªä½ç½®å­˜å‚¨çš„å°±æ˜¯ï¼šè€ƒè™‘åˆ°å½“å‰ç‰©å“æ—¶ï¼Œå¯¹åº”å®¹é‡ä¸‹èƒ½è·å¾—çš„æœ€å¤§ä»·å€¼ã€‚

å› æ­¤é€’æ¨å…¬å¼ `dp[j] = Math.max(dp[j], dp[j-weights[i]] + values[i])` çš„å«ä¹‰æ˜¯ï¼š
- dp[j]ï¼šä¿æŒä¸é€‰å½“å‰ç‰©å“iæ—¶çš„ä»·å€¼ï¼ˆç›¸å½“äºäºŒç»´ä¸­çš„`dp[i-1][j]`ï¼‰
- dp[j-weights[i]] + values[i]ï¼šé€‰æ‹©å½“å‰ç‰©å“iæ—¶çš„ä»·å€¼ï¼ˆç›¸å½“äºäºŒç»´ä¸­çš„`dp[i-1][j-weights[i]] + values[i]`ï¼‰

ä¸€ç»´dpé€šè¿‡"çŠ¶æ€å‹ç¼©"å’Œ"é€†åºéå†"è¿™ä¸¤ä¸ªæŠ€å·§ï¼Œå·§å¦™åœ°ç”¨ä¸€ä¸ªæ•°ç»„ç»´æŠ¤äº†æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ—¢èŠ‚çœäº†ç©ºé—´ï¼Œåˆä¿è¯äº†æ¯ä¸ªç‰©å“æœ€å¤šé€‰æ‹©ä¸€æ¬¡çš„é™åˆ¶ã€‚

```java
class Solution {
    /**
     * è§£å†³0/1èƒŒåŒ…é—®é¢˜ï¼ˆä¸€ç»´åŠ¨æ€è§„åˆ’ï¼‰
     * @param W èƒŒåŒ…çš„å®¹é‡
     * @param weights ç‰©å“çš„é‡é‡æ•°ç»„
     * @param values ç‰©å“çš„ä»·å€¼æ•°ç»„
     * @return èƒŒåŒ…èƒ½å¤Ÿå®¹çº³çš„æœ€å¤§ä»·å€¼
     */
    public int knapsack(int W, int[] weights, int[] values) {
        // 1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[j]è¡¨ç¤ºå®¹é‡ä¸ºjçš„èƒŒåŒ…æ‰€èƒ½è£…å…¥ç‰©å“çš„æœ€å¤§ä»·å€¼
        int[] dp = new int[W + 1];

        // 2&3. ç¡®å®šé€’æ¨å…¬å¼å’Œdpæ•°ç»„åˆå§‹åŒ–
        // åˆå§‹åŒ–å·²ç»å®Œæˆï¼Œå› ä¸ºé»˜è®¤å€¼0å°±æ˜¯åˆå§‹çŠ¶æ€ï¼ˆæœªæ”¾å…¥ä»»ä½•ç‰©å“æ—¶çš„ä»·å€¼ï¼‰

        // 4. ç¡®å®šéå†é¡ºåº
        for (int i = 0; i < weights.length; i++) {
            // å†…å±‚å¾ªç¯é€†åºéå†ï¼Œé¿å…å·²å¤„ç†çš„å†…å®¹å½±å“åç»­çš„ç»“æœ
            for (int j = W; j >= weights[i]; j--) {
                // é€’æ¨å…¬å¼ï¼šdp[j] = max(dp[j], dp[j-weights[i]] + values[i])
                dp[j] = Math.max(dp[j], dp[j - weights[i]] + values[i]);
            }
        }

        // è¿”å›èƒŒåŒ…å®¹é‡ä¸ºWæ—¶çš„æœ€å¤§ä»·å€¼
        return dp[W];
    }
}
```



### 416.åˆ†å‰²ç­‰å’Œå­é›†

ç»™å®šä¸€ä¸ªåªåŒ…å«æ­£æ•´æ•°çš„éç©ºæ•°ç»„ã€‚æ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å…ƒç´ å’Œç›¸ç­‰ã€‚

æ³¨æ„: æ¯ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ ä¸ä¼šè¶…è¿‡ 100 æ•°ç»„çš„å¤§å°ä¸ä¼šè¶…è¿‡ 200ã€‚

ç¤ºä¾‹ 1:

- è¾“å…¥: [1, 5, 11, 5]
- è¾“å‡º: true
- è§£é‡Š: æ•°ç»„å¯ä»¥åˆ†å‰²æˆ [1, 5, 5] å’Œ [11]ã€‚

ç¤ºä¾‹ 2:

- è¾“å…¥: [1, 2, 3, 5]
- è¾“å‡º: false
- è§£é‡Š: æ•°ç»„ä¸èƒ½åˆ†å‰²æˆä¸¤ä¸ªå…ƒç´ å’Œç›¸ç­‰çš„å­é›†ã€‚

```java
class Solution {
    public boolean canPartition(int[] nums) {
        int sum = Arrays.stream(nums).sum();
        if (sum % 2 != 0) {
            return false;
        }
        int target = sum / 2;

        // 1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[j]è¡¨ç¤ºæ˜¯å¦å¯ä»¥ä»numsä¸­é€‰æ‹©è‹¥å¹²ä¸ªæ•°ï¼Œä½¿å…¶å’Œå°½é‡ä¸ºj
        // è¿™é‡Œæˆ‘ä»¬ç”¨intæ•°ç»„æ¥æ¨¡æ‹Ÿbooleanæ•°ç»„ï¼Œdp[j]ä¸ºtrueæ—¶ï¼Œå€¼ç­‰äºj
        int[] dp = new int[target + 1];

        // 3. dpæ•°ç»„åˆå§‹åŒ–
        // dpæ•°ç»„åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºåˆå§‹çŠ¶æ€ä¸‹æ‰€æœ‰å’Œéƒ½ä¸å¯è¾¾
        // dp[0] = 0ï¼Œè¡¨ç¤ºå’Œä¸º0æ˜¯å¯è¾¾çš„ï¼ˆä¸é€‰æ‹©ä»»ä½•æ•°ï¼‰

        // 4. ç¡®å®šéå†é¡ºåº
        for (int i = 0; i < nums.length; i++) {
            // å†…å±‚å¾ªç¯é€†åºéå†ï¼Œé¿å…é‡å¤ä½¿ç”¨åŒä¸€ä¸ªæ•°
            for (int j = target; j >= nums[i]; j--) {
                // 2. ç¡®å®šé€’æ¨å…¬å¼
                // dp[j] = max(dp[j], dp[j - nums[i]] + nums[i])
                // å¦‚æœdp[j - nums[i]]å¯è¾¾ï¼Œé‚£ä¹ˆdp[j]ä¹Ÿå¯è¾¾
                dp[j] = Math.max(dp[j], dp[j - nums[i]] + nums[i]);
            }
        }

        // å¦‚æœdp[target] == targetï¼Œè¯´æ˜å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå­é›†ï¼Œå…¶å’Œç­‰äºtarget
        return dp[target] == target;
    }
}
```



### 1049.æœ€åä¸€å—çŸ³å¤´çš„é‡é‡IIï¼ˆ3.23ï¼‰

æœ‰ä¸€å †çŸ³å¤´ï¼Œæ¯å—çŸ³å¤´çš„é‡é‡éƒ½æ˜¯æ­£æ•´æ•°ã€‚

æ¯ä¸€å›åˆï¼Œä»ä¸­é€‰å‡ºä»»æ„ä¸¤å—çŸ³å¤´ï¼Œç„¶åå°†å®ƒä»¬ä¸€èµ·ç²‰ç¢ã€‚å‡è®¾çŸ³å¤´çš„é‡é‡åˆ†åˆ«ä¸º x å’Œ yï¼Œä¸” x <= yã€‚é‚£ä¹ˆç²‰ç¢çš„å¯èƒ½ç»“æœå¦‚ä¸‹ï¼š

å¦‚æœ x == yï¼Œé‚£ä¹ˆä¸¤å—çŸ³å¤´éƒ½ä¼šè¢«å®Œå…¨ç²‰ç¢ï¼›

å¦‚æœ x != yï¼Œé‚£ä¹ˆé‡é‡ä¸º x çš„çŸ³å¤´å°†ä¼šå®Œå…¨ç²‰ç¢ï¼Œè€Œé‡é‡ä¸º y çš„çŸ³å¤´æ–°é‡é‡ä¸º y-xã€‚

æœ€åï¼Œæœ€å¤šåªä¼šå‰©ä¸‹ä¸€å—çŸ³å¤´ã€‚è¿”å›æ­¤çŸ³å¤´æœ€å°çš„å¯èƒ½é‡é‡ã€‚å¦‚æœæ²¡æœ‰çŸ³å¤´å‰©ä¸‹ï¼Œå°±è¿”å› 0ã€‚

ç¤ºä¾‹ï¼š

- è¾“å…¥ï¼š[2,7,4,1,8,1]
- è¾“å‡ºï¼š1

è§£é‡Šï¼š

- ç»„åˆ 2 å’Œ 4ï¼Œå¾—åˆ° 2ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [2,7,1,8,1]ï¼Œ
- ç»„åˆ 7 å’Œ 8ï¼Œå¾—åˆ° 1ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [2,1,1,1]ï¼Œ
- ç»„åˆ 2 å’Œ 1ï¼Œå¾—åˆ° 1ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [1,1,1]ï¼Œ
- ç»„åˆ 1 å’Œ 1ï¼Œå¾—åˆ° 0ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [1]ï¼Œè¿™å°±æ˜¯æœ€ä¼˜å€¼ã€‚

```java
class Solution {
    public int lastStoneWeightII(int[] stones) {
        int sum = Arrays.stream(stones).sum();
        int target = sum / 2;
        if (sum % 2 == 1) {
            target += 1;
        }

        // 1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[j]è¡¨ç¤ºèƒ½å¦ä»stonesä¸­é€‰æ‹©è‹¥å¹²ä¸ªçŸ³å¤´ï¼Œä½¿å…¶é‡é‡å’Œæœ€æ¥è¿‘jä½†ä¸è¶…è¿‡j
        // dp[j]çš„å€¼è¡¨ç¤ºèƒ½å¤Ÿå¾—åˆ°çš„æœ€å¤§é‡é‡å’Œï¼ˆä¸è¶…è¿‡jï¼‰
        int[] dp = new int[target + 1];

        // 3. dpæ•°ç»„åˆå§‹åŒ–
        // dpæ•°ç»„åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºåˆå§‹çŠ¶æ€ä¸‹æ‰€æœ‰é‡é‡å’Œéƒ½æ— æ³•è¾¾åˆ°
        // dp[0] = 0 éšå«è¡¨ç¤ºé‡é‡å’Œä¸º0æ˜¯å¯è¾¾çš„ï¼ˆä¸é€‰æ‹©ä»»ä½•çŸ³å¤´ï¼‰

        // 4. ç¡®å®šéå†é¡ºåº
        for (int i = 0; i < stones.length; i++) {
            // å†…å±‚å¾ªç¯é€†åºéå†ï¼Œé¿å…é‡å¤ä½¿ç”¨åŒä¸€å—çŸ³å¤´
            for (int j = dp.length - 1; j >= stones[i]; j--) {
                // 2. ç¡®å®šé€’æ¨å…¬å¼
                // dp[j] = max(dp[j], dp[j - stones[i]] + stones[i])
                // å¦‚æœå¯ä»¥å¾—åˆ°dp[j - stones[i]]ï¼Œé‚£ä¹ˆåŠ ä¸Šå½“å‰çŸ³å¤´å°±å¯ä»¥å¾—åˆ°dp[j]
                dp[j] = Math.max(dp[j], dp[j - stones[i]] + stones[i]);
            }
        }

        // æœ€ç»ˆç»“æœæ˜¯æ€»é‡é‡å‡å»ä¸¤å€çš„æœ€æ¥è¿‘ä¸€åŠæ€»é‡é‡çš„å’Œ
        return Math.abs(sum - 2 * dp[target]);
    }
}
```

### 494.ç›®æ ‡å’Œï¼ˆ3.29ï¼‰

ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ï¼Œa1, a2, ..., an, å’Œä¸€ä¸ªç›®æ ‡æ•°ï¼ŒSã€‚ç°åœ¨ä½ æœ‰ä¸¤ä¸ªç¬¦å· + å’Œ -ã€‚å¯¹äºæ•°ç»„ä¸­çš„ä»»æ„ä¸€ä¸ªæ•´æ•°ï¼Œä½ éƒ½å¯ä»¥ä» + æˆ– -ä¸­é€‰æ‹©ä¸€ä¸ªç¬¦å·æ·»åŠ åœ¨å‰é¢ã€‚

è¿”å›å¯ä»¥ä½¿æœ€ç»ˆæ•°ç»„å’Œä¸ºç›®æ ‡æ•° S çš„æ‰€æœ‰æ·»åŠ ç¬¦å·çš„æ–¹æ³•æ•°ã€‚

ç¤ºä¾‹ï¼š

- è¾“å…¥ï¼šnums: [1, 1, 1, 1, 1], S: 3
- è¾“å‡ºï¼š5

è§£é‡Šï¼š

- -1+1+1+1+1 = 3
- +1-1+1+1+1 = 3
- +1+1-1+1+1 = 3
- +1+1+1-1+1 = 3
- +1+1+1+1-1 = 3

ä¸€å…±æœ‰5ç§æ–¹æ³•è®©æœ€ç»ˆç›®æ ‡å’Œä¸º3ã€‚

å‡è®¾åŠ æ³•çš„æ€»å’Œä¸ºxï¼Œé‚£ä¹ˆå‡æ³•å¯¹åº”çš„æ€»å’Œå°±æ˜¯sum - xã€‚

æ‰€ä»¥æˆ‘ä»¬è¦æ±‚çš„æ˜¯ x - (sum - x) = target

x = (target + sum) / 2

**æ­¤æ—¶é—®é¢˜å°±è½¬åŒ–ä¸ºï¼Œè£…æ»¡å®¹é‡ä¸ºxçš„èƒŒåŒ…ï¼Œæœ‰å‡ ç§æ–¹æ³•**ã€‚

è¿™é‡Œçš„xï¼Œå°±æ˜¯bagSizeï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åé¢è¦æ±‚çš„èƒŒåŒ…å®¹é‡ã€‚



åªè¦æåˆ°nums[i]ï¼Œå‡‘æˆdp[j]å°±æœ‰dp[j - nums[i]] ç§æ–¹æ³•ã€‚

ä¾‹å¦‚ï¼šdp[j]ï¼Œj ä¸º5ï¼Œ

- å·²ç»æœ‰ä¸€ä¸ª1ï¼ˆnums[i]ï¼‰ çš„è¯ï¼Œæœ‰ dp[4]ç§æ–¹æ³• å‡‘æˆ å®¹é‡ä¸º5çš„èƒŒåŒ…ã€‚
- å·²ç»æœ‰ä¸€ä¸ª2ï¼ˆnums[i]ï¼‰ çš„è¯ï¼Œæœ‰ dp[3]ç§æ–¹æ³• å‡‘æˆ å®¹é‡ä¸º5çš„èƒŒåŒ…ã€‚
- å·²ç»æœ‰ä¸€ä¸ª3ï¼ˆnums[i]ï¼‰ çš„è¯ï¼Œæœ‰ dp[2]ä¸­æ–¹æ³• å‡‘æˆ å®¹é‡ä¸º5çš„èƒŒåŒ…
- å·²ç»æœ‰ä¸€ä¸ª4ï¼ˆnums[i]ï¼‰ çš„è¯ï¼Œæœ‰ dp[1]ä¸­æ–¹æ³• å‡‘æˆ å®¹é‡ä¸º5çš„èƒŒåŒ…
- å·²ç»æœ‰ä¸€ä¸ª5 ï¼ˆnums[i]ï¼‰çš„è¯ï¼Œæœ‰ dp[0]ä¸­æ–¹æ³• å‡‘æˆ å®¹é‡ä¸º5çš„èƒŒåŒ…

é‚£ä¹ˆå‡‘æ•´dp[5]æœ‰å¤šå°‘æ–¹æ³•å‘¢ï¼Œä¹Ÿå°±æ˜¯æŠŠ æ‰€æœ‰çš„ dp[j - nums[i]] ç´¯åŠ èµ·æ¥ã€‚

```java
class Solution {
    public int findTargetSumWays(int[] nums, int target) {
        // 1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[j]è¡¨ç¤ºï¼šç”¨numsä¸­çš„æ•°å­—å‡‘æˆjçš„æ–¹æ³•æ•°
        // leftä»£è¡¨éœ€è¦é€‰å–çš„æ­£æ•°å’Œï¼Œ(sum-left)å³ä¸ºè´Ÿæ•°å’Œ
        int left = (Arrays.stream(nums).sum() + target) / 2;

        // åˆ¤æ–­æ˜¯å¦æœ‰è§£
        if ((Arrays.stream(nums).sum() + target) % 2 != 0 || left < 0) {
            return 0;
        }

        int[] dp = new int[left + 1];

        // 3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–
        // dp[0] = 1ï¼Œè¡¨ç¤ºä»€ä¹ˆéƒ½ä¸é€‰ï¼Œå‡‘æˆ0çš„æ–¹æ³•æ•°ä¸º1
        dp[0] = 1;

        // 4. ç¡®å®šéå†é¡ºåº
        // å¤–å±‚éå†numsæ•°ç»„ï¼Œå†…å±‚éå†ç›®æ ‡å’Œï¼ˆä»å¤§åˆ°å°ï¼‰
        for (int i = 0; i < nums.length; i++) {
            for (int j = dp.length - 1; j >= nums[i]; j--) {
                // 2. ç¡®å®šé€’æ¨å…¬å¼
                // å¯¹äºå½“å‰æ•°å­—nums[i]ï¼Œå¯ä»¥é€‰æ‹©ç”¨æˆ–ä¸ç”¨
                // å¦‚æœç”¨nums[i]ï¼Œåˆ™dp[j] += dp[j - nums[i]]
                dp[j] += dp[j - nums[i]];
            }
        }

        // è¿”å›å‡‘æˆç›®æ ‡å’Œleftçš„æ–¹æ³•æ•°
        return dp[left];
    }
}
```



### 474.ä¸€å’Œé›¶ï¼ˆ4.2ï¼‰

ç»™ä½ ä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²æ•°ç»„ strs å’Œä¸¤ä¸ªæ•´æ•° m å’Œ n ã€‚

è¯·ä½ æ‰¾å‡ºå¹¶è¿”å› strs çš„æœ€å¤§å­é›†çš„å¤§å°ï¼Œè¯¥å­é›†ä¸­ æœ€å¤š æœ‰ m ä¸ª 0 å’Œ n ä¸ª 1 ã€‚

å¦‚æœ x çš„æ‰€æœ‰å…ƒç´ ä¹Ÿæ˜¯ y çš„å…ƒç´ ï¼Œé›†åˆ x æ˜¯é›†åˆ y çš„ å­é›† ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šstrs = ["10", "0001", "111001", "1", "0"], m = 5, n = 3
- è¾“å‡ºï¼š4
- è§£é‡Šï¼šæœ€å¤šæœ‰ 5 ä¸ª 0 å’Œ 3 ä¸ª 1 çš„æœ€å¤§å­é›†æ˜¯ {"10","0001","1","0"} ï¼Œå› æ­¤ç­”æ¡ˆæ˜¯ 4 ã€‚ å…¶ä»–æ»¡è¶³é¢˜æ„ä½†è¾ƒå°çš„å­é›†åŒ…æ‹¬ {"0001","1"} å’Œ {"10","1","0"} ã€‚{"111001"} ä¸æ»¡è¶³é¢˜æ„ï¼Œå› ä¸ºå®ƒå« 4 ä¸ª 1 ï¼Œå¤§äº n çš„å€¼ 3



**dp[i] [j]ï¼šæœ€å¤šæœ‰iä¸ª0å’Œjä¸ª1çš„strsçš„æœ€å¤§å­é›†çš„å¤§å°ä¸ºdp[i] [j]**ã€‚



dp[i] [j]å¯ä»¥ç”±ä¸Šä¸€ä¸ªstrsé‡Œçš„å­—ç¬¦ä¸²æ¨å¯¼å‡ºæ¥ï¼Œå‡è®¾strsé‡Œå½“å‰çš„å­—ç¬¦ä¸²æœ‰zeroNumä¸ª0ï¼ŒoneNumä¸ª1ã€‚

dp[i] [j]å°±å¯ä»¥æ˜¯ dp[i - zeroNum] [j - oneNum] + 1ã€‚

ç„¶åæˆ‘ä»¬åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œå–dp[i] [j]çš„æœ€å¤§å€¼ã€‚

æ‰€ä»¥é€’æ¨å…¬å¼ï¼šdp[i] [j] = max(dp[i] [j], dp[i - zeroNum] [j - oneNum] + 1);

æ­¤æ—¶å¤§å®¶å¯ä»¥å›æƒ³ä¸€ä¸‹01èƒŒåŒ…çš„é€’æ¨å…¬å¼ï¼šdp[j] = max(dp[j], dp[j - weight[i]] + value[i]);

å¯¹æ¯”ä¸€ä¸‹å°±ä¼šå‘ç°ï¼Œå­—ç¬¦ä¸²çš„zeroNumå’ŒoneNumç›¸å½“äºç‰©å“çš„é‡é‡ï¼ˆweight[i]ï¼‰ï¼Œå­—ç¬¦ä¸²æœ¬èº«çš„ä¸ªæ•°ç›¸å½“äºç‰©å“çš„ä»·å€¼ï¼ˆvalue[i]ï¼‰ã€‚

**è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„01èƒŒåŒ…ï¼** åªä¸è¿‡ç‰©å“çš„é‡é‡æœ‰äº†ä¸¤ä¸ªç»´åº¦è€Œå·²ã€‚

```java
class Solution {
    public int findMaxForm(String[] strs, int m, int n) {
        // 1. ç¡®å®š DP æ•°ç»„ï¼ˆDP tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºåœ¨æœ€å¤šåŒ…å« i ä¸ª '0' å’Œ j ä¸ª '1' çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå½¢æˆçš„å­—ç¬¦ä¸²æœ€å¤§æ•°é‡
        int[][] dp = new int[m + 1][n + 1];

        // éå†æ‰€æœ‰å­—ç¬¦ä¸²
        for (String str : strs) {
            int zero = 0, one = 0;

            // ç»Ÿè®¡å½“å‰å­—ç¬¦ä¸²ä¸­çš„ 0 å’Œ 1 çš„æ•°é‡
            for (int i = 0; i < str.length(); i++) {
                if (str.charAt(i) == '0') {
                    zero++;
                } else {
                    one++;
                }
            }

            // 2. ç¡®å®šé€’æ¨å…¬å¼
            // å¯¹äºæ¯ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœé€‰æ‹©å®ƒï¼Œé‚£ä¹ˆ dp[i][j] å¯ä»¥é€šè¿‡é€‰æ‹©å‰çš„çŠ¶æ€ dp[i - zero][j - one] è½¬ç§»è€Œæ¥
            // é€’æ¨å…¬å¼ä¸ºï¼šdp[i][j] = Math.max(dp[i][j], dp[i - zero][j - one] + 1)

            // 3. ç¡®å®šéå†é¡ºåº
            // ä¸ºäº†é¿å…é‡å¤è®¡ç®—ï¼Œåº”è¯¥ä»å¤§åˆ°å°éå†ï¼Œç¡®ä¿åœ¨è®¡ç®— dp[i][j] æ—¶ä¸ä¼šé‡å¤ä½¿ç”¨åŒä¸€ä¸ªå­—ç¬¦ä¸²
            for (int i = m; i >= zero; i--) {
                for (int j = n; j >= one; j--) {
                    dp[i][j] = Math.max(dp[i][j], dp[i - zero][j - one] + 1);
                }
            }
        }

        // 4. DP æ•°ç»„å¦‚ä½•åˆå§‹åŒ–
        // åˆå§‹åŒ–æ—¶ï¼Œdp æ•°ç»„æ‰€æœ‰å€¼ä¸º 0ï¼Œå› ä¸ºä¸€å¼€å§‹æ²¡æœ‰ä»»ä½•å­—ç¬¦ä¸²è¢«é€‰æ‹©ï¼Œæ‰€ä»¥èƒ½å¤Ÿå½¢æˆçš„å­—ç¬¦ä¸²æ•°é‡ä¸º 0

        // è¿”å›ç»“æœï¼Œå³åœ¨æœ€å¤šåŒ…å« m ä¸ª '0' å’Œ n ä¸ª '1' çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå½¢æˆçš„å­—ç¬¦ä¸²æœ€å¤§æ•°é‡
        return dp[m][n];
    }
}
```

### å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼ˆæ¯é¢˜ï¼‰

ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ `weights`ï¼Œå…¶ä¸­ `weights[i]` è¡¨ç¤ºç¬¬ `i` ç§ç‰©å“çš„é‡é‡ï¼Œå’Œä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ `values`ï¼Œå…¶ä¸­ `values[i]` è¡¨ç¤ºç¬¬ `i` ç§ç‰©å“çš„ä»·å€¼ã€‚åŒæ—¶ç»™å®šä¸€ä¸ªæ­£æ•´æ•° `W`ï¼Œè¡¨ç¤ºèƒŒåŒ…çš„æœ€å¤§æ‰¿é‡ã€‚ä½ å¯ä»¥å°†æ¯ç§ç‰©å“é€‰æ‹©å¤šæ¬¡ï¼ˆå³æ¯ç§ç‰©å“æœ‰æ— é™å¤šä¸ªï¼‰ã€‚è¯·ä½ åœ¨ä¸è¶…è¿‡èƒŒåŒ…æœ€å¤§æ‰¿é‡çš„å‰æä¸‹ï¼Œè®¡ç®—ä½ å¯ä»¥è·å¾—çš„æœ€å¤§æ€»ä»·å€¼ã€‚

**ç¤ºä¾‹ 1ï¼š**

```

è¾“å…¥: C = 10, weights = [2, 3, 4], values = [3, 4, 5]
è¾“å‡º: 15
è§£é‡Š: é€‰æ‹©ä¸‰ä¸ªé‡é‡ä¸º 2 çš„ç‰©å“ï¼Œæ€»ä»·å€¼ä¸º 3 + 3 + 3 = 9ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªé‡é‡ä¸º 4 çš„ç‰©å“ï¼Œä»·å€¼ä¸º 5ï¼Œæ€»ä»·å€¼ä¸º 9 + 5 = 14ï¼Œå†åŠ ä¸€ä¸ªé‡é‡ä¸º 3 çš„ç‰©å“ï¼Œæ€»ä»·å€¼ä¸º 14 + 4 = 18ï¼Œä½†ç”±äºèƒŒåŒ…å®¹é‡ä¸º 10ï¼Œå› æ­¤æœ€å¤§ä»·å€¼ä¸º 15ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```

è¾“å…¥: C = 8, weights = [1, 3, 5], values = [10, 40, 70]
è¾“å‡º: 80
è§£é‡Š: é€‰æ‹©ä¸€ä¸ªé‡é‡ä¸º 5 çš„ç‰©å“å’Œä¸€ä¸ªé‡é‡ä¸º 3 çš„ç‰©å“ï¼Œæ€»ä»·å€¼ä¸º 70 + 40 = 110ï¼Œä½†æ˜¯èƒŒåŒ…å®¹é‡ä¸º 8ï¼Œå› æ­¤æœ€å¤§ä»·å€¼ä¸º 80ã€‚
```

**æç¤ºï¼š**

- 1 <= n <= 100
- 1 <= C <= 1000
- 1 <= weights[i], values[i] <= 1000

```java
class Solution {
    public int knapsack(int W, int[] weights, int[] values) {
        // 1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[j] è¡¨ç¤ºèƒŒåŒ…å®¹é‡ä¸º j æ—¶ï¼Œèƒ½å¤Ÿè·å¾—çš„æœ€å¤§ä»·å€¼ã€‚

        int[] dp = new int[W + 1];

        

        // 4. ç¡®å®šéå†é¡ºåº
        // é¦–å…ˆéå†æ¯ä¸ªç‰©å“ iï¼ˆå¤–å±‚å¾ªç¯ï¼‰ï¼Œç„¶åéå†èƒŒåŒ…å®¹é‡ jï¼ˆå†…å±‚å¾ªç¯ï¼‰ã€‚
        // ä¹‹æ‰€ä»¥å…ˆéå†ç‰©å“ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨è€ƒè™‘å½“å‰ç‰©å“æ˜¯å¦åŠ å…¥èƒŒåŒ…æ—¶ï¼Œä¾èµ–äºä¹‹å‰ç‰©å“çš„é€‰æ‹©ç»“æœã€‚
        // å¯¹äºå®Œå…¨èƒŒåŒ…é—®é¢˜ï¼Œå†…å±‚å¾ªç¯éå†èƒŒåŒ…å®¹é‡æ—¶ï¼Œå¿…é¡»ä»å°åˆ°å¤§éå†ï¼ˆæ­£åºéå†ï¼‰ï¼Œ
        // ä»¥ä¾¿ä¿è¯æ¯ç§ç‰©å“åœ¨è®¡ç®—æ—¶å¯ä»¥è¢«å¤šæ¬¡ä½¿ç”¨ï¼ˆåˆ©ç”¨å·²ç»æ›´æ–°è¿‡çš„ dp[j - weights[i]] å€¼ï¼‰ã€‚

        for (int i = 0; i < weights.length; i++) {  // å¤–å±‚å¾ªç¯ï¼Œéå†ç‰©å“
            for (int j = weights[i]; j <= W; j++) {  // å†…å±‚å¾ªç¯ï¼Œéå†èƒŒåŒ…å®¹é‡
                // 2. ç¡®å®šé€’æ¨å…¬å¼
                // å¯¹äºæ¯ä¸ªç‰©å“ iï¼Œéå†èƒŒåŒ…å®¹é‡ jï¼š
                // å¦‚æœé€‰æ‹©ç¬¬ i ä¸ªç‰©å“ï¼Œé‚£ä¹ˆå½“å‰çš„ dp[j] åº”è¯¥è€ƒè™‘ä¹‹å‰çŠ¶æ€ dp[j - weights[i]] + values[i]ã€‚
                // å› æ­¤é€’æ¨å…¬å¼ä¸ºï¼šdp[j] = Math.max(dp[j], dp[j - weights[i]] + values[i])
                dp[j] = Math.max(dp[j - weights[i]] + values[i], dp[j]);
            }
        }

        // 3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–
        // dp[0] = 0 è¡¨ç¤ºèƒŒåŒ…å®¹é‡ä¸º 0 æ—¶ï¼Œèƒ½è·å¾—çš„æœ€å¤§ä»·å€¼ä¸º 0ã€‚
        // å…¶ä»– dp[j] åˆå§‹åŒ–ä¸º 0 å³å¯ï¼Œå› ä¸ºé»˜è®¤çŠ¶æ€ä¸‹ï¼Œæœªæ”¾å…¥ä»»ä½•ç‰©å“æ—¶ï¼ŒèƒŒåŒ…çš„æœ€å¤§ä»·å€¼ä¸º 0ã€‚

        return dp[W];
    }
}
```

### 518.é›¶é’±å…‘æ¢IIï¼ˆ4.6ï¼‰

ç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸å’Œä¸€ä¸ªæ€»é‡‘é¢ã€‚å†™å‡ºå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢çš„ç¡¬å¸ç»„åˆæ•°ã€‚å‡è®¾æ¯ä¸€ç§é¢é¢çš„ç¡¬å¸æœ‰æ— é™ä¸ªã€‚

ç¤ºä¾‹ 1:

- è¾“å…¥: amount = 5, coins = [1, 2, 5]
- è¾“å‡º: 4

è§£é‡Š: æœ‰å››ç§æ–¹å¼å¯ä»¥å‡‘æˆæ€»é‡‘é¢:

- 5=5
- 5=2+2+1
- 5=2+1+1+1
- 5=1+1+1+1+1



01èƒŒåŒ…å†…åµŒçš„å¾ªç¯æ˜¯ä»å¤§åˆ°å°éå†ï¼Œä¸ºäº†ä¿è¯æ¯ä¸ªç‰©å“ä»…è¢«æ·»åŠ ä¸€æ¬¡ã€‚

è€Œå®Œå…¨èƒŒåŒ…çš„ç‰©å“æ˜¯å¯ä»¥æ·»åŠ å¤šæ¬¡çš„ï¼Œæ‰€ä»¥è¦ä»å°åˆ°å¤§å»éå†ã€‚

01èƒŒåŒ…ä¸­äºŒç»´dpæ•°ç»„çš„ä¸¤ä¸ªforéå†çš„å…ˆåå¾ªåºæ˜¯å¯ä»¥é¢ å€’äº†ï¼Œä¸€ç»´dpæ•°ç»„çš„ä¸¤ä¸ªforå¾ªç¯å…ˆåå¾ªåºä¸€å®šæ˜¯å…ˆéå†ç‰©å“ï¼Œå†éå†èƒŒåŒ…å®¹é‡ã€‚

**åœ¨å®Œå…¨èƒŒåŒ…ä¸­ï¼Œå¯¹äºä¸€ç»´dpæ•°ç»„æ¥è¯´ï¼Œå…¶å®ä¸¤ä¸ªforå¾ªç¯åµŒå¥—é¡ºåºæ˜¯æ— æ‰€è°“çš„ï¼**



**æ±‚è£…æ»¡èƒŒåŒ…æœ‰å‡ ç§æ–¹æ³•ï¼Œå…¬å¼éƒ½æ˜¯ï¼šdp[j] += dp[j - nums[i]];**

åœ¨æ±‚è£…æ»¡èƒŒåŒ…æœ‰å‡ ç§æ–¹æ¡ˆçš„æ—¶å€™ï¼Œè®¤æ¸…éå†é¡ºåºæ˜¯éå¸¸å…³é”®çš„ã€‚

**å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…**ã€‚

**å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“**ã€‚

```java
class Solution {
    public int change(int amount, int[] coins) {
        // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„åŠå…¶å«ä¹‰
        // dp[i]è¡¨ç¤ºå‡‘æˆæ€»é‡‘é¢içš„ç¡¬å¸ç»„åˆæ•°
        int[] dp = new int[amount + 1];
        
        // æ­¥éª¤3: dpæ•°ç»„åˆå§‹åŒ–
        // å‡‘æˆæ€»é‡‘é¢0çš„ç»„åˆæ•°ä¸º1ï¼ˆå³ä»€ä¹ˆéƒ½ä¸é€‰ï¼‰
        dp[0] = 1;
        
        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåº
        // å¤–å±‚éå†ç‰©å“ï¼ˆç¡¬å¸ï¼‰ï¼Œå†…å±‚éå†èƒŒåŒ…ï¼ˆé‡‘é¢ï¼‰
        // è¿™ç§é¡ºåºä¼šå¾—åˆ°ç»„åˆæ•°ï¼Œè€Œéæ’åˆ—æ•°
        for (int i = 0; i < coins.length; i++) {
            // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
            // dp[j] += dp[j - coins[i]]
            // å½“å‰é‡‘é¢çš„ç»„åˆæ•°ç­‰äºä¹‹å‰çš„ç»„åˆæ•°åŠ ä¸Šå‡å»å½“å‰ç¡¬å¸é¢å€¼åçš„ç»„åˆæ•°
            for (int j = coins[i]; j <= amount; j++) {
                dp[j] += dp[j - coins[i]];
            }
        }
        
        // è¿”å›å‡‘æˆç›®æ ‡é‡‘é¢çš„ç»„åˆæ•°
        return dp[amount];
    }
}

```

### 377.ç»„åˆæ€»å’ŒIVï¼ˆ3.21ï¼‰

ç»™å®šä¸€ä¸ªç”±æ­£æ•´æ•°ç»„æˆä¸”ä¸å­˜åœ¨é‡å¤æ•°å­—çš„æ•°ç»„ï¼Œæ‰¾å‡ºå’Œä¸ºç»™å®šç›®æ ‡æ­£æ•´æ•°çš„ç»„åˆçš„ä¸ªæ•°ã€‚

ç¤ºä¾‹:

- nums = [1, 2, 3]
- target = 4

æ‰€æœ‰å¯èƒ½çš„ç»„åˆä¸ºï¼š (1, 1, 1, 1) (1, 1, 2) (1, 2, 1) (1, 3) (2, 1, 1) (2, 2) (3, 1)

è¯·æ³¨æ„ï¼Œé¡ºåºä¸åŒçš„åºåˆ—è¢«è§†ä½œä¸åŒçš„ç»„åˆã€‚

å› æ­¤è¾“å‡ºä¸º 7ã€‚

æœ¬é¢˜é¢˜ç›®æè¿°è¯´æ˜¯æ±‚ç»„åˆï¼Œä½†åˆè¯´æ˜¯å¯ä»¥å…ƒç´ ç›¸åŒé¡ºåºä¸åŒçš„ç»„åˆç®—ä¸¤ä¸ªç»„åˆï¼Œ**å…¶å®å°±æ˜¯æ±‚æ’åˆ—ï¼**

**å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…**ã€‚

**å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“**ã€‚

```java
class Solution {
    public int combinationSum4(int[] nums, int target) {
        // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„åŠå…¶å«ä¹‰
        // dp[i]è¡¨ç¤ºå’Œä¸ºiçš„ç»„åˆçš„ä¸ªæ•°
        int[] dp = new int[target + 1];
        
        // æ­¥éª¤3: dpæ•°ç»„åˆå§‹åŒ–
        // å’Œä¸º0çš„ç»„åˆåªæœ‰ä¸€ç§,å°±æ˜¯ä»€ä¹ˆéƒ½ä¸é€‰
        dp[0] = 1;
        
        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåº
        // å¤–å±‚éå†èƒŒåŒ…(target),å†…å±‚éå†ç‰©å“(nums),å¾—åˆ°çš„æ˜¯æ’åˆ—æ•°
        for (int i = 1; i <= target; i++) {
            for (int num : nums) {
                // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
                // å¦‚æœå½“å‰å’Œiå¤§äºç­‰äºå½“å‰çš„æ•°num,åˆ™å¯ä»¥é€‰æ‹©è¯¥æ•°
                // dp[i] += dp[i - num] è¡¨ç¤ºåœ¨åŸæœ‰çš„ç»„åˆæ•°ä¸Š,åŠ ä¸Šé€‰æ‹©numåå‰©ä½™å’Œçš„ç»„åˆæ•°
                if (i >= num) {
                    dp[i] += dp[i - num];
                }
            }
        }
        
        // è¿”å›å’Œä¸ºtargetçš„æ’åˆ—æ•°
        return dp[target];
    }
}
```

### 322.é›¶é’±å…‘æ¢ï¼ˆ3.28ï¼‰

ç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸ coins å’Œä¸€ä¸ªæ€»é‡‘é¢ amountã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å› -1ã€‚

ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šcoins = [1, 2, 5], amount = 11
- è¾“å‡ºï¼š3
- è§£é‡Šï¼š11 = 5 + 5 + 1



æœ¬é¢˜æ±‚é’±å¸æœ€å°ä¸ªæ•°ï¼Œ**é‚£ä¹ˆé’±å¸æœ‰é¡ºåºå’Œæ²¡æœ‰é¡ºåºéƒ½å¯ä»¥ï¼Œéƒ½ä¸å½±å“é’±å¸çš„æœ€å°ä¸ªæ•°**ã€‚å¯ä»¥çœ‹ä½œä¸ºæ±‚æœ€å°å­é›†ï¼Œè€Œ474.ä¸€å’Œé›¶æ˜¯æ±‚æœ€å¤§å­é›†ï¼Œå”¯ä¸€ä¸åŒæ˜¯åœ¨é€’æ¨å…¬å¼ä¸Šï¼Œæœ¬é¢˜é€’æ¨å…¬å¼ä¸º dp[i] = Math.min(dp[i], dp[i - coin] + 1); ä¸€å’Œé›¶çš„é€’æ¨å…¬å¼ä¸ºdp[i] [j] = Math.max(dp[i] [j], dp[i - zero] [j - one] + 1); åŸºæœ¬ä¸Šä¸€æ ·ï¼Œåªä¸è¿‡æ˜¯maxå’Œminçš„åŒºåˆ«ã€‚

æ‰€ä»¥æœ¬é¢˜å¹¶ä¸å¼ºè°ƒé›†åˆæ˜¯ç»„åˆè¿˜æ˜¯æ’åˆ—ã€‚

**å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…**ã€‚

**å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“**ã€‚

```java
//ä»£ç éšæƒ³å½•çš„é¢˜è§£
class Solution {
    public int coinChange(int[] coins, int amount) {
        // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„åŠå…¶å«ä¹‰
        // dp[i]è¡¨ç¤ºå‡‘æˆé‡‘é¢iæ‰€éœ€çš„æœ€å°‘ç¡¬å¸æ•°
        int[] dp = new int[amount + 1];

        // æ­¥éª¤3: dpæ•°ç»„åˆå§‹åŒ–
        // åˆå§‹åŒ–ä¸ºä¸€ä¸ªä¸å¯èƒ½çš„å¤§å€¼ï¼Œamount + 1 å°±å¯ä»¥ç¡®ä¿æ¯”ä»»ä½•å¯èƒ½çš„ç¡¬å¸æ•°éƒ½å¤§
        Arrays.fill(dp, amount + 1);
        // å‡‘æˆé‡‘é¢0éœ€è¦0ä¸ªç¡¬å¸
        dp[0] = 0;

        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåº
        // å¤–å±‚éå†ç‰©å“ï¼ˆç¡¬å¸ï¼‰ï¼Œå†…å±‚éå†èƒŒåŒ…ï¼ˆé‡‘é¢ï¼‰
        for (int coin : coins) {
            for (int j = coin; j <= amount; j++) {
                // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
                // dp[j] = Math.min(dp[j], dp[j - coin] + 1) è¡¨ç¤ºé€‰æ‹©å½“å‰ç¡¬å¸å’Œä¸é€‰æ‹©å½“å‰ç¡¬å¸ä¸¤ç§æƒ…å†µçš„æœ€å°å€¼
                dp[j] = Math.min(dp[j], dp[j - coin] + 1);
            }
        }

        // å¦‚æœdp[amount]ä»ç„¶æ˜¯åˆå§‹å€¼ï¼Œè¯´æ˜æ— æ³•å‡‘å‡ºç›®æ ‡é‡‘é¢ï¼Œè¿”å›-1
        // å¦åˆ™è¿”å›æ‰€éœ€çš„æœ€å°‘ç¡¬å¸æ•°
        return dp[amount] == amount + 1 ? -1 : dp[amount];
    }
}
```



### 279.å®Œå…¨å¹³æ–¹æ•°

ç»™å®šæ­£æ•´æ•° nï¼Œæ‰¾åˆ°è‹¥å¹²ä¸ªå®Œå…¨å¹³æ–¹æ•°ï¼ˆæ¯”å¦‚ 1, 4, 9, 16, ...ï¼‰ä½¿å¾—å®ƒä»¬çš„å’Œç­‰äº nã€‚ä½ éœ€è¦è®©ç»„æˆå’Œçš„å®Œå…¨å¹³æ–¹æ•°çš„ä¸ªæ•°æœ€å°‘ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å›å’Œä¸º n çš„å®Œå…¨å¹³æ–¹æ•°çš„ æœ€å°‘æ•°é‡ ã€‚

å®Œå…¨å¹³æ–¹æ•° æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå…¶å€¼ç­‰äºå¦ä¸€ä¸ªæ•´æ•°çš„å¹³æ–¹ï¼›æ¢å¥è¯è¯´ï¼Œå…¶å€¼ç­‰äºä¸€ä¸ªæ•´æ•°è‡ªä¹˜çš„ç§¯ã€‚ä¾‹å¦‚ï¼Œ1ã€4ã€9 å’Œ 16 éƒ½æ˜¯å®Œå…¨å¹³æ–¹æ•°ï¼Œè€Œ 3 å’Œ 11 ä¸æ˜¯ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šn = 12
- è¾“å‡ºï¼š3
- è§£é‡Šï¼š12 = 4 + 4 + 4

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šn = 13
- è¾“å‡ºï¼š2
- è§£é‡Šï¼š13 = 4 + 9



**æˆ‘æ¥æŠŠé¢˜ç›®ç¿»è¯‘ä¸€ä¸‹ï¼šå®Œå…¨å¹³æ–¹æ•°å°±æ˜¯ç‰©å“ï¼ˆå¯ä»¥æ— é™ä»¶ä½¿ç”¨ï¼‰ï¼Œå‡‘ä¸ªæ­£æ•´æ•°nå°±æ˜¯èƒŒåŒ…ï¼Œé—®å‡‘æ»¡è¿™ä¸ªèƒŒåŒ…æœ€å°‘æœ‰å¤šå°‘ç‰©å“ï¼Ÿ**å…¶å®è·Ÿä¸Šé“é¢˜æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå°±æ˜¯èƒŒåŒ…éœ€è¦ä½ è‡ªå·±è½¬æ¢å®šä¹‰ã€‚

```java
/**
 * å®Œå…¨å¹³æ–¹æ•°
 */
class Solution {
    /**
     * è®¡ç®—nçš„æœ€å°å®Œå…¨å¹³æ–¹æ•°ä¸ªæ•°
     * @param n ç›®æ ‡æ•°
     * @return æœ€å°å®Œå…¨å¹³æ–¹æ•°ä¸ªæ•°
     */
    public int numSquares(int n) {
        // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸ºn+1çš„æ•°ç»„ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ªæ•°çš„æœ€å°å®Œå…¨å¹³æ–¹æ•°ä¸ªæ•°
        int [] dp = new int[n + 1];
        // å°†æ•°ç»„dpçš„æ¯ä¸ªå…ƒç´ åˆå§‹åŒ–ä¸ºæœ€å¤§å€¼ï¼Œä»é€’å½’å…¬å¼dp[j] = min(dp[j - i * i] + 1, dp[j]);ä¸­å¯ä»¥çœ‹å‡ºæ¯æ¬¡dp[j]éƒ½è¦é€‰æœ€å°çš„ï¼Œæ‰€ä»¥é0ä¸‹æ ‡çš„dp[j]			ä¸€å®šè¦åˆå§‹ä¸ºæœ€å¤§å€¼ï¼Œè¿™æ ·dp[j]åœ¨é€’æ¨çš„æ—¶å€™æ‰ä¸ä¼šè¢«åˆå§‹å€¼è¦†ç›–ã€‚
        Arrays.fill(dp, Integer.MAX_VALUE);
        // å°†dp[0]è®¾ä¸º0ï¼Œè¡¨ç¤º0çš„æœ€å°å®Œå…¨å¹³æ–¹æ•°ä¸ªæ•°ä¸º0
        dp[0] = 0;
        // éå†1åˆ°nçš„æ¯ä¸ªæ•°
        for (int i = 1; i *  i <= n; i++) {
            // éå†içš„å¹³æ–¹åˆ°nçš„æ¯ä¸ªæ•°
            for (int j = i * i; j <= n; j++) {
                // æ›´æ–°dp[j]çš„å€¼ä¸ºdp[j]å’Œdp[j - i * i] + 1çš„è¾ƒå°å€¼
                dp[j] = Math.min(dp[j], dp[j - i * i] + 1);
            }
        }
        // è¿”å›dp[n]ï¼Œå³nçš„æœ€å°å®Œå…¨å¹³æ–¹æ•°ä¸ªæ•°
        return dp[n];
    }
}
```

### 139.å•è¯æ‹†åˆ†ï¼ˆ3.31ï¼‰

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ `wordDict` ä½œä¸ºå­—å…¸ã€‚å¦‚æœå¯ä»¥åˆ©ç”¨å­—å…¸ä¸­å‡ºç°çš„ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯æ‹¼æ¥å‡º `s` åˆ™è¿”å› `true`ã€‚

**æ³¨æ„ï¼š**ä¸è¦æ±‚å­—å…¸ä¸­å‡ºç°çš„å•è¯å…¨éƒ¨éƒ½ä½¿ç”¨ï¼Œå¹¶ä¸”å­—å…¸ä¸­çš„å•è¯å¯ä»¥é‡å¤ä½¿ç”¨ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥: s = "leetcode", wordDict = ["leet", "code"]
è¾“å‡º: true
è§£é‡Š: è¿”å› true å› ä¸º "leetcode" å¯ä»¥ç”± "leet" å’Œ "code" æ‹¼æ¥æˆã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥: s = "applepenapple", wordDict = ["apple", "pen"]
è¾“å‡º: true
è§£é‡Š: è¿”å› true å› ä¸º "applepenapple" å¯ä»¥ç”± "apple" "pen" "apple" æ‹¼æ¥æˆã€‚
     æ³¨æ„ï¼Œä½ å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥: s = "catsandog", wordDict = ["cats", "dog", "sand", "and", "cat"]
è¾“å‡º: false
```



å•è¯å°±æ˜¯ç‰©å“ï¼Œå­—ç¬¦ä¸²så°±æ˜¯èƒŒåŒ…ï¼Œå•è¯èƒ½å¦ç»„æˆå­—ç¬¦ä¸²sï¼Œå°±æ˜¯é—®ç‰©å“èƒ½ä¸èƒ½æŠŠèƒŒåŒ…è£…æ»¡ã€‚

æ‹†åˆ†æ—¶å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ï¼Œè¯´æ˜å°±æ˜¯ä¸€ä¸ªå®Œå…¨èƒŒåŒ…ï¼

åŠ¨è§„äº”éƒ¨æ›²åˆ†æå¦‚ä¸‹ï¼š

1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

   **dp[i] : å­—ç¬¦ä¸²é•¿åº¦ä¸ºiçš„è¯ï¼Œdp[i]ä¸ºtrueï¼Œè¡¨ç¤ºå¯ä»¥æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯**ã€‚

2. ç¡®å®šé€’æ¨å…¬å¼

å¦‚æœç¡®å®šdp[j] æ˜¯trueï¼Œä¸” [j, i] è¿™ä¸ªåŒºé—´çš„å­ä¸²å‡ºç°åœ¨å­—å…¸é‡Œï¼Œé‚£ä¹ˆdp[i]ä¸€å®šæ˜¯trueã€‚ï¼ˆj < i ï¼‰ã€‚

æ‰€ä»¥é€’æ¨å…¬å¼æ˜¯ if([j, i] è¿™ä¸ªåŒºé—´çš„å­ä¸²å‡ºç°åœ¨å­—å…¸é‡Œ && dp[j]æ˜¯true) é‚£ä¹ˆ dp[i] = trueã€‚

3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

ä»é€’æ¨å…¬å¼ä¸­å¯ä»¥çœ‹å‡ºï¼Œdp[i] çš„çŠ¶æ€ä¾é  dp[j]æ˜¯å¦ä¸ºtrueï¼Œé‚£ä¹ˆdp[0]å°±æ˜¯é€’æ¨çš„æ ¹åŸºï¼Œ**dp[0]ä¸€å®šè¦ä¸ºtrue**ï¼Œå¦åˆ™é€’æ¨ä¸‹å»åé¢éƒ½éƒ½æ˜¯falseäº†ã€‚

é‚£ä¹ˆdp[0]æœ‰æ²¡æœ‰æ„ä¹‰å‘¢ï¼Ÿ

dp[0]è¡¨ç¤ºå¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºçš„è¯ï¼Œè¯´æ˜å‡ºç°åœ¨å­—å…¸é‡Œã€‚

ä½†é¢˜ç›®ä¸­è¯´äº†â€œç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² sâ€ æ‰€ä»¥æµ‹è¯•æ•°æ®ä¸­ä¸ä¼šå‡ºç°iä¸º0çš„æƒ…å†µï¼Œé‚£ä¹ˆdp[0]åˆå§‹ä¸ºtrueå®Œå…¨å°±æ˜¯ä¸ºäº†æ¨å¯¼å…¬å¼ã€‚

ä¸‹æ ‡é0çš„dp[i]åˆå§‹åŒ–ä¸ºfalseï¼Œåªè¦æ²¡æœ‰è¢«è¦†ç›–è¯´æ˜éƒ½æ˜¯ä¸å¯æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯ã€‚

4. ç¡®å®šéå†é¡ºåº

é¢˜ç›®ä¸­è¯´æ˜¯æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯ï¼Œæ‰€ä»¥è¿™æ˜¯å®Œå…¨èƒŒåŒ…ã€‚

è¿˜è¦è®¨è®ºä¸¤å±‚forå¾ªç¯çš„å‰åé¡ºåºã€‚

**å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…**ã€‚

**å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“**ã€‚

æˆ‘åœ¨è¿™é‡Œåšä¸€ä¸ªæ€»ç»“ï¼š

æ±‚ç»„åˆæ•°ï¼š[åŠ¨æ€è§„åˆ’ï¼š518.é›¶é’±å…‘æ¢II (opens new window)](https://programmercarl.com/0518.é›¶é’±å…‘æ¢II.html)

æ±‚æ’åˆ—æ•°ï¼š[åŠ¨æ€è§„åˆ’ï¼š377. ç»„åˆæ€»å’Œ â…£ (opens new window)](https://programmercarl.com/0377.ç»„åˆæ€»å’Œ.html)ã€[åŠ¨æ€è§„åˆ’ï¼š70. çˆ¬æ¥¼æ¢¯è¿›é˜¶ç‰ˆï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰ (opens new window)](https://programmercarl.com/0070.çˆ¬æ¥¼æ¢¯å®Œå…¨èƒŒåŒ…ç‰ˆæœ¬.html)

æ±‚æœ€å°æ•°ï¼š[åŠ¨æ€è§„åˆ’ï¼š322. é›¶é’±å…‘æ¢ (opens new window)](https://programmercarl.com/0322.é›¶é’±å…‘æ¢.html)ã€[åŠ¨æ€è§„åˆ’ï¼š279.å®Œå…¨å¹³æ–¹æ•°(opens new window)](https://programmercarl.com/0279.å®Œå…¨å¹³æ–¹æ•°.html)

è€Œæœ¬é¢˜å…¶å®æˆ‘ä»¬æ±‚çš„æ˜¯æ’åˆ—æ•°ï¼Œä¸ºä»€ä¹ˆå‘¢ã€‚ æ‹¿ s = "applepenapple", wordDict = ["apple", "pen"] ä¸¾ä¾‹ã€‚

"apple", "pen" æ˜¯ç‰©å“ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æ±‚ ç‰©å“çš„ç»„åˆä¸€å®šæ˜¯ "apple" + "pen" + "apple" æ‰èƒ½ç»„æˆ "applepenapple"ã€‚

"apple" + "apple" + "pen" æˆ–è€… "pen" + "apple" + "apple" æ˜¯ä¸å¯ä»¥çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ˜¯å¼ºè°ƒç‰©å“ä¹‹é—´é¡ºåºã€‚

æ‰€ä»¥è¯´ï¼Œ**æœ¬é¢˜ä¸€å®šæ˜¯ å…ˆéå† èƒŒåŒ…ï¼Œå†éå†ç‰©å“**ã€‚

```java
class Solution {
    public boolean wordBreak(String s, List<String> wordDict) {
        // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„åŠå…¶å«ä¹‰
        // dp[i] è¡¨ç¤ºå­—ç¬¦ä¸² s çš„å‰ i ä¸ªå­—ç¬¦ï¼ˆå³ s[0:i-1]ï¼‰æ˜¯å¦å¯ä»¥è¢« wordDict ä¸­çš„å•è¯ç»„åˆæ‹†åˆ†ã€‚
        // è¿™é‡Œçš„ i æ˜¯ä¸‹æ ‡ä» 1 å¼€å§‹çš„ï¼Œdp[0] è¡¨ç¤ºç©ºå­—ç¬¦ä¸²çš„æƒ…å†µã€‚

        boolean[] dp = new boolean[s.length() + 1];

        // æ­¥éª¤3: dpæ•°ç»„åˆå§‹åŒ–
        // ç©ºå­—ç¬¦ä¸²å¯ä»¥è¢«è§†ä¸ºå·²ç»æˆåŠŸæ‹†åˆ†ï¼Œå› æ­¤ dp[0] è®¾ä¸º trueã€‚

        dp[0] = true;

        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåº
        // å¤–å±‚éå†å­—ç¬¦ä¸²é•¿åº¦ iï¼Œä»1åˆ°s.length()ï¼Œè¡¨ç¤ºæˆ‘ä»¬åœ¨æ£€æŸ¥å‰iä¸ªå­—ç¬¦èƒ½å¦è¢«æˆåŠŸæ‹†åˆ†ã€‚
        // å†…å±‚éå†æ‹†åˆ†ç‚¹ jï¼Œä»0åˆ°i-1ï¼Œè¡¨ç¤ºæˆ‘ä»¬å°è¯•å°† s æ‹†åˆ†ä¸º s[0:j] å’Œ s[j:i] ä¸¤éƒ¨åˆ†ï¼Œ
        // å¹¶æ£€æŸ¥è¿™ä¸¤éƒ¨åˆ†æ˜¯å¦éƒ½å¯ä»¥è¢«æˆåŠŸæ‹†åˆ†å’ŒåŒ¹é…ã€‚

        for (int i = 1; i <= s.length(); i++) {
            for (int j = 0; j < i; j++) {
                // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
                // å¦‚æœ dp[j] ä¸º trueï¼Œè¡¨ç¤º s çš„å‰ j ä¸ªå­—ç¬¦å¯ä»¥è¢«æˆåŠŸæ‹†åˆ†ï¼Œ
                // å¹¶ä¸” s[j:i] åœ¨ wordDict ä¸­å­˜åœ¨ï¼Œè¡¨ç¤ºå‰©ä¸‹çš„éƒ¨åˆ†ä¹Ÿå¯ä»¥è¢«æˆåŠŸæ‹†åˆ†ã€‚
                // å› æ­¤ dp[i] å¯ä»¥è¢«è®¾ç½®ä¸º trueï¼Œè¡¨ç¤ºå‰ i ä¸ªå­—ç¬¦å¯ä»¥è¢«æˆåŠŸæ‹†åˆ†ã€‚

                if (dp[j] && wordDict.contains(s.substring(j, i))) {
                    dp[i] = true;
                    break;  // ä¸€æ—¦æ‰¾åˆ°ä¸€ç§æœ‰æ•ˆæ‹†åˆ†æ–¹å¼å°±å¯ä»¥è·³å‡ºå†…å±‚å¾ªç¯ï¼Œç›¸å½“äºåšäº†ä¸ªå‰ªæå¯ä¸è¦ã€‚

                }
            }
        }

        // è¿”å›æ•´ä¸ªå­—ç¬¦ä¸² s æ˜¯å¦å¯ä»¥è¢«æ‹†åˆ†ä¸ºå­—å…¸ä¸­å•è¯çš„ç»„åˆã€‚
        return dp[s.length()];
    }
}
```



### 198.æ‰“å®¶åŠ«èˆ

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚

ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚

- ç¤ºä¾‹ 1ï¼š
- è¾“å…¥ï¼š[1,2,3,1]
- è¾“å‡ºï¼š4

è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚  å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚



1.ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

**dp[i]ï¼šè€ƒè™‘ä¸‹æ ‡iï¼ˆåŒ…æ‹¬iï¼‰ä»¥å†…çš„æˆ¿å±‹ï¼Œæœ€å¤šå¯ä»¥å·çªƒçš„é‡‘é¢ä¸ºdp[i]**ã€‚

2.ç¡®å®šé€’æ¨å…¬å¼

å†³å®šdp[i]çš„å› ç´ å°±æ˜¯ç¬¬iæˆ¿é—´å·è¿˜æ˜¯ä¸å·ã€‚

å¦‚æœå·ç¬¬iæˆ¿é—´ï¼Œé‚£ä¹ˆdp[i] = dp[i - 2] + nums[i] ï¼Œå³ï¼šç¬¬i-1æˆ¿ä¸€å®šæ˜¯ä¸è€ƒè™‘çš„ï¼Œæ‰¾å‡º ä¸‹æ ‡i-2ï¼ˆåŒ…æ‹¬i-2ï¼‰ä»¥å†…çš„æˆ¿å±‹ï¼Œæœ€å¤šå¯ä»¥å·çªƒçš„é‡‘é¢ä¸ºdp[i-2] åŠ ä¸Šç¬¬iæˆ¿é—´å·åˆ°çš„é’±ã€‚

å¦‚æœä¸å·ç¬¬iæˆ¿é—´ï¼Œé‚£ä¹ˆdp[i] = dp[i - 1]ï¼Œå³è€ƒ è™‘i-1æˆ¿ï¼Œï¼ˆ**æ³¨æ„è¿™é‡Œæ˜¯è€ƒè™‘ï¼Œå¹¶ä¸æ˜¯ä¸€å®šè¦å·i-1æˆ¿ï¼Œè¿™æ˜¯å¾ˆå¤šåŒå­¦å®¹æ˜“æ··æ·†çš„ç‚¹**ï¼‰

ç„¶ådp[i]å–æœ€å¤§å€¼ï¼Œå³dp[i] = max(dp[i - 2] + nums[i], dp[i - 1]);

3.dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

ä»é€’æ¨å…¬å¼dp[i] = max(dp[i - 2] + nums[i], dp[i - 1]);å¯ä»¥çœ‹å‡ºï¼Œé€’æ¨å…¬å¼çš„åŸºç¡€å°±æ˜¯dp[0] å’Œ dp[1]

ä»dp[i]çš„å®šä¹‰ä¸Šæ¥è®²ï¼Œdp[0] ä¸€å®šæ˜¯ nums[0]ï¼Œdp[1]å°±æ˜¯nums[0]å’Œnums[1]çš„æœ€å¤§å€¼å³ï¼šdp[1] = max(nums[0], nums[1]);

```java
class Solution {
    public int rob(int[] nums) {
        // ç‰¹æ®Šæƒ…å†µå¤„ç†
        if (nums.length == 1) {
            return nums[0];
        }

        // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i]è¡¨ç¤ºå·çªƒåˆ°ç¬¬ié—´æˆ¿å±‹æ—¶å¯ä»¥è·å¾—çš„æœ€å¤§é‡‘é¢
        int[] dp = new int[nums.length];

        // æ­¥éª¤3: dpæ•°ç»„åˆå§‹åŒ–
        // åªæœ‰ä¸€é—´æˆ¿å±‹æ—¶ï¼Œæœ€å¤§é‡‘é¢å°±æ˜¯è¯¥æˆ¿å±‹çš„é‡‘é¢
        dp[0] = nums[0];
        // æœ‰ä¸¤é—´æˆ¿å±‹æ—¶ï¼Œé€‰æ‹©é‡‘é¢è¾ƒå¤§çš„é‚£é—´
        dp[1] = Math.max(nums[0], nums[1]);

        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåº
        // ä»å‰å¾€åéå†ï¼Œå› ä¸ºåé¢çš„çŠ¶æ€ä¾èµ–å‰é¢çš„çŠ¶æ€
        for (int i = 2; i < dp.length; i++) {
            // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
            // å¯¹äºå½“å‰æˆ¿å±‹ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š
            // 1. ä¸å·å½“å‰æˆ¿å±‹ï¼Œåˆ™æœ€å¤§é‡‘é¢ä¸å‰ä¸€ä¸ªæˆ¿å±‹ç›¸åŒï¼šdp[i-1]
            // 2. å·å½“å‰æˆ¿å±‹ï¼Œåˆ™æœ€å¤§é‡‘é¢æ˜¯å‰å‰ä¸ªæˆ¿å±‹çš„æœ€å¤§é‡‘é¢åŠ ä¸Šå½“å‰æˆ¿å±‹çš„é‡‘é¢ï¼šdp[i-2] + nums[i]
            // å–ä¸¤è€…ä¸­çš„è¾ƒå¤§å€¼
            dp[i] = Math.max(dp[i - 1], dp[i - 2] + nums[i]);
        }

        // è¿”å›æœ€åä¸€ä¸ªæˆ¿å±‹çš„çŠ¶æ€ï¼Œå³å¯è·å¾—çš„æœ€å¤§é‡‘é¢
        return dp[dp.length - 1];
    }
}
```

### 213.æ‰“å®¶åŠ«èˆIIï¼ˆ3.26ï¼‰

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ï¼Œæ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ã€‚è¿™ä¸ªåœ°æ–¹æ‰€æœ‰çš„æˆ¿å±‹éƒ½ å›´æˆä¸€åœˆ ï¼Œè¿™æ„å‘³ç€**ç¬¬ä¸€ä¸ªæˆ¿å±‹å’Œæœ€åä¸€ä¸ªæˆ¿å±‹æ˜¯ç´§æŒ¨ç€çš„**ã€‚åŒæ—¶ï¼Œç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ ã€‚

ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œèƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šnums = [2,3,2]
- è¾“å‡ºï¼š3
- è§£é‡Šï¼šä½ ä¸èƒ½å…ˆå·çªƒ 1 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 2ï¼‰ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 2ï¼‰, å› ä¸ºä»–ä»¬æ˜¯ç›¸é‚»çš„ã€‚



å¯¹äºä¸€ä¸ªæ•°ç»„ï¼Œæˆç¯çš„è¯ä¸»è¦æœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µï¼š

- æƒ…å†µä¸€ï¼šè€ƒè™‘ä¸åŒ…å«é¦–å°¾å…ƒç´ 

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210129160748643-20230310134000692.jpg" alt="213.æ‰“å®¶åŠ«èˆII" style="zoom:50%;" />

- æƒ…å†µäºŒï¼šè€ƒè™‘åŒ…å«é¦–å…ƒç´ ï¼Œä¸åŒ…å«å°¾å…ƒç´ 

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210129160821374-20230310134003961.jpg" alt="213.æ‰“å®¶åŠ«èˆII1" style="zoom:50%;" />

- æƒ…å†µä¸‰ï¼šè€ƒè™‘åŒ…å«å°¾å…ƒç´ ï¼Œä¸åŒ…å«é¦–å…ƒç´ 

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210129160842491-20230310134008133.jpg" alt="213.æ‰“å®¶åŠ«èˆII2" style="zoom:50%;" />

**æ³¨æ„æˆ‘è¿™é‡Œç”¨çš„æ˜¯"è€ƒè™‘"**ï¼Œä¾‹å¦‚æƒ…å†µä¸‰ï¼Œè™½ç„¶æ˜¯è€ƒè™‘åŒ…å«å°¾å…ƒç´ ï¼Œä½†ä¸ä¸€å®šè¦é€‰å°¾éƒ¨å…ƒç´ ï¼ å¯¹äºæƒ…å†µä¸‰ï¼Œå–nums[1] å’Œ nums[3]å°±æ˜¯æœ€å¤§çš„ã€‚

**è€Œæƒ…å†µäºŒ å’Œ æƒ…å†µä¸‰ éƒ½åŒ…å«äº†æƒ…å†µä¸€äº†ï¼Œæ‰€ä»¥åªè€ƒè™‘æƒ…å†µäºŒå’Œæƒ…å†µä¸‰å°±å¯ä»¥äº†**ã€‚

åˆ†æåˆ°è¿™é‡Œï¼Œæœ¬é¢˜å…¶å®æ¯”è¾ƒç®€å•äº†ã€‚ å‰©ä¸‹çš„å’Œ[198.æ‰“å®¶åŠ«èˆ (opens new window)](https://programmercarl.com/0198.æ‰“å®¶åŠ«èˆ.html)å°±æ˜¯ä¸€æ ·çš„äº†ã€‚

```java
class Solution {
    public int rob(int[] nums) {
        // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp1[i]è¡¨ç¤ºä»ç¬¬ä¸€ä¸ªæˆ¿å­å¼€å§‹å·ï¼Œåˆ°ç¬¬iä¸ªæˆ¿å­ä¸ºæ­¢èƒ½å·åˆ°çš„æœ€å¤§é‡‘é¢ï¼ˆä¸åŒ…æ‹¬æœ€åä¸€ä¸ªæˆ¿å­ï¼‰
        // dp2[i]è¡¨ç¤ºä»ç¬¬äºŒä¸ªæˆ¿å­å¼€å§‹å·ï¼Œåˆ°ç¬¬iä¸ªæˆ¿å­ä¸ºæ­¢èƒ½å·åˆ°çš„æœ€å¤§é‡‘é¢ï¼ˆåŒ…æ‹¬æœ€åä¸€ä¸ªæˆ¿å­ï¼‰

        // ç‰¹æ®Šæƒ…å†µå¤„ç†
        if (nums.length == 1) {
            return nums[0];
        }
        if (nums.length == 2) {
            return Math.max(nums[0], nums[1]);
        }

        int[] dp1 = new int[nums.length];
        int[] dp2 = new int[nums.length];

        // æ­¥éª¤3: dpæ•°ç»„åˆå§‹åŒ–
        // å¯¹äºdp1ï¼ˆä»ç¬¬ä¸€ä¸ªæˆ¿å­å¼€å§‹å·ï¼‰
        dp1[0] = nums[0];
        dp1[1] = Math.max(nums[0], nums[1]);

        // å¯¹äºdp2ï¼ˆä»ç¬¬äºŒä¸ªæˆ¿å­å¼€å§‹å·ï¼‰
        dp2[0] = 0;  // ä¸å·ç¬¬ä¸€ä¸ªæˆ¿å­
        dp2[1] = nums[1];

        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåº
        // ä»å‰å¾€åéå†ï¼Œå› ä¸ºåé¢çš„çŠ¶æ€ä¾èµ–å‰é¢çš„çŠ¶æ€

        // å¯¹äºdp1ï¼Œä¸è€ƒè™‘æœ€åä¸€ä¸ªæˆ¿å­
        for (int i = 2; i < dp1.length - 1; i++) {
            // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
            dp1[i] = Math.max(dp1[i - 1], dp1[i - 2] + nums[i]);
        }

        // å¯¹äºdp2ï¼Œè€ƒè™‘æœ€åä¸€ä¸ªæˆ¿å­
        for (int i = 2; i < dp2.length; i++) {
            // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
            dp2[i] = Math.max(dp2[i - 1], dp2[i - 2] + nums[i]);
        }

        // è¿”å›ä¸¤ç§æƒ…å†µçš„æœ€å¤§å€¼
        return Math.max(dp1[nums.length - 2], dp2[nums.length - 1]);
    }
}
```

### 337.æ‰“å®¶åŠ«èˆIIIï¼ˆ4.15ï¼‰

å°å·åˆå‘ç°äº†ä¸€ä¸ªæ–°çš„å¯è¡Œçªƒçš„åœ°åŒºã€‚è¿™ä¸ªåœ°åŒºåªæœ‰ä¸€ä¸ªå…¥å£ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º `root` ã€‚

é™¤äº† `root` ä¹‹å¤–ï¼Œæ¯æ ‹æˆ¿å­æœ‰ä¸”åªæœ‰ä¸€ä¸ªâ€œçˆ¶â€œæˆ¿å­ä¸ä¹‹ç›¸è¿ã€‚ä¸€ç•ªä¾¦å¯Ÿä¹‹åï¼Œèªæ˜çš„å°å·æ„è¯†åˆ°â€œè¿™ä¸ªåœ°æ–¹çš„æ‰€æœ‰æˆ¿å±‹çš„æ’åˆ—ç±»ä¼¼äºä¸€æ£µäºŒå‰æ ‘â€ã€‚ å¦‚æœ **ä¸¤ä¸ªç›´æ¥ç›¸è¿çš„æˆ¿å­åœ¨åŒä¸€å¤©æ™šä¸Šè¢«æ‰“åŠ«** ï¼Œæˆ¿å±‹å°†è‡ªåŠ¨æŠ¥è­¦ã€‚

ç»™å®šäºŒå‰æ ‘çš„ `root` ã€‚è¿”å› ***åœ¨ä¸è§¦åŠ¨è­¦æŠ¥çš„æƒ…å†µä¸‹** ï¼Œå°å·èƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢* ã€‚



**ç¤ºä¾‹ 1:**

![img](æ–‡æ¡£å›¾ç‰‡/rob1-tree.jpg)

```
è¾“å…¥: root = [3,2,3,null,3,null,1]
è¾“å‡º: 7 
è§£é‡Š: å°å·ä¸€æ™šèƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢ 3 + 3 + 1 = 7
```

**ç¤ºä¾‹ 2:**

![img](æ–‡æ¡£å›¾ç‰‡/rob2-tree.jpg)

```
è¾“å…¥: root = [3,4,5,1,3,null,1]
è¾“å‡º: 9
è§£é‡Š: å°å·ä¸€æ™šèƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢ 4 + 5 = 9
```

```java
class Solution {
    public int rob(TreeNode root) {
        int[] result = getOrder(root);
        return Math.max(result[0], result[1]);
    }

    // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„ï¼ˆåœ¨è¿™é‡Œæ˜¯è¿”å›å€¼æ•°ç»„ï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
    // è¿”å›ä¸€ä¸ªå¤§å°ä¸º2çš„æ•°ç»„ï¼Œå…¶ä¸­ï¼š
    // index 0: ä¸å·å½“å‰èŠ‚ç‚¹èƒ½è·å¾—çš„æœ€å¤§é‡‘é¢
    // index 1: å·å½“å‰èŠ‚ç‚¹èƒ½è·å¾—çš„æœ€å¤§é‡‘é¢
    int[] getOrder(TreeNode current) {
        // æ­¥éª¤3: dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–
        // base case: å¦‚æœèŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›[0, 0]
        if (current == null) {
            return new int[]{0, 0};
        }

        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåºï¼ˆåœ¨è¿™é‡Œæ˜¯ååºéå†ï¼‰
        int[] leftResultArray = getOrder(current.left);
        int[] rightResultArray = getOrder(current.right);

        // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
        // ä¸å·å½“å‰èŠ‚ç‚¹ï¼šå¯ä»¥é€‰æ‹©å·æˆ–ä¸å·å­èŠ‚ç‚¹ï¼Œå–å…¶ä¸­çš„æœ€å¤§å€¼
        int dpOfIndexZero = Math.max(leftResultArray[0], leftResultArray[1])
                + Math.max(rightResultArray[0], rightResultArray[1]);
        // å·å½“å‰èŠ‚ç‚¹ï¼šåˆ™ä¸èƒ½å·å­èŠ‚ç‚¹ï¼ŒåŠ ä¸Šå½“å‰èŠ‚ç‚¹çš„å€¼
        int dpOfIndexOne = leftResultArray[0] + rightResultArray[0] + current.val;

        return new int[]{dpOfIndexZero, dpOfIndexOne};
    }
}
```

### 121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºï¼ˆ3.28ï¼‰

ç»™å®šä¸€ä¸ªæ•°ç»„ prices ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´  prices[i] è¡¨ç¤ºä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚

ä½ åªèƒ½é€‰æ‹© æŸä¸€å¤© ä¹°å…¥è¿™åªè‚¡ç¥¨ï¼Œå¹¶é€‰æ‹©åœ¨ æœªæ¥çš„æŸä¸€ä¸ªä¸åŒçš„æ—¥å­ å–å‡ºè¯¥è‚¡ç¥¨ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚

è¿”å›ä½ å¯ä»¥ä»è¿™ç¬”äº¤æ˜“ä¸­è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚å¦‚æœä½ ä¸èƒ½è·å–ä»»ä½•åˆ©æ¶¦ï¼Œè¿”å› 0 ã€‚

- ç¤ºä¾‹ 1ï¼š
- è¾“å…¥ï¼š[7,1,5,3,6,4]
- è¾“å‡ºï¼š5
  è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡ºï¼Œæœ€å¤§åˆ©æ¶¦ = 6-1 = 5 ã€‚æ³¨æ„åˆ©æ¶¦ä¸èƒ½æ˜¯ 7-1 = 6, å› ä¸ºå–å‡ºä»·æ ¼éœ€è¦å¤§äºä¹°å…¥ä»·æ ¼ï¼›åŒæ—¶ï¼Œä½ ä¸èƒ½åœ¨ä¹°å…¥å‰å–å‡ºè‚¡ç¥¨ã€‚
- ç¤ºä¾‹ 2ï¼š
- è¾“å…¥ï¼šprices = [7,6,4,3,1]
- è¾“å‡ºï¼š0
  è§£é‡Šï¼šåœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚

```java
class Solution {
    public int maxProfit(int[] prices) {
        // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][0]: ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦
        // dp[i][1]: ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦
        int[][] dp = new int[prices.length][2];

        // æ­¥éª¤3: dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–
        // ç¬¬ä¸€å¤©æŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º -prices[0]
        dp[0][0] = -prices[0];
        // ç¬¬ä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º0
        dp[0][1] = 0;

        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåº
        // ä»å‰å¾€åéå†ï¼Œå› ä¸ºå½“å‰çŠ¶æ€ä¾èµ–å‰ä¸€å¤©çš„çŠ¶æ€
        for (int i = 1; i < dp.length; i++) {
            // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
            // ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ = max(å‰ä¸€å¤©æŒæœ‰è‚¡ç¥¨, ä»Šå¤©ä¹°å…¥è‚¡ç¥¨)
            dp[i][0] = Math.max(dp[i - 1][0], -prices[i]);
            // ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ = max(å‰ä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨, ä»Šå¤©å–å‡ºè‚¡ç¥¨)
            dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] + prices[i]);
        }

        // è¿”å›æœ€åä¸€å¤©æŒæœ‰æˆ–ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦
        return Math.max(dp[prices.length - 1][0], dp[prices.length - 1][1]);
    }
}
```

### 122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII

- dp[i] 0] è¡¨ç¤ºç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨æ‰€å¾—ç°é‡‘ã€‚
- dp[i] [1] è¡¨ç¤ºç¬¬iå¤©æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘

å¦‚æœç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨å³dp[i] [0]ï¼Œ é‚£ä¹ˆå¯ä»¥ç”±ä¸¤ä¸ªçŠ¶æ€æ¨å‡ºæ¥

- ç¬¬i-1å¤©å°±ä¸æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå°±ä¿æŒç°çŠ¶ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æ˜¨å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æ‰€å¾—ç°é‡‘ å³ï¼šdp[i - 1] [0]
- ç¬¬iå¤©å–å‡ºè‚¡ç¥¨ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æ˜¨å¤©æŒæœ‰è‚¡ç¥¨çš„æ‰€å¾—ç°é‡‘åŠ å» ä»Šå¤©çš„è‚¡ç¥¨ä»·æ ¼ å³ï¼šdp[i - 1] [1] + prices[i]

å¦‚æœç¬¬iå¤©æŒæœ‰è‚¡ç¥¨å³dp[i] [1]çš„æƒ…å†µï¼Œ ä¾ç„¶å¯ä»¥ç”±ä¸¤ä¸ªçŠ¶æ€æ¨å‡ºæ¥

- ç¬¬i-1å¤©å°±æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå°±ä¿æŒç°çŠ¶ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æ˜¨å¤©æŒæœ‰è‚¡ç¥¨çš„æ‰€å¾—ç°é‡‘ å³ï¼šdp[i - 1] [1]
- ç¬¬iå¤©ä¹°å…¥è‚¡ç¥¨ï¼Œæ‰€å¾—ç°é‡‘å°±æ˜¯æŒ‰ç…§ä»Šå¤©è‚¡ç¥¨ä»·æ ¼ä¹°å…¥åæ‰€å¾—ç°é‡‘å³ï¼šdp[i - 1] [0] - prices[i]

```java
class Solution {
    public int maxProfit(int[] prices) {
        // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][0]: ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦
        // dp[i][1]: ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦
        int[][] dp = new int[prices.length][2];

        // æ­¥éª¤3: dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–
        // ç¬¬ä¸€å¤©æŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º -prices[0]
        dp[0][0] = -prices[0];
        // ç¬¬ä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º0
        dp[0][1] = 0;

        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåº
        // ä»å‰å¾€åéå†ï¼Œå› ä¸ºå½“å‰çŠ¶æ€ä¾èµ–å‰ä¸€å¤©çš„çŠ¶æ€
        for (int i = 1; i < dp.length; i++) {
            // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
            // ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ = max(å‰ä¸€å¤©æŒæœ‰è‚¡ç¥¨, å‰ä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨ä»Šå¤©ä¹°å…¥)
            dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] - prices[i]);
            // ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ = max(å‰ä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨, å‰ä¸€å¤©æŒæœ‰è‚¡ç¥¨ä»Šå¤©å–å‡º)
            dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] + prices[i]);
        }

        // è¿”å›æœ€åä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦
        return Math.max(dp[prices.length - 1][0], dp[prices.length - 1][1]);
    }
}
```

### 123.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII

1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

ä¸€å¤©ä¸€å…±å°±æœ‰äº”ä¸ªçŠ¶æ€ï¼Œ

â€‹	0.æ²¡æœ‰æ“ä½œ ï¼ˆå…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸è®¾ç½®è¿™ä¸ªçŠ¶æ€ï¼‰

â€‹	1.ç¬¬ä¸€æ¬¡æŒæœ‰è‚¡ç¥¨

â€‹	2.ç¬¬ä¸€æ¬¡ä¸æŒæœ‰è‚¡ç¥¨

â€‹	3.ç¬¬äºŒæ¬¡æŒæœ‰è‚¡ç¥¨

â€‹	4.ç¬¬äºŒæ¬¡ä¸æŒæœ‰è‚¡ç¥¨

dp[i] [j]ä¸­ iè¡¨ç¤ºç¬¬iå¤©ï¼Œjä¸º [0 - 4] äº”ä¸ªçŠ¶æ€ï¼Œdp[i][j]è¡¨ç¤ºç¬¬iå¤©çŠ¶æ€jæ‰€å‰©æœ€å¤§ç°é‡‘ã€‚

éœ€è¦æ³¨æ„ï¼šdp[i] [1]ï¼Œ**è¡¨ç¤ºçš„æ˜¯ç¬¬iå¤©ï¼Œä¹°å…¥è‚¡ç¥¨çš„çŠ¶æ€ï¼Œå¹¶ä¸æ˜¯è¯´ä¸€å®šè¦ç¬¬iå¤©ä¹°å…¥è‚¡ç¥¨ï¼Œè¿™æ˜¯å¾ˆå¤šåŒå­¦å®¹æ˜“é™·å…¥çš„è¯¯åŒº**ã€‚

ä¾‹å¦‚ dp[i] [1] ï¼Œå¹¶ä¸æ˜¯è¯´ ç¬¬iå¤©ä¸€å®šä¹°å…¥è‚¡ç¥¨ï¼Œæœ‰å¯èƒ½ ç¬¬ i-1å¤© å°±ä¹°å…¥äº†ï¼Œé‚£ä¹ˆ dp[i] [1] å»¶ç»­ä¹°å…¥è‚¡ç¥¨çš„è¿™ä¸ªçŠ¶æ€ã€‚

1. ç¡®å®šé€’æ¨å…¬å¼

è¾¾åˆ°dp[i][1]çŠ¶æ€ï¼Œæœ‰ä¸¤ä¸ªå…·ä½“æ“ä½œï¼š

- æ“ä½œä¸€ï¼šç¬¬iå¤©ä¹°å…¥è‚¡ç¥¨äº†ï¼Œé‚£ä¹ˆdp[i] [1] = dp[i-1] [0] - prices[i]
- æ“ä½œäºŒï¼šç¬¬iå¤©æ²¡æœ‰æ“ä½œï¼Œè€Œæ˜¯æ²¿ç”¨å‰ä¸€å¤©ä¹°å…¥çš„çŠ¶æ€ï¼Œå³ï¼šdp[i][1] = dp[i - 1] 1]

é‚£ä¹ˆdp[i] [1]ç©¶ç«Ÿé€‰ dp[i-1] [0] - prices[i]ï¼Œè¿˜æ˜¯dp[i - 1] [1]å‘¢ï¼Ÿ

ä¸€å®šæ˜¯é€‰æœ€å¤§çš„ï¼Œæ‰€ä»¥ dp[i] [1] = max(dp[i-1] [0] - prices[i], dp[i - 1] [1]);

åŒç†dp[i][2]ä¹Ÿæœ‰ä¸¤ä¸ªæ“ä½œï¼š

- æ“ä½œä¸€ï¼šç¬¬iå¤©å–å‡ºè‚¡ç¥¨äº†ï¼Œé‚£ä¹ˆdp[i] [2] = dp[i - 1] [1] + prices[i]
- æ“ä½œäºŒï¼šç¬¬iå¤©æ²¡æœ‰æ“ä½œï¼Œæ²¿ç”¨å‰ä¸€å¤©å–å‡ºè‚¡ç¥¨çš„çŠ¶æ€ï¼Œå³ï¼šdp[i][2] = dp[i - 1] [2]

æ‰€ä»¥dp[i] [2] = max(dp[i - 1] [1] + prices[i], dp[i - 1] [2])

åŒç†å¯æ¨å‡ºå‰©ä¸‹çŠ¶æ€éƒ¨åˆ†ï¼š

dp[i] [3] = max(dp[i - 1] [3], dp[i - 1] [2] - prices[i]);

dp[i] [4] = max(dp[i - 1] [4], dp[i - 1] [3] + prices[i]);

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

ç¬¬0å¤©æ²¡æœ‰æ“ä½œï¼Œè¿™ä¸ªæœ€å®¹æ˜“æƒ³åˆ°ï¼Œå°±æ˜¯0ï¼Œå³ï¼šdp[0] [0] = 0;

ç¬¬0å¤©åšç¬¬ä¸€æ¬¡ä¹°å…¥çš„æ“ä½œï¼Œdp[0] [1] = -prices[0];

ç¬¬0å¤©åšç¬¬ä¸€æ¬¡å–å‡ºçš„æ“ä½œï¼Œè¿™ä¸ªåˆå§‹å€¼åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ

æ­¤æ—¶è¿˜æ²¡æœ‰ä¹°å…¥ï¼Œæ€ä¹ˆå°±å–å‡ºå‘¢ï¼Ÿ å…¶å®å¤§å®¶å¯ä»¥ç†è§£å½“å¤©ä¹°å…¥ï¼Œå½“å¤©å–å‡ºï¼Œæ‰€ä»¥dp[0] [2] = 0;

ç¬¬0å¤©ç¬¬äºŒæ¬¡ä¹°å…¥æ“ä½œï¼Œåˆå§‹å€¼åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿåº”è¯¥ä¸å°‘åŒå­¦ç–‘æƒ‘ï¼Œç¬¬ä¸€æ¬¡è¿˜æ²¡ä¹°å…¥å‘¢ï¼Œæ€ä¹ˆåˆå§‹åŒ–ç¬¬äºŒæ¬¡ä¹°å…¥å‘¢ï¼Ÿ

ç¬¬äºŒæ¬¡ä¹°å…¥ä¾èµ–äºç¬¬ä¸€æ¬¡å–å‡ºçš„çŠ¶æ€ï¼Œå…¶å®ç›¸å½“äºç¬¬0å¤©ç¬¬ä¸€æ¬¡ä¹°å…¥äº†ï¼Œç¬¬ä¸€æ¬¡å–å‡ºäº†ï¼Œç„¶åå†ä¹°å…¥ä¸€æ¬¡ï¼ˆç¬¬äºŒæ¬¡ä¹°å…¥ï¼‰ï¼Œé‚£ä¹ˆç°åœ¨æ‰‹å¤´ä¸Šæ²¡æœ‰ç°é‡‘ï¼Œåªè¦ä¹°å…¥ï¼Œç°é‡‘å°±åšç›¸åº”çš„å‡å°‘ã€‚

æ‰€ä»¥ç¬¬äºŒæ¬¡ä¹°å…¥æ“ä½œï¼Œåˆå§‹åŒ–ä¸ºï¼šdp[0] [3] = -prices[0];

åŒç†ç¬¬äºŒæ¬¡å–å‡ºåˆå§‹åŒ–dp[0] [4] = 0;

1. ç¡®å®šéå†é¡ºåº

ä»é€’å½’å…¬å¼å…¶å®å·²ç»å¯ä»¥çœ‹å‡ºï¼Œä¸€å®šæ˜¯ä»å‰å‘åéå†ï¼Œå› ä¸ºdp[i]ï¼Œä¾é dp[i - 1]çš„æ•°å€¼ã€‚

```java
class Solution {
    public int maxProfit(int[] prices) {
        // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j]: ç¬¬iå¤©çŠ¶æ€jçš„æœ€å¤§åˆ©æ¶¦
        // j = 0: æœªè¿›è¡Œä»»ä½•æ“ä½œ
        // j = 1: è¿›è¡Œäº†ç¬¬ä¸€æ¬¡ä¹°å…¥
        // j = 2: è¿›è¡Œäº†ç¬¬ä¸€æ¬¡å–å‡º
        // j = 3: è¿›è¡Œäº†ç¬¬äºŒæ¬¡ä¹°å…¥
        // j = 4: è¿›è¡Œäº†ç¬¬äºŒæ¬¡å–å‡º
        int[][] dp = new int[prices.length][5];

        // æ­¥éª¤3: dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–
        dp[0][0] = 0;
        dp[0][1] = -prices[0];
        dp[0][2] = 0;
        dp[0][3] = -prices[0];
        dp[0][4] = 0;

        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåº
        // ä»å‰å¾€åéå†ï¼Œå› ä¸ºå½“å‰çŠ¶æ€ä¾èµ–å‰ä¸€å¤©çš„çŠ¶æ€
        for (int i = 1; i < dp.length; i++) {
            // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
            // ç¬¬ä¸€æ¬¡ä¹°å…¥çš„æœ€å¤§åˆ©æ¶¦
            dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);
            // ç¬¬ä¸€æ¬¡å–å‡ºçš„æœ€å¤§åˆ©æ¶¦
            dp[i][2] = Math.max(dp[i - 1][2], dp[i - 1][1] + prices[i]);
            // ç¬¬äºŒæ¬¡ä¹°å…¥çš„æœ€å¤§åˆ©æ¶¦
            dp[i][3] = Math.max(dp[i - 1][3], dp[i - 1][2] - prices[i]);
            // ç¬¬äºŒæ¬¡å–å‡ºçš„æœ€å¤§åˆ©æ¶¦
            dp[i][4] = Math.max(dp[i - 1][4], dp[i - 1][3] + prices[i]);
        }

        // è¿”å›æœ€åä¸€å¤©ï¼Œåªè¿›è¡Œä¸€æ¬¡äº¤æ˜“æˆ–è¿›è¡Œä¸¤æ¬¡äº¤æ˜“çš„æœ€å¤§åˆ©æ¶¦
        return Math.max(dp[dp.length - 1][2], dp[dp.length - 1][4]);
    }
}
```

### 188.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIV

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ prices ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´  prices[i] æ˜¯ä¸€æ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ k ç¬”äº¤æ˜“ã€‚

æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚

- ç¤ºä¾‹ 1ï¼š
- è¾“å…¥ï¼šk = 2, prices = [2,4,1]
- è¾“å‡ºï¼š2 è§£é‡Šï¼šåœ¨ç¬¬ 1 å¤© (è‚¡ç¥¨ä»·æ ¼ = 2) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 2 å¤© (è‚¡ç¥¨ä»·æ ¼ = 4) çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 4-2 = 2ã€‚
- ç¤ºä¾‹ 2ï¼š
- è¾“å…¥ï¼šk = 2, prices = [3,2,6,5,0,3]
- è¾“å‡ºï¼š7 è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤© (è‚¡ç¥¨ä»·æ ¼ = 2) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 3 å¤© (è‚¡ç¥¨ä»·æ ¼ = 6) çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6-2 = 4ã€‚éšåï¼Œåœ¨ç¬¬ 5 å¤© (è‚¡ç¥¨ä»·æ ¼ = 0) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 6 å¤© (è‚¡ç¥¨ä»·æ ¼ = 3) çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 3-0 = 3 ã€‚



åŠ¨è§„äº”éƒ¨æ›²ï¼Œåˆ†æå¦‚ä¸‹ï¼š

1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

åœ¨[åŠ¨æ€è§„åˆ’ï¼š123.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII (opens new window)](https://programmercarl.com/0123.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII.html)ä¸­ï¼Œæˆ‘æ˜¯å®šä¹‰äº†ä¸€ä¸ªäºŒç»´dpæ•°ç»„ï¼Œæœ¬é¢˜å…¶å®ä¾ç„¶å¯ä»¥ç”¨ä¸€ä¸ªäºŒç»´dpæ•°ç»„ã€‚

ä½¿ç”¨äºŒç»´æ•°ç»„ dp[i] [j] ï¼šç¬¬iå¤©çš„çŠ¶æ€ä¸ºjï¼Œæ‰€å‰©ä¸‹çš„æœ€å¤§ç°é‡‘æ˜¯dp[i] [j]

jçš„çŠ¶æ€è¡¨ç¤ºä¸ºï¼š

- 0 è¡¨ç¤ºä¸æ“ä½œ
- 1 ç¬¬ä¸€æ¬¡ä¹°å…¥
- 2 ç¬¬ä¸€æ¬¡å–å‡º
- 3 ç¬¬äºŒæ¬¡ä¹°å…¥
- 4 ç¬¬äºŒæ¬¡å–å‡º
- .....

**å¤§å®¶åº”è¯¥å‘ç°è§„å¾‹äº†å§ ï¼Œé™¤äº†0ä»¥å¤–ï¼Œå¶æ•°å°±æ˜¯å–å‡ºï¼Œå¥‡æ•°å°±æ˜¯ä¹°å…¥**ã€‚

é¢˜ç›®è¦æ±‚æ˜¯è‡³å¤šæœ‰Kç¬”äº¤æ˜“ï¼Œé‚£ä¹ˆjçš„èŒƒå›´å°±å®šä¹‰ä¸º 2 * k + 1 å°±å¯ä»¥äº†ã€‚

æ‰€ä»¥äºŒç»´dpæ•°ç»„çš„C++å®šä¹‰ä¸ºï¼š

```cpp
vector<vector<int>> dp(prices.size(), vector<int>(2 * k + 1, 0));
```

1. ç¡®å®šé€’æ¨å…¬å¼

è¿˜è¦å¼ºè°ƒä¸€ä¸‹ï¼šdp[i] [1]ï¼Œ**è¡¨ç¤ºçš„æ˜¯ç¬¬iå¤©ï¼Œä¹°å…¥è‚¡ç¥¨çš„çŠ¶æ€ï¼Œå¹¶ä¸æ˜¯è¯´ä¸€å®šè¦ç¬¬iå¤©ä¹°å…¥è‚¡ç¥¨ï¼Œè¿™æ˜¯å¾ˆå¤šåŒå­¦å®¹æ˜“é™·å…¥çš„è¯¯åŒº**ã€‚

è¾¾åˆ°dp[i] [1]çŠ¶æ€ï¼Œæœ‰ä¸¤ä¸ªå…·ä½“æ“ä½œï¼š

- æ“ä½œä¸€ï¼šç¬¬iå¤©ä¹°å…¥è‚¡ç¥¨äº†ï¼Œé‚£ä¹ˆdp[i] [1] = dp[i - 1] [0] - prices[i]
- æ“ä½œäºŒï¼šç¬¬iå¤©æ²¡æœ‰æ“ä½œï¼Œè€Œæ˜¯æ²¿ç”¨å‰ä¸€å¤©ä¹°å…¥çš„çŠ¶æ€ï¼Œå³ï¼šdp[i] [1] = dp[i - 1] [1]

é€‰æœ€å¤§çš„ï¼Œæ‰€ä»¥ dp[i] [1] = max(dp[i - 1] [0] - prices[i], dp[i - 1] [1]);

åŒç†dp[i] [2]ä¹Ÿæœ‰ä¸¤ä¸ªæ“ä½œï¼š

- æ“ä½œä¸€ï¼šç¬¬iå¤©å–å‡ºè‚¡ç¥¨äº†ï¼Œé‚£ä¹ˆdp[i] [2] = dp[i - 1] [1] + prices[i]
- æ“ä½œäºŒï¼šç¬¬iå¤©æ²¡æœ‰æ“ä½œï¼Œæ²¿ç”¨å‰ä¸€å¤©å–å‡ºè‚¡ç¥¨çš„çŠ¶æ€ï¼Œå³ï¼šdp[i] [2] = dp[i - 1] [2]

æ‰€ä»¥dp[i] [2] = max(dp[i - 1] [1] + prices[i], dp[i - 1] [2])

åŒç†å¯ä»¥ç±»æ¯”å‰©ä¸‹çš„çŠ¶æ€ï¼Œä»£ç å¦‚ä¸‹ï¼š

```cpp
for (int j = 0; j < 2 * k - 1; j += 2) {
    dp[i][j + 1] = max(dp[i - 1][j + 1], dp[i - 1][j] - prices[i]);
    dp[i][j + 2] = max(dp[i - 1][j + 2], dp[i - 1][j + 1] + prices[i])
}

```

**æœ¬é¢˜å’Œ[åŠ¨æ€è§„åˆ’ï¼š123.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII (opens new window)](https://programmercarl.com/0123.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII.html)æœ€å¤§çš„åŒºåˆ«å°±æ˜¯è¿™é‡Œè¦ç±»æ¯”jä¸ºå¥‡æ•°æ˜¯ä¹°ï¼Œå¶æ•°æ˜¯å–çš„çŠ¶æ€**ã€‚

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

ç¬¬0å¤©æ²¡æœ‰æ“ä½œï¼Œè¿™ä¸ªæœ€å®¹æ˜“æƒ³åˆ°ï¼Œå°±æ˜¯0ï¼Œå³ï¼šdp[0] [0] = 0;

ç¬¬0å¤©åšç¬¬ä¸€æ¬¡ä¹°å…¥çš„æ“ä½œï¼Œdp[0] [1] = -prices[0];

ç¬¬0å¤©åšç¬¬ä¸€æ¬¡å–å‡ºçš„æ“ä½œï¼Œè¿™ä¸ªåˆå§‹å€¼åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ

æ­¤æ—¶è¿˜æ²¡æœ‰ä¹°å…¥ï¼Œæ€ä¹ˆå°±å–å‡ºå‘¢ï¼Ÿ å…¶å®å¤§å®¶å¯ä»¥ç†è§£å½“å¤©ä¹°å…¥ï¼Œå½“å¤©å–å‡ºï¼Œæ‰€ä»¥dp[0] [2] = 0;

ç¬¬0å¤©ç¬¬äºŒæ¬¡ä¹°å…¥æ“ä½œï¼Œåˆå§‹å€¼åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿåº”è¯¥ä¸å°‘åŒå­¦ç–‘æƒ‘ï¼Œç¬¬ä¸€æ¬¡è¿˜æ²¡ä¹°å…¥å‘¢ï¼Œæ€ä¹ˆåˆå§‹åŒ–ç¬¬äºŒæ¬¡ä¹°å…¥å‘¢ï¼Ÿ

ç¬¬äºŒæ¬¡ä¹°å…¥ä¾èµ–äºç¬¬ä¸€æ¬¡å–å‡ºçš„çŠ¶æ€ï¼Œå…¶å®ç›¸å½“äºç¬¬0å¤©ç¬¬ä¸€æ¬¡ä¹°å…¥äº†ï¼Œç¬¬ä¸€æ¬¡å–å‡ºäº†ï¼Œç„¶ååœ¨ä¹°å…¥ä¸€æ¬¡ï¼ˆç¬¬äºŒæ¬¡ä¹°å…¥ï¼‰ï¼Œé‚£ä¹ˆç°åœ¨æ‰‹å¤´ä¸Šæ²¡æœ‰ç°é‡‘ï¼Œåªè¦ä¹°å…¥ï¼Œç°é‡‘å°±åšç›¸åº”çš„å‡å°‘ã€‚

æ‰€ä»¥ç¬¬äºŒæ¬¡ä¹°å…¥æ“ä½œï¼Œåˆå§‹åŒ–ä¸ºï¼šdp[0] [3] = -prices[0];

ç¬¬äºŒæ¬¡å–å‡ºåˆå§‹åŒ–dp[0] [4] = 0;

**æ‰€ä»¥åŒç†å¯ä»¥æ¨å‡ºdp[0] [j]å½“jä¸ºå¥‡æ•°çš„æ—¶å€™éƒ½åˆå§‹åŒ–ä¸º -prices[0]**

ä»£ç å¦‚ä¸‹ï¼š

```cpp
for (int j = 1; j < 2 * k; j += 2) {
    dp[0][j] = -prices[0];
}
```

**åœ¨åˆå§‹åŒ–çš„åœ°æ–¹åŒæ ·è¦ç±»æ¯”jä¸ºå¶æ•°æ˜¯å–ã€å¥‡æ•°æ˜¯ä¹°çš„çŠ¶æ€**ã€‚

1. ç¡®å®šéå†é¡ºåº

ä»é€’å½’å…¬å¼å…¶å®å·²ç»å¯ä»¥çœ‹å‡ºï¼Œä¸€å®šæ˜¯ä»å‰å‘åéå†ï¼Œå› ä¸ºdp[i]ï¼Œä¾é dp[i - 1]çš„æ•°å€¼ã€‚

```java
class Solution {
    public int maxProfit(int k, int[] prices) {
        // æ­¥éª¤1: ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j]: ç¬¬iå¤©çŠ¶æ€jçš„æœ€å¤§åˆ©æ¶¦
        // jçš„å¥‡æ•°ä½ï¼ˆ1,3,5...ï¼‰è¡¨ç¤ºç¬¬ (j+1)/2 æ¬¡ä¹°å…¥
        // jçš„å¶æ•°ä½ï¼ˆ0,2,4...ï¼‰è¡¨ç¤ºç¬¬ j/2 æ¬¡å–å‡º
        int[][] dp = new int[prices.length][2 * k + 1];

        // æ­¥éª¤3: dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–
        for (int j = 0; j < 2 * k + 1; j++) {
            if (j % 2 != 0) {
                // å¥‡æ•°ä½ï¼Œè¡¨ç¤ºä¹°å…¥ï¼Œåˆå§‹åŒ–ä¸º -prices[0]
                dp[0][j] = -prices[0];
            } else {
                // å¶æ•°ä½ï¼Œè¡¨ç¤ºå–å‡ºï¼Œåˆå§‹åŒ–ä¸º 0
                dp[0][j] = 0;
            }
        }

        // æ­¥éª¤4: ç¡®å®šéå†é¡ºåº
        // å¤–å±‚å¾ªç¯éå†å¤©æ•°ï¼Œå†…å±‚å¾ªç¯éå†äº¤æ˜“æ¬¡æ•°
        for (int i = 1; i < prices.length; i++) {
            for (int j = 1; j < 2 * k + 1; j++) {
                // æ­¥éª¤2: ç¡®å®šé€’æ¨å…¬å¼
                if (j % 2 != 0) {
                    // å¥‡æ•°ä½ï¼Œè¡¨ç¤ºä¹°å…¥
                    dp[i][j] = Math.max(dp[i - 1][j], dp[i - 1][j - 1] - prices[i]);
                } else {
                    // å¶æ•°ä½ï¼Œè¡¨ç¤ºå–å‡º
                    dp[i][j] = Math.max(dp[i - 1][j], dp[i - 1][j - 1] + prices[i]);
                }
            }
        }

        // è¿”å›æœ€åä¸€å¤©æ‰€æœ‰çŠ¶æ€ä¸­çš„æœ€å¤§å€¼
        return Arrays.stream(dp[prices.length - 1]).max().getAsInt();
    }
}
```

### 309.æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸï¼ˆ3.26ï¼‰

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨äº†ç¬¬ i å¤©çš„è‚¡ç¥¨ä»·æ ¼ ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡ºæœ€å¤§åˆ©æ¶¦ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰:

- ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚
- å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º 1 å¤©)ã€‚

ç¤ºä¾‹:

- è¾“å…¥: [1,2,3,0,2]
- è¾“å‡º: 3
- è§£é‡Š: å¯¹åº”çš„äº¤æ˜“çŠ¶æ€ä¸º: [ä¹°å…¥, å–å‡º, å†·å†»æœŸ, ä¹°å…¥, å–å‡º]



åŠ¨è§„äº”éƒ¨æ›²ï¼Œåˆ†æå¦‚ä¸‹ï¼š

1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

dp[i][j]ï¼Œç¬¬iå¤©çŠ¶æ€ä¸ºjï¼Œæ‰€å‰©çš„æœ€å¤šç°é‡‘ä¸ºdp[i][j]ã€‚

**å…¶å®æœ¬é¢˜å¾ˆå¤šåŒå­¦æçš„æ¯”è¾ƒæ‡µï¼Œæ˜¯å› ä¸ºå‡ºç°å†·å†»æœŸä¹‹åï¼ŒçŠ¶æ€å…¶å®æ˜¯æ¯”è¾ƒå¤æ‚åº¦**ï¼Œä¾‹å¦‚ä»Šå¤©ä¹°å…¥è‚¡ç¥¨ã€ä»Šå¤©å–å‡ºè‚¡ç¥¨ã€ä»Šå¤©æ˜¯å†·å†»æœŸï¼Œéƒ½æ˜¯ä¸èƒ½æ“ä½œè‚¡ç¥¨çš„ã€‚

å…·ä½“å¯ä»¥åŒºåˆ†å‡ºå¦‚ä¸‹å››ä¸ªçŠ¶æ€ï¼š

- çŠ¶æ€ä¸€ï¼šæŒæœ‰è‚¡ç¥¨çŠ¶æ€ï¼ˆä»Šå¤©ä¹°å…¥è‚¡ç¥¨ï¼Œæˆ–è€…æ˜¯ä¹‹å‰å°±ä¹°å…¥äº†è‚¡ç¥¨ç„¶åæ²¡æœ‰æ“ä½œï¼Œä¸€ç›´æŒæœ‰ï¼‰
- ä¸æŒæœ‰è‚¡ç¥¨çŠ¶æ€ï¼Œè¿™é‡Œå°±æœ‰ä¸¤ç§å–å‡ºè‚¡ç¥¨çŠ¶æ€
  - çŠ¶æ€äºŒï¼šä¿æŒå–å‡ºè‚¡ç¥¨çš„çŠ¶æ€ï¼ˆä¸¤å¤©å‰å°±å–å‡ºäº†è‚¡ç¥¨ï¼Œåº¦è¿‡ä¸€å¤©å†·å†»æœŸã€‚æˆ–è€…æ˜¯å‰ä¸€å¤©å°±æ˜¯å–å‡ºè‚¡ç¥¨çŠ¶æ€ï¼Œä¸€ç›´æ²¡æ“ä½œï¼‰
  - çŠ¶æ€ä¸‰ï¼šä»Šå¤©å–å‡ºè‚¡ç¥¨
- çŠ¶æ€å››ï¼šä»Šå¤©ä¸ºå†·å†»æœŸçŠ¶æ€ï¼Œä½†å†·å†»æœŸçŠ¶æ€ä¸å¯æŒç»­ï¼Œåªæœ‰ä¸€å¤©ï¼

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/518d5baaf33f4b2698064f8efb42edbf.png" alt="img" style="zoom: 67%;" />

jçš„çŠ¶æ€ä¸ºï¼š

- 0ï¼šçŠ¶æ€ä¸€
- 1ï¼šçŠ¶æ€äºŒ
- 2ï¼šçŠ¶æ€ä¸‰
- 3ï¼šçŠ¶æ€å››

å¾ˆå¤šé¢˜è§£ä¸ºä»€ä¹ˆè®²çš„æ¯”è¾ƒæ¨¡ç³Šï¼Œæ˜¯å› ä¸ºæŠŠè¿™å››ä¸ªçŠ¶æ€åˆå¹¶æˆä¸‰ä¸ªçŠ¶æ€äº†ï¼Œå…¶å®å°±æ˜¯æŠŠçŠ¶æ€äºŒå’ŒçŠ¶æ€å››åˆå¹¶åœ¨ä¸€èµ·äº†ã€‚

ä»ä»£ç ä¸Šæ¥çœ‹ç¡®å®å¯ä»¥åˆå¹¶ï¼Œä½†ä»é€»è¾‘ä¸Šåˆ†æåˆå¹¶ä¹‹åå°±å¾ˆéš¾ç†è§£äº†ï¼Œæ‰€ä»¥æˆ‘ä¸‹é¢çš„è®²è§£æ˜¯æŒ‰ç…§è¿™å››ä¸ªçŠ¶æ€æ¥çš„ï¼ŒæŠŠæ¯ä¸€ä¸ªçŠ¶æ€åˆ†ææ¸…æ¥šã€‚

å¦‚æœå¤§å®¶æŒ‰ç…§ä»£ç éšæƒ³å½•é¡ºåºæ¥åˆ·çš„è¯ï¼Œä¼šå‘ç° ä¹°å–è‚¡ç¥¨æœ€ä½³æ—¶æœº 1ï¼Œ2ï¼Œ3ï¼Œ4 çš„é¢˜ç›®è®²è§£ä¸­

- [åŠ¨æ€è§„åˆ’ï¼š121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº(opens new window)](https://programmercarl.com/0121.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº.html)
- [åŠ¨æ€è§„åˆ’ï¼š122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII(opens new window)](https://programmercarl.com/0122.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIIï¼ˆåŠ¨æ€è§„åˆ’ï¼‰.html)
- [åŠ¨æ€è§„åˆ’ï¼š123.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII(opens new window)](https://programmercarl.com/0123.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII.html)
- [åŠ¨æ€è§„åˆ’ï¼š188.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIV(opens new window)](https://programmercarl.com/0188.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIV.html)

ã€Œä»Šå¤©å–å‡ºè‚¡ç¥¨ã€æˆ‘æ˜¯æ²¡æœ‰å•ç‹¬åˆ—å‡ºä¸€ä¸ªçŠ¶æ€çš„å½’ç±»ä¸ºã€Œä¸æŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€ã€ï¼Œè€Œæœ¬é¢˜ä¸ºä»€ä¹ˆè¦å•ç‹¬åˆ—å‡ºã€Œä»Šå¤©å–å‡ºè‚¡ç¥¨ã€ ä¸€ä¸ªçŠ¶æ€å‘¢ï¼Ÿ

å› ä¸ºæœ¬é¢˜æˆ‘ä»¬æœ‰å†·å†»æœŸï¼Œè€Œå†·å†»æœŸçš„å‰ä¸€å¤©ï¼Œåªèƒ½æ˜¯ ã€Œä»Šå¤©å–å‡ºè‚¡ç¥¨ã€çŠ¶æ€ï¼Œå¦‚æœæ˜¯ ã€Œä¸æŒæœ‰è‚¡ç¥¨çŠ¶æ€ã€é‚£ä¹ˆå°±å¾ˆæ¨¡ç³Šï¼Œå› ä¸ºä¸ä¸€å®šæ˜¯ å–å‡ºè‚¡ç¥¨çš„æ“ä½œã€‚

å¦‚æœæ²¡æœ‰æŒ‰ç…§ ä»£ç éšæƒ³å½• é¡ºåºå»åˆ·çš„å½•å‹ï¼Œå¯èƒ½çœ‹è¿™é‡Œçš„è®²è§£ ä¼šæœ‰ç‚¹å›°æƒ‘ï¼Œå»ºè®®æŠŠä»£ç éšæƒ³å½•æœ¬ç¯‡ä¹‹å‰è‚¡ç¥¨å†…å®¹çš„è®²è§£éƒ½çœ‹ä¸€ä¸‹ï¼Œé¢†ä¼šä¸€ä¸‹æ¯å¤© çŠ¶æ€çš„è®¾ç½®ã€‚

**æ³¨æ„è¿™é‡Œçš„æ¯ä¸€ä¸ªçŠ¶æ€ï¼Œä¾‹å¦‚çŠ¶æ€ä¸€ï¼Œæ˜¯æŒæœ‰è‚¡ç¥¨è‚¡ç¥¨çŠ¶æ€å¹¶ä¸æ˜¯è¯´ä»Šå¤©ä¸€å®šå°±ä¹°å…¥è‚¡ç¥¨ï¼Œè€Œæ˜¯è¯´ä¿æŒä¹°å…¥è‚¡ç¥¨çš„çŠ¶æ€å³ï¼šå¯èƒ½æ˜¯å‰å‡ å¤©ä¹°å…¥çš„ï¼Œä¹‹åä¸€ç›´æ²¡æ“ä½œï¼Œæ‰€ä»¥ä¿æŒä¹°å…¥è‚¡ç¥¨çš„çŠ¶æ€**ã€‚

1. ç¡®å®šé€’æ¨å…¬å¼

**è¾¾åˆ°ä¹°å…¥è‚¡ç¥¨çŠ¶æ€**ï¼ˆçŠ¶æ€ä¸€ï¼‰å³ï¼šdp[i] [0]ï¼Œæœ‰ä¸¤ä¸ªå…·ä½“æ“ä½œï¼š

- æ“ä½œä¸€ï¼šå‰ä¸€å¤©å°±æ˜¯æŒæœ‰è‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸€ï¼‰ï¼Œdp[i] [0] = dp[i - 1] [0]
- æ“ä½œäºŒï¼šä»Šå¤©ä¹°å…¥äº†ï¼Œæœ‰ä¸¤ç§æƒ…å†µ
  - å‰ä¸€å¤©æ˜¯å†·å†»æœŸï¼ˆçŠ¶æ€å››ï¼‰ï¼Œdp[i - 1] [3] - prices[i]
  - å‰ä¸€å¤©æ˜¯ä¿æŒå–å‡ºè‚¡ç¥¨çš„çŠ¶æ€ï¼ˆçŠ¶æ€äºŒï¼‰ï¼Œdp[i - 1] [1] - prices[i]

é‚£ä¹ˆdp[i] [0] = max(dp[i - 1] [0], dp[i - 1] [3] - prices[i], dp[i - 1] [1] - prices[i]);

**è¾¾åˆ°ä¿æŒå–å‡ºè‚¡ç¥¨çŠ¶æ€**ï¼ˆçŠ¶æ€äºŒï¼‰å³ï¼šdp[i][1]ï¼Œæœ‰ä¸¤ä¸ªå…·ä½“æ“ä½œï¼š

- æ“ä½œä¸€ï¼šå‰ä¸€å¤©å°±æ˜¯çŠ¶æ€äºŒ
- æ“ä½œäºŒï¼šå‰ä¸€å¤©æ˜¯å†·å†»æœŸï¼ˆçŠ¶æ€å››ï¼‰

dp[i] [1] = max(dp[i - 1] [1], dp[i - 1] [3]);

**è¾¾åˆ°ä»Šå¤©å°±å–å‡ºè‚¡ç¥¨çŠ¶æ€**ï¼ˆçŠ¶æ€ä¸‰ï¼‰ï¼Œå³ï¼šdp[i] [2] ï¼Œåªæœ‰ä¸€ä¸ªæ“ä½œï¼š

æ˜¨å¤©ä¸€å®šæ˜¯æŒæœ‰è‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸€ï¼‰ï¼Œä»Šå¤©å–å‡º

å³ï¼šdp[i] [2] = dp[i - 1] [0] + prices[i];

**è¾¾åˆ°å†·å†»æœŸçŠ¶æ€**ï¼ˆçŠ¶æ€å››ï¼‰ï¼Œå³ï¼šdp[i][3]ï¼Œåªæœ‰ä¸€ä¸ªæ“ä½œï¼š

æ˜¨å¤©å–å‡ºäº†è‚¡ç¥¨ï¼ˆçŠ¶æ€ä¸‰ï¼‰

dp[i] [3] = dp[i - 1] [2];

ç»¼ä¸Šåˆ†æï¼Œé€’æ¨ä»£ç å¦‚ä¸‹ï¼š

```cpp
dp[i][0] = max(dp[i - 1][0], max(dp[i - 1][3], dp[i - 1][1]) - prices[i]);
dp[i][1] = max(dp[i - 1][1], dp[i - 1][3]);
dp[i][2] = dp[i - 1][0] + prices[i];
dp[i][3] = dp[i - 1][2];
```

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

è¿™é‡Œä¸»è¦è®¨è®ºä¸€ä¸‹ç¬¬0å¤©å¦‚ä½•åˆå§‹åŒ–ã€‚

å¦‚æœæ˜¯æŒæœ‰è‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€ä¸€ï¼‰é‚£ä¹ˆï¼šdp[0] [0] = -prices[0]ï¼Œä¸€å®šæ˜¯å½“å¤©ä¹°å…¥è‚¡ç¥¨ã€‚

ä¿æŒå–å‡ºè‚¡ç¥¨çŠ¶æ€ï¼ˆçŠ¶æ€äºŒï¼‰ï¼Œè¿™é‡Œå…¶å®ä» ã€ŒçŠ¶æ€äºŒã€çš„å®šä¹‰æ¥è¯´ ï¼Œå¾ˆéš¾æ˜ç¡®åº”è¯¥åˆå§‹å¤šå°‘ï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬å°±çœ‹é€’æ¨å…¬å¼éœ€è¦æˆ‘ä»¬ç»™ä»–åˆå§‹æˆä»€ä¹ˆæ•°å€¼ã€‚

å¦‚æœiä¸º1ï¼Œç¬¬1å¤©ä¹°å…¥è‚¡ç¥¨ï¼Œé‚£ä¹ˆé€’å½’å…¬å¼ä¸­éœ€è¦è®¡ç®— dp[i - 1] [1] - prices[i] ï¼Œå³ dp[0] [1] - prices[1]ï¼Œé‚£ä¹ˆå¤§å®¶æ„Ÿå—ä¸€ä¸‹ dp[0] [1] ï¼ˆå³ç¬¬0å¤©çš„çŠ¶æ€äºŒï¼‰åº”è¯¥åˆå§‹æˆå¤šå°‘ï¼Œåªèƒ½åˆå§‹ä¸º0ã€‚æƒ³ä¸€æƒ³å¦‚æœåˆå§‹ä¸ºå…¶ä»–æ•°å€¼ï¼Œæ˜¯æˆ‘ä»¬ç¬¬1å¤©ä¹°å…¥è‚¡ç¥¨å æ‰‹é‡Œè¿˜å‰©çš„ç°é‡‘æ•°é‡æ˜¯ä¸æ˜¯å°±ä¸å¯¹äº†ã€‚

ä»Šå¤©å–å‡ºäº†è‚¡ç¥¨ï¼ˆçŠ¶æ€ä¸‰ï¼‰ï¼ŒåŒä¸Šåˆ†æï¼Œdp[0] [2]åˆå§‹åŒ–ä¸º0ï¼Œdp[0] [3]ä¹Ÿåˆå§‹ä¸º0ã€‚

1. ç¡®å®šéå†é¡ºåº

ä»é€’å½’å…¬å¼ä¸Šå¯ä»¥çœ‹å‡ºï¼Œdp[i] ä¾èµ–äº dp[i-1]ï¼Œæ‰€ä»¥æ˜¯ä»å‰å‘åéå†ã€‚

```java
class Solution {
    public int maxProfit(int[] prices) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][0]: ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦
        // dp[i][1]: ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œä¸”ä¸åœ¨å†·å†»æœŸä¸­çš„æœ€å¤§åˆ©æ¶¦
        // dp[i][2]: ç¬¬iå¤©å–å‡ºè‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦
        // dp[i][3]: ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œä¸”åœ¨å†·å†»æœŸä¸­çš„æœ€å¤§åˆ©æ¶¦
        int[][] dp = new int[prices.length][4];

        // ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–dpæ•°ç»„
        dp[0][0] = -prices[0]; // ç¬¬ä¸€å¤©ä¹°å…¥è‚¡ç¥¨
        dp[0][1] = 0;          // ç¬¬ä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨ä¸”ä¸åœ¨å†·å†»æœŸï¼ˆæ— æ“ä½œï¼‰
        dp[0][2] = 0;          // ç¬¬ä¸€å¤©å–å‡ºè‚¡ç¥¨çš„åˆ©æ¶¦
        dp[0][3] = 0;          // ç¬¬ä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨ä¸”åœ¨å†·å†»æœŸï¼ˆæ— æ“ä½œï¼‰

        // ç¬¬ä¸‰æ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        // dp[i][0]: è¦ä¹ˆç»§æ‰¿ä¹‹å‰æŒæœ‰çš„çŠ¶æ€ï¼Œè¦ä¹ˆåœ¨ä¹‹å‰æœªæŒæœ‰æˆ–å†·å†»æœŸç»“æŸæ—¶ä¹°å…¥
        // dp[i][1]: è¦ä¹ˆç»§æ‰¿ä¹‹å‰ä¸æŒæœ‰ä¸”ä¸åœ¨å†·å†»æœŸçš„çŠ¶æ€ï¼Œè¦ä¹ˆåœ¨ä¹‹å‰å†·å†»æœŸç»“æŸ
        // dp[i][2]: å½“å¤©å–å‡ºè‚¡ç¥¨ï¼Œç»§æ‰¿çš„æ˜¯ä¹‹å‰æŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€åŠ ä¸Šå½“å¤©çš„ä»·æ ¼
        // dp[i][3]: å½“å¤©è¿›å…¥å†·å†»æœŸï¼Œç»§æ‰¿çš„æ˜¯å‰ä¸€å¤©å–å‡ºè‚¡ç¥¨çš„çŠ¶æ€
        for (int i = 1; i < prices.length; i++) {
            dp[i][0] = Math.max(Math.max(dp[i - 1][0], dp[i - 1][1] - prices[i]), dp[i - 1][3] - prices[i]);
            dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][3]);
            dp[i][2] = dp[i - 1][0] + prices[i];
            dp[i][3] = dp[i - 1][2];
        }

        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // æŒ‰ç…§å¤©æ•°ä»å‰å¾€åéå†ï¼Œæœ€ç»ˆçš„æœ€å¤§åˆ©æ¶¦æ˜¯æœ€åä¸€å¤©çš„å››ç§çŠ¶æ€ä¸­çš„æœ€å¤§å€¼
        return Arrays.stream(dp[dp.length - 1]).max().getAsInt();
    }
}
```

### 714.ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ pricesï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨äº†ç¬¬ i å¤©çš„è‚¡ç¥¨ä»·æ ¼ ï¼›éè´Ÿæ•´æ•° fee ä»£è¡¨äº†äº¤æ˜“è‚¡ç¥¨çš„æ‰‹ç»­è´¹ç”¨ã€‚

ä½ å¯ä»¥æ— é™æ¬¡åœ°å®Œæˆäº¤æ˜“ï¼Œä½†æ˜¯ä½ æ¯ç¬”äº¤æ˜“éƒ½éœ€è¦ä»˜æ‰‹ç»­è´¹ã€‚å¦‚æœä½ å·²ç»è´­ä¹°äº†ä¸€ä¸ªè‚¡ç¥¨ï¼Œåœ¨å–å‡ºå®ƒä¹‹å‰ä½ å°±ä¸èƒ½å†ç»§ç»­è´­ä¹°è‚¡ç¥¨äº†ã€‚

è¿”å›è·å¾—åˆ©æ¶¦çš„æœ€å¤§å€¼ã€‚

æ³¨æ„ï¼šè¿™é‡Œçš„ä¸€ç¬”äº¤æ˜“æŒ‡ä¹°å…¥æŒæœ‰å¹¶å–å‡ºè‚¡ç¥¨çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œæ¯ç¬”äº¤æ˜“ä½ åªéœ€è¦ä¸ºæ”¯ä»˜ä¸€æ¬¡æ‰‹ç»­è´¹ã€‚

ç¤ºä¾‹ 1:

- è¾“å…¥: prices = [1, 3, 2, 8, 4, 9], fee = 2
- è¾“å‡º: 8

è§£é‡Š: èƒ½å¤Ÿè¾¾åˆ°çš„æœ€å¤§åˆ©æ¶¦:

- åœ¨æ­¤å¤„ä¹°å…¥ prices[0] = 1
- åœ¨æ­¤å¤„å–å‡º prices[3] = 8
- åœ¨æ­¤å¤„ä¹°å…¥ prices[4] = 4
- åœ¨æ­¤å¤„å–å‡º prices[5] = 9
- æ€»åˆ©æ¶¦: ((8 - 1) - 2) + ((9 - 4) - 2) = 8.





```java
class Solution {
    public int maxProfit(int[] prices, int fee) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][0]: ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦
        // dp[i][1]: ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦
        int[][] dp = new int[prices.length][2];

        // ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–dpæ•°ç»„
        dp[0][0] = -prices[0]; // ç¬¬ä¸€å¤©æŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸ºè´Ÿï¼Œå› ä¸ºèŠ±è´¹äº†ä¹°å…¥ä»·æ ¼
        dp[0][1] = 0;          // ç¬¬ä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º0ï¼ˆæœªè¿›è¡Œä»»ä½•æ“ä½œï¼‰

        // ç¬¬ä¸‰æ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        // dp[i][0]: è¦ä¹ˆç»§ç»­æŒæœ‰è‚¡ç¥¨ï¼ˆç»§æ‰¿dp[i-1][0]ï¼‰ï¼Œè¦ä¹ˆä»Šå¤©ä¹°å…¥è‚¡ç¥¨ï¼ˆåœ¨æ˜¨å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„åŸºç¡€ä¸Šå‡å»ä»Šå¤©çš„ä»·æ ¼ï¼‰
        // dp[i][1]: è¦ä¹ˆç»§ç»­ä¸æŒæœ‰è‚¡ç¥¨ï¼ˆç»§æ‰¿dp[i-1][1]ï¼‰ï¼Œè¦ä¹ˆä»Šå¤©å–å‡ºè‚¡ç¥¨ï¼ˆåœ¨æ˜¨å¤©æŒæœ‰è‚¡ç¥¨çš„åŸºç¡€ä¸ŠåŠ ä¸Šä»Šå¤©çš„ä»·æ ¼å¹¶æ‰£é™¤æ‰‹ç»­è´¹ï¼‰
        for (int i = 1; i < prices.length; i++) {
            dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] - prices[i]);
            dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] + prices[i] - fee);
        }

        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // æŒ‰ç…§å¤©æ•°ä»å‰å¾€åéå†ï¼Œæœ€ç»ˆçš„æœ€å¤§åˆ©æ¶¦æ˜¯æœ€åä¸€å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„åˆ©æ¶¦dp[prices.length - 1][1]ï¼Œ
        // ä½†ä¸ºäº†ç¡®ä¿æ— è®ºæŒæœ‰è¿˜æ˜¯ä¸æŒæœ‰ï¼Œå‡å–æœ€å¤§å€¼ï¼Œæ‰€ä»¥è¿”å›Math.max(dp[prices.length - 1][0], dp[prices.length - 1][1])
        return Math.max(dp[prices.length - 1][0], dp[prices.length - 1][1]);
    }
}

```

### 300.æœ€é•¿é€’å¢å­åºåˆ—(4.3)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚

å­åºåˆ—æ˜¯ç”±æ•°ç»„æ´¾ç”Ÿè€Œæ¥çš„åºåˆ—ï¼Œåˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ[3,6,2,7] æ˜¯æ•°ç»„ [0,3,1,6,2,2,7] çš„å­åºåˆ—ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šnums = [10,9,2,5,3,7,101,18]
- è¾“å‡ºï¼š4
- è§£é‡Šï¼šæœ€é•¿é€’å¢å­åºåˆ—æ˜¯ [2,3,7,101]ï¼Œå› æ­¤é•¿åº¦ä¸º 4 ã€‚



**dp[i]è¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦**

ä¸ºä»€ä¹ˆä¸€å®šè¡¨ç¤º â€œä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºâ€ ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ åš é€’å¢æ¯”è¾ƒçš„æ—¶å€™ï¼Œå¦‚æœæ¯”è¾ƒ nums[j] å’Œ nums[i] çš„å¤§å°ï¼Œé‚£ä¹ˆä¸¤ä¸ªé€’å¢å­åºåˆ—ä¸€å®šåˆ†åˆ«ä»¥nums[j]ä¸ºç»“å°¾ å’Œ nums[i]ä¸ºç»“å°¾ï¼Œ è¦ä¸ç„¶è¿™ä¸ªæ¯”è¾ƒå°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œä¸æ˜¯å°¾éƒ¨å…ƒç´ çš„æ¯”è¾ƒé‚£ä¹ˆ å¦‚ä½•ç®—é€’å¢å‘¢ã€‚

1. çŠ¶æ€è½¬ç§»æ–¹ç¨‹

ä½ç½®içš„æœ€é•¿å‡åºå­åºåˆ—ç­‰äºjä»0åˆ°i-1å„ä¸ªä½ç½®çš„æœ€é•¿å‡åºå­åºåˆ— + 1 çš„æœ€å¤§å€¼ã€‚

æ‰€ä»¥ï¼šif (nums[i] > nums[j]) dp[i] = max(dp[i], dp[j] + 1);

**æ³¨æ„è¿™é‡Œä¸æ˜¯è¦dp[i] ä¸ dp[j] + 1è¿›è¡Œæ¯”è¾ƒï¼Œè€Œæ˜¯æˆ‘ä»¬è¦å–dp[j] + 1çš„æœ€å¤§å€¼**ã€‚

1. dp[i]çš„åˆå§‹åŒ–

æ¯ä¸€ä¸ªiï¼Œå¯¹åº”çš„dp[i]ï¼ˆå³æœ€é•¿é€’å¢å­åºåˆ—ï¼‰èµ·å§‹å¤§å°è‡³å°‘éƒ½æ˜¯1.

1. ç¡®å®šéå†é¡ºåº

dp[i] æ˜¯æœ‰0åˆ°i-1å„ä¸ªä½ç½®çš„æœ€é•¿é€’å¢å­åºåˆ— æ¨å¯¼è€Œæ¥ï¼Œé‚£ä¹ˆéå†iä¸€å®šæ˜¯ä»å‰å‘åéå†ã€‚

jå…¶å®å°±æ˜¯éå†0åˆ°i-1ï¼Œé‚£ä¹ˆæ˜¯ä»å‰åˆ°åï¼Œè¿˜æ˜¯ä»ååˆ°å‰éå†éƒ½æ— æ‰€è°“ï¼Œåªè¦å§ 0 åˆ° i-1 çš„å…ƒç´ éƒ½éå†äº†å°±è¡Œäº†ã€‚ æ‰€ä»¥é»˜è®¤ä¹ æƒ¯ ä»å‰å‘åéå†ã€‚

```java
class Solution {
    public int lengthOfLIS(int[] nums) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i] è¡¨ç¤ºä»¥ç¬¬iä¸ªå…ƒç´ ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦
        int[] dp = new int[nums.length];

        // ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–dpæ•°ç»„
        // åˆå§‹åŒ–æ¯ä¸ªä½ç½®çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦ä¸º1ï¼Œå› ä¸ºæ¯ä¸ªå•ç‹¬çš„å…ƒç´ éƒ½å¯ä»¥æ˜¯é•¿åº¦ä¸º1çš„é€’å¢å­åºåˆ—
        Arrays.fill(dp, 1);

        // ç¬¬ä¸‰æ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        // å¦‚æœnums[i] > nums[j]ï¼ˆå…¶ä¸­ j < iï¼‰ï¼Œè¯´æ˜å¯ä»¥æŠŠnums[i]æ¥åœ¨ä»¥nums[j]ç»“å°¾çš„é€’å¢å­åºåˆ—åé¢
        // æ­¤æ—¶dp[i] = Math.max(dp[i], dp[j] + 1)ï¼Œè¡¨ç¤ºè€ƒè™‘å°†nums[i]æ¥åœ¨ä»¥nums[j]ç»“å°¾çš„å­åºåˆ—åé¢æ—¶çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦
        for (int i = 1; i < dp.length; i++) {
            for (int j = 0; j < i; j++) {
                if (nums[i] > nums[j]) {
                    dp[i] = Math.max(dp[i], dp[j] + 1);
                }
            }
        }

        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // è¿™é‡Œçš„éå†æ˜¯æŒ‰ç…§ä»å‰å¾€åçš„é¡ºåºè¿›è¡Œçš„ï¼Œå…ˆè®¡ç®—è¾ƒå°å­é—®é¢˜çš„è§£ï¼Œå†é€æ­¥æ‰©å¤§é—®é¢˜è§„æ¨¡
        // æœ€ç»ˆçš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦æ˜¯dpæ•°ç»„ä¸­çš„æœ€å¤§å€¼
        return Arrays.stream(dp).max().getAsInt();
    }
}

```

### 674. æœ€é•¿è¿ç»­é€’å¢åºåˆ—

ç»™å®šä¸€ä¸ªæœªç»æ’åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°æœ€é•¿ä¸” è¿ç»­é€’å¢çš„å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚

è¿ç»­é€’å¢çš„å­åºåˆ— å¯ä»¥ç”±ä¸¤ä¸ªä¸‹æ ‡ l å’Œ rï¼ˆl < rï¼‰ç¡®å®šï¼Œå¦‚æœå¯¹äºæ¯ä¸ª l <= i < rï¼Œéƒ½æœ‰ nums[i] < nums[i + 1] ï¼Œé‚£ä¹ˆå­åºåˆ— [nums[l], nums[l + 1], ..., nums[r - 1], nums[r]] å°±æ˜¯è¿ç»­é€’å¢å­åºåˆ—ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šnums = [1,3,5,4,7]
- è¾“å‡ºï¼š3
- è§£é‡Šï¼šæœ€é•¿è¿ç»­é€’å¢åºåˆ—æ˜¯ [1,3,5], é•¿åº¦ä¸º3ã€‚å°½ç®¡ [1,3,5,7] ä¹Ÿæ˜¯å‡åºçš„å­åºåˆ—, ä½†å®ƒä¸æ˜¯è¿ç»­çš„ï¼Œå› ä¸º 5 å’Œ 7 åœ¨åŸæ•°ç»„é‡Œè¢« 4 éš”å¼€ã€‚



åŠ¨è§„äº”éƒ¨æ›²åˆ†æå¦‚ä¸‹ï¼š

1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

**dp[i]ï¼šä»¥ä¸‹æ ‡iä¸ºç»“å°¾çš„è¿ç»­é€’å¢çš„å­åºåˆ—é•¿åº¦ä¸ºdp[i]**ã€‚

æ³¨æ„è¿™é‡Œçš„å®šä¹‰ï¼Œä¸€å®šæ˜¯ä»¥ä¸‹æ ‡iä¸ºç»“å°¾ï¼Œå¹¶ä¸æ˜¯è¯´ä¸€å®šä»¥ä¸‹æ ‡0ä¸ºèµ·å§‹ä½ç½®ã€‚

1. ç¡®å®šé€’æ¨å…¬å¼

å¦‚æœ nums[i] > nums[i - 1]ï¼Œé‚£ä¹ˆä»¥ i ä¸ºç»“å°¾çš„è¿ç»­é€’å¢çš„å­åºåˆ—é•¿åº¦ ä¸€å®šç­‰äº ä»¥i - 1ä¸ºç»“å°¾çš„è¿ç»­é€’å¢çš„å­åºåˆ—é•¿åº¦ + 1 ã€‚

å³ï¼šdp[i] = dp[i - 1] + 1;

**æ³¨æ„è¿™é‡Œå°±ä½“ç°å‡ºå’Œ[åŠ¨æ€è§„åˆ’ï¼š300.æœ€é•¿é€’å¢å­åºåˆ— (opens new window)](https://programmercarl.com/0300.æœ€é•¿ä¸Šå‡å­åºåˆ—.html)çš„åŒºåˆ«ï¼**

å› ä¸ºæœ¬é¢˜è¦æ±‚è¿ç»­é€’å¢å­åºåˆ—ï¼Œæ‰€ä»¥å°±åªè¦æ¯”è¾ƒnums[i]ä¸nums[i - 1]ï¼Œè€Œä¸ç”¨å»æ¯”è¾ƒnums[j]ä¸nums[i] ï¼ˆjæ˜¯åœ¨0åˆ°iä¹‹é—´éå†ï¼‰ã€‚

æ—¢ç„¶ä¸ç”¨jäº†ï¼Œé‚£ä¹ˆä¹Ÿä¸ç”¨ä¸¤å±‚forå¾ªç¯ï¼Œæœ¬é¢˜ä¸€å±‚forå¾ªç¯å°±è¡Œï¼Œæ¯”è¾ƒnums[i] å’Œ nums[i - 1]ã€‚

è¿™é‡Œå¤§å®¶è¦å¥½å¥½ä½“ä¼šä¸€ä¸‹ï¼

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

ä»¥ä¸‹æ ‡iä¸ºç»“å°¾çš„è¿ç»­é€’å¢çš„å­åºåˆ—é•¿åº¦æœ€å°‘ä¹Ÿåº”è¯¥æ˜¯1ï¼Œå³å°±æ˜¯nums[i]è¿™ä¸€ä¸ªå…ƒç´ ã€‚

æ‰€ä»¥dp[i]åº”è¯¥åˆå§‹1;

1. ç¡®å®šéå†é¡ºåº

ä»é€’æ¨å…¬å¼ä¸Šå¯ä»¥çœ‹å‡ºï¼Œ dp[i + 1]ä¾èµ–dp[i]ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯ä»å‰å‘åéå†ã€‚

```java
class Solution {
    public int findLengthOfLCIS(int[] nums) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i] è¡¨ç¤ºä»¥ç¬¬iä¸ªå…ƒç´ ç»“å°¾çš„æœ€é•¿è¿ç»­é€’å¢å­åºåˆ—çš„é•¿åº¦
        int[] dp = new int[nums.length];

        // ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–dpæ•°ç»„
        // åˆå§‹åŒ–æ¯ä¸ªä½ç½®çš„æœ€é•¿è¿ç»­é€’å¢å­åºåˆ—é•¿åº¦ä¸º1ï¼Œå› ä¸ºæ¯ä¸ªå•ç‹¬çš„å…ƒç´ éƒ½å¯ä»¥æ˜¯é•¿åº¦ä¸º1çš„è¿ç»­é€’å¢å­åºåˆ—
        Arrays.fill(dp, 1);

        // ç¬¬ä¸‰æ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        // å¦‚æœnums[i] > nums[i - 1]ï¼Œè¯´æ˜nums[i]å¯ä»¥æ¥åœ¨nums[i - 1]çš„è¿ç»­é€’å¢å­åºåˆ—ä¹‹å
        // æ­¤æ—¶ dp[i] = dp[i - 1] + 1ï¼Œè¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„æœ€é•¿è¿ç»­é€’å¢å­åºåˆ—çš„é•¿åº¦
        for (int i = 1; i < dp.length; i++) {
            if (nums[i] > nums[i - 1]) {
                dp[i] = dp[i - 1] + 1;
            }
        }

        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // æŒ‰ç…§ä»å‰å¾€åçš„é¡ºåºéå†æ•°ç»„ï¼Œé€æ­¥è®¡ç®—ä»¥æ¯ä¸ªå…ƒç´ ä¸ºç»“å°¾çš„æœ€é•¿è¿ç»­é€’å¢å­åºåˆ—çš„é•¿åº¦
        // æœ€ç»ˆçš„LCISé•¿åº¦æ˜¯dpæ•°ç»„ä¸­çš„æœ€å¤§å€¼
        return Arrays.stream(dp).max().getAsInt();
    }
}
```

### 718. æœ€é•¿é‡å¤å­æ•°ç»„ï¼ˆè¦æ±‚è¿ç»­ï¼‰ï¼ˆ4.17ï¼‰

ç»™ä¸¤ä¸ªæ•´æ•°æ•°ç»„ A å’Œ B ï¼Œè¿”å›ä¸¤ä¸ªæ•°ç»„ä¸­å…¬å…±çš„ã€é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦ã€‚

ç¤ºä¾‹ï¼š

è¾“å…¥ï¼š

- A: [1,2,3,2,1]
- B: [3,2,1,4,7]
- è¾“å‡ºï¼š3
- è§£é‡Šï¼šé•¿åº¦æœ€é•¿çš„å…¬å…±å­æ•°ç»„æ˜¯ [3, 2, 1] ã€‚



1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

dp[i] [j] ï¼šä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„Aï¼Œå’Œä»¥ä¸‹æ ‡j - 1ä¸ºç»“å°¾çš„Bï¼Œæœ€é•¿é‡å¤å­æ•°ç»„é•¿åº¦ä¸ºdp[i] [j]ã€‚ ï¼ˆ**ç‰¹åˆ«æ³¨æ„**ï¼š â€œä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„Aâ€ æ ‡æ˜ä¸€å®šæ˜¯ ä»¥A[i-1]ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² ï¼‰

æ­¤æ—¶ç»†å¿ƒçš„åŒå­¦åº”è¯¥å‘ç°ï¼Œé‚£dp[0] [0]æ˜¯ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿæ€»ä¸èƒ½æ˜¯ä»¥ä¸‹æ ‡-1ä¸ºç»“å°¾çš„Aæ•°ç»„å§ã€‚

å…¶å®dp[i] [j]çš„å®šä¹‰ä¹Ÿå°±å†³å®šç€ï¼Œæˆ‘ä»¬åœ¨éå†dp[i] [j]çš„æ—¶å€™i å’Œ jéƒ½è¦ä»1å¼€å§‹ã€‚

é‚£æœ‰åŒå­¦é—®äº†ï¼Œæˆ‘å°±å®šä¹‰dp[i] [j]ä¸º ä»¥ä¸‹æ ‡iä¸ºç»“å°¾çš„Aï¼Œå’Œä»¥ä¸‹æ ‡j ä¸ºç»“å°¾çš„Bï¼Œæœ€é•¿é‡å¤å­æ•°ç»„é•¿åº¦ã€‚ä¸è¡Œä¹ˆï¼Ÿ

è¡Œå€’æ˜¯è¡Œï¼ ä½†å®ç°èµ·æ¥å°±éº»çƒ¦ä¸€ç‚¹ï¼Œéœ€è¦å•ç‹¬å¤„ç†åˆå§‹åŒ–éƒ¨åˆ†ã€‚

1. ç¡®å®šé€’æ¨å…¬å¼

æ ¹æ®dp[i] [j]çš„å®šä¹‰ï¼Œdp[i] [j]çš„çŠ¶æ€åªèƒ½ç”±dp[i - 1] [j - 1]æ¨å¯¼å‡ºæ¥ã€‚

å³å½“A[i - 1] å’ŒB[j - 1]ç›¸ç­‰çš„æ—¶å€™ï¼Œdp[i] [j] = dp[i - 1] [j - 1] + 1;

æ ¹æ®é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œéå†i å’Œ j è¦ä»1å¼€å§‹ï¼

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

æ ¹æ®dp[i] [j]çš„å®šä¹‰ï¼Œdp[i] [0] å’Œdp[0] [j]å…¶å®éƒ½æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼

ä½†dp[i] [0] å’Œdp[0] [j]è¦åˆå§‹å€¼ï¼Œå› ä¸º ä¸ºäº†æ–¹ä¾¿é€’å½’å…¬å¼dp[i] [j] = dp[i - 1] [j - 1] + 1;

æ‰€ä»¥dp[i] [0] å’Œdp[0] [j]åˆå§‹åŒ–ä¸º0ã€‚

ä¸¾ä¸ªä¾‹å­A[0]å¦‚æœå’ŒB[0]ç›¸åŒçš„è¯ï¼Œdp[1] [1] = dp[0] [0] + 1ï¼Œåªæœ‰dp[0] [0]åˆå§‹ä¸º0ï¼Œæ­£å¥½ç¬¦åˆé€’æ¨å…¬å¼é€æ­¥ç´¯åŠ èµ·æ¥ã€‚

1. ç¡®å®šéå†é¡ºåº

å¤–å±‚forå¾ªç¯éå†Aï¼Œå†…å±‚forå¾ªç¯éå†Bã€‚

é‚£åˆæœ‰åŒå­¦é—®äº†ï¼Œå¤–å±‚forå¾ªç¯éå†Bï¼Œå†…å±‚forå¾ªç¯éå†Aã€‚ä¸è¡Œä¹ˆï¼Ÿ

ä¹Ÿè¡Œï¼Œä¸€æ ·çš„ï¼Œæˆ‘è¿™é‡Œå°±ç”¨å¤–å±‚forå¾ªç¯éå†Aï¼Œå†…å±‚forå¾ªç¯éå†Bäº†ã€‚

åŒæ—¶é¢˜ç›®è¦æ±‚é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦ã€‚æ‰€ä»¥åœ¨éå†çš„æ—¶å€™é¡ºä¾¿æŠŠdp[i] [j]çš„æœ€å¤§å€¼è®°å½•ä¸‹æ¥ã€‚

```java
class Solution {
    public int findLength(int[] nums1, int[] nums2) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºä»¥nums1[i-1]å’Œnums2[j-1]ç»“å°¾çš„æœ€é•¿å…¬å…±å­æ•°ç»„çš„é•¿åº¦
        int[][] dp = new int[nums1.length + 1][nums2.length + 1];

        // ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–dpæ•°ç»„
        // å½“i=0æˆ–j=0æ—¶ï¼Œdp[i][j]=0ï¼Œè¡¨ç¤ºç©ºæ•°ç»„ä¸ä»»ä½•æ•°ç»„çš„æœ€é•¿å…¬å…±å­æ•°ç»„é•¿åº¦ä¸º0
        for (int i = 0; i < dp.length; i++) {
            dp[i][0] = 0;
        }
        for (int i = 0; i < dp[0].length; i++) {
            dp[0][i] = 0;
        }

        // ç¬¬ä¸‰æ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        // å¦‚æœnums1[i-1] == nums2[j-1]ï¼Œåˆ™dp[i][j] = dp[i-1][j-1] + 1
        // å¦åˆ™ï¼Œdp[i][j] = 0ï¼Œå› ä¸ºå­æ•°ç»„å¿…é¡»æ˜¯è¿ç»­çš„
        int maxInt = 0; // ç”¨æ¥è®°å½•æœ€å¤§å€¼
        for (int i = 1; i <= nums1.length; i++) {
            for (int j = 1; j <= nums2.length; j++) {
                if (nums1[i - 1] == nums2[j - 1]) {
                    dp[i][j] = dp[i - 1][j - 1] + 1;
                    maxInt = Math.max(maxInt, dp[i][j]); // æ›´æ–°æœ€å¤§å€¼
                }
            }
        }

        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // ä»1å¼€å§‹éå†dpæ•°ç»„ï¼Œé€æ­¥è®¡ç®—ä»¥nums1[i-1]å’Œnums2[j-1]ç»“å°¾çš„æœ€é•¿å…¬å…±å­æ•°ç»„é•¿åº¦
        return maxInt; // æœ€ç»ˆè¿”å›æœ€å¤§é•¿åº¦
    }
}


```

### 1143.æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆ3.22ï¼‰

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² text1 å’Œ text2ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ã€‚

ä¸€ä¸ªå­—ç¬¦ä¸²çš„ å­åºåˆ— æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚

ä¾‹å¦‚ï¼Œ"ace" æ˜¯ "abcde" çš„å­åºåˆ—ï¼Œä½† "aec" ä¸æ˜¯ "abcde" çš„å­åºåˆ—ã€‚ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ã€Œå…¬å…±å­åºåˆ—ã€æ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€å…±åŒæ‹¥æœ‰çš„å­åºåˆ—ã€‚

è‹¥è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ²¡æœ‰å…¬å…±å­åºåˆ—ï¼Œåˆ™è¿”å› 0ã€‚

ç¤ºä¾‹ 1:

- è¾“å…¥ï¼štext1 = "abcde", text2 = "ace"
- è¾“å‡ºï¼š3
- è§£é‡Šï¼šæœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ "ace"ï¼Œå®ƒçš„é•¿åº¦ä¸º 3ã€‚

ä¸ä¸Šä¸€é¢˜ç›¸ä¼¼dp[i] [j]ï¼šé•¿åº¦ä¸º[0, i - 1]çš„å­—ç¬¦ä¸²text1ä¸é•¿åº¦ä¸º[0, j - 1]çš„å­—ç¬¦ä¸²text2çš„æœ€é•¿å…¬å…±å­åºåˆ—ä¸º`dp[i][j]`

æœ‰åŒå­¦ä¼šé—®ï¼šä¸ºä»€ä¹ˆè¦å®šä¹‰é•¿åº¦ä¸º[0, i - 1]çš„å­—ç¬¦ä¸²text1ï¼Œå®šä¹‰ä¸ºé•¿åº¦ä¸º[0, i]çš„å­—ç¬¦ä¸²text1ä¸é¦™ä¹ˆï¼Ÿ

1. ç¡®å®šé€’æ¨å…¬å¼

ä¸»è¦å°±æ˜¯ä¸¤å¤§æƒ…å†µï¼š text1[i - 1] ä¸ text2[j - 1]ç›¸åŒï¼Œtext1[i - 1] ä¸ text2[j - 1]ä¸ç›¸åŒ

å¦‚æœtext1[i - 1] ä¸ text2[j - 1]ç›¸åŒï¼Œé‚£ä¹ˆæ‰¾åˆ°äº†ä¸€ä¸ªå…¬å…±å…ƒç´ ï¼Œæ‰€ä»¥dp[i] [j] = dp[i - 1] [j - 1] + 1;

å¦‚æœtext1[i - 1] ä¸ text2[j - 1]ä¸ç›¸åŒï¼Œé‚£å°±çœ‹çœ‹text1[0, i - 2]ä¸text2[0, j - 1]çš„æœ€é•¿å…¬å…±å­åºåˆ— å’Œ text1[0, i - 1]ä¸text2[0, j - 2]çš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œå–æœ€å¤§çš„ã€‚

å³ï¼šdp[i] [j] = max(dp[i - 1] [j], dp[i] [j - 1]);

ä»£ç å¦‚ä¸‹ï¼š

```cpp
if (text1[i - 1] == text2[j - 1]) {
    dp[i][j] = dp[i - 1][j - 1] + 1;
} else {
    dp[i][j] = max(dp[i - 1][j], dp[i][j - 1]);
}
```

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

å…ˆçœ‹çœ‹`dp[i][0]`åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ

test1[0, i-1]å’Œç©ºä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—è‡ªç„¶æ˜¯0ï¼Œæ‰€ä»¥dp[i] [0] = 0;

åŒç†dp[0] [j]ä¹Ÿæ˜¯0ã€‚

å…¶ä»–ä¸‹æ ‡éƒ½æ˜¯éšç€é€’æ¨å…¬å¼é€æ­¥è¦†ç›–ï¼Œåˆå§‹ä¸ºå¤šå°‘éƒ½å¯ä»¥ï¼Œé‚£ä¹ˆå°±ç»Ÿä¸€åˆå§‹ä¸º0ã€‚

ä»£ç ï¼š

```text
vector<vector<int>> dp(text1.size() + 1, vector<int>(text2.size() + 1, 0));
```

1. ç¡®å®šéå†é¡ºåº

ä»é€’æ¨å…¬å¼ï¼Œå¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸‰ä¸ªæ–¹å‘å¯ä»¥æ¨å‡ºdp[i] [j]ï¼Œå¦‚å›¾ï¼š

![1143.æœ€é•¿å…¬å…±å­åºåˆ—](https://code-thinking-1253855093.file.myqcloud.com/pics/20210204115139616.jpg)

é‚£ä¹ˆä¸ºäº†åœ¨é€’æ¨çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸‰ä¸ªæ–¹å‘éƒ½æ˜¯ç»è¿‡è®¡ç®—çš„æ•°å€¼ï¼Œæ‰€ä»¥è¦ä»å‰å‘åï¼Œä»ä¸Šåˆ°ä¸‹æ¥éå†è¿™ä¸ªçŸ©é˜µã€‚

```java
/**
 * æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜
 */
class Solution {
    /**
     * è®¡ç®—ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦
     * @param text1 ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²
     * @param text2 ç¬¬äºŒä¸ªå­—ç¬¦ä¸²
     * @return æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦
     */
    public int longestCommonSubsequence(String text1, String text2) {
        // åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„dpï¼Œç”¨äºä¿å­˜æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦
        int [][] dp = new int[text1.length() + 1][text2.length() + 1];
        //åˆå§‹åŒ–
        for (int i = 0; i < dp.length; i++) {
            dp[i][0] = 0;
        }
        for (int i = 0; i < dp[0].length; i++) {
            dp[0][i] = 0;
        }
        
        // éå†text1å’Œtext2çš„æ‰€æœ‰å­—ç¬¦
        for (int i = 1; i <= text1.length(); i++) {
            for (int j = 1; j <= text2.length(); j++) {
                // å¦‚æœå½“å‰å­—ç¬¦ç›¸ç­‰ï¼Œåˆ™æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦åŠ 1
                if (text1.charAt(i - 1) == text2.charAt(j - 1)) {
                    dp[i][j] = dp[i - 1][j - 1] + 1;
                } else {
                    // å¦‚æœå½“å‰å­—ç¬¦ä¸ç›¸ç­‰ï¼Œåˆ™æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ä¸ºå‰ä¸€ä¸ªå­—ç¬¦çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦
                    // å’Œå½“å‰å­—ç¬¦çš„å‰ä¸€ä¸ªå­—ç¬¦çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ä¸­çš„è¾ƒå¤§å€¼
                    dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);
                }
            }
        }
        // è¿”å›text1å’Œtext2çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦
        return dp[text1.length()][text2.length()];
    }
}
```

### 1035.ä¸ç›¸äº¤çš„çº¿

æˆ‘ä»¬åœ¨ä¸¤æ¡ç‹¬ç«‹çš„æ°´å¹³çº¿ä¸ŠæŒ‰ç»™å®šçš„é¡ºåºå†™ä¸‹ A å’Œ B ä¸­çš„æ•´æ•°ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç»˜åˆ¶ä¸€äº›è¿æ¥ä¸¤ä¸ªæ•°å­— A[i] å’Œ B[j] çš„ç›´çº¿ï¼Œåªè¦ A[i] == B[j]ï¼Œä¸”æˆ‘ä»¬ç»˜åˆ¶çš„ç›´çº¿ä¸ä¸ä»»ä½•å…¶ä»–è¿çº¿ï¼ˆéæ°´å¹³çº¿ï¼‰ç›¸äº¤ã€‚

ä»¥è¿™ç§æ–¹æ³•ç»˜åˆ¶çº¿æ¡ï¼Œå¹¶è¿”å›æˆ‘ä»¬å¯ä»¥ç»˜åˆ¶çš„æœ€å¤§è¿çº¿æ•°ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/2021032116363533.png" alt="1035.ä¸ç›¸äº¤çš„çº¿" style="zoom:50%;" />

**æœ¬é¢˜è¯´æ˜¯æ±‚ç»˜åˆ¶çš„æœ€å¤§è¿çº¿æ•°ï¼Œå…¶å®å°±æ˜¯æ±‚ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ï¼**

```java
class Solution {
    public int maxUncrossedLines(int[] nums1, int[] nums2) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºåœ¨nums1çš„å‰iä¸ªå…ƒç´ å’Œnums2çš„å‰jä¸ªå…ƒç´ ä¹‹é—´å¯ä»¥ç»˜åˆ¶çš„æœ€å¤§ä¸ç›¸äº¤è¿çº¿æ•°
        int[][] dp = new int[nums1.length + 1][nums2.length + 1];

        // ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–dpæ•°ç»„
        // å½“i=0æˆ–j=0æ—¶ï¼Œdp[i][j]=0ï¼Œè¡¨ç¤ºç©ºæ•°ç»„ä¸ä»»ä½•æ•°ç»„ä¹‹é—´éƒ½ä¸èƒ½ç»˜åˆ¶è¿çº¿
        for (int i = 0; i < dp.length; i++) {
            dp[i][0] = 0;
        }
        for (int i = 0; i < dp[0].length; i++) {
            dp[0][i] = 0;
        }


        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // ä»1å¼€å§‹éå†dpæ•°ç»„ï¼Œé€æ­¥è®¡ç®—å‡ºå¯ä»¥ç»˜åˆ¶çš„æœ€å¤§ä¸ç›¸äº¤è¿çº¿æ•°
        for (int i = 1; i < dp.length; i++) {
            for (int j = 1; j < dp[0].length; j++) {
           		// ç¬¬ä¸‰æ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        		// å¦‚æœnums1[i-1] == nums2[j-1]ï¼Œåˆ™dp[i][j] = dp[i-1][j-1] + 1ï¼Œè¡¨ç¤ºåœ¨å‰é¢çš„åŸºç¡€ä¸Šå¢åŠ ä¸€æ¡è¿çº¿
        		// å¦‚æœnums1[i-1] != nums2[j-1]ï¼Œåˆ™dp[i][j] = Math.max(dp[i-1][j], dp[i][j-1])ï¼Œè¡¨ç¤ºä¸å¢åŠ æ–°è¿çº¿æ—¶çš„æœ€å¤§å€¼
                if (nums1[i - 1] == nums2[j - 1]) {
                    dp[i][j] = dp[i - 1][j - 1] + 1;
                } else {
                    dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);
                }
            }
        }

        
        return dp[nums1.length][nums2.length]; // æœ€ç»ˆè¿”å›æœ€å¤§ä¸ç›¸äº¤è¿çº¿æ•°
    }
}

```

### 53. æœ€å¤§å­åºå’Œï¼ˆ3.31ï¼‰

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚

ç¤ºä¾‹:

- è¾“å…¥: [-2,1,-3,4,-1,2,1,-5,4]
- è¾“å‡º: 6
- è§£é‡Š: è¿ç»­å­æ•°ç»„ [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6ã€‚



åŠ¨è§„äº”éƒ¨æ›²å¦‚ä¸‹ï¼š

1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

**dp[i]ï¼šåŒ…æ‹¬ä¸‹æ ‡iï¼ˆä»¥nums[i]ä¸ºç»“å°¾ï¼‰çš„æœ€å¤§è¿ç»­å­åºåˆ—å’Œä¸ºdp[i]**ã€‚

1. ç¡®å®šé€’æ¨å…¬å¼

dp[i]åªæœ‰ä¸¤ä¸ªæ–¹å‘å¯ä»¥æ¨å‡ºæ¥ï¼š

- dp[i - 1] + nums[i]ï¼Œå³ï¼šnums[i]åŠ å…¥å½“å‰è¿ç»­å­åºåˆ—å’Œ
- nums[i]ï¼Œå³ï¼šä»å¤´å¼€å§‹è®¡ç®—å½“å‰è¿ç»­å­åºåˆ—å’Œ

ä¸€å®šæ˜¯å–æœ€å¤§çš„ï¼Œæ‰€ä»¥dp[i] = max(dp[i - 1] + nums[i], nums[i]);

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

ä»é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºæ¥dp[i]æ˜¯ä¾èµ–äºdp[i - 1]çš„çŠ¶æ€ï¼Œdp[0]å°±æ˜¯é€’æ¨å…¬å¼çš„åŸºç¡€ã€‚

dp[0]åº”è¯¥æ˜¯å¤šå°‘å‘¢?

æ ¹æ®dp[i]çš„å®šä¹‰ï¼Œå¾ˆæ˜æ˜¾dp[0]åº”ä¸ºnums[0]å³dp[0] = nums[0]ã€‚

1. ç¡®å®šéå†é¡ºåº

é€’æ¨å…¬å¼ä¸­dp[i]ä¾èµ–äºdp[i - 1]çš„çŠ¶æ€ï¼Œéœ€è¦ä»å‰å‘åéå†ã€‚

```java
class Solution {
    public int maxSubArray(int[] nums) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i] è¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„æœ€å¤§å­æ•°ç»„å’Œ
        int[] dp = new int[nums.length];

        // ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–dpæ•°ç»„
        // åˆå§‹åŒ–dp[0]ä¸ºnums[0]ï¼Œå› ä¸ºä»¥ç¬¬ä¸€ä¸ªå…ƒç´ ç»“å°¾çš„å­æ•°ç»„åªæœ‰å®ƒè‡ªèº«
        dp[0] = nums[0];

        // ç¬¬ä¸‰æ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        // dp[i] = Math.max(nums[i], dp[i - 1] + nums[i])
        // è¡¨ç¤ºå½“å‰çš„æœ€å¤§å­æ•°ç»„è¦ä¹ˆæ˜¯ä»¥å½“å‰å…ƒç´ ä¸ºèµ·ç‚¹ï¼Œè¦ä¹ˆæ˜¯å»¶ç»­å‰é¢çš„æœ€å¤§å­æ•°ç»„
        for (int i = 1; i < nums.length; i++) {
            dp[i] = Math.max(nums[i], dp[i - 1] + nums[i]);
        }

        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // ä»1å¼€å§‹éå†æ•°ç»„ï¼Œé€æ­¥è®¡ç®—ä»¥æ¯ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§å­æ•°ç»„å’Œ
        // æœ€ç»ˆçš„ç»“æœæ˜¯dpæ•°ç»„ä¸­çš„æœ€å¤§å€¼ï¼Œå³æ•´ä¸ªæ•°ç»„ä¸­çš„æœ€å¤§å­æ•°ç»„å’Œ
        return Arrays.stream(dp).max().getAsInt();
    }
}

```

### 152.ä¹˜ç§¯æœ€å¤§çš„å­æ•°ç»„ï¼ˆnew hot100ï¼‰(3.23)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œè¯·ä½ æ‰¾å‡ºæ•°ç»„ä¸­ä¹˜ç§¯æœ€å¤§çš„éç©ºè¿ç»­ å­æ•°ç»„ï¼ˆè¯¥å­æ•°ç»„ä¸­è‡³å°‘åŒ…å«ä¸€ä¸ªæ•°å­—ï¼‰ï¼Œå¹¶è¿”å›è¯¥å­æ•°ç»„æ‰€å¯¹åº”çš„ä¹˜ç§¯ã€‚



æµ‹è¯•ç”¨ä¾‹çš„ç­”æ¡ˆæ˜¯ä¸€ä¸ª **32-ä½** æ•´æ•°ã€‚

 

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [2,3,-2,4]
è¾“å‡º: 6
è§£é‡Š: å­æ•°ç»„ [2,3] æœ‰æœ€å¤§ä¹˜ç§¯ 6ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [-2,0,-1]
è¾“å‡º: 0
è§£é‡Š: ç»“æœä¸èƒ½ä¸º 2, å› ä¸º [-2,-1] ä¸æ˜¯å­æ•°ç»„ã€‚
```

```
class Solution {
    public int maxProduct(int[] nums) {
        // 1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][0]ï¼šè¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„å­æ•°ç»„çš„æœ€å¤§ä¹˜ç§¯
        // dp[i][1]ï¼šè¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„å­æ•°ç»„çš„æœ€å°ä¹˜ç§¯
        // éœ€è¦è®°å½•æœ€å°å€¼æ˜¯å› ä¸ºå½“é‡åˆ°è´Ÿæ•°æ—¶ï¼Œæœ€å°å€¼ä¹˜ä»¥è´Ÿæ•°å¯èƒ½å˜æˆæœ€å¤§å€¼
        int[][] dp = new int[nums.length][2];

        // 3. dpæ•°ç»„åˆå§‹åŒ–
        // åªæœ‰ä¸€ä¸ªæ•°æ—¶ï¼Œæœ€å¤§å€¼å’Œæœ€å°å€¼éƒ½æ˜¯å®ƒè‡ªå·±
        dp[0][0] = nums[0];  // æœ€å¤§å€¼
        dp[0][1] = nums[0];  // æœ€å°å€¼
        int max = nums[0];    // è®°å½•å…¨å±€æœ€å¤§å€¼

        // 4. ç¡®å®šéå†é¡ºåº
        // ä»å‰å¾€åéå†ï¼Œå› ä¸ºdp[i]ä¾èµ–dp[i-1]çš„çŠ¶æ€
        for (int i = 1; i < nums.length; i++) {
            // 2. ç¡®å®šé€’æ¨å…¬å¼
            // å½“å½“å‰æ•°ä¸ºè´Ÿæ•°æ—¶ï¼š
            // æœ€å¤§å€¼å¯èƒ½æ¥è‡ªï¼šå½“å‰è´Ÿæ•° Ã— ä¹‹å‰çš„æœ€å°å€¼(è´ŸÃ—è´Ÿ=æ­£)ï¼Œæˆ–å½“å‰è´Ÿæ•°è‡ªå·±
            // æœ€å°å€¼å¯èƒ½æ¥è‡ªï¼šå½“å‰è´Ÿæ•° Ã— ä¹‹å‰çš„æœ€å¤§å€¼ï¼Œæˆ–å½“å‰è´Ÿæ•°è‡ªå·±
            if (nums[i] < 0) {
                dp[i][0] = Math.max(nums[i], nums[i] * dp[i - 1][1]);
                dp[i][1] = Math.min(nums[i], nums[i] * dp[i - 1][0]);
            } 
            // å½“å½“å‰æ•°ä¸ºæ­£æ•°æ—¶ï¼š
            // æœ€å¤§å€¼å¯èƒ½æ¥è‡ªï¼šå½“å‰æ­£æ•° Ã— ä¹‹å‰çš„æœ€å¤§å€¼ï¼Œæˆ–å½“å‰æ­£æ•°è‡ªå·±
            // æœ€å°å€¼å¯èƒ½æ¥è‡ªï¼šå½“å‰æ­£æ•° Ã— ä¹‹å‰çš„æœ€å°å€¼ï¼Œæˆ–å½“å‰æ­£æ•°è‡ªå·±
            else {
                dp[i][0] = Math.max(nums[i], nums[i] * dp[i - 1][0]);
                dp[i][1] = Math.min(nums[i], nums[i] * dp[i - 1][1]);
            }
            // æ›´æ–°å…¨å±€æœ€å¤§å€¼
            max = Math.max(max, dp[i][0]);
        }

        return max;
    }
}
```



### 392.åˆ¤æ–­å­åºåˆ—

ç»™å®šå­—ç¬¦ä¸² s å’Œ t ï¼Œåˆ¤æ–­ s æ˜¯å¦ä¸º t çš„å­åºåˆ—ã€‚

å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­åºåˆ—æ˜¯åŸå§‹å­—ç¬¦ä¸²åˆ é™¤ä¸€äº›ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ï¼‰å­—ç¬¦è€Œä¸æ”¹å˜å‰©ä½™å­—ç¬¦ç›¸å¯¹ä½ç½®å½¢æˆçš„æ–°å­—ç¬¦ä¸²ã€‚ï¼ˆä¾‹å¦‚ï¼Œ"ace"æ˜¯"abcde"çš„ä¸€ä¸ªå­åºåˆ—ï¼Œè€Œ"aec"ä¸æ˜¯ï¼‰ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šs = "abc", t = "ahbgdc"
- è¾“å‡ºï¼štrue

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šs = "axc", t = "ahbgdc"
- è¾“å‡ºï¼šfalse



åŠ¨æ€è§„åˆ’äº”éƒ¨æ›²åˆ†æå¦‚ä¸‹ï¼š

1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

**dp[i] [j] è¡¨ç¤ºä»¥ä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²sï¼Œå’Œä»¥ä¸‹æ ‡j-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²tï¼Œç›¸åŒå­åºåˆ—çš„é•¿åº¦ä¸ºdp[i] [j]**ã€‚

æ³¨æ„è¿™é‡Œæ˜¯åˆ¤æ–­sæ˜¯å¦ä¸ºtçš„å­åºåˆ—ã€‚å³tçš„é•¿åº¦æ˜¯å¤§äºç­‰äºsçš„ã€‚

æœ‰åŒå­¦é—®äº†ï¼Œä¸ºå•¥è¦è¡¨ç¤ºä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²å‘¢ï¼Œä¸ºå•¥ä¸è¡¨ç¤ºä¸‹æ ‡iä¸ºç»“å°¾çš„å­—ç¬¦ä¸²å‘¢ï¼Ÿ

ä¸ºä»€ä¹ˆè¿™ä¹ˆå®šä¹‰æˆ‘åœ¨ [718. æœ€é•¿é‡å¤å­æ•°ç»„ (opens new window)](https://programmercarl.com/0718.æœ€é•¿é‡å¤å­æ•°ç»„.html)ä¸­åšäº†è¯¦ç»†çš„è®²è§£ã€‚

å…¶å®ç”¨iæ¥è¡¨ç¤ºä¹Ÿå¯ä»¥ï¼

ä½†æˆ‘ç»Ÿä¸€ä»¥ä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²æ¥è®¡ç®—ï¼Œè¿™æ ·åœ¨ä¸‹é¢çš„é€’å½’å…¬å¼ä¸­ä¼šå®¹æ˜“ç†è§£ä¸€äº›ï¼Œå¦‚æœè¿˜æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹ã€‚

1. ç¡®å®šé€’æ¨å…¬å¼

åœ¨ç¡®å®šé€’æ¨å…¬å¼çš„æ—¶å€™ï¼Œé¦–å…ˆè¦è€ƒè™‘å¦‚ä¸‹ä¸¤ç§æ“ä½œï¼Œæ•´ç†å¦‚ä¸‹ï¼š

- if (s[i - 1] == t[j - 1])
  - tä¸­æ‰¾åˆ°äº†ä¸€ä¸ªå­—ç¬¦åœ¨sä¸­ä¹Ÿå‡ºç°äº†
- if (s[i - 1] != t[j - 1])
  - ç›¸å½“äºtè¦åˆ é™¤å…ƒç´ ï¼Œç»§ç»­åŒ¹é…

if (s[i - 1] == t[j - 1])ï¼Œé‚£ä¹ˆdp[i] [j] = dp[i - 1] [j - 1] + 1;ï¼Œå› ä¸ºæ‰¾åˆ°äº†ä¸€ä¸ªç›¸åŒçš„å­—ç¬¦ï¼Œç›¸åŒå­åºåˆ—é•¿åº¦è‡ªç„¶è¦åœ¨dp[i-1] [j-1]çš„åŸºç¡€ä¸ŠåŠ 1ï¼ˆ**å¦‚æœä¸ç†è§£ï¼Œåœ¨å›çœ‹ä¸€ä¸‹dp[i] [j]çš„å®šä¹‰**ï¼‰

if (s[i - 1] != t[j - 1])ï¼Œæ­¤æ—¶ç›¸å½“äºtè¦åˆ é™¤å…ƒç´ ï¼Œtå¦‚æœæŠŠå½“å‰å…ƒç´ t[j - 1]åˆ é™¤ï¼Œé‚£ä¹ˆdp[i] [j] çš„æ•°å€¼å°±æ˜¯ çœ‹s[i - 1]ä¸ t[j - 2]çš„æ¯”è¾ƒç»“æœäº†ï¼Œå³ï¼šdp[i] [j] = dp[i] [j - 1];

å…¶å®è¿™é‡Œ å¤§å®¶å¯ä»¥å‘ç°å’Œ [1143.æœ€é•¿å…¬å…±å­åºåˆ— (opens new window)](https://programmercarl.com/1143.æœ€é•¿å…¬å…±å­åºåˆ—.html)çš„é€’æ¨å…¬å¼åŸºæœ¬é‚£å°±æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«å°±æ˜¯ æœ¬é¢˜ å¦‚æœåˆ å…ƒç´ ä¸€å®šæ˜¯å­—ç¬¦ä¸²tï¼Œè€Œ 1143.æœ€é•¿å…¬å…±å­åºåˆ— æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½å¯ä»¥åˆ å…ƒç´ ã€‚

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

ä»é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºdp[i] [j]éƒ½æ˜¯ä¾èµ–äºdp[i - 1] [j - 1] å’Œ dp[i] [j - 1]ï¼Œæ‰€ä»¥dp[0] [0]å’Œdp[i] [0]æ˜¯ä¸€å®šè¦åˆå§‹åŒ–çš„ã€‚

è¿™é‡Œå¤§å®¶å·²ç»å¯ä»¥å‘ç°ï¼Œåœ¨å®šä¹‰dp[i][j]å«ä¹‰çš„æ—¶å€™ä¸ºä»€ä¹ˆè¦**è¡¨ç¤ºä»¥ä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²sï¼Œå’Œä»¥ä¸‹æ ‡j-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²tï¼Œç›¸åŒå­åºåˆ—çš„é•¿åº¦ä¸ºdp[i] [j]**ã€‚

å› ä¸ºè¿™æ ·çš„å®šä¹‰åœ¨dpäºŒç»´çŸ©é˜µä¸­å¯ä»¥ç•™å‡ºåˆå§‹åŒ–çš„åŒºé—´ï¼Œå¦‚å›¾ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210303173115966.png" alt="392.åˆ¤æ–­å­åºåˆ—" style="zoom: 67%;" />

å¦‚æœè¦æ˜¯å®šä¹‰çš„dp[i][j]æ˜¯ä»¥ä¸‹æ ‡iä¸ºç»“å°¾çš„å­—ç¬¦ä¸²så’Œä»¥ä¸‹æ ‡jä¸ºç»“å°¾çš„å­—ç¬¦ä¸²tï¼Œåˆå§‹åŒ–å°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚

dp[i][0] è¡¨ç¤ºä»¥ä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œä¸ç©ºå­—ç¬¦ä¸²çš„ç›¸åŒå­åºåˆ—é•¿åº¦ï¼Œæ‰€ä»¥ä¸º0. dp[0][j]åŒç†ã€‚

```cpp
vector<vector<int>> dp(s.size() + 1, vector<int>(t.size() + 1, 0));
```

1

1. ç¡®å®šéå†é¡ºåº

åŒç†ä»é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºdp[i][j]éƒ½æ˜¯ä¾èµ–äºdp[i - 1] [j - 1] å’Œ dp[i] [j - 1]ï¼Œé‚£ä¹ˆéå†é¡ºåºä¹Ÿåº”è¯¥æ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³

å¦‚å›¾æ‰€ç¤ºï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210303172354155.jpg" alt="392.åˆ¤æ–­å­åºåˆ—1" style="zoom:67%;" />

```java
class Solution {
    public boolean isSubsequence(String s, String t) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i] [j] è¡¨ç¤ºä»¥ä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²sï¼Œå’Œä»¥ä¸‹æ ‡j-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²tï¼Œç›¸åŒå­åºåˆ—çš„é•¿åº¦ä¸ºdp[i][j]
        int[][] dp = new int[s.length() + 1][t.length() + 1];

        // ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–dpæ•°ç»„
        // å½“i=0æˆ–j=0æ—¶ï¼Œdp[i][j]=0ï¼Œè¡¨ç¤ºç©ºå­—ç¬¦ä¸²ä¸ä»»ä½•å­—ç¬¦ä¸²ä¹‹é—´çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ä¸º0
        for (int i = 0; i < dp.length; i++) {
            dp[i][0] = 0;
        }
        for (int i = 0; i < dp[0].length; i++) {
            dp[0][i] = 0;
        }

        // ç¬¬ä¸‰æ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        // å¦‚æœs[i-1] == t[j-1]ï¼Œåˆ™dp[i][j] = dp[i-1][j-1] + 1
        // å¦‚æœs[i-1] != t[j-1]ï¼Œåˆ™dp[i][j] = Math.max(dp[i-1][j], dp[i][j-1])
        int maxNum = 0;

        for (int i = 1; i < dp.length; i++) {
            for (int j = 1; j < dp[0].length; j++) {
                if (s.charAt(i - 1) == t.charAt(j - 1)) {
                    dp[i][j] = dp[i - 1][j - 1] + 1;
                } else {
                    dp[i][j] = Math.max(dp[i][j - 1], dp[i - 1][j]);
                }
                maxNum = Math.max(maxNum, dp[i][j]); // æ›´æ–°æœ€å¤§å€¼
            }
        }

        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // ä»1å¼€å§‹éå†dpæ•°ç»„ï¼Œé€æ­¥è®¡ç®—æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦
        // å¦‚æœsçš„é•¿åº¦ä¸dpæ•°ç»„ä¸­æœ€å¤§å€¼ç›¸ç­‰ï¼Œåˆ™è¯´æ˜sæ˜¯tçš„å­åºåˆ—
        return maxNum == s.length();
    }
}
```

### 115.ä¸åŒçš„å­åºåˆ—

ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² `s` å’Œ `t` ï¼Œç»Ÿè®¡å¹¶è¿”å›åœ¨ `s` çš„ **å­åºåˆ—** ä¸­ `t` å‡ºç°çš„ä¸ªæ•°ï¼Œç»“æœéœ€è¦å¯¹ 109 + 7 å–æ¨¡ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "rabbbit", t = "rabbit"
è¾“å‡ºï¼š3
è§£é‡Šï¼š
å¦‚ä¸‹æ‰€ç¤º, æœ‰ 3 ç§å¯ä»¥ä» s ä¸­å¾—åˆ° "rabbit" çš„æ–¹æ¡ˆã€‚
rabbbit
rabbbit
rabbbit
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "babgbag", t = "bag"
è¾“å‡ºï¼š5
è§£é‡Šï¼š
å¦‚ä¸‹æ‰€ç¤º, æœ‰ 5 ç§å¯ä»¥ä» s ä¸­å¾—åˆ° "bag" çš„æ–¹æ¡ˆã€‚ 
babgbag
babgbag
babgbag
babgbag
babgbag
```



**æç¤ºï¼š**

- `1 <= s.length, t.length <= 1000`
- `s` å’Œ `t` ç”±è‹±æ–‡å­—æ¯ç»„æˆ



åŠ¨è§„äº”éƒ¨æ›²åˆ†æå¦‚ä¸‹ï¼š

1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

dp[i] [j]ï¼šä»¥i-1ä¸ºç»“å°¾çš„så­åºåˆ—ä¸­å‡ºç°ä»¥j-1ä¸ºç»“å°¾çš„tçš„ä¸ªæ•°ä¸ºdp[i] [j]ã€‚

ä¸ºä»€ä¹ˆi-1ï¼Œj-1 è¿™ä¹ˆå®šä¹‰æˆ‘åœ¨ [718. æœ€é•¿é‡å¤å­æ•°ç»„ (opens new window)](https://programmercarl.com/0718.æœ€é•¿é‡å¤å­æ•°ç»„.html)ä¸­åšäº†è¯¦ç»†çš„è®²è§£ã€‚

1. ç¡®å®šé€’æ¨å…¬å¼

è¿™ä¸€ç±»é—®é¢˜ï¼ŒåŸºæœ¬æ˜¯è¦åˆ†æä¸¤ç§æƒ…å†µ

- s[i - 1] ä¸ t[j - 1]ç›¸ç­‰
- s[i - 1] ä¸ t[j - 1] ä¸ç›¸ç­‰

å½“s[i - 1] ä¸ t[j - 1]ç›¸ç­‰æ—¶ï¼Œdp[i] [j]å¯ä»¥æœ‰ä¸¤éƒ¨åˆ†ç»„æˆã€‚

ä¸€éƒ¨åˆ†æ˜¯ç”¨s[i - 1]æ¥åŒ¹é…ï¼Œé‚£ä¹ˆä¸ªæ•°ä¸ºdp[i - 1] [j - 1]ã€‚å³ä¸éœ€è¦è€ƒè™‘å½“å‰så­ä¸²å’Œtå­ä¸²çš„æœ€åä¸€ä½å­—æ¯ï¼Œæ‰€ä»¥åªéœ€è¦ dp[i-1] [j-1]ã€‚

ä¸€éƒ¨åˆ†æ˜¯ä¸ç”¨s[i - 1]æ¥åŒ¹é…ï¼Œä¸ªæ•°ä¸ºdp[i - 1] [j]ã€‚

**è¿™é‡Œå¯èƒ½æœ‰å½•å‹ä¸æ˜ç™½äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦è€ƒè™‘ ä¸ç”¨s[i - 1]æ¥åŒ¹é…ï¼Œéƒ½ç›¸åŒäº†æŒ‡å®šè¦åŒ¹é…å•Š**ã€‚

ä¾‹å¦‚ï¼š sï¼šbagg å’Œ tï¼šbag ï¼Œs[3] å’Œ t[2]æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯å­—ç¬¦ä¸²sä¹Ÿå¯ä»¥ä¸ç”¨s[3]æ¥åŒ¹é…ï¼Œå³ç”¨s[0]s[1]s[2]ç»„æˆçš„bagã€‚

å½“ç„¶ä¹Ÿå¯ä»¥ç”¨s[3]æ¥åŒ¹é…ï¼Œå³ï¼šs[0]s[1]s[3]ç»„æˆçš„bagã€‚

æ‰€ä»¥å½“s[i - 1] ä¸ t[j - 1]ç›¸ç­‰æ—¶ï¼Œdp[i] [j] = dp[i - 1] [j - 1] + dp[i - 1] [j];

å½“s[i - 1] ä¸ t[j - 1]ä¸ç›¸ç­‰æ—¶ï¼Œdp[i] [j]åªæœ‰ä¸€éƒ¨åˆ†ç»„æˆï¼Œä¸ç”¨s[i - 1]æ¥åŒ¹é…ï¼ˆå°±æ˜¯æ¨¡æ‹Ÿåœ¨sä¸­åˆ é™¤è¿™ä¸ªå…ƒç´ ï¼‰ï¼Œå³ï¼šdp[i - 1] [j]

æ‰€ä»¥é€’æ¨å…¬å¼ä¸ºï¼šdp[i] [j] = dp[i - 1] [j];

è¿™é‡Œå¯èƒ½æœ‰å½•å‹è¿˜ç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆåªè€ƒè™‘ â€œä¸ç”¨s[i - 1]æ¥åŒ¹é…â€ è¿™ç§æƒ…å†µï¼Œ ä¸è€ƒè™‘ â€œä¸ç”¨t[j - 1]æ¥åŒ¹é…â€ çš„æƒ…å†µå‘¢ã€‚

è¿™é‡Œå¤§å®¶è¦æ˜ç¡®ï¼Œæˆ‘ä»¬æ±‚çš„æ˜¯ s ä¸­æœ‰å¤šå°‘ä¸ª tï¼Œè€Œä¸æ˜¯ æ±‚tä¸­æœ‰å¤šå°‘ä¸ªsï¼Œæ‰€ä»¥åªè€ƒè™‘ sä¸­åˆ é™¤å…ƒç´ çš„æƒ…å†µï¼Œå³ ä¸ç”¨s[i - 1]æ¥åŒ¹é… çš„æƒ…å†µã€‚

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

ä»é€’æ¨å…¬å¼dp[i] [j] = dp[i - 1] [j - 1] + dp[i - 1] [j]; å’Œ dp[i] [j] = dp[i - 1] [j]; ä¸­å¯ä»¥çœ‹å‡ºdp[i][j] æ˜¯ä»ä¸Šæ–¹å’Œå·¦ä¸Šæ–¹æ¨å¯¼è€Œæ¥ï¼Œå¦‚å›¾ï¼šï¼Œé‚£ä¹ˆ dp[i] [0] å’Œdp[0] [j]æ˜¯ä¸€å®šè¦åˆå§‹åŒ–çš„ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20221222165412.png" alt="img" style="zoom:50%;" />

æ¯æ¬¡å½“åˆå§‹åŒ–çš„æ—¶å€™ï¼Œéƒ½è¦å›é¡¾ä¸€ä¸‹dp[i][j]çš„å®šä¹‰ï¼Œä¸è¦å‡­æ„Ÿè§‰åˆå§‹åŒ–ã€‚

dp[i] [0]è¡¨ç¤ºä»€ä¹ˆå‘¢ï¼Ÿ

dp[i] [0] è¡¨ç¤ºï¼šä»¥i-1ä¸ºç»“å°¾çš„så¯ä»¥éšä¾¿åˆ é™¤å…ƒç´ ï¼Œå‡ºç°ç©ºå­—ç¬¦ä¸²çš„ä¸ªæ•°ã€‚

é‚£ä¹ˆdp[i] [0]ä¸€å®šéƒ½æ˜¯1ï¼Œå› ä¸ºä¹Ÿå°±æ˜¯æŠŠä»¥i-1ä¸ºç»“å°¾çš„sï¼Œåˆ é™¤æ‰€æœ‰å…ƒç´ ï¼Œå‡ºç°ç©ºå­—ç¬¦ä¸²çš„ä¸ªæ•°å°±æ˜¯1ã€‚

å†æ¥çœ‹dp[0] [j]ï¼Œdp[0] [j]ï¼šç©ºå­—ç¬¦ä¸²så¯ä»¥éšä¾¿åˆ é™¤å…ƒç´ ï¼Œå‡ºç°ä»¥j-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²tçš„ä¸ªæ•°ã€‚

é‚£ä¹ˆdp[0] [j]ä¸€å®šéƒ½æ˜¯0ï¼Œså¦‚è®ºå¦‚ä½•ä¹Ÿå˜æˆä¸äº†tã€‚

æœ€åå°±è¦çœ‹ä¸€ä¸ªç‰¹æ®Šä½ç½®äº†ï¼Œå³ï¼šdp[0] [0] åº”è¯¥æ˜¯å¤šå°‘ã€‚

dp[0] [0]åº”è¯¥æ˜¯1ï¼Œç©ºå­—ç¬¦ä¸²sï¼Œå¯ä»¥åˆ é™¤0ä¸ªå…ƒç´ ï¼Œå˜æˆç©ºå­—ç¬¦ä¸²tã€‚

åˆå§‹åŒ–åˆ†æå®Œæ¯•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```cpp
vector<vector<long long>> dp(s.size() + 1, vector<long long>(t.size() + 1));
for (int i = 0; i <= s.size(); i++) dp[i][0] = 1;
for (int j = 1; j <= t.size(); j++) dp[0][j] = 0; // å…¶å®è¿™è¡Œä»£ç å¯ä»¥å’Œdpæ•°ç»„åˆå§‹åŒ–çš„æ—¶å€™æ”¾åœ¨ä¸€èµ·ï¼Œä½†æˆ‘ä¸ºäº†å‡¸æ˜¾åˆå§‹åŒ–çš„é€»è¾‘ï¼Œæ‰€ä»¥è¿˜æ˜¯åŠ ä¸Šäº†ã€‚
```

1. ç¡®å®šéå†é¡ºåº

ä»é€’æ¨å…¬å¼dp[i] [j] = dp[i - 1] [j - 1] + dp[i - 1] [j]; å’Œ dp[i] [j] = dp[i - 1] [j]; ä¸­å¯ä»¥çœ‹å‡ºdp[i][j]éƒ½æ˜¯æ ¹æ®å·¦ä¸Šæ–¹å’Œæ­£ä¸Šæ–¹æ¨å‡ºæ¥çš„ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20221222165412.png" alt="img" style="zoom:50%;" />

æ‰€ä»¥éå†çš„æ—¶å€™ä¸€å®šæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ï¼Œè¿™æ ·ä¿è¯dp[i] [j]å¯ä»¥æ ¹æ®ä¹‹å‰è®¡ç®—å‡ºæ¥çš„æ•°å€¼è¿›è¡Œè®¡ç®—ã€‚

```java
class Solution {
    public int numDistinct(String s, String t) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºä»¥s[i-1]ç»“å°¾çš„sçš„å‰iä¸ªå­—ç¬¦ä¸­ï¼Œå‡ºç°ä»¥t[j-1]ç»“å°¾çš„tçš„å‰jä¸ªå­—ç¬¦çš„å­åºåˆ—ä¸ªæ•°
        int[][] dp = new int[s.length() + 1][t.length() + 1];

        // ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–dpæ•°ç»„
        // dp[0][j] = 0 è¡¨ç¤ºç©ºçš„sæ— æ³•å½¢æˆéç©ºçš„t
        for (int i = 0; i < dp[0].length; i++) {
            dp[0][i] = 0;
        }

        // dp[i][0] = 1 è¡¨ç¤ºtä¸ºç©ºæ—¶ï¼Œsçš„ä»»æ„å‰ç¼€å­åºåˆ—éƒ½èƒ½å½¢æˆtï¼Œåªæœ‰ä¸€ç§æ–¹å¼ï¼ˆç©ºå­åºåˆ—ï¼‰
        for (int i = 0; i < dp.length; i++) {
            dp[i][0] = 1;
        }

        // ç¬¬ä¸‰æ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        // å¦‚æœs[i-1] == t[j-1]ï¼Œdp[i][j] = dp[i-1][j-1] + dp[i-1][j]
        // å¦‚æœs[i-1] != t[j-1]ï¼Œdp[i][j] = dp[i-1][j]
        // dp[i-1][j-1] è¡¨ç¤ºåŒ¹é…ä¸Šå½“å‰å­—ç¬¦ï¼Œdp[i-1][j] è¡¨ç¤ºä¸åŒ¹é…å½“å‰å­—ç¬¦
        for (int i = 1; i < dp.length; i++) {
            for (int j = 1; j < dp[0].length; j++) {
                if (s.charAt(i - 1) == t.charAt(j - 1)) {
                    dp[i][j] = dp[i - 1][j - 1] + dp[i - 1][j];
                } else {
                    dp[i][j] = dp[i - 1][j];
                }
            }
        }

        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // ä»1å¼€å§‹éå†dpæ•°ç»„ï¼Œé€æ­¥è®¡ç®—å­åºåˆ—ä¸ªæ•°
        return dp[s.length()][t.length()]; // æœ€ç»ˆç»“æœåœ¨dp[s.length()][t.length()]ä¸­
    }
}


```

### 583.ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œï¼ˆ4.13ï¼‰

ç»™å®šä¸¤ä¸ªå•è¯ word1 å’Œ word2ï¼Œæ‰¾åˆ°ä½¿å¾— word1 å’Œ word2 ç›¸åŒæ‰€éœ€çš„æœ€å°æ­¥æ•°ï¼Œæ¯æ­¥å¯ä»¥åˆ é™¤ä»»æ„ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªå­—ç¬¦ã€‚

ç¤ºä¾‹ï¼š

- è¾“å…¥: "sea", "eat"
- è¾“å‡º: 2
- è§£é‡Š: ç¬¬ä¸€æ­¥å°†"sea"å˜ä¸º"ea"ï¼Œç¬¬äºŒæ­¥å°†"eat"å˜ä¸º"ea"



1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

dp[i] [j]ï¼šä»¥i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²word1ï¼Œå’Œä»¥j-1ä½ç»“å°¾çš„å­—ç¬¦ä¸²word2ï¼Œæƒ³è¦è¾¾åˆ°ç›¸ç­‰ï¼Œæ‰€éœ€è¦åˆ é™¤å…ƒç´ çš„æœ€å°‘æ¬¡æ•°ã€‚

è¿™é‡Œdpæ•°ç»„çš„å®šä¹‰æœ‰ç‚¹ç‚¹ç»•ï¼Œå¤§å®¶è¦æ’¸æ¸…æ€è·¯ã€‚

1. ç¡®å®šé€’æ¨å…¬å¼

- å½“word1[i - 1] ä¸ word2[j - 1]ç›¸åŒçš„æ—¶å€™
- å½“word1[i - 1] ä¸ word2[j - 1]ä¸ç›¸åŒçš„æ—¶å€™

å½“word1[i - 1] ä¸ word2[j - 1]ç›¸åŒçš„æ—¶å€™ï¼Œdp[i] [j] = dp[i - 1] [j - 1];

å½“word1[i - 1] ä¸ word2[j - 1]ä¸ç›¸åŒçš„æ—¶å€™ï¼Œæœ‰ä¸‰ç§æƒ…å†µï¼š

æƒ…å†µä¸€ï¼šåˆ word1[i - 1]ï¼Œæœ€å°‘æ“ä½œæ¬¡æ•°ä¸ºdp[i - 1] [j] + 1

æƒ…å†µäºŒï¼šåˆ word2[j - 1]ï¼Œæœ€å°‘æ“ä½œæ¬¡æ•°ä¸ºdp[i] [j - 1] + 1

æƒ…å†µä¸‰ï¼šåŒæ—¶åˆ word1[i - 1]å’Œword2[j - 1]ï¼Œæ“ä½œçš„æœ€å°‘æ¬¡æ•°ä¸ºdp[i - 1] [j - 1] + 2

é‚£æœ€åå½“ç„¶æ˜¯å–æœ€å°å€¼ï¼Œæ‰€ä»¥å½“word1[i - 1] ä¸ word2[j - 1]ä¸ç›¸åŒçš„æ—¶å€™ï¼Œé€’æ¨å…¬å¼ï¼šdp[i] [j] = min({dp[i - 1] [j - 1] + 2, dp[i - 1] [j] + 1, dp[i] [j - 1] + 1});

å› ä¸º dp[i] [j - 1] + 1 = dp[i - 1] [j - 1] + 2ï¼Œæ‰€ä»¥é€’æ¨å…¬å¼å¯ç®€åŒ–ä¸ºï¼šdp[i] [j] = min(dp[i - 1] [j] + 1, dp[i] [j - 1] + 1);

è¿™é‡Œå¯èƒ½ä¸å°‘å½•å‹æœ‰ç‚¹è¿·ç³Šï¼Œä»å­—é¢ä¸Šç†è§£ å°±æ˜¯ å½“ åŒæ—¶åˆ word1[i - 1]å’Œword2[j - 1]ï¼Œdp[i] [j-1] æœ¬æ¥å°±ä¸è€ƒè™‘ word2[j - 1]äº†ï¼Œé‚£ä¹ˆæˆ‘åœ¨åˆ  word1[i - 1]ï¼Œæ˜¯ä¸æ˜¯å°±è¾¾åˆ°ä¸¤ä¸ªå…ƒç´ éƒ½åˆ é™¤çš„æ•ˆæœï¼Œå³ dp[i] [j-1] + 1ã€‚

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

ä»é€’æ¨å…¬å¼ä¸­ï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œdp[i] [0] å’Œ dp[0] [j]æ˜¯ä¸€å®šè¦åˆå§‹åŒ–çš„ã€‚

dp[i] [0]ï¼šword2ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œä»¥i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²word1è¦åˆ é™¤å¤šå°‘ä¸ªå…ƒç´ ï¼Œæ‰èƒ½å’Œword2ç›¸åŒå‘¢ï¼Œå¾ˆæ˜æ˜¾dp[i] [0] = iã€‚

dp[0] [j]çš„è¯åŒç†ï¼Œæ‰€ä»¥ä»£ç å¦‚ä¸‹ï¼š

```cpp
vector<vector<int>> dp(word1.size() + 1, vector<int>(word2.size() + 1));
for (int i = 0; i <= word1.size(); i++) dp[i][0] = i;
for (int j = 0; j <= word2.size(); j++) dp[0][j] = j;
```

1. ç¡®å®šéå†é¡ºåº

ä»é€’æ¨å…¬å¼ dp[i] [j] = min(dp[i - 1] [j - 1] + 2, min(dp[i - 1] [j], dp[i] [j - 1]) + 1); å’Œdp[i] [j] = dp[i - 1] [j - 1]å¯ä»¥çœ‹å‡ºdp[i] [j]éƒ½æ˜¯æ ¹æ®å·¦ä¸Šæ–¹ã€æ­£ä¸Šæ–¹ã€æ­£å·¦æ–¹æ¨å‡ºæ¥çš„ã€‚

æ‰€ä»¥éå†çš„æ—¶å€™ä¸€å®šæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ï¼Œè¿™æ ·ä¿è¯dp[i][j]å¯ä»¥æ ¹æ®ä¹‹å‰è®¡ç®—å‡ºæ¥çš„æ•°å€¼è¿›è¡Œè®¡ç®—ã€‚

1. ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„

ä»¥word1:"sea"ï¼Œword2:"eat"ä¸ºä¾‹ï¼Œæ¨å¯¼dpæ•°ç»„çŠ¶æ€å›¾å¦‚ä¸‹ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210714101750205.png" alt="583.ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ1" style="zoom:50%;" />

```java
class Solution {
    public int minDistance(String word1, String word2) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®š dp æ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºé•¿åº¦ä¸º [0, i-1] çš„å­—ç¬¦ä¸² word1 å’Œé•¿åº¦ä¸º [0, j-1] çš„å­—ç¬¦ä¸² word2
        // å˜æˆç›¸åŒå­—ç¬¦ä¸²æ‰€éœ€è¦åˆ é™¤å…ƒç´ çš„æœ€å°‘æ¬¡æ•°
        int[][] dp = new int[word1.length() + 1][word2.length() + 1];

        // ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ– dp æ•°ç»„
        // dp[i][0] è¡¨ç¤º word2 ä¸ºç©ºå­—ç¬¦ä¸²æ—¶ï¼Œword1 çš„å‰ i ä¸ªå­—ç¬¦éœ€è¦åˆ é™¤ i æ¬¡æ‰èƒ½å˜æˆç©ºå­—ç¬¦ä¸²
        for (int i = 0; i < dp.length; i++) {
            dp[i][0] = i;
        }
        // dp[0][j] è¡¨ç¤º word1 ä¸ºç©ºå­—ç¬¦ä¸²æ—¶ï¼Œword2 çš„å‰ j ä¸ªå­—ç¬¦éœ€è¦åˆ é™¤ j æ¬¡æ‰èƒ½å˜æˆç©ºå­—ç¬¦ä¸²
        for (int i = 0; i < dp[0].length; i++) {
            dp[0][i] = i;
        }

        // ç¬¬äºŒæ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        // å½“ word1[i-1] ä¸ word2[j-1] ç›¸åŒï¼Œdp[i][j] = dp[i-1][j-1]
        // å½“ word1[i-1] ä¸ word2[j-1] ä¸åŒï¼Œæœ‰ä¸‰ç§æƒ…å†µï¼š
        // 1. åˆ é™¤ word1[i-1]ï¼Œdp[i][j] = dp[i-1][j] + 1
        // 2. åˆ é™¤ word2[j-1]ï¼Œdp[i][j] = dp[i][j-1] + 1
        // 3. åŒæ—¶åˆ é™¤ word1[i-1] å’Œ word2[j-1]ï¼Œdp[i][j] = dp[i-1][j-1] + 2
        // æœ€ç»ˆé€‰æ‹©ä¸‰è€…çš„æœ€å°å€¼
        for (int i = 1; i < dp.length; i++) {
            for (int j = 1; j < dp[0].length; j++) {
                if (word1.charAt(i - 1) == word2.charAt(j - 1)) {
                    dp[i][j] = dp[i - 1][j - 1];
                } else {
                    dp[i][j] = Math.min(
                        Math.min(dp[i - 1][j] + 1, dp[i][j - 1] + 1),
                        dp[i - 1][j - 1] + 2
                    );
                }
            }
        }

        // è¿”å›å°† word1 è½¬æ¢ä¸º word2 æ‰€éœ€çš„æœ€å°‘åˆ é™¤æ¬¡æ•°
        return dp[word1.length()][word2.length()];
    }
}


```

### 72.ç¼–è¾‘è·ç¦»(4.5)

ç»™ä½ ä¸¤ä¸ªå•è¯ word1 å’Œ word2ï¼Œè¯·ä½ è®¡ç®—å‡ºå°† word1 è½¬æ¢æˆ word2 æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•° ã€‚

ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š

- æ’å…¥ä¸€ä¸ªå­—ç¬¦
- åˆ é™¤ä¸€ä¸ªå­—ç¬¦
- æ›¿æ¢ä¸€ä¸ªå­—ç¬¦
- ç¤ºä¾‹ 1ï¼š
- è¾“å…¥ï¼šword1 = "horse", word2 = "ros"
- è¾“å‡ºï¼š3
- è§£é‡Šï¼š horse -> rorse (å°† 'h' æ›¿æ¢ä¸º 'r') rorse -> rose (åˆ é™¤ 'r') rose -> ros (åˆ é™¤ 'e')
- ç¤ºä¾‹ 2ï¼š
- è¾“å…¥ï¼šword1 = "intention", word2 = "execution"
- è¾“å‡ºï¼š5
- è§£é‡Šï¼š intention -> inention (åˆ é™¤ 't') inention -> enention (å°† 'i' æ›¿æ¢ä¸º 'e') enention -> exention (å°† 'n' æ›¿æ¢ä¸º 'x') exention -> exection (å°† 'n' æ›¿æ¢ä¸º 'c') exection -> execution (æ’å…¥ 'u')



**1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰**

**dp[i] [j] è¡¨ç¤ºä»¥ä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²word1ï¼Œå’Œä»¥ä¸‹æ ‡j-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²word2ï¼Œæœ€è¿‘ç¼–è¾‘è·ç¦»ä¸ºdp[i] [j]**ã€‚

æœ‰åŒå­¦é—®äº†ï¼Œä¸ºå•¥è¦è¡¨ç¤ºä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²å‘¢ï¼Œä¸ºå•¥ä¸è¡¨ç¤ºä¸‹æ ‡iä¸ºç»“å°¾çš„å­—ç¬¦ä¸²å‘¢ï¼Ÿ

ä¸ºä»€ä¹ˆè¿™ä¹ˆå®šä¹‰æˆ‘åœ¨ [718. æœ€é•¿é‡å¤å­æ•°ç»„ (opens new window)](https://programmercarl.com/0718.æœ€é•¿é‡å¤å­æ•°ç»„.html)ä¸­åšäº†è¯¦ç»†çš„è®²è§£ã€‚

å…¶å®ç”¨iæ¥è¡¨ç¤ºä¹Ÿå¯ä»¥ï¼ ç”¨i-1å°±æ˜¯ä¸ºäº†æ–¹ä¾¿åé¢dpæ•°ç»„åˆå§‹åŒ–çš„ã€‚

**2. ç¡®å®šé€’æ¨å…¬å¼**

åœ¨ç¡®å®šé€’æ¨å…¬å¼çš„æ—¶å€™ï¼Œé¦–å…ˆè¦è€ƒè™‘æ¸…æ¥šç¼–è¾‘çš„å‡ ç§æ“ä½œï¼Œæ•´ç†å¦‚ä¸‹ï¼š

```text
if (word1[i - 1] == word2[j - 1])
    ä¸æ“ä½œ
if (word1[i - 1] != word2[j - 1])
    å¢
    åˆ 
    æ¢
```

ä¹Ÿå°±æ˜¯å¦‚ä¸Š4ç§æƒ…å†µã€‚

```
if (word1[i - 1] == word2[j - 1])` é‚£ä¹ˆè¯´æ˜ä¸ç”¨ä»»ä½•ç¼–è¾‘ï¼Œ`dp[i][j]` å°±åº”è¯¥æ˜¯ `dp[i - 1][j - 1]`ï¼Œå³`dp[i][j] = dp[i - 1][j - 1];
```

æ­¤æ—¶å¯èƒ½æœ‰åŒå­¦æœ‰ç‚¹ä¸æ˜ç™½ï¼Œä¸ºå•¥è¦å³`dp[i][j] = dp[i - 1][j - 1]`å‘¢ï¼Ÿ

é‚£ä¹ˆå°±åœ¨å›é¡¾ä¸Šé¢è®²è¿‡çš„`dp[i][j]`çš„å®šä¹‰ï¼Œ`word1[i - 1]` ä¸ `word2[j - 1]`ç›¸ç­‰äº†ï¼Œé‚£ä¹ˆå°±ä¸ç”¨ç¼–è¾‘äº†ï¼Œä»¥ä¸‹æ ‡i-2ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²word1å’Œä»¥ä¸‹æ ‡j-2ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²`word2`çš„æœ€è¿‘ç¼–è¾‘è·ç¦»`dp[i - 1][j - 1]`å°±æ˜¯ `dp[i][j]`äº†ã€‚

åœ¨ä¸‹é¢çš„è®²è§£ä¸­ï¼Œå¦‚æœå“ªé‡Œçœ‹ä¸æ‡‚ï¼Œå°±å›æƒ³ä¸€ä¸‹`dp[i][j]`çš„å®šä¹‰ï¼Œå°±æ˜ç™½äº†ã€‚

**åœ¨æ•´ä¸ªåŠ¨è§„çš„è¿‡ç¨‹ä¸­ï¼Œæœ€ä¸ºå…³é”®å°±æ˜¯æ­£ç¡®ç†è§£`dp[i][j]`çš„å®šä¹‰ï¼**

`if (word1[i - 1] != word2[j - 1])`ï¼Œæ­¤æ—¶å°±éœ€è¦ç¼–è¾‘äº†ï¼Œå¦‚ä½•ç¼–è¾‘å‘¢ï¼Ÿ

- æ“ä½œä¸€ï¼šword1åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±æ˜¯ä»¥ä¸‹æ ‡i - 2ä¸ºç»“å°¾çš„word1 ä¸ j-1ä¸ºç»“å°¾çš„word2çš„æœ€è¿‘ç¼–è¾‘è·ç¦» å†åŠ ä¸Šä¸€ä¸ªæ“ä½œã€‚

å³ `dp[i][j] = dp[i - 1][j] + 1;`

- æ“ä½œäºŒï¼šword2åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±æ˜¯ä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„word1 ä¸ j-2ä¸ºç»“å°¾çš„word2çš„æœ€è¿‘ç¼–è¾‘è·ç¦» å†åŠ ä¸Šä¸€ä¸ªæ“ä½œã€‚

å³ `dp[i][j] = dp[i][j - 1] + 1;`

è¿™é‡Œæœ‰åŒå­¦å‘ç°äº†ï¼Œæ€ä¹ˆéƒ½æ˜¯åˆ é™¤å…ƒç´ ï¼Œæ·»åŠ å…ƒç´ å»å“ªäº†ã€‚

**word1æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œç›¸å½“äºword2åˆ é™¤ä¸€ä¸ªå…ƒç´ **ï¼Œä¾‹å¦‚ `word1 = "ad" ï¼Œword2 = "a"`ï¼Œ`word1`åˆ é™¤å…ƒç´ `'d'` å’Œ `word2`æ·»åŠ ä¸€ä¸ªå…ƒç´ `'d'`ï¼Œå˜æˆ`word1="a", word2="ad"`ï¼Œ æœ€ç»ˆçš„æ“ä½œæ•°æ˜¯ä¸€æ ·ï¼ dpæ•°ç»„å¦‚ä¸‹å›¾æ‰€ç¤ºæ„çš„ï¼š

```text
            a                         a     d
   +-----+-----+             +-----+-----+-----+
   |  0  |  1  |             |  0  |  1  |  2  |
   +-----+-----+   ===>      +-----+-----+-----+
 a |  1  |  0  |           a |  1  |  0  |  1  |
   +-----+-----+             +-----+-----+-----+
 d |  2  |  1  |
   +-----+-----+
```

æ“ä½œä¸‰ï¼šæ›¿æ¢å…ƒç´ ï¼Œ`word1`æ›¿æ¢`word1[i - 1]`ï¼Œä½¿å…¶ä¸`word2[j - 1]`ç›¸åŒï¼Œæ­¤æ—¶ä¸ç”¨å¢åˆ åŠ å…ƒç´ ã€‚

å¯ä»¥å›é¡¾ä¸€ä¸‹ï¼Œ`if (word1[i - 1] == word2[j - 1])`çš„æ—¶å€™æˆ‘ä»¬çš„æ“ä½œ æ˜¯ `dp[i][j] = dp[i - 1][j - 1]` å¯¹å§ã€‚

é‚£ä¹ˆåªéœ€è¦ä¸€æ¬¡æ›¿æ¢çš„æ“ä½œï¼Œå°±å¯ä»¥è®© word1[i - 1] å’Œ word2[j - 1] ç›¸åŒã€‚

æ‰€ä»¥ `dp[i][j] = dp[i - 1][j - 1] + 1;`

ç»¼ä¸Šï¼Œå½“ `if (word1[i - 1] != word2[j - 1])` æ—¶å–æœ€å°çš„ï¼Œå³ï¼š`dp[i][j] = min({dp[i - 1][j - 1], dp[i - 1][j], dp[i][j - 1]}) + 1;`

é€’å½’å…¬å¼ä»£ç å¦‚ä¸‹ï¼š

**3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–**

å†å›é¡¾ä¸€ä¸‹dp[i] [j]çš„å®šä¹‰ï¼š

**dp[i] [j] è¡¨ç¤ºä»¥ä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²word1ï¼Œå’Œä»¥ä¸‹æ ‡j-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²word2ï¼Œæœ€è¿‘ç¼–è¾‘è·ç¦»ä¸ºdp[i] [j]**ã€‚

é‚£ä¹ˆdp[i] [0] å’Œ dp[0] [j] è¡¨ç¤ºä»€ä¹ˆå‘¢ï¼Ÿ

dp[i] [0] ï¼šä»¥ä¸‹æ ‡i-1ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²word1ï¼Œå’Œç©ºå­—ç¬¦ä¸²word2ï¼Œæœ€è¿‘ç¼–è¾‘è·ç¦»ä¸ºdp[i] [0]ã€‚

é‚£ä¹ˆdp[i] [0]å°±åº”è¯¥æ˜¯iï¼Œå¯¹word1é‡Œçš„å…ƒç´ å…¨éƒ¨åšåˆ é™¤æ“ä½œï¼Œå³ï¼šdp[i] [0] = i;

åŒç†dp[0] [j] = j;

æ‰€ä»¥C++ä»£ç å¦‚ä¸‹ï¼š

```cpp
for (int i = 0; i <= word1.size(); i++) dp[i][0] = i;
for (int j = 0; j <= word2.size(); j++) dp[0][j] = j;
```

**4. ç¡®å®šéå†é¡ºåº**

ä»å¦‚ä¸‹å››ä¸ªé€’æ¨å…¬å¼ï¼š

- `dp[i][j] = dp[i - 1][j - 1]`
- `dp[i][j] = dp[i - 1][j - 1] + 1`
- `dp[i][j] = dp[i][j - 1] + 1`
- `dp[i][j] = dp[i - 1][j] + 1`

å¯ä»¥çœ‹å‡ºdp[i] [j]æ˜¯ä¾èµ–å·¦æ–¹ï¼Œä¸Šæ–¹å’Œå·¦ä¸Šæ–¹å…ƒç´ çš„ï¼Œå¦‚å›¾ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210114162113131.jpg" alt="72.ç¼–è¾‘è·ç¦»" style="zoom:50%;" />

```java
class Solution {
    public int minDistance(String word1, String word2) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®š dp æ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºä»¥ä¸‹æ ‡ i-1 ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word1ï¼Œå’Œä»¥ä¸‹æ ‡ j-1 ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² word2
        // å˜æˆç›¸åŒå­—ç¬¦ä¸²æ‰€éœ€è¦çš„æœ€å°ç¼–è¾‘è·ç¦»
        int[][] dp = new int[word1.length() + 1][word2.length() + 1];

        // ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ– dp æ•°ç»„
        // dp[i][0] è¡¨ç¤º word2 ä¸ºç©ºå­—ç¬¦ä¸²æ—¶ï¼Œword1 çš„å‰ i ä¸ªå­—ç¬¦éœ€è¦åˆ é™¤ i æ¬¡æ‰èƒ½å˜æˆç©ºå­—ç¬¦ä¸²
        for (int i = 0; i < dp.length; i++) {
            dp[i][0] = i;
        }
        // dp[0][j] è¡¨ç¤º word1 ä¸ºç©ºå­—ç¬¦ä¸²æ—¶ï¼Œword2 çš„å‰ j ä¸ªå­—ç¬¦éœ€è¦åˆ é™¤ j æ¬¡æ‰èƒ½å˜æˆç©ºå­—ç¬¦ä¸²
        for (int i = 0; i < dp[0].length; i++) {
            dp[0][i] = i;
        }

        // ç¬¬äºŒæ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
        // å½“ word1[i-1] ä¸ word2[j-1] ç›¸åŒï¼Œdp[i][j] = dp[i-1][j-1]
        // å½“ word1[i-1] ä¸ word2[j-1] ä¸åŒï¼Œæœ‰ä¸‰ç§æ“ä½œï¼š
        // 1. åˆ é™¤ word1[i-1]ï¼šdp[i][j] = dp[i-1][j] + 1
        // 2. åˆ é™¤ word2[j-1]ï¼šdp[i][j] = dp[i][j-1] + 1
        // 3. æ›¿æ¢ word1[i-1] ä½¿å…¶ç­‰äº word2[j-1]ï¼šdp[i][j] = dp[i-1][j-1] + 1
        // æœ€ç»ˆé€‰æ‹©æ“ä½œæ•°æœ€å°‘çš„æ–¹æ¡ˆ
        for (int i = 1; i < dp.length; i++) {
            for (int j = 1; j < dp[0].length; j++) {
                if (word1.charAt(i - 1) == word2.charAt(j - 1)) {
                    dp[i][j] = dp[i - 1][j - 1];
                } else {
                    dp[i][j] = Math.min(
                        Math.min(dp[i - 1][j] + 1, dp[i][j - 1] + 1),
                        dp[i - 1][j - 1] + 1
                    );
                }
            }
        }

        // è¿”å›å°† word1 è½¬æ¢ä¸º word2 æ‰€éœ€çš„æœ€å°ç¼–è¾‘è·ç¦»
        return dp[word1.length()][word2.length()];
    }
}

```

### 10.æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼ˆhot 100ï¼‰ï¼ˆ3.22ï¼‰

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªå­—ç¬¦è§„å¾‹ `p`ï¼Œè¯·ä½ æ¥å®ç°ä¸€ä¸ªæ”¯æŒ `'.'` å’Œ `'*'` çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚

- `'.'` åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦
- `'*'` åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ 

æ‰€è°“åŒ¹é…ï¼Œæ˜¯è¦æ¶µç›– **æ•´ä¸ª** å­—ç¬¦ä¸² `s`çš„ï¼Œè€Œä¸æ˜¯éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "aa", p = "a"
è¾“å‡ºï¼šfalse
è§£é‡Šï¼š"a" æ— æ³•åŒ¹é… "aa" æ•´ä¸ªå­—ç¬¦ä¸²ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥ï¼šs = "aa", p = "a*"
è¾“å‡ºï¼štrue
è§£é‡Šï¼šå› ä¸º '*' ä»£è¡¨å¯ä»¥åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ , åœ¨è¿™é‡Œå‰é¢çš„å…ƒç´ å°±æ˜¯ 'a'ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸² "aa" å¯è¢«è§†ä¸º 'a' é‡å¤äº†ä¸€æ¬¡ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = "ab", p = ".*"
è¾“å‡ºï¼štrue
è§£é‡Šï¼š".*" è¡¨ç¤ºå¯åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªï¼ˆ'*'ï¼‰ä»»æ„å­—ç¬¦ï¼ˆ'.'ï¼‰ã€‚
```

```java
class Solution {
    public boolean isMatch(String s, String p) {
        // 1. dpæ•°ç»„å«ä¹‰: dp[i][j] è¡¨ç¤º s[0..i-1] æ˜¯å¦ä¸ p[0..j-1] åŒ¹é…
        boolean[][] dp = new boolean[s.length() + 1][p.length() + 1];

        // 2. åˆå§‹åŒ–: dp[0][0] = trueï¼Œç©ºå­—ç¬¦ä¸²å’Œç©ºæ¨¡å¼æ˜¯åŒ¹é…çš„
        dp[0][0] = true;

        // 3. å¤„ç†ç©ºå­—ç¬¦ä¸²å’Œæ¨¡å¼pçš„åŒ¹é…
        // å¦‚æœæ¨¡å¼ä¸­çš„å­—ç¬¦æ˜¯ '*'ï¼Œå®ƒå¯èƒ½è¡¨ç¤ºå‰ä¸€ä¸ªå­—ç¬¦å‡ºç°é›¶æ¬¡ï¼Œåˆå§‹åŒ–å¯¹åº”çš„ dp å€¼
        for (int j = 1; j <= p.length(); j++) {
            if (p.charAt(j - 1) == '*') {
                dp[0][j] = dp[0][j - 2];  // å¦‚æœ '*' åŒ¹é…å‰é¢çš„å­—ç¬¦é›¶æ¬¡
            }
        }

        // 4. å¡«å……dpæ•°ç»„
        // i éå†å­—ç¬¦ä¸²sï¼Œj éå†æ¨¡å¼p
        for (int i = 1; i <= s.length(); i++) {
            for (int j = 1; j <= p.length(); j++) {
                // å¤„ç†æ™®é€šå­—ç¬¦åŒ¹é…ï¼Œæˆ–è€… . å·åŒ¹é…ä»»ä½•å­—ç¬¦
                if (p.charAt(j - 1) == s.charAt(i - 1) || p.charAt(j - 1) == '.') {
                    dp[i][j] = dp[i - 1][j - 1];  // å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸ
                }
                // å¤„ç† '*' çš„æƒ…å†µ
                else if (p.charAt(j - 1) == '*') {
                    dp[i][j] = dp[i][j - 2];  // '*' ä»£è¡¨å‰é¢å­—ç¬¦å‡ºç° 0 æ¬¡

                    // åˆ¤æ–­ '*' å‰çš„å­—ç¬¦æ˜¯å¦å’Œå½“å‰å­—ç¬¦åŒ¹é…ï¼Œè‹¥åŒ¹é…åˆ™å¯ä»¥ç»§ç»­åŒ¹é…
                    if (s.charAt(i - 1) == p.charAt(j - 2) || p.charAt(j - 2) == '.') {
                        dp[i][j] = dp[i][j] || dp[i - 1][j];  // '*' ä»£è¡¨å‰é¢çš„å­—ç¬¦å‡ºç° 1 æ¬¡æˆ–å¤šæ¬¡
                    }
                }
            }
        }

        // æœ€ç»ˆç»“æœï¼Œåˆ¤æ–­æ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸æ•´ä¸ªæ¨¡å¼åŒ¹é…
        return dp[s.length()][p.length()];
    }
}
```

### 647.å›æ–‡å­ä¸²

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªå›æ–‡å­ä¸²ã€‚

å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼š"abc"
- è¾“å‡ºï¼š3
- è§£é‡Šï¼šä¸‰ä¸ªå›æ–‡å­ä¸²: "a", "b", "c"

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼š"aaa"
- è¾“å‡ºï¼š6
- è§£é‡Šï¼š6ä¸ªå›æ–‡å­ä¸²: "a", "a", "a", "aa", "aa", "aaa"



åŠ¨è§„äº”éƒ¨æ›²ï¼š

1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

å¦‚æœå¤§å®¶åšäº†å¾ˆå¤šè¿™ç§å­åºåˆ—ç›¸å…³çš„é¢˜ç›®ï¼Œåœ¨å®šä¹‰dpæ•°ç»„çš„æ—¶å€™ å¾ˆè‡ªç„¶å°±ä¼šæƒ³é¢˜ç›®æ±‚ä»€ä¹ˆï¼Œæˆ‘ä»¬å°±å¦‚ä½•å®šä¹‰dpæ•°ç»„ã€‚

ç»å¤§å¤šæ•°é¢˜ç›®ç¡®å®æ˜¯è¿™æ ·ï¼Œä¸è¿‡æœ¬é¢˜å¦‚æœæˆ‘ä»¬å®šä¹‰ï¼Œdp[i] ä¸º ä¸‹æ ‡iç»“å°¾çš„å­—ç¬¦ä¸²æœ‰ dp[i]ä¸ªå›æ–‡ä¸²çš„è¯ï¼Œæˆ‘ä»¬ä¼šå‘ç°å¾ˆéš¾æ‰¾åˆ°é€’å½’å…³ç³»ã€‚

dp[i] å’Œ dp[i-1] ï¼Œdp[i + 1] çœ‹ä¸Šå»éƒ½æ²¡å•¥å…³ç³»ã€‚

æ‰€ä»¥æˆ‘ä»¬è¦çœ‹å›æ–‡ä¸²çš„æ€§è´¨ã€‚ å¦‚å›¾ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20230102170752.png" alt="img" style="zoom:50%;" />

æˆ‘ä»¬åœ¨åˆ¤æ–­å­—ç¬¦ä¸²Sæ˜¯å¦æ˜¯å›æ–‡ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬çŸ¥é“ s[1]ï¼Œs[2]ï¼Œs[3] è¿™ä¸ªå­ä¸²æ˜¯å›æ–‡çš„ï¼Œé‚£ä¹ˆåªéœ€è¦æ¯”è¾ƒ s[0]å’Œs[4]è¿™ä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒçš„è¯ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²s å°±æ˜¯å›æ–‡ä¸²ã€‚

é‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½æ‰¾åˆ°ä¸€ç§é€’å½’å…³ç³»ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­ä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼ˆå­—ç¬¦ä¸²çš„ä¸‹è¡¨èŒƒå›´[i,j]ï¼‰æ˜¯å¦å›æ–‡ï¼Œä¾èµ–äºï¼Œå­å­—ç¬¦ä¸²ï¼ˆä¸‹è¡¨èŒƒå›´[i + 1, j - 1]ï¼‰ï¼‰ æ˜¯å¦æ˜¯å›æ–‡ã€‚

æ‰€ä»¥ä¸ºäº†æ˜ç¡®è¿™ç§é€’å½’å…³ç³»ï¼Œæˆ‘ä»¬çš„dpæ•°ç»„æ˜¯è¦å®šä¹‰æˆä¸€ä½äºŒç»´dpæ•°ç»„ã€‚

å¸ƒå°”ç±»å‹çš„dp[i] [j]ï¼šè¡¨ç¤ºåŒºé—´èŒƒå›´[i,j] ï¼ˆæ³¨æ„æ˜¯å·¦é—­å³é—­ï¼‰çš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡å­ä¸²ï¼Œå¦‚æœæ˜¯dp[i] [j]ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalseã€‚

1. ç¡®å®šé€’æ¨å…¬å¼

åœ¨ç¡®å®šé€’æ¨å…¬å¼æ—¶ï¼Œå°±è¦åˆ†æå¦‚ä¸‹å‡ ç§æƒ…å†µã€‚

æ•´ä½“ä¸Šæ˜¯ä¸¤ç§ï¼Œå°±æ˜¯s[i]ä¸s[j]ç›¸ç­‰ï¼Œs[i]ä¸s[j]ä¸ç›¸ç­‰è¿™ä¸¤ç§ã€‚

å½“s[i]ä¸s[j]ä¸ç›¸ç­‰ï¼Œé‚£æ²¡å•¥å¥½è¯´çš„äº†ï¼Œdp[i] [j]ä¸€å®šæ˜¯falseã€‚

å½“s[i]ä¸s[j]ç›¸ç­‰æ—¶ï¼Œè¿™å°±å¤æ‚ä¸€äº›äº†ï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µ

- æƒ…å†µä¸€ï¼šä¸‹æ ‡i ä¸ jç›¸åŒï¼ŒåŒä¸€ä¸ªå­—ç¬¦ä¾‹å¦‚aï¼Œå½“ç„¶æ˜¯å›æ–‡å­ä¸²
- æƒ…å†µäºŒï¼šä¸‹æ ‡i ä¸ jç›¸å·®ä¸º1ï¼Œä¾‹å¦‚aaï¼Œä¹Ÿæ˜¯å›æ–‡å­ä¸²
- æƒ…å†µä¸‰ï¼šä¸‹æ ‡ï¼ši ä¸ jç›¸å·®å¤§äº1çš„æ—¶å€™ï¼Œä¾‹å¦‚cabacï¼Œæ­¤æ—¶s[i]ä¸s[j]å·²ç»ç›¸åŒäº†ï¼Œæˆ‘ä»¬çœ‹iåˆ°jåŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å­ä¸²å°±çœ‹abaæ˜¯ä¸æ˜¯å›æ–‡å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆabaçš„åŒºé—´å°±æ˜¯ i+1 ä¸ j-1åŒºé—´ï¼Œè¿™ä¸ªåŒºé—´æ˜¯ä¸æ˜¯å›æ–‡å°±çœ‹dp[i + 1] [j - 1]æ˜¯å¦ä¸ºtrueã€‚

ä»¥ä¸Šä¸‰ç§æƒ…å†µåˆ†æå®Œäº†ï¼Œé‚£ä¹ˆé€’å½’å…¬å¼å¦‚ä¸‹ï¼š

```cpp
if (s[i] == s[j]) {
    if (j - i <= 1) { // æƒ…å†µä¸€ å’Œ æƒ…å†µäºŒ
        result++;
        dp[i][j] = true;
    } else if (dp[i + 1][j - 1]) { // æƒ…å†µä¸‰
        result++;
        dp[i][j] = true;
    }
}
```

resultå°±æ˜¯ç»Ÿè®¡å›æ–‡å­ä¸²çš„æ•°é‡ã€‚

æ³¨æ„è¿™é‡Œæˆ‘æ²¡æœ‰åˆ—å‡ºå½“s[i]ä¸s[j]ä¸ç›¸ç­‰çš„æ—¶å€™ï¼Œå› ä¸ºåœ¨ä¸‹é¢dp[i] [j]åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå°±åˆå§‹ä¸ºfalseã€‚

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

dp[i] [j]å¯ä»¥åˆå§‹åŒ–ä¸ºtrueä¹ˆï¼Ÿ å½“ç„¶ä¸è¡Œï¼Œæ€èƒ½åˆšå¼€å§‹å°±å…¨éƒ½åŒ¹é…ä¸Šäº†ã€‚

æ‰€ä»¥dp[i] [j]åˆå§‹åŒ–ä¸ºfalseã€‚

1. ç¡®å®šéå†é¡ºåº

éå†é¡ºåºå¯æœ‰æœ‰ç‚¹è®²ç©¶äº†ã€‚

é¦–å…ˆä»é€’æ¨å…¬å¼ä¸­å¯ä»¥çœ‹å‡ºï¼Œæƒ…å†µä¸‰æ˜¯æ ¹æ®dp[i + 1] [j - 1]æ˜¯å¦ä¸ºtrueï¼Œåœ¨å¯¹dp[i] [j]è¿›è¡Œèµ‹å€¼trueçš„ã€‚

dp[i + 1] [j - 1] åœ¨ dp[i][j]çš„å·¦ä¸‹è§’ï¼Œå¦‚å›¾ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210121171032473-20230310132134822.jpg" alt="647.å›æ–‡å­ä¸²" style="zoom:50%;" />

å¦‚æœè¿™çŸ©é˜µæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³éå†ï¼Œé‚£ä¹ˆä¼šç”¨åˆ°æ²¡æœ‰è®¡ç®—è¿‡çš„dp[i + 1] [j - 1]ï¼Œä¹Ÿå°±æ˜¯æ ¹æ®ä¸ç¡®å®šæ˜¯ä¸æ˜¯å›æ–‡çš„åŒºé—´[i+1,j-1]ï¼Œæ¥åˆ¤æ–­äº†[i,j]æ˜¯ä¸æ˜¯å›æ–‡ï¼Œé‚£ç»“æœä¸€å®šæ˜¯ä¸å¯¹çš„ã€‚

**æ‰€ä»¥ä¸€å®šè¦ä»ä¸‹åˆ°ä¸Šï¼Œä»å·¦åˆ°å³éå†ï¼Œè¿™æ ·ä¿è¯dp[i + 1] [j - 1]éƒ½æ˜¯ç»è¿‡è®¡ç®—çš„**ã€‚

æœ‰çš„ä»£ç å®ç°æ˜¯ä¼˜å…ˆéå†åˆ—ï¼Œç„¶åéå†è¡Œï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªé“ç†ï¼Œéƒ½æ˜¯ä¸ºäº†ä¿è¯dp[i + 1] [j - 1]éƒ½æ˜¯ç»è¿‡è®¡ç®—çš„ã€‚

```java
class Solution {
    public int countSubstrings(String s) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºå­—ç¬¦ä¸² s çš„åŒºé—´ [i, j] æ˜¯å¦ä¸ºå›æ–‡å­ä¸²
        boolean[][] dp = new boolean[s.length()][s.length()];
        // ç”¨äºç»Ÿè®¡å›æ–‡å­ä¸²çš„æ•°é‡
        int resultCount = 0;

        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // å¿…é¡»ä»ä¸‹åˆ°ä¸Šï¼Œä»å·¦åˆ°å³è¿›è¡Œéå†ï¼Œç¡®ä¿ dp[i + 1][j - 1] åœ¨ä½¿ç”¨æ—¶å·²è¢«è®¡ç®—
        for (int i = s.length() - 1; i >= 0; i--) { // ä»ä¸‹åˆ°ä¸Šéå†
            for (int j = i; j < s.length(); j++) { // ä»å·¦åˆ°å³éå†
                // ç¬¬äºŒæ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
                // å½“ s[i] ä¸ s[j] ç›¸ç­‰æ—¶ï¼Œè¿›è¡Œåˆ¤æ–­
                if (s.charAt(i) == s.charAt(j)) {
                    // æƒ…å†µä¸€ï¼ši == jï¼Œå•ä¸ªå­—ç¬¦å¿…ç„¶æ˜¯å›æ–‡å­ä¸²
                    // æƒ…å†µäºŒï¼ši ä¸ j ç›¸å·®ä¸º 1ï¼Œç±»ä¼¼ "aa"ï¼Œä¸¤ä¸ªå­—ç¬¦ç›¸åŒä¹Ÿæ˜¯å›æ–‡å­ä¸²
                    if (j - i <= 1) {
                        resultCount++; // ç»Ÿè®¡å›æ–‡å­ä¸²
                        dp[i][j] = true;
                    } 
                    // æƒ…å†µä¸‰ï¼šå½“ i ä¸ j ç›¸å·®å¤§äº 1 æ—¶ï¼Œåˆ¤æ–­ s[i+1][j-1] æ˜¯å¦ä¸ºå›æ–‡å­ä¸²
                    else if (dp[i + 1][j - 1]) {
                        resultCount++; // ç»Ÿè®¡å›æ–‡å­ä¸²
                        dp[i][j] = true;
                    }
                }
            }
        }

        // è¿”å›å›æ–‡å­ä¸²çš„æ•°é‡
        return resultCount;
    }
}

```

### 5.æœ€é•¿å›æ–‡å­ä¸²ï¼ˆnew hot100ï¼‰

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œæ‰¾åˆ° `s` ä¸­æœ€é•¿çš„ å›æ–‡å­ä¸²ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "babad"
è¾“å‡ºï¼š"bab"
è§£é‡Šï¼š"aba" åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "cbbd"
è¾“å‡ºï¼š"bb"
```

```java
class Solution {
    public String longestPalindrome(String s) {
        // 1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºå­—ç¬¦ä¸²såœ¨[i,j]èŒƒå›´å†…çš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡ä¸²
        // i è¡¨ç¤ºèµ·å§‹ä½ç½®ï¼Œj è¡¨ç¤ºç»“æŸä½ç½®
        boolean[][] dp = new boolean[s.length()][s.length()];
        
        // ç”¨äºå­˜å‚¨æœ€é•¿å›æ–‡å­ä¸²
        StringBuilder SB = new StringBuilder();

        // 4. ç¡®å®šéå†é¡ºåº
        // ç”±äºdp[i][j]ä¾èµ–dp[i+1][j-1]ï¼Œå³ä¾èµ–å·¦ä¸‹æ–¹çš„å€¼
        // æ‰€ä»¥iè¦ä»ä¸‹å¾€ä¸Šéå†ï¼Œjè¦ä»å·¦å¾€å³éå†
        for (int i = s.length() - 1; i >= 0; i--) {
            for (int j = i; j < s.length(); j++) {
                // 2. ç¡®å®šé€’æ¨å…¬å¼
                // å½“s.charAt(i) == s.charAt(j)æ—¶ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š
                // æƒ…å†µ1ï¼šå­ä¸²é•¿åº¦ä¸º1æˆ–2æ—¶ï¼Œå¿…å®šæ˜¯å›æ–‡ä¸²
                // æƒ…å†µ2ï¼šå­ä¸²é•¿åº¦å¤§äº2æ—¶ï¼Œéœ€è¦åˆ¤æ–­dp[i+1][j-1]æ˜¯å¦ä¸ºå›æ–‡ä¸²
                if (s.charAt(i) == s.charAt(j)) {
                    // 3. dpæ•°ç»„åˆå§‹åŒ–
                    // å­ä¸²é•¿åº¦ä¸º1(i==j)æˆ–2(j-i==1)æ—¶ï¼Œåªè¦é¦–å°¾å­—ç¬¦ç›¸ç­‰å°±æ˜¯å›æ–‡ä¸²
                    if (j - i <= 1) {
                        dp[i][j] = true;
                        // æ›´æ–°æœ€é•¿å›æ–‡å­ä¸²
                        if (j - i + 1 > SB.length()) {
                            SB.setLength(0);
                            SB.append(s, i, j + 1);
                        }
                    }
                    // å­ä¸²é•¿åº¦å¤§äº2æ—¶ï¼Œéœ€è¦åˆ¤æ–­å»æ‰é¦–å°¾çš„å­ä¸²æ˜¯å¦ä¸ºå›æ–‡ä¸²
                    else if (dp[i + 1][j - 1]) {
                        dp[i][j] = true;
                        // æ›´æ–°æœ€é•¿å›æ–‡å­ä¸²
                        if (j - i + 1 > SB.length()) {
                            SB.setLength(0);
                            SB.append(s, i, j + 1);
                        }
                    }
                }
            }
        }
        return SB.toString();
    }
}
```



### 516.æœ€é•¿å›æ–‡å­åºåˆ—ï¼ˆ3.20ï¼‰

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º 1000 ã€‚

ç¤ºä¾‹ 1: è¾“å…¥: "bbbab" è¾“å‡º: 4 ä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º "bbbb"ã€‚

ç¤ºä¾‹ 2: è¾“å…¥:"cbbd" è¾“å‡º: 2 ä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º "bb"ã€‚



åŠ¨è§„äº”éƒ¨æ›²åˆ†æå¦‚ä¸‹ï¼š

1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

**dp[i] [j]ï¼šå­—ç¬¦ä¸²såœ¨[i, j]èŒƒå›´å†…æœ€é•¿çš„å›æ–‡å­åºåˆ—çš„é•¿åº¦ä¸ºdp[i] [j]**ã€‚

1. ç¡®å®šé€’æ¨å…¬å¼

åœ¨åˆ¤æ–­å›æ–‡å­ä¸²çš„é¢˜ç›®ä¸­ï¼Œå…³é”®é€»è¾‘å°±æ˜¯çœ‹s[i]ä¸s[j]æ˜¯å¦ç›¸åŒã€‚

å¦‚æœs[i]ä¸s[j]ç›¸åŒï¼Œé‚£ä¹ˆdp[i] [j] = dp[i + 1] [j - 1] + 2;

å¦‚å›¾ï¼š ![516.æœ€é•¿å›æ–‡å­åºåˆ—](https://code-thinking-1253855093.file.myqcloud.com/pics/20210127151350563.jpg)

ï¼ˆå¦‚æœè¿™é‡Œçœ‹ä¸æ‡‚ï¼Œå›å¿†ä¸€ä¸‹dp[i] [j]çš„å®šä¹‰ï¼‰

å¦‚æœs[i]ä¸s[j]ä¸ç›¸åŒï¼Œè¯´æ˜s[i]å’Œs[j]çš„åŒæ—¶åŠ å…¥ å¹¶ä¸èƒ½å¢åŠ [i,j]åŒºé—´å›æ–‡å­åºåˆ—çš„é•¿åº¦ï¼Œé‚£ä¹ˆåˆ†åˆ«åŠ å…¥s[i]ã€s[j]çœ‹çœ‹å“ªä¸€ä¸ªå¯ä»¥ç»„æˆæœ€é•¿çš„å›æ–‡å­åºåˆ—ã€‚

åŠ å…¥s[j]çš„å›æ–‡å­åºåˆ—é•¿åº¦ä¸ºdp[i + 1] [j]ã€‚

åŠ å…¥s[i]çš„å›æ–‡å­åºåˆ—é•¿åº¦ä¸ºdp[i] [j - 1]ã€‚

é‚£ä¹ˆdp[i] [j]ä¸€å®šæ˜¯å–æœ€å¤§çš„ï¼Œå³ï¼šdp[i] [j] = max(dp[i + 1] [j], dp[i][j - 1]);

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210127151420476.jpg" alt="516.æœ€é•¿å›æ–‡å­åºåˆ—1" style="zoom:50%;" />

ä»£ç å¦‚ä¸‹ï¼š

```cpp
if (s[i] == s[j]) {
    dp[i][j] = dp[i + 1][j - 1] + 2;
} else {
    dp[i][j] = max(dp[i + 1][j], dp[i][j - 1]);
}
```

1. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

é¦–å…ˆè¦è€ƒè™‘å½“i å’Œj ç›¸åŒçš„æƒ…å†µï¼Œä»é€’æ¨å…¬å¼ï¼šdp[i] [j] = dp[i + 1] [j - 1] + 2; å¯ä»¥çœ‹å‡º é€’æ¨å…¬å¼æ˜¯è®¡ç®—ä¸åˆ° i å’Œjç›¸åŒæ—¶å€™çš„æƒ…å†µã€‚

æ‰€ä»¥éœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–ä¸€ä¸‹ï¼Œå½“iä¸jç›¸åŒï¼Œé‚£ä¹ˆdp[i] [j]ä¸€å®šæ˜¯ç­‰äº1çš„ï¼Œå³ï¼šä¸€ä¸ªå­—ç¬¦çš„å›æ–‡å­åºåˆ—é•¿åº¦å°±æ˜¯1ã€‚

å…¶ä»–æƒ…å†µdp[i] [j]åˆå§‹ä¸º0å°±è¡Œï¼Œè¿™æ ·é€’æ¨å…¬å¼ï¼šdp[i] [j] = max(dp[i + 1] [j], dp[i][j - 1]); ä¸­dp[i][j]æ‰ä¸ä¼šè¢«åˆå§‹å€¼è¦†ç›–ã€‚

```cpp
vector<vector<int>> dp(s.size(), vector<int>(s.size(), 0));
for (int i = 0; i < s.size(); i++) dp[i][i] = 1;
```

1. ç¡®å®šéå†é¡ºåº

ä»é€’å½’å…¬å¼ä¸­ï¼Œå¯ä»¥çœ‹å‡ºï¼Œdp[i] [j] ä¾èµ–äº dp[i + 1] [j - 1] ï¼Œdp[i + 1] [j] å’Œ dp[i][j - 1]ï¼Œå¦‚å›¾ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20230102172155.png" alt="img" style="zoom:50%;" />

**æ‰€ä»¥éå†içš„æ—¶å€™ä¸€å®šè¦ä»ä¸‹åˆ°ä¸Šéå†ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯ä¸‹ä¸€è¡Œçš„æ•°æ®æ˜¯ç»è¿‡è®¡ç®—çš„**ã€‚

jçš„è¯ï¼Œå¯ä»¥æ­£å¸¸ä»å·¦å‘å³éå†ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```java
class Solution {
    public int longestPalindromeSubseq(String s) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
        // dp[i][j] è¡¨ç¤ºå­—ç¬¦ä¸² s åœ¨ [i, j] èŒƒå›´å†…çš„æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦
        int[][] dp = new int[s.length()][s.length()];

        // ç¬¬ä¸‰æ­¥ï¼šdpæ•°ç»„çš„åˆå§‹åŒ–
        // å½“ i == j æ—¶ï¼Œå•ä¸ªå­—ç¬¦æ˜¯å›æ–‡å­åºåˆ—ï¼Œé•¿åº¦ä¸º 1
        for (int i = 0; i < s.length(); i++) {
            dp[i][i] = 1;
        }

        // ç¬¬å››æ­¥ï¼šç¡®å®šéå†é¡ºåº
        // éå†é¡ºåºä¸ºä»ä¸‹åˆ°ä¸Šéå† iï¼Œä»å·¦åˆ°å³éå† j
        // ä¿è¯ dp[i + 1][j - 1]ï¼Œdp[i + 1][j] å’Œ dp[i][j - 1] å·²ç»è¢«è®¡ç®—
        for (int i = s.length() - 1; i >= 0; i--) { // ä»ä¸‹åˆ°ä¸Šéå†
            for (int j = i + 1; j < s.length(); j++) { // ä»å·¦åˆ°å³éå†
                // ç¬¬äºŒæ­¥ï¼šç¡®å®šé€’æ¨å…¬å¼
                // å¦‚æœ s[i] ä¸ s[j] ç›¸ç­‰ï¼Œdp[i][j] = dp[i + 1][j - 1] + 2
                if (s.charAt(i) == s.charAt(j)) {
                    dp[i][j] = dp[i + 1][j - 1] + 2;
                } 
                // å¦åˆ™ï¼Œdp[i][j] = max(dp[i + 1][j], dp[i][j - 1])
                else {
                    dp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1]);
                }
            }
        }

        // è¿”å› dp[0][s.length() - 1]ï¼Œå³æ•´ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦
        return dp[0][s.length() - 1];
    }
}

```

### 32.æœ€é•¿æœ‰æ•ˆæ‹¬å·ï¼ˆhot100ï¼‰ï¼ˆ4.2ï¼‰

ç»™ä½ ä¸€ä¸ªåªåŒ…å« `'('` å’Œ `')'` çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚ 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "(()"
è¾“å‡ºï¼š2
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = ")()())"
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()()"
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = ""
è¾“å‡ºï¼š0
```

åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ˜¯å®šä¹‰çŠ¶æ€å’Œé€’æ¨å…³ç³»ã€‚

1. **çŠ¶æ€å®šä¹‰**ï¼š
   - ç”¨ `dp[i]` è¡¨ç¤ºä»¥ `s[i]` ç»“å°¾çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·çš„é•¿åº¦ã€‚

2. **é€’æ¨å…¬å¼**ï¼š
   - å¦‚æœ `s[i] == '('`ï¼Œåˆ™æ— æ³•å½¢æˆæœ‰æ•ˆæ‹¬å·ï¼Œ`dp[i] = 0`ã€‚
   - å¦‚æœ `s[i] == ')'`ï¼š
     - å¦‚æœ `s[i-1] == '('`ï¼Œåˆ™å¯ä»¥ç›´æ¥ä¸å‰ä¸€ä¸ª `'('` ç»„æˆæœ‰æ•ˆæ‹¬å·ï¼Œ`dp[i] = dp[i-2] + 2`ï¼ˆæ³¨æ„è¾¹ç•Œæ¡ä»¶ï¼‰ã€‚
     - å¦‚æœ `s[i-1] == ')'`ï¼Œåˆ™éœ€è¦æ£€æŸ¥ `s[i - dp[i-1] - 1] == '('` æ˜¯å¦ä¸å½“å‰ `')'` åŒ¹é…ï¼š
       - å¦‚æœåŒ¹é…ï¼Œ`dp[i] = dp[i-1] + dp[i - dp[i-1] - 2] + 2`ã€‚
       - å¦åˆ™ï¼Œ`dp[i] = 0`ã€‚

3. **åˆå§‹åŒ–**ï¼š
   - `dp[0] = 0`ï¼Œå› ä¸ºä»¥ç¬¬ä¸€ä¸ªå­—ç¬¦ç»“å°¾ä¸å¯èƒ½æœ‰æœ‰æ•ˆæ‹¬å·ã€‚

4. **éå†é¡ºåº**ï¼š
   - ä»å·¦åˆ°å³éå†å­—ç¬¦ä¸²ï¼Œé€æ­¥æ›´æ–° `dp[i]`ã€‚


```java
class Solution {
   public int longestValidParentheses(String s) {
       // ç‰¹åˆ¤ç©ºä¸²
       if (s == null || s.length() == 0) return 0;

       // 1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
       // dp[i] è¡¨ç¤ºä»¥ä¸‹æ ‡iå­—ç¬¦ç»“å°¾çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·çš„é•¿åº¦
       int[] dp = new int[s.length()];

       // 3. dpæ•°ç»„åˆå§‹åŒ–
       // å•ä¸ªå­—ç¬¦æ— æ³•æ„æˆæœ‰æ•ˆæ‹¬å·å¯¹ï¼Œåˆå§‹åŒ–ä¸º0
       dp[0] = 0;

       // 4. ç¡®å®šéå†é¡ºåº
       // ä»å·¦åˆ°å³éå†ï¼Œå› ä¸ºdp[i]ä¾èµ–dp[i-1]å’Œdp[i-2]çš„çŠ¶æ€
       for (int i = 1; i < s.length(); i++) {
           // 2. ç¡®å®šé€’æ¨å…¬å¼
           // æœ‰æ•ˆæ‹¬å·å­ä¸²ä¸€å®šä»¥')'ç»“å°¾ï¼Œæ‰€ä»¥å…ˆåˆ¤æ–­å½“å‰å­—ç¬¦æ˜¯å¦æ˜¯')'
           if (s.charAt(i) == ')') {
               // æƒ…å†µ1ï¼šå½“å‰')'ä¸å‰ä¸€ä¸ªå­—ç¬¦'('ç»„æˆ"()"
               if (s.charAt(i - 1) == '(') {
                   // dp[i] = dp[i-2] + 2
                   // i-2>=0æ—¶è¦åŠ ä¸Šdp[i-2]ï¼Œè¡¨ç¤ºå°†æ–°çš„æ‹¬å·å¯¹ä¸ä¹‹å‰çš„æœ‰æ•ˆæ‹¬å·ä¸²è¿æ¥
                   dp[i] = (i >= 2 ? dp[i - 2] : 0) + 2;
               }
               // æƒ…å†µ2ï¼šå½“å‰')'ä¸å‰é¢çš„'('ç»„æˆæ›´é•¿çš„æ‹¬å·å¯¹
               // å¦‚æœå‰é¢æœ‰æ•ˆæ‹¬å·é•¿åº¦æ˜¯dp[i-1]ï¼Œé‚£ä¹ˆéœ€è¦åˆ¤æ–­dp[i-1]ä¹‹å‰çš„å­—ç¬¦æ˜¯å¦æ˜¯'('
               else if (i - dp[i - 1] > 0 && s.charAt(i - dp[i - 1] - 1) == '(') {
                   // dp[i] = dp[i-1] + dp[i-dp[i-1]-2] + 2
                   // dp[i-1]æ˜¯å†…éƒ¨çš„æœ‰æ•ˆæ‹¬å·é•¿åº¦
                   // dp[i-dp[i-1]-2]æ˜¯å°†æ–°æ‹¬å·å¯¹ç»„æˆåï¼Œå‰é¢è¿˜å¯èƒ½å­˜åœ¨çš„æœ‰æ•ˆæ‹¬å·é•¿åº¦
                   // 2è¡¨ç¤ºæ–°å¢çš„æ‹¬å·å¯¹é•¿åº¦
                   dp[i] = dp[i - 1] + ((i - dp[i - 1] >= 2) ? dp[i - dp[i - 1] - 2] : 0) + 2;
               }
           }
       }

       // è¿”å›dpæ•°ç»„ä¸­çš„æœ€å¤§å€¼
       return Arrays.stream(dp).max().getAsInt();
   }
}
```

è¿˜æœ‰ä¹Ÿå¯ä»¥ç”¨æ ˆæ¥è§£å†³

```java
class Solution {
    public int longestValidParentheses(String s) {
        if (s == null || s.length() == 0) return 0;

        Stack<Integer> stack = new Stack<>();
        stack.push(-1); // åˆå§‹åŒ–ï¼Œè¡¨ç¤ºæ— æ•ˆæ‹¬å·çš„èµ·ç‚¹
        int maxLen = 0;

        for (int i = 0; i < s.length(); i++) {
            if (s.charAt(i) == '(') {
                stack.push(i);
            } else {
                stack.pop(); // åŒ¹é…ä¸€ä¸ª '('
                if (stack.isEmpty()) {
                    stack.push(i); // æ›´æ–°æ— æ•ˆèµ·ç‚¹
                } else {
                    maxLen = Math.max(maxLen, i - stack.peek());
                }
            }
        }

        return maxLen;
    }
}

```

### 312.æˆ³æ°”çƒï¼ˆhot100ï¼‰(3.30)

æœ‰ `n` ä¸ªæ°”çƒï¼Œç¼–å·ä¸º`0` åˆ° `n - 1`ï¼Œæ¯ä¸ªæ°”çƒä¸Šéƒ½æ ‡æœ‰ä¸€ä¸ªæ•°å­—ï¼Œè¿™äº›æ•°å­—å­˜åœ¨æ•°ç»„ `nums` ä¸­ã€‚

ç°åœ¨è¦æ±‚ä½ æˆ³ç ´æ‰€æœ‰çš„æ°”çƒã€‚æˆ³ç ´ç¬¬ `i` ä¸ªæ°”çƒï¼Œä½ å¯ä»¥è·å¾— `nums[i - 1] * nums[i] * nums[i + 1]` æšç¡¬å¸ã€‚ è¿™é‡Œçš„ `i - 1` å’Œ `i + 1` ä»£è¡¨å’Œ `i` ç›¸é‚»çš„ä¸¤ä¸ªæ°”çƒçš„åºå·ã€‚å¦‚æœ `i - 1`æˆ– `i + 1` è¶…å‡ºäº†æ•°ç»„çš„è¾¹ç•Œï¼Œé‚£ä¹ˆå°±å½“å®ƒæ˜¯ä¸€ä¸ªæ•°å­—ä¸º `1` çš„æ°”çƒã€‚

æ±‚æ‰€èƒ½è·å¾—ç¡¬å¸çš„æœ€å¤§æ•°é‡ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [3,1,5,8]
è¾“å‡ºï¼š167
è§£é‡Šï¼š
nums = [3,1,5,8] --> [3,5,8] --> [3,8] --> [8] --> []
coins =  3*1*5    +   3*5*8   +  1*3*8  + 1*8*1 = 167
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,5]
è¾“å‡ºï¼š10
```

è¿™é“é¢˜çš„æ ¸å¿ƒéš¾ç‚¹åœ¨äº**çŠ¶æ€è½¬ç§»çš„æ ¸å¿ƒ**æ˜¯é€‰å®šä¸€ä¸ªæ°”çƒ `k` åœ¨åŒºé—´ `(i, j)` å†…ä½œä¸ºæœ€åä¸€ä¸ªæˆ³ç ´çš„æ°”çƒï¼ˆå³åŒºé—´ä¸­é—´çš„æ°”çƒï¼‰ã€‚ä¸€æ—¦æˆ³ç ´äº† `k`ï¼Œæˆ‘ä»¬å°±åˆ†æˆä¸¤ä¸ªå­é—®é¢˜ï¼š

- å·¦è¾¹åŒºé—´ï¼š`(i, k)`
- å³è¾¹åŒºé—´ï¼š`(k, j)`



```java
public class Solution {
    // è®¡ç®—æˆ³æ°”çƒçš„æœ€å¤§ç¡¬å¸æ•°
    public int maxCoins(int[] nums) {
        // è·å–åŸå§‹æ•°ç»„ nums çš„é•¿åº¦
        int numsSize = nums.length;

        // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º numsSize + 2 çš„ä¸´æ—¶æ•°ç»„ tempNumsï¼ˆåŠ 2æ˜¯ä¸ºäº†åœ¨æ•°ç»„é¦–å°¾åŠ ä¸Š1ï¼‰
        int[] tempNums = new int[numsSize + 2];

        // åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„ dpï¼Œç”¨æ¥å­˜å‚¨æ¯ä¸ªåŒºé—´çš„æœ€å¤§ç¡¬å¸æ•°
        // dp[i][j] è¡¨ç¤ºæˆ³ç ´åŒºé—´ (i, j) å†…æ‰€æœ‰æ°”çƒï¼ˆå¼€åŒºé—´ï¼Œä¸åŒ…æ‹¬ i å’Œ jï¼‰èƒ½è·å¾—çš„æœ€å¤§ç¡¬å¸æ•°
        int[][] dp = new int[numsSize + 2][numsSize + 2];

        // å°†åŸæ•°ç»„ nums ä¸­çš„å…ƒç´ å¤åˆ¶åˆ° tempNums æ•°ç»„ä¸­
        // tempNums æ•°ç»„çš„ä¸‹æ ‡ä» 1 åˆ° numsSize ä¹‹é—´å­˜å‚¨ nums æ•°ç»„çš„å…ƒç´ 
        for (int i = 0; i < numsSize; i++) {
            tempNums[i + 1] = nums[i];
        }

        // åœ¨ä¸´æ—¶æ•°ç»„çš„é¦–å°¾æ·»åŠ 1ï¼Œä¾¿äºåç»­å¤„ç†è¾¹ç•Œæ¡ä»¶
        tempNums[0] = tempNums[numsSize + 1] = 1;

        // åŠ¨æ€è§„åˆ’è®¡ç®—æœ€å¤§ç¡¬å¸æ•°
        // i ä» numsSize - 1 åˆ° 0 è¿›è¡Œå€’åºéå†ï¼Œè¡¨ç¤ºæˆ‘ä»¬ä»å°åŒºé—´é€æ¸æ‰©å±•åˆ°å¤§åŒºé—´
        for (int i = numsSize - 1; i >= 0; i--) {
            // j è¡¨ç¤ºå½“å‰å¤„ç†çš„åŒºé—´å³ç«¯ç‚¹ï¼ŒåŒºé—´èŒƒå›´æ˜¯ (i, j)
            // æ³¨æ„è¿™é‡Œ j ä» i+2 å¼€å§‹ï¼Œè¡¨ç¤ºåŒºé—´çš„æœ€å°é•¿åº¦æ˜¯2
            for (int j = i + 2; j <= numsSize + 1; j++) {
                // k ä»£è¡¨åœ¨åŒºé—´ (i, j) å†…é€‰æ‹©æœ€åä¸€ä¸ªæˆ³ç ´çš„æ°”çƒ
                for (int k = i + 1; k < j; k++) {
                    // æ›´æ–° dp[i][j]ï¼Œè®¡ç®—æˆ³ç ´æ°”çƒ k åçš„ç¡¬å¸æ•°
                    // 1. dp[i][k] è¡¨ç¤ºæˆ³ç ´åŒºé—´ (i, k) å†…æ‰€æœ‰æ°”çƒåè·å¾—çš„ç¡¬å¸æ•°
                    // 2. dp[k][j] è¡¨ç¤ºæˆ³ç ´åŒºé—´ (k, j) å†…æ‰€æœ‰æ°”çƒåè·å¾—çš„ç¡¬å¸æ•°
                    // 3. tempNums[i] * tempNums[k] * tempNums[j] æ˜¯æˆ³ç ´æ°”çƒ k æ—¶è·å¾—çš„ç¡¬å¸æ•°
                    dp[i][j] = Math.max(dp[i][j], dp[i][k] + dp[k][j] + tempNums[i] * tempNums[k] * tempNums[j]);
                }
            }
        }

        // è¿”å›æˆ³ç ´æ•´ä¸ªæ°”çƒåŒºé—´ [0, numsSize+1] å†…æ‰€æœ‰æ°”çƒçš„æœ€å¤§ç¡¬å¸æ•°
        return dp[0][numsSize + 1];
    }
}
```

# å•è°ƒæ ˆ

### 739.æ¯æ—¥æ¸©åº¦ï¼ˆ3.21ï¼‰

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `temperatures` ï¼Œè¡¨ç¤ºæ¯å¤©çš„æ¸©åº¦ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ `answer` ï¼Œå…¶ä¸­ `answer[i]` æ˜¯æŒ‡å¯¹äºç¬¬ `i` å¤©ï¼Œä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦å‡ºç°åœ¨å‡ å¤©åã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ `0` æ¥ä»£æ›¿ã€‚



**ç¤ºä¾‹ 1:**

```
è¾“å…¥: temperatures = [73,74,75,71,69,72,76,73]
è¾“å‡º: [1,1,4,2,1,1,0,0]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: temperatures = [30,40,50,60]
è¾“å‡º: [1,1,1,0]
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: temperatures = [30,60,90]
è¾“å‡º: [1,1,0]
```



```java
import java.util.Stack;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    public int[] dailyTemperatures(int[] temperatures) {
        // åˆ›å»ºä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨ç»“æœï¼Œé•¿åº¦å’Œè¾“å…¥æ•°ç»„ç›¸åŒ
        int[] result = new int[temperatures.length];

        // ä½¿ç”¨æ ˆæ¥ä¿å­˜ç´¢å¼•ï¼Œæ ˆä¸­å­˜å‚¨çš„æ˜¯æ¸©åº¦æ•°ç»„ä¸­å…ƒç´ çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯æ¸©åº¦æœ¬èº«
        Stack<Integer> monotonicStacks = new Stack<>();

        // éå†æ¸©åº¦æ•°ç»„
        for (int i = 0; i < temperatures.length; i++) {
            // å½“æ ˆä¸ä¸ºç©ºï¼Œä¸”å½“å‰æ¸©åº¦å¤§äºæ ˆé¡¶ç´¢å¼•å¯¹åº”çš„æ¸©åº¦æ—¶ï¼Œæ„å‘³ç€æ‰¾åˆ°ä¸€ä¸ªæ›´é«˜çš„æ¸©åº¦
            while (!monotonicStacks.isEmpty() && temperatures[i] > temperatures[monotonicStacks.peek()]) {
                // å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œè¡¨ç¤ºæ‰¾åˆ°è¿™ä¸ªç´¢å¼•çš„æ¸©åº¦çš„ä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦
                int index = monotonicStacks.pop();
                // è®¡ç®—å‡ºå‡ å¤©åæ¸©åº¦ä¼šå‡é«˜ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨å¯¹åº”ä½ç½®
                result[index] = i - index;
            }
            // å°†å½“å‰ç´¢å¼•å‹å…¥æ ˆä¸­
            monotonicStacks.push(i);
        }
        // è¿”å›ç»“æœæ•°ç»„
        return result;
    }
}

```

**è§£é‡Š**

**åˆå§‹åŒ–ç»“æœæ•°ç»„**ï¼š

- `int[] result = new int[temperatures.length];`
- åˆ›å»ºä¸€ä¸ªä¸è¾“å…¥æ•°ç»„ `temperatures` å¤§å°ç›¸åŒçš„ç»“æœæ•°ç»„ `result`ï¼Œç”¨äºå­˜å‚¨æ¯ä¸€å¤©è·ç¦»ä¸‹ä¸€æ¬¡æ¸©åº¦å‡é«˜çš„å¤©æ•°ã€‚

**åˆ›å»ºå•è°ƒæ ˆ**ï¼š

- `Stack<Integer> monotonicStacks = new Stack<>();`
- ç”¨æ¥å­˜å‚¨æ¸©åº¦æ•°ç»„çš„ç´¢å¼•ã€‚è¿™ä¸ªæ ˆä¿æŒäº†ä¸€ä¸ªå•è°ƒé€’å‡çš„æ€§è´¨ï¼Œå³æ ˆä¸­ç´¢å¼•å¯¹åº”çš„æ¸©åº¦æ˜¯é€’å‡çš„ã€‚

**éå†æ¸©åº¦æ•°ç»„**ï¼š

- `for (int i = 0; i < temperatures.length; i++) { ... }`
- éå†æ•´ä¸ªæ¸©åº¦æ•°ç»„ `temperatures`ã€‚

**å¯»æ‰¾ä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦**ï¼š

- `while (!monotonicStacks.isEmpty() && temperatures[i] > temperatures[monotonicStacks.peek()]) { ... }`
- æ¯å½“é‡åˆ°ä¸€ä¸ªæ¸©åº¦é«˜äºæ ˆé¡¶ç´¢å¼•å¯¹åº”çš„æ¸©åº¦æ—¶ï¼Œæ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œè¡¨ç¤ºå·²ç»æ‰¾åˆ°äº†è¿™ä¸ªç´¢å¼•çš„ä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦ã€‚è®¡ç®— `result[index] = i - index;`ï¼Œè¡¨ç¤ºå¤©æ•°å·®ã€‚

**å‹å…¥å½“å‰ç´¢å¼•**ï¼š

- `monotonicStacks.push(i);`
- å°†å½“å‰æ¸©åº¦çš„ç´¢å¼• `i` å‹å…¥æ ˆä¸­ï¼Œç­‰å¾…åç»­æ›´é«˜æ¸©åº¦çš„åˆ¤æ–­ã€‚

**è¿”å›ç»“æœæ•°ç»„**ï¼š

- `return result;`
- æœ€ç»ˆè¿”å›ç»“æœæ•°ç»„ `result`ï¼Œæ¯ä¸ªä½ç½®å­˜å‚¨çš„å¤©æ•°è¡¨ç¤ºä»è¯¥å¤©èµ·éœ€ç­‰å¾…å¤šå°‘å¤©æ‰èƒ½é‡åˆ°æ›´é«˜çš„æ¸©åº¦ï¼›å¦‚æœåœ¨ä¹‹åçš„æ—¥å­é‡Œå†ä¹Ÿæ²¡æœ‰æ›´é«˜æ¸©åº¦ï¼Œåˆ™è¯¥ä½ç½®å€¼ä¸º `0`ã€‚

### 496.ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼ˆ3.31ï¼‰

`nums1` ä¸­æ•°å­— `x` çš„ **ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ** æ˜¯æŒ‡ `x` åœ¨ `nums2` ä¸­å¯¹åº”ä½ç½® **å³ä¾§** çš„ **ç¬¬ä¸€ä¸ª** æ¯” `x` å¤§çš„å…ƒç´ ã€‚

ç»™ä½ ä¸¤ä¸ª **æ²¡æœ‰é‡å¤å…ƒç´ ** çš„æ•°ç»„ `nums1` å’Œ `nums2` ï¼Œä¸‹æ ‡ä» **0** å¼€å§‹è®¡æ•°ï¼Œå…¶ä¸­`nums1` æ˜¯ `nums2` çš„å­é›†ã€‚

å¯¹äºæ¯ä¸ª `0 <= i < nums1.length` ï¼Œæ‰¾å‡ºæ»¡è¶³ `nums1[i] == nums2[j]` çš„ä¸‹æ ‡ `j` ï¼Œå¹¶ä¸”åœ¨ `nums2` ç¡®å®š `nums2[j]` çš„ **ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ** ã€‚å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œé‚£ä¹ˆæœ¬æ¬¡æŸ¥è¯¢çš„ç­”æ¡ˆæ˜¯ `-1` ã€‚

è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º `nums1.length` çš„æ•°ç»„ `ans` ä½œä¸ºç­”æ¡ˆï¼Œæ»¡è¶³ `ans[i]` æ˜¯å¦‚ä¸Šæ‰€è¿°çš„ **ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ** ã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums1 = [4,1,2], nums2 = [1,3,4,2].
è¾“å‡ºï¼š[-1,3,-1]
è§£é‡Šï¼šnums1 ä¸­æ¯ä¸ªå€¼çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ å¦‚ä¸‹æ‰€è¿°ï¼š
- 4 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,3,4,2]ã€‚ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ -1 ã€‚
- 1 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,3,4,2]ã€‚ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯ 3 ã€‚
- 2 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,3,4,2]ã€‚ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ -1 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums1 = [2,4], nums2 = [1,2,3,4].
è¾“å‡ºï¼š[3,-1]
è§£é‡Šï¼šnums1 ä¸­æ¯ä¸ªå€¼çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ å¦‚ä¸‹æ‰€è¿°ï¼š
- 2 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,2,3,4]ã€‚ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯ 3 ã€‚
- 4 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,2,3,4]ã€‚ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ -1 ã€‚
```



```java
class Solution {
    public int[] nextGreaterElement(int[] nums1, int[] nums2) {
        // åˆ›å»ºä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨ç»“æœï¼Œé•¿åº¦ä¸ nums1 ç›¸åŒ
        int[] result = new int[nums1.length];

        // åˆ›å»ºä¸€ä¸ªå•è°ƒæ ˆï¼Œç”¨äºå­˜å‚¨ nums2 ä¸­è¿˜æ²¡æœ‰æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ çš„æ•°å­—
        Stack<Integer> monotonicStacks = new Stack<>();

        // åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œç”¨äºæ˜ å°„æ¯ä¸ªå…ƒç´ åˆ°å®ƒåœ¨ nums2 ä¸­çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 
        HashMap<Integer, Integer> auxiliaryMap = new HashMap<>();

        // éå† nums2 æ•°ç»„ï¼Œå¯»æ‰¾æ¯ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 
        for (int i = 0; i < nums2.length; i++) {
            // å¦‚æœæ ˆä¸ä¸ºç©ºä¸”å½“å‰å…ƒç´ å¤§äºæ ˆé¡¶å…ƒç´ ï¼Œè¯´æ˜æ‰¾åˆ°äº†æ ˆé¡¶å…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 
            while (!monotonicStacks.isEmpty() && nums2[i] > monotonicStacks.peek()) {
                // å°†æ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œå¹¶åœ¨å“ˆå¸Œè¡¨ä¸­è®°å½•å®ƒçš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 
                auxiliaryMap.put(monotonicStacks.pop(), nums2[i]);
            }
            // å°†å½“å‰å…ƒç´ å‹å…¥æ ˆä¸­ï¼Œç­‰å¾…å®ƒçš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ çš„æŸ¥æ‰¾
            monotonicStacks.push(nums2[i]);
        }

        // å¯¹äºæ ˆä¸­å‰©ä½™çš„å…ƒç´ ï¼Œå®ƒä»¬åœ¨ nums2 ä¸­æ²¡æœ‰ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œå› æ­¤æ˜ å°„ä¸º -1
        while (!monotonicStacks.isEmpty()) {
            auxiliaryMap.put(monotonicStacks.pop(), -1);
        }

        // éå† nums1 æ•°ç»„ï¼Œåˆ©ç”¨å“ˆå¸Œè¡¨æ‰¾åˆ°å®ƒä»¬å¯¹åº”çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 
        for (int i = 0; i < nums1.length; i++) {
            result[i] = auxiliaryMap.get(nums1[i]);
        }

        // è¿”å›ç»“æœæ•°ç»„
        return result;
    }
}
```



```java
/**
 * è§£å†³ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ é—®é¢˜çš„ç±»
 * å®ƒæä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥æ‰¾å‡ºä¸€ä¸ªæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 
 */
class Solution {
    /**
     * å¯»æ‰¾ nums1 ä¸­æ¯ä¸ªå…ƒç´ åœ¨ nums2 ä¸­çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 
     * 
     * @param nums1 æŸ¥è¯¢çš„å…ƒç´ æ•°ç»„
     * @param nums2 è¢«æŸ¥è¯¢çš„æ•°ç»„ï¼ŒåŒ…å« nums1 ä¸­çš„æ‰€æœ‰å…ƒç´ 
     * @return è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å« nums1 ä¸­æ¯ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸º -1
     */
    public int[] nextGreaterElement(int[] nums1, int[] nums2) {
        // è¾…åŠ©å“ˆå¸Œè¡¨ï¼Œç”¨äºå­˜å‚¨å…ƒç´ åŠå…¶ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ 
        HashMap<Integer, Integer> auxilairyMap = new HashMap<>();
        // ä¸´æ—¶æ ˆï¼Œç”¨äºç»´æŠ¤ä¸€ä¸ªé€’å‡çš„é¡ºåº
        Stack<Integer> tempStack = new Stack<>();
        // ç»“æœæ•°ç»„ï¼Œç”¨äºå­˜æ”¾æŸ¥è¯¢ç»“æœ
        int[] result = new int[nums1.length];
        
        // éå† nums2ï¼Œå¡«å……è¾…åŠ©å“ˆå¸Œè¡¨
        for (int i = 0; i < nums2.length; i++) {
            // å½“æ ˆä¸ä¸ºç©ºä¸”å½“å‰å…ƒç´ å¤§äºæ ˆé¡¶å…ƒç´ æ—¶ï¼Œå°†æ ˆé¡¶å…ƒç´ ä¸å…¶ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ å­˜å…¥å“ˆå¸Œè¡¨
            while (!tempStack.isEmpty() && nums2[i] > tempStack.peek()) {
                auxilairyMap.put(tempStack.pop(), nums2[i]);
            }
            // å°†å½“å‰å…ƒç´ å‹å…¥æ ˆä¸­
            tempStack.push(nums2[i]);
        }
        
        // éå† nums1ï¼Œæ ¹æ®è¾…åŠ©å“ˆå¸Œè¡¨è·å–ç»“æœ
        for (int i = 0; i < nums1.length; i++) {
            // ä»å“ˆå¸Œè¡¨ä¸­è·å– nums1 ä¸­æ¯ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸º -1
            result[i] = auxilairyMap.getOrDefault(nums1[i], -1);
        }
        
        // è¿”å›ç»“æœæ•°ç»„
        return result;
    }
}
```



### 503.ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ IIï¼ˆ4.3ï¼‰

ç»™å®šä¸€ä¸ªå¾ªç¯æ•°ç»„ï¼ˆæœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¾“å‡ºæ¯ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ã€‚æ•°å­— x çš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ æ˜¯æŒ‰æ•°ç»„éå†é¡ºåºï¼Œè¿™ä¸ªæ•°å­—ä¹‹åçš„ç¬¬ä¸€ä¸ªæ¯”å®ƒæ›´å¤§çš„æ•°ï¼Œè¿™æ„å‘³ç€ä½ åº”è¯¥å¾ªç¯åœ°æœç´¢å®ƒçš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¾“å‡º -1ã€‚

ç¤ºä¾‹ 1:

- è¾“å…¥: [1,2,1]
- è¾“å‡º: [2,-1,2]
- è§£é‡Š: ç¬¬ä¸€ä¸ª 1 çš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°æ˜¯ 2ï¼›æ•°å­— 2 æ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°ï¼›ç¬¬äºŒä¸ª 1 çš„ä¸‹ä¸€ä¸ªæœ€å¤§çš„æ•°éœ€è¦å¾ªç¯æœç´¢ï¼Œç»“æœä¹Ÿæ˜¯ 2ã€‚

```java
import java.util.Arrays;
import java.util.Stack;

class Solution {
    public int[] nextGreaterElements(int[] nums) {
        // åˆ›å»ºä¸€ä¸ªç»“æœæ•°ç»„ï¼Œé•¿åº¦ä¸ nums ç›¸åŒï¼Œåˆå§‹æ—¶å…¨éƒ¨å¡«å……ä¸º -1
        int[] result = new int[nums.length];
        Arrays.fill(result, -1);  // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œé»˜è®¤å€¼ä¸º -1

        // åˆ›å»ºä¸€ä¸ªå•è°ƒæ ˆï¼Œç”¨äºå­˜å‚¨ nums ä¸­å…ƒç´ çš„ç´¢å¼•
        Stack<Integer> monotonicStacks = new Stack<>();

        // éå†æ•°ç»„ä¸¤å€é•¿åº¦çš„ç´¢å¼•ï¼Œä»¥æ¨¡æ‹Ÿå¾ªç¯æ•°ç»„çš„æ•ˆæœ
        for (int i = 0; i < nums.length * 2; i++) {
            // i % nums.length ç”¨äºå°†ç´¢å¼•æ˜ å°„å›åŸå§‹æ•°ç»„èŒƒå›´
            while (!monotonicStacks.isEmpty() && nums[i % nums.length] > nums[monotonicStacks.peek()]) {
                // å¦‚æœå½“å‰å…ƒç´ å¤§äºæ ˆé¡¶å…ƒç´ å¯¹åº”çš„å…ƒç´ ï¼Œæ›´æ–°ç»“æœæ•°ç»„
                int index = monotonicStacks.pop();
                result[index] = nums[i % nums.length];
            }
            // åªåœ¨ç¬¬ä¸€æ¬¡éå†æ•°ç»„æ—¶ï¼Œå°†ç´¢å¼•å‹å…¥æ ˆä¸­
            if (i < nums.length) {
                monotonicStacks.push(i);
            }
        }

        // è¿”å›ç»“æœæ•°ç»„
        return result;
    }
}
```

### 42.æ¥é›¨æ°´ï¼ˆ4.21ï¼‰

ç»™å®š n ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚

ç¤ºä¾‹ 1ï¼š

![img](https://code-thinking-1253855093.cos.ap-guangzhou.myqcloud.com/pics/20210713205038.png)

- è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]
- è¾“å‡ºï¼š6
- è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚

```java
import java.util.Stack;

class Solution {
    public int trap(int[] height) {
        // åˆå§‹åŒ–ç»“æœå˜é‡ resultAreaï¼Œç”¨äºå­˜å‚¨æœ€ç»ˆè®¡ç®—å‡ºæ¥çš„æ€»é›¨æ°´é¢ç§¯
        int resultArea = 0;

        // åˆ›å»ºä¸€ä¸ªå•è°ƒæ ˆï¼Œç”¨äºå­˜å‚¨æ•°ç»„ä¸­çš„ç´¢å¼•
        Stack<Integer> monotonicStacks = new Stack<>();

        // éå†æ•´ä¸ªé«˜åº¦æ•°ç»„
        for (int i = 0; i < height.length; i++) {
            // å¦‚æœå½“å‰é«˜åº¦å¤§äºæ ˆé¡¶å…ƒç´ å¯¹åº”çš„é«˜åº¦ï¼Œè¯´æ˜å¯ä»¥å­˜å‚¨é›¨æ°´
            while (!monotonicStacks.isEmpty() && height[i] > height[monotonicStacks.peek()]) {
                // å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œä½œä¸ºå½“å‰è€ƒå¯Ÿçš„åº•éƒ¨
                int mid = monotonicStacks.pop();

                // å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œè®¡ç®—é›¨æ°´é¢ç§¯
                if (!monotonicStacks.isEmpty()) {
                    // è·å–å·¦è¾¹ç•Œçš„é«˜åº¦ï¼Œå¹¶è®¡ç®—å½“å‰æ¥æ°´åŒºçš„é«˜åº¦å·®
                    int hight = Math.min(height[monotonicStacks.peek()], height[i]) - height[mid];
                    // è®¡ç®—å½“å‰æ¥æ°´åŒºçš„å®½åº¦ï¼Œå³ä¸¤ä¸ªæŸ±å­ä¹‹é—´çš„è·ç¦»
                    int width = i - monotonicStacks.peek() - 1;
                    // é¢ç§¯æ˜¯é«˜åº¦å·®ä¹˜ä»¥å®½åº¦ï¼Œç´¯åŠ åˆ°ç»“æœä¸­
                    resultArea += hight * width;
                }
            }
            // å°†å½“å‰ç´¢å¼•å‹å…¥æ ˆä¸­
            monotonicStacks.push(i);
        }
        // è¿”å›ç»“æœ
        return resultArea;
    }
}

```

### 84.æŸ±çŠ¶å›¾æœ€å¤§çš„å›¾å½¢ï¼ˆ3.29ï¼‰

ç»™å®š n ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚

æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210803220437.png" alt="img" style="zoom:50%;" />

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210803220506.png" alt="img" style="zoom:50%;" />

```java
import java.util.Stack;

class Solution {
    public int largestRectangleArea(int[] heights) {
        int resultArea = 0;

        // åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ newHeightsï¼Œåœ¨åŸå§‹ heights çš„åŸºç¡€ä¸Šï¼Œå‰åå„åŠ ä¸€ä¸ª 0ã€‚
        // åœ¨æ•°ç»„å‰ååŠ  0 çš„ç›®çš„æ˜¯ä¸ºäº†å¤„ç†ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š
        // 1. **å¤„ç†é¡ºåºæ•°ç»„çš„æƒ…å†µ**ï¼š
        //    å¯¹äºä¸€ä¸ªå®Œå…¨é€’å¢çš„æ•°ç»„ï¼Œå¦‚æœä¸åŠ  0ï¼Œæ ˆä¸­çš„å…ƒç´ ä¼šä¸€ç›´é€’å¢ï¼Œå¯¼è‡´æ— æ³•å¼¹å‡ºå…ƒç´ è¿›è¡Œé¢ç§¯è®¡ç®—ã€‚
        //    ä¾‹å¦‚ï¼š[1, 2, 3, 4, 5]ï¼Œå¦‚æœæ²¡æœ‰æœ«å°¾çš„ 0ï¼Œå°†æ— æ³•è®¡ç®—è¿™äº›æŸ±å­çš„é¢ç§¯ã€‚
        // 2. **å¤„ç†å€’åºæ•°ç»„çš„æƒ…å†µ**ï¼š
        //    å¯¹äºä¸€ä¸ªå®Œå…¨é€’å‡çš„æ•°ç»„ï¼Œè™½ç„¶ä¼šå¼¹å‡ºæ‰€æœ‰å…ƒç´ è®¡ç®—é¢ç§¯ï¼Œä½†å› ä¸ºæ²¡æœ‰å‰é¢çš„ 0 ä½œä¸ºå·¦è¾¹ç•Œï¼Œ
        //    å¯èƒ½å¯¼è‡´è®¡ç®—é¢ç§¯æ—¶ç¼ºå°‘åˆé€‚çš„å·¦è¾¹ç•Œã€‚ä¾‹å¦‚ï¼š[5, 4, 3, 2, 1]ï¼Œå¦‚æœæ²¡æœ‰å‰é¢çš„ 0ï¼Œè®¡ç®—é¢ç§¯æ—¶ä¼šå‡ºé”™ã€‚
        int[] newHeights = new int[heights.length + 2];
        newHeights[0] = 0;
        newHeights[newHeights.length - 1] = 0;
        for (int i = 1; i <= heights.length; i++) {
            newHeights[i] = heights[i - 1];
        }

        // åˆ›å»ºå•è°ƒæ ˆï¼Œç”¨äºå­˜å‚¨æŸ±å­çš„ç´¢å¼•ï¼Œæ ˆä¸­çš„æŸ±å­é«˜åº¦ä¿æŒéé€’å‡é¡ºåºã€‚
        Stack<Integer> monotonicStacks = new Stack<>();

        // éå†æ•´ä¸ªæ–°æ•°ç»„ newHeightsï¼Œè®¡ç®—æœ€å¤§çŸ©å½¢é¢ç§¯ã€‚
        for (int i = 0; i < newHeights.length; i++) {
            // å½“å½“å‰æŸ±å­é«˜åº¦å°äºæ ˆé¡¶æŸ±å­é«˜åº¦æ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶æŸ±å­ï¼Œå¹¶è®¡ç®—ä»¥è¯¥æŸ±å­ä¸ºé«˜çš„çŸ©å½¢é¢ç§¯ã€‚
            while (!monotonicStacks.isEmpty() && newHeights[i] < newHeights[monotonicStacks.peek()]) {
                int mid = monotonicStacks.pop();
                if (!monotonicStacks.isEmpty()) {
                    int left = monotonicStacks.peek();  // å·¦è¾¹ç•Œç´¢å¼•
                    int right = i;  // å³è¾¹ç•Œç´¢å¼•
                    int hight = newHeights[mid];  // å½“å‰æŸ±å­çš„é«˜åº¦
                    int width = right - left - 1;  // çŸ©å½¢çš„å®½åº¦ï¼ˆå·¦å³è¾¹ç•Œä¹‹é—´çš„è·ç¦»ï¼‰
                    resultArea = Math.max(resultArea, hight * width);  // æ›´æ–°æœ€å¤§çŸ©å½¢é¢ç§¯
                }
            }
            // å°†å½“å‰æŸ±å­çš„ç´¢å¼•å‹å…¥æ ˆä¸­ã€‚
            monotonicStacks.push(i);
        }

        // è¿”å›æœ€å¤§çŸ©å½¢é¢ç§¯ã€‚
        return resultArea;
    }
}

```

# å›¾è®º

### 797.æ‰€æœ‰å¯èƒ½çš„è·¯å¾„

ç»™ä½ ä¸€ä¸ªæœ‰ n ä¸ªèŠ‚ç‚¹çš„ æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼Œè¯·ä½ æ‰¾å‡ºæ‰€æœ‰ä»èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ n-1 çš„è·¯å¾„å¹¶è¾“å‡ºï¼ˆä¸è¦æ±‚æŒ‰ç‰¹å®šé¡ºåºï¼‰

graph[i] æ˜¯ä¸€ä¸ªä»èŠ‚ç‚¹ i å¯ä»¥è®¿é—®çš„æ‰€æœ‰èŠ‚ç‚¹çš„åˆ—è¡¨ï¼ˆå³ä»èŠ‚ç‚¹ i åˆ°èŠ‚ç‚¹ graph[i] [j]å­˜åœ¨ä¸€æ¡æœ‰å‘è¾¹ï¼‰ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20221203135439.png" alt="img" style="zoom: 50%;" />

```java
/**
 * æ‰€æœ‰å¯èƒ½çš„è·¯å¾„
 */
class Solution {
    /**
     * è·å–ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æ‰€æœ‰å¯èƒ½è·¯å¾„
     * @param graph å›¾çš„é‚»æ¥çŸ©é˜µè¡¨ç¤º
     * @return æ‰€æœ‰å¯èƒ½çš„è·¯å¾„åˆ—è¡¨
     */
    public List<List<Integer>> allPathsSourceTarget(int[][] graph) {
        List<List<Integer>> res = new ArrayList<>(); // å­˜å‚¨ç»“æœçš„åˆ—è¡¨
        List<Integer> path = new ArrayList<>(); // å­˜å‚¨å½“å‰è·¯å¾„çš„åˆ—è¡¨
        path.add(0); // å°†èµ·ç‚¹æ·»åŠ åˆ°è·¯å¾„ä¸­
        dfs(graph, 0, path, res); // ä»èµ·ç‚¹å¼€å§‹æ·±åº¦ä¼˜å…ˆæœç´¢
        return res; // è¿”å›ç»“æœåˆ—è¡¨
    }

    /**
     * æ·±åº¦ä¼˜å…ˆæœç´¢
     * @param graph å›¾çš„é‚»æ¥çŸ©é˜µè¡¨ç¤º
     * @param node å½“å‰èŠ‚ç‚¹
     * @param path å½“å‰è·¯å¾„
     * @param res ç»“æœåˆ—è¡¨
     */
    private void dfs(int[][] graph, int node, List<Integer> path, List<List<Integer>> res) {
        if (node == graph.length - 1) { // å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯ç»ˆç‚¹
            res.add(new ArrayList<>(path)); // å°†å½“å‰è·¯å¾„æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
            return; // è¿”å›
        }
        for (int next : graph[node]) { // éå†å½“å‰èŠ‚ç‚¹çš„é‚»æ¥èŠ‚ç‚¹
            path.add(next); // å°†é‚»æ¥èŠ‚ç‚¹æ·»åŠ åˆ°è·¯å¾„ä¸­
            dfs(graph, next, path, res); // é€’å½’æœç´¢é‚»æ¥èŠ‚ç‚¹
            path.remove(path.size() - 1); // å›æº¯ï¼Œå°†é‚»æ¥èŠ‚ç‚¹ä»è·¯å¾„ä¸­ç§»é™¤
        }
    }
}
```

### 200.å²›å±¿æ•°é‡ï¼ˆhot100ï¼‰(4.8)

ç»™ä½ ä¸€ä¸ªç”± '1'ï¼ˆé™†åœ°ï¼‰å’Œ '0'ï¼ˆæ°´ï¼‰ç»„æˆçš„çš„äºŒç»´ç½‘æ ¼ï¼Œè¯·ä½ è®¡ç®—ç½‘æ ¼ä¸­å²›å±¿çš„æ•°é‡ã€‚

å²›å±¿æ€»æ˜¯è¢«æ°´åŒ…å›´ï¼Œå¹¶ä¸”æ¯åº§å²›å±¿åªèƒ½ç”±æ°´å¹³æ–¹å‘å’Œ/æˆ–ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿æ¥å½¢æˆã€‚

æ­¤å¤–ï¼Œä½ å¯ä»¥å‡è®¾è¯¥ç½‘æ ¼çš„å››æ¡è¾¹å‡è¢«æ°´åŒ…å›´ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220726093256.png" alt="img" style="zoom: 50%;" />



æœ¬é¢˜æ€è·¯ï¼Œæ˜¯ç”¨é‡åˆ°ä¸€ä¸ªæ²¡æœ‰éå†è¿‡çš„èŠ‚ç‚¹é™†åœ°ï¼Œè®¡æ•°å™¨å°±åŠ ä¸€ï¼Œç„¶åæŠŠè¯¥èŠ‚ç‚¹é™†åœ°æ‰€èƒ½éå†åˆ°çš„é™†åœ°éƒ½æ ‡è®°ä¸Šã€‚

åœ¨é‡åˆ°æ ‡è®°è¿‡çš„é™†åœ°èŠ‚ç‚¹å’Œæµ·æ´‹èŠ‚ç‚¹çš„æ—¶å€™ç›´æ¥è·³è¿‡ã€‚ è¿™æ ·è®¡æ•°å™¨å°±æ˜¯æœ€ç»ˆå²›å±¿çš„æ•°é‡ã€‚

ä¸‹é¢çš„ä»£ç ä½¿ç”¨çš„æ˜¯æ·±åº¦ä¼˜å…ˆæœç´¢ DFS çš„åšæ³•ã€‚ä¸ºäº†ç»Ÿè®¡å²›å±¿æ•°é‡åŒæ—¶ä¸é‡å¤è®°å½•ï¼Œæ¯å½“æˆ‘ä»¬æœç´¢åˆ°ä¸€ä¸ªå²›åï¼Œå°±å°†è¿™ä¸ªå²› â€œæ·¹æ²¡â€ â€”â€” å°†è¿™ä¸ªå²›æ‰€å çš„åœ°æ–¹ä» â€œ1â€ æ”¹ä¸º â€œ0â€ï¼Œè¿™æ ·å°±ä¸ç”¨æ‹…å¿ƒåç»­ä¼šé‡å¤è®°å½•è¿™ä¸ªå²›å±¿äº†ã€‚è€Œ DFS çš„è¿‡ç¨‹å°±ä½“ç°åœ¨ â€œæ·¹æ²¡â€ è¿™ä¸€æ­¥ä¸­ã€‚è¯¦è§ä»£ç ï¼š

```java
public int numIslands(char[][] grid) {
    int res = 0; //è®°å½•æ‰¾åˆ°çš„å²›å±¿æ•°é‡
    for(int i = 0;i < grid.length;i++){
        for(int j = 0;j < grid[0].length;j++){
        	//æ‰¾åˆ°â€œ1â€ï¼ŒresåŠ ä¸€ï¼ŒåŒæ—¶æ·¹æ²¡è¿™ä¸ªå²›
            if(grid[i][j] == '1'){
                res++;
                dfs(grid,i,j);
            }
        }
    }
    return res;
}
//ä½¿ç”¨DFSâ€œæ·¹æ²¡â€å²›å±¿
public void dfs(char[][] grid, int i, int j){
	//æœç´¢è¾¹ç•Œï¼šç´¢å¼•è¶Šç•Œæˆ–éå†åˆ°äº†"0"
    if(i < 0 || i >= grid.length || j < 0 || j >= grid[0].length || grid[i][j] == '0') return;
    //å°†è¿™å—åœŸåœ°æ ‡è®°ä¸º"0"
    grid[i][j] = '0';
    //æ ¹æ®"æ¯åº§å²›å±¿åªèƒ½ç”±æ°´å¹³æ–¹å‘æˆ–ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿æ¥å½¢æˆ"ï¼Œå¯¹ä¸Šä¸‹å·¦å³çš„ç›¸é‚»é¡¶ç‚¹è¿›è¡Œdfs
    dfs(grid,i - 1,j);
    dfs(grid,i + 1,j);
    dfs(grid,i,j + 1);
    dfs(grid,i,j - 1);
}
```



```java
/**
 * å²›å±¿æ•°é‡
 */
class Solution {
    boolean[][] visited; // è®°å½•æ˜¯å¦è®¿é—®è¿‡çš„æ•°ç»„
    int[][] move = {{0, 1}, {0, -1}, {1, 0}, {-1, 0}}; // ç§»åŠ¨çš„æ–¹å‘ï¼Œå³ã€å·¦ã€ä¸‹ã€ä¸Š

    /**
     * è®¡ç®—å²›å±¿æ•°é‡
     * @param grid äºŒç»´å­—ç¬¦æ•°ç»„è¡¨ç¤ºçš„åœ°å›¾
     * @return å²›å±¿æ•°é‡
     */
    public int numIslands(char[][] grid) {
        int res = 0; // å²›å±¿æ•°é‡
        visited = new boolean[grid.length][grid[0].length]; // åˆå§‹åŒ–visitedæ•°ç»„

        for (int i = 0; i < grid.length; i++) {
            for (int j = 0; j < grid[0].length; j++) {
                if (!visited[i][j] && grid[i][j] == '1') { // å¦‚æœå½“å‰ä½ç½®æœªè®¿é—®è¿‡ä¸”ä¸ºé™†åœ°
                    bfs(grid, i, j); // è¿›è¡Œå¹¿åº¦ä¼˜å…ˆæœç´¢
                    res++; // å²›å±¿æ•°é‡åŠ 1
                }
            }
        }

        return res;
    }

    /**
     * å¹¿åº¦ä¼˜å…ˆæœç´¢
     * @param grid äºŒç»´å­—ç¬¦æ•°ç»„è¡¨ç¤ºçš„åœ°å›¾
     * @param y å½“å‰ä½ç½®çš„çºµåæ ‡
     * @param x å½“å‰ä½ç½®çš„æ¨ªåæ ‡
     */
    public void bfs(char[][] grid, int y, int x) {
        Deque<int[]> queue = new ArrayDeque<>(); // ä½¿ç”¨é˜Ÿåˆ—ä¿å­˜å¾…è®¿é—®çš„ä½ç½®
        queue.offer(new int[]{y, x}); // å°†å½“å‰ä½ç½®åŠ å…¥é˜Ÿåˆ—
        visited[y][x] = true; // æ ‡è®°å½“å‰ä½ç½®ä¸ºå·²è®¿é—®

        while (!queue.isEmpty()) {
            int[] cur = queue.poll(); // å–å‡ºé˜Ÿåˆ—ä¸­çš„å½“å‰ä½ç½®
            int curY = cur[0]; // å½“å‰ä½ç½®çš„çºµåæ ‡
            int curX = cur[1]; // å½“å‰ä½ç½®çš„æ¨ªåæ ‡

            for (int i = 0; i < 4; i++) { // éå†å››ä¸ªæ–¹å‘
                int nextY = curY + move[i][0]; // è®¡ç®—ä¸‹ä¸€ä¸ªä½ç½®çš„çºµåæ ‡
                int nextX = curX + move[i][1]; // è®¡ç®—ä¸‹ä¸€ä¸ªä½ç½®çš„æ¨ªåæ ‡

                // å¦‚æœä¸‹ä¸€ä¸ªä½ç½®åœ¨åœ°å›¾èŒƒå›´å†…ï¼Œä¸”æœªè®¿é—®è¿‡ä¸”ä¸ºé™†åœ°
                if (nextY >= 0 && nextY < grid.length && nextX >= 0 && nextX < grid[0].length
                        && !visited[nextY][nextX] && grid[nextY][nextX] == '1') {
                    queue.offer(new int[]{nextY, nextX}); // å°†ä¸‹ä¸€ä¸ªä½ç½®åŠ å…¥é˜Ÿåˆ—
                    visited[nextY][nextX] = true; // æ ‡è®°ä¸‹ä¸€ä¸ªä½ç½®ä¸ºå·²è®¿é—®
                }
            }
        }
    }
}
```

### 695.å²›å±¿çš„æœ€å¤§é¢ç§¯

```java
/**
 * è®¡ç®—å²›å±¿çš„æœ€å¤§é¢ç§¯
 */
class Solution {
    /**
     * è®¡ç®—å²›å±¿çš„æœ€å¤§é¢ç§¯
     * @param grid å²›å±¿çš„äºŒç»´æ•°ç»„è¡¨ç¤º
     * @return æœ€å¤§é¢ç§¯
     */
    public int maxAreaOfIsland(int[][] grid) {
        boolean[][] visited = new boolean[grid.length][grid[0].length]; // åˆ›å»ºä¸€ä¸ªä¸å²›å±¿äºŒç»´æ•°ç»„ç›¸åŒå¤§å°çš„visitedæ•°ç»„ï¼Œç”¨äºæ ‡è®°å·²è®¿é—®çš„ä½ç½®
        int maxArea = 0; // åˆå§‹åŒ–æœ€å¤§é¢ç§¯ä¸º0
        for (int i = 0; i < grid.length; i++) { // éå†å²›å±¿äºŒç»´æ•°ç»„çš„è¡Œ
            for (int j = 0; j < grid[0].length; j++) { // éå†å²›å±¿äºŒç»´æ•°ç»„çš„åˆ—
                if (grid[i][j] == 1 && !visited[i][j]) { // å¦‚æœå½“å‰ä½ç½®æ˜¯é™†åœ°ä¸”æœªè¢«è®¿é—®è¿‡
                    maxArea = Math.max(maxArea, dfs(grid, visited, i, j)); // ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢è®¡ç®—å½“å‰å²›å±¿çš„é¢ç§¯ï¼Œå¹¶æ›´æ–°æœ€å¤§é¢ç§¯
                }
            }
        }
        return maxArea; // è¿”å›æœ€å¤§é¢ç§¯
    }

    /**
     * æ·±åº¦ä¼˜å…ˆæœç´¢è®¡ç®—å²›å±¿çš„é¢ç§¯
     * @param grid å²›å±¿çš„äºŒç»´æ•°ç»„è¡¨ç¤º
     * @param visited è®¿é—®æ ‡è®°æ•°ç»„
     * @param i å½“å‰ä½ç½®çš„è¡Œç´¢å¼•
     * @param j å½“å‰ä½ç½®çš„åˆ—ç´¢å¼•
     * @return å½“å‰å²›å±¿çš„é¢ç§¯
     */
    private int dfs(int[][] grid, boolean[][] visited, int i, int j) {
        if (i < 0 || i >= grid.length || j < 0 || j >= grid[0].length || grid[i][j] == 0 || visited[i][j]) {
            return 0; // å¦‚æœå½“å‰ä½ç½®è¶…å‡ºå²›å±¿èŒƒå›´ã€ä¸ºæ°´åŸŸã€æˆ–å·²è¢«è®¿é—®è¿‡ï¼Œåˆ™è¿”å›é¢ç§¯ä¸º0
        }
        visited[i][j] = true; // æ ‡è®°å½“å‰ä½ç½®ä¸ºå·²è®¿é—®
        return 1 + dfs(grid, visited, i - 1, j) // é€’å½’è®¡ç®—ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘çš„é¢ç§¯ï¼Œå¹¶å°†ç»“æœç´¯åŠ 
                + dfs(grid, visited, i + 1, j)
                + dfs(grid, visited, i, j - 1)
                + dfs(grid, visited, i, j + 1);
    }
}
```

### 1020. é£åœ°çš„æ•°é‡

ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º m x n çš„äºŒè¿›åˆ¶çŸ©é˜µ grid ï¼Œå…¶ä¸­ 0 è¡¨ç¤ºä¸€ä¸ªæµ·æ´‹å•å…ƒæ ¼ã€1 è¡¨ç¤ºä¸€ä¸ªé™†åœ°å•å…ƒæ ¼ã€‚

ä¸€æ¬¡ ç§»åŠ¨ æ˜¯æŒ‡ä»ä¸€ä¸ªé™†åœ°å•å…ƒæ ¼èµ°åˆ°å¦ä¸€ä¸ªç›¸é‚»ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰çš„é™†åœ°å•å…ƒæ ¼æˆ–è·¨è¿‡ grid çš„è¾¹ç•Œã€‚

è¿”å›ç½‘æ ¼ä¸­ æ— æ³• åœ¨ä»»æ„æ¬¡æ•°çš„ç§»åŠ¨ä¸­ç¦»å¼€ç½‘æ ¼è¾¹ç•Œçš„é™†åœ°å•å…ƒæ ¼çš„æ•°é‡ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220830100710.png" alt="img" style="zoom:50%;" />

- è¾“å…¥ï¼šgrid = [[0,0,0,0],[1,0,1,0],[0,1,1,0],[0,0,0,0]]
- è¾“å‡ºï¼š3
- è§£é‡Šï¼šæœ‰ä¸‰ä¸ª 1 è¢« 0 åŒ…å›´ã€‚ä¸€ä¸ª 1 æ²¡æœ‰è¢«åŒ…å›´ï¼Œå› ä¸ºå®ƒåœ¨è¾¹ç•Œä¸Šã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220830100742.png" alt="img" style="zoom:50%;" />

- è¾“å…¥ï¼šgrid = [[0,1,1,0],[0,0,1,0],[0,0,1,0],[0,0,0,0]]
- è¾“å‡ºï¼š0
- è§£é‡Šï¼šæ‰€æœ‰ 1 éƒ½åœ¨è¾¹ç•Œä¸Šæˆ–å¯ä»¥åˆ°è¾¾è¾¹ç•Œã€‚



æœ¬é¢˜è¦æ±‚æ‰¾åˆ°ä¸é è¾¹çš„é™†åœ°é¢ç§¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªè¦ä»å‘¨è¾¹æ‰¾åˆ°é™†åœ°ç„¶å é€šè¿‡ dfsæˆ–è€…bfs å°†å‘¨è¾¹é é™†åœ°ä¸”ç›¸é‚»çš„é™†åœ°éƒ½å˜æˆæµ·æ´‹ï¼Œç„¶åå†å»é‡æ–°éå†åœ°å›¾çš„æ—¶å€™ï¼Œç»Ÿè®¡æ­¤æ—¶è¿˜å‰©ä¸‹çš„é™†åœ°å°±å¯ä»¥äº†ã€‚

```java
/**
 * è®¡ç®—é£åœ°çš„æ•°é‡
 */
class Solution {

    // å®šä¹‰å››ä¸ªæ–¹å‘çš„åç§»é‡
    int[][] dirs = new int[][]{{-1, 0}, {1, 0}, {0, -1}, {0, 1}};
    int res = 0;

    /**
     * è®¡ç®—é£åœ°çš„æ•°é‡
     * @param grid äºŒç»´ç½‘æ ¼
     * @return é£åœ°çš„æ•°é‡
     */
    public int numEnclaves(int[][] grid) {
        int m = grid.length;
        int n = grid[0].length;
        // éå†ç¬¬ä¸€åˆ—å’Œæœ€åä¸€åˆ—
        for (int i = 0; i < m; i++) {
            if(grid[i][0] == 1)
                dfs(grid, i, 0);
            if(grid[i][n - 1] == 1)
                dfs(grid, i, n - 1);
        }
        // éå†ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œ
        for (int j = 1; j < n; j++) {
            if (grid[0][j] == 1)
                dfs(grid, 0, j);
            if (grid[m - 1][j] == 1)
                dfs(grid, m - 1, j);
        }
        // ç»Ÿè®¡å‰©ä½™çš„é£åœ°æ•°é‡
        for (int i = 1; i < m; i++) {
            for (int j = 1; j < n; j++){
                if (grid[i][j] == 1)
                    res++;
            }
        }
        return res;
    }

    /**
     * æ·±åº¦ä¼˜å…ˆæœç´¢
     * @param grid äºŒç»´ç½‘æ ¼
     * @param i å½“å‰ä½ç½®çš„è¡Œç´¢å¼•
     * @param j å½“å‰ä½ç½®çš„åˆ—ç´¢å¼•
     */
    private void dfs(int[][] grid, int i, int j) {
        // å°†å½“å‰ä½ç½®æ ‡è®°ä¸ºå·²è®¿é—®
        grid[i][j] = 0;
        // éå†å››ä¸ªæ–¹å‘
        for (int[] dir : dirs) {
            int x = i + dir[0];
            int y = j + dir[1];
            // åˆ¤æ–­æ˜¯å¦åœ¨ç½‘æ ¼èŒƒå›´å†…ä¸”ä¸ºé£åœ°
            if (x >= 0 && x < grid.length && y >= 0 && y < grid[0].length && grid[x][y] == 1)
                dfs(grid, x, y);
        }
    }
}
```

### 130. è¢«å›´ç»•çš„åŒºåŸŸ

ç»™ä½ ä¸€ä¸ª m x n çš„çŸ©é˜µ board ï¼Œç”±è‹¥å¹²å­—ç¬¦ 'X' å’Œ 'O' ï¼Œæ‰¾åˆ°æ‰€æœ‰è¢« 'X' å›´ç»•çš„åŒºåŸŸï¼Œå¹¶å°†è¿™äº›åŒºåŸŸé‡Œæ‰€æœ‰çš„ 'O' ç”¨ 'X' å¡«å……ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220901104745.png" alt="img" style="zoom:50%;" />

- è¾“å…¥ï¼šboard = [["X","X","X","X"],["X","O","O","X"],["X","X","O","X"],["X","O","X","X"]]
- è¾“å‡ºï¼š[["X","X","X","X"],["X","X","X","X"],["X","X","X","X"],["X","O","X","X"]]
- è§£é‡Šï¼šè¢«å›´ç»•çš„åŒºé—´ä¸ä¼šå­˜åœ¨äºè¾¹ç•Œä¸Šï¼Œæ¢å¥è¯è¯´ï¼Œä»»ä½•è¾¹ç•Œä¸Šçš„ 'O' éƒ½ä¸ä¼šè¢«å¡«å……ä¸º 'X'ã€‚ ä»»ä½•ä¸åœ¨è¾¹ç•Œä¸Šï¼Œæˆ–ä¸ä¸è¾¹ç•Œä¸Šçš„ 'O' ç›¸è¿çš„ 'O' æœ€ç»ˆéƒ½ä¼šè¢«å¡«å……ä¸º 'X'ã€‚å¦‚æœä¸¤ä¸ªå…ƒç´ åœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘ç›¸é‚»ï¼Œåˆ™ç§°å®ƒä»¬æ˜¯â€œç›¸è¿â€çš„ã€‚



æ­¥éª¤ä¸€ï¼šæ·±æœæˆ–è€…å¹¿æœå°†åœ°å›¾å‘¨è¾¹çš„'O'å…¨éƒ¨æ”¹æˆ'A'ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220902102337.png" alt="å›¾ä¸€" style="zoom: 33%;" />

æ­¥éª¤äºŒï¼šåœ¨éå†åœ°å›¾ï¼Œå°†'O'å…¨éƒ¨æ”¹æˆ'X'ï¼ˆåœ°å›¾ä¸­é—´çš„'O'æ”¹æˆäº†'X'ï¼‰ï¼Œå°†'A'æ”¹å›'O'ï¼ˆä¿ç•™çš„åœ°å›¾å‘¨è¾¹çš„'O'ï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220902102831.png" alt="å›¾äºŒ" style="zoom:33%;" />

```java
/**
 * è¢«å›´ç»•çš„åŒºåŸŸ
 */
class Solution {

    // å®šä¹‰å››ä¸ªæ–¹å‘çš„åç§»é‡
    int [][] dirs = new int[][]{{-1, 0}, {1, 0}, {0, -1}, {0, 1}};
    int res = 0;

    /**
     * è§£å†³è¢«å›´ç»•çš„åŒºåŸŸé—®é¢˜
     * @param board äºŒç»´å­—ç¬¦æ•°ç»„è¡¨ç¤ºçš„æ£‹ç›˜
     */
    public void solve(char[][] board) {
        if (board.length == 0) {
            return;
        }
        int m = board.length;
        int n = board[0].length;
        // éå†ç¬¬ä¸€åˆ—å’Œæœ€åä¸€åˆ—
        for (int i = 0; i < m; i++){
            if (board[i][0] == 'O')
                dfs(board, i, 0);
            if (board[i][n - 1] == 'O')
                dfs(board, i, n - 1);
        }
        // éå†ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œ
        for (int j = 1; j < n; j++){
            if (board[0][j] == 'O')
                dfs(board, 0, j);
            if (board[m - 1][j] == 'O')
                dfs(board, m - 1, j);
        }
        // å°†å‰©ä½™çš„'O'å˜ä¸º'X'ï¼Œå°†æ ‡è®°çš„'#'å˜å›'O'
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                if (board[i][j] == 'O') {
                    board[i][j] = 'X';
                }
                if (board[i][j] == '#') {
                    board[i][j] = 'O';
                }
            }
        }
    }

    /**
     * æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå°†ä¸è¾¹ç•Œç›¸è¿çš„'O'æ ‡è®°ä¸º'#'
     * @param board äºŒç»´å­—ç¬¦æ•°ç»„è¡¨ç¤ºçš„æ£‹ç›˜
     * @param i å½“å‰ä½ç½®çš„è¡Œç´¢å¼•
     * @param j å½“å‰ä½ç½®çš„åˆ—ç´¢å¼•
     */
    private void dfs(char[][] board, int i, int j) {
        board[i][j] = '#';
        for (int[] dir : dirs) {
            int x = i + dir[0];
            int y = j + dir[1];
            // åˆ¤æ–­æ˜¯å¦è¶Šç•Œï¼Œå¹¶ä¸”ä¸‹ä¸€ä¸ªä½ç½®æ˜¯'O'
            if (x >= 0 && x < board.length && y >= 0 && y < board[0].length && board[x][y] == 'O')
                dfs(board, x, y);
        }
    }
}
```

### 417. å¤ªå¹³æ´‹å¤§è¥¿æ´‹æ°´æµé—®é¢˜

æœ‰ä¸€ä¸ª m Ã— n çš„çŸ©å½¢å²›å±¿ï¼Œä¸ å¤ªå¹³æ´‹ å’Œ å¤§è¥¿æ´‹ ç›¸é‚»ã€‚ â€œå¤ªå¹³æ´‹â€ å¤„äºå¤§é™†çš„å·¦è¾¹ç•Œå’Œä¸Šè¾¹ç•Œï¼Œè€Œ â€œå¤§è¥¿æ´‹â€ å¤„äºå¤§é™†çš„å³è¾¹ç•Œå’Œä¸‹è¾¹ç•Œã€‚

è¿™ä¸ªå²›è¢«åˆ†å‰²æˆä¸€ä¸ªç”±è‹¥å¹²æ–¹å½¢å•å…ƒæ ¼ç»„æˆçš„ç½‘æ ¼ã€‚ç»™å®šä¸€ä¸ª m x n çš„æ•´æ•°çŸ©é˜µ heights ï¼Œ heights[r][c] è¡¨ç¤ºåæ ‡ (r, c) ä¸Šå•å…ƒæ ¼ é«˜äºæµ·å¹³é¢çš„é«˜åº¦ ã€‚

å²›ä¸Šé›¨æ°´è¾ƒå¤šï¼Œå¦‚æœç›¸é‚»å•å…ƒæ ¼çš„é«˜åº¦ å°äºæˆ–ç­‰äº å½“å‰å•å…ƒæ ¼çš„é«˜åº¦ï¼Œé›¨æ°´å¯ä»¥ç›´æ¥å‘åŒ—ã€å—ã€ä¸œã€è¥¿æµå‘ç›¸é‚»å•å…ƒæ ¼ã€‚æ°´å¯ä»¥ä»æµ·æ´‹é™„è¿‘çš„ä»»ä½•å•å…ƒæ ¼æµå…¥æµ·æ´‹ã€‚

è¿”å›ç½‘æ ¼åæ ‡ result çš„ 2D åˆ—è¡¨ ï¼Œå…¶ä¸­ result[i] = [ri, ci] è¡¨ç¤ºé›¨æ°´ä»å•å…ƒæ ¼ (ri, ci) æµåŠ¨ æ—¢å¯æµå‘å¤ªå¹³æ´‹ä¹Ÿå¯æµå‘å¤§è¥¿æ´‹ ã€‚

ç¤ºä¾‹ 1ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20230129103212.png" alt="img" style="zoom:33%;" />

- è¾“å…¥: heights = [[1,2,2,3,5],[3,2,3,4,4],[2,4,5,3,1],[6,7,1,4,5],[5,1,1,2,4]]
- è¾“å‡º: [[0,4],[1,3],[1,4],[2,2],[3,0],[3,1],[4,0]]

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥: heights = [[2,1],[1,2]]
- è¾“å‡º: [[0,0],[0,1],[1,0],[1,1]]



é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ åè¿‡æ¥æƒ³ï¼Œä»å¤ªå¹³æ´‹è¾¹ä¸Šçš„èŠ‚ç‚¹ é€†æµè€Œä¸Šï¼Œå°†éå†è¿‡çš„èŠ‚ç‚¹éƒ½æ ‡è®°ä¸Šã€‚ ä»å¤§è¥¿æ´‹çš„è¾¹ä¸ŠèŠ‚ç‚¹ é€†æµè€Œé•¿ï¼Œå°†éå†è¿‡çš„èŠ‚ç‚¹ä¹Ÿæ ‡è®°ä¸Šã€‚ ç„¶åä¸¤æ–¹éƒ½æ ‡è®°è¿‡çš„èŠ‚ç‚¹å°±æ˜¯æ—¢å¯ä»¥æµå¤ªå¹³æ´‹ä¹Ÿå¯ä»¥æµå¤§è¥¿æ´‹çš„èŠ‚ç‚¹ã€‚

ä»å¤ªå¹³æ´‹è¾¹ä¸ŠèŠ‚ç‚¹å‡ºå‘ï¼Œå¦‚å›¾ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220722103029.png" alt="å›¾ä¸€" style="zoom:33%;" />

ä»å¤§è¥¿æ´‹è¾¹ä¸ŠèŠ‚ç‚¹å‡ºå‘ï¼Œå¦‚å›¾ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220722103330.png" alt="å›¾äºŒ" style="zoom:33%;" />

```java
class Solution {

    int [][] dirs = new int[][]{{-1, 0}, {1, 0}, {0, -1}, {0, 1}}; // å®šä¹‰å››ä¸ªæ–¹å‘çš„åç§»é‡

    public List<List<Integer>> pacificAtlantic(int[][] heights) {
        List<List<Integer>> res = new ArrayList<>(); // å­˜å‚¨ç»“æœçš„åˆ—è¡¨
        if (heights == null || heights.length == 0) { // å¦‚æœè¾“å…¥ä¸ºç©ºæˆ–è€…é«˜åº¦çŸ©é˜µçš„è¡Œæ•°ä¸º0ï¼Œåˆ™ç›´æ¥è¿”å›ç»“æœåˆ—è¡¨
            return res;
        }
        int m = heights.length; // é«˜åº¦çŸ©é˜µçš„è¡Œæ•°
        int n = heights[0].length; // é«˜åº¦çŸ©é˜µçš„åˆ—æ•°
        boolean[][] pacific = new boolean[m][n]; // è®°å½•èƒ½æµå…¥å¤ªå¹³æ´‹çš„ä½ç½®
        boolean[][] atlantic = new boolean[m][n]; // è®°å½•èƒ½æµå…¥å¤§è¥¿æ´‹çš„ä½ç½®
        for (int i = 0; i < m; i++) { // ä»ç¬¬ä¸€åˆ—å’Œæœ€åä¸€åˆ—å¼€å§‹DFSï¼Œå¹¶è®°å½•èƒ½æµå…¥å¤ªå¹³æ´‹å’Œå¤§è¥¿æ´‹çš„ä½ç½®
            dfs(heights, pacific, i, 0, m, n);
            dfs(heights, atlantic, i, n - 1, m, n);
        }
        for (int i = 0; i < n; i++) { // ä»ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œå¼€å§‹DFSï¼Œå¹¶è®°å½•èƒ½æµå…¥å¤ªå¹³æ´‹å’Œå¤§è¥¿æ´‹çš„ä½ç½®
            dfs(heights, pacific, 0, i, m, n);
            dfs(heights, atlantic, m - 1, i, m, n);
        }
        for (int i = 0; i < m; i++) { // éå†æ•´ä¸ªé«˜åº¦çŸ©é˜µ
            for (int j = 0; j < n; j++) {
                if (pacific[i][j] && atlantic[i][j]) { // å¦‚æœä¸€ä¸ªä½ç½®æ—¢èƒ½æµå…¥å¤ªå¹³æ´‹åˆèƒ½æµå…¥å¤§è¥¿æ´‹ï¼Œåˆ™å°†å…¶åŠ å…¥ç»“æœåˆ—è¡¨
                    List<Integer> list = new ArrayList<>();
                    list.add(i);
                    list.add(j);
                    res.add(list);
                }
            }
        }
        return res; // è¿”å›ç»“æœåˆ—è¡¨
    }

    private void dfs(int[][] heights, boolean[][] visited, int i, int j, int m, int n){
        if (visited[i][j]) { // å¦‚æœå½“å‰ä½ç½®å·²ç»è¢«è®¿é—®è¿‡ï¼Œåˆ™ç›´æ¥è¿”å›
            return;
        }
        visited[i][j] = true; // å°†å½“å‰ä½ç½®æ ‡è®°ä¸ºå·²è®¿é—®
        for (int[] dir : dirs) { // éå†å››ä¸ªæ–¹å‘
            int x = i + dir[0]; // è®¡ç®—ä¸‹ä¸€ä¸ªä½ç½®çš„è¡Œåæ ‡
            int y = j + dir[1]; // è®¡ç®—ä¸‹ä¸€ä¸ªä½ç½®çš„åˆ—åæ ‡
            if (x >= 0 && x < m && y >= 0 && y < n && heights[x][y] >= heights[i][j]) { // å¦‚æœä¸‹ä¸€ä¸ªä½ç½®åœ¨çŸ©é˜µèŒƒå›´å†…ä¸”é«˜åº¦ä¸ä½äºå½“å‰ä½ç½®ï¼Œåˆ™ç»§ç»­æ·±åº¦ä¼˜å…ˆæœç´¢
                dfs(heights, visited, x, y, m, n);
            }
        }
    }
}
```

### 827.æœ€å¤§äººå·¥å²›

ç»™ä½ ä¸€ä¸ªå¤§å°ä¸º n x n äºŒè¿›åˆ¶çŸ©é˜µ grid ã€‚æœ€å¤š åªèƒ½å°†ä¸€æ ¼ 0 å˜æˆ 1 ã€‚

è¿”å›æ‰§è¡Œæ­¤æ“ä½œåï¼Œgrid ä¸­æœ€å¤§çš„å²›å±¿é¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ

å²›å±¿ ç”±ä¸€ç»„ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ç›¸è¿çš„ 1 å½¢æˆã€‚

ç¤ºä¾‹ 1:

- è¾“å…¥: grid = [[1, 0], [0, 1]]
- è¾“å‡º: 3
- è§£é‡Š: å°†ä¸€æ ¼0å˜æˆ1ï¼Œæœ€ç»ˆè¿é€šä¸¤ä¸ªå°å²›å¾—åˆ°é¢ç§¯ä¸º 3 çš„å²›å±¿ã€‚

ç¤ºä¾‹ 2:

- è¾“å…¥: grid = [[1, 1], [1, 0]]
- è¾“å‡º: 4
- è§£é‡Š: å°†ä¸€æ ¼0å˜æˆ1ï¼Œå²›å±¿çš„é¢ç§¯æ‰©å¤§ä¸º 4ã€‚

ç¤ºä¾‹ 3:

- è¾“å…¥: grid = [[1, 1], [1, 1]]
- è¾“å‡º: 4
- è§£é‡Š: æ²¡æœ‰0å¯ä»¥è®©æˆ‘ä»¬å˜æˆ1ï¼Œé¢ç§¯ä¾ç„¶ä¸º 4ã€‚



ç¬¬ä¸€æ­¥ï¼šä¸€æ¬¡éå†åœ°å›¾ï¼Œå¾—å‡ºå„ä¸ªå²›å±¿çš„é¢ç§¯ï¼Œå¹¶åšç¼–å·è®°å½•ã€‚å¯ä»¥ä½¿ç”¨mapè®°å½•ï¼Œkeyä¸ºå²›å±¿ç¼–å·ï¼Œvalueä¸ºå²›å±¿é¢ç§¯ ç¬¬äºŒæ­¥ï¼šåœ¨éå†åœ°å›¾ï¼Œéå†0çš„æ–¹æ ¼ï¼ˆå› ä¸ºè¦å°†0å˜æˆ1ï¼‰ï¼Œå¹¶ç»Ÿè®¡è¯¥1ï¼ˆç”±0å˜æˆçš„1ï¼‰å‘¨è¾¹å²›å±¿é¢ç§¯ï¼Œå°†å…¶ç›¸é‚»é¢ç§¯ç›¸åŠ åœ¨ä¸€èµ·ï¼Œéå†æ‰€æœ‰ 0 ä¹‹åï¼Œå°±å¯ä»¥å¾—å‡º é€‰ä¸€ä¸ª0å˜æˆ1 ä¹‹åçš„æœ€å¤§é¢ç§¯ã€‚

```java
class Solution {

    int[][] dirs = {{-1, 0}, {0, 1}, {1, 0}, {0, -1}};  // å®šä¹‰æ–¹å‘æ•°ç»„ï¼Œè¡¨ç¤ºä¸Šã€å³ã€ä¸‹ã€å·¦å››ä¸ªæ–¹å‘çš„åç§»é‡

    public int largestIsland(int[][] grid) {
        int ans = Integer.MIN_VALUE, size = grid.length, mark = 2;  // åˆå§‹åŒ–æœ€å¤§å²›å±¿é¢ç§¯ansä¸ºæœ€å°å€¼ï¼Œsizeä¸ºgridçš„å¤§å°ï¼Œmarkä¸ºæ ‡è®°å€¼
        Map<Integer, Integer> getSize = new HashMap<>();  // åˆ›å»ºä¸€ä¸ªHashMapç”¨äºå­˜å‚¨æ¯ä¸ªå²›å±¿çš„é¢ç§¯
        for (int row = 0; row < size; row++) {  // éå†gridçš„æ¯ä¸ªä½ç½®
            for (int col = 0; col < size; col++) {
                if (grid[row][col] == 1) {  // å¦‚æœå½“å‰ä½ç½®æ˜¯é™†åœ°
                    int areaSize = 1 + dfs(grid, row, col, mark);  // è®¡ç®—å½“å‰å²›å±¿çš„é¢ç§¯
                    getSize.put(mark++, areaSize);  // å°†å½“å‰å²›å±¿çš„é¢ç§¯å­˜å…¥HashMapä¸­ï¼Œå¹¶æ›´æ–°markçš„å€¼
                }
            }
        }
        for (int row = 0; row < size; row++) {  // éå†gridçš„æ¯ä¸ªä½ç½®
            for (int col = 0; col < size; col++) {
                if (grid[row][col] != 0) 
                    continue;  // å¦‚æœå½“å‰ä½ç½®ä¸æ˜¯æ°´åŸŸï¼Œåˆ™è·³è¿‡
                Set<Integer> hashSet = new HashSet<>();  // åˆ›å»ºä¸€ä¸ªHashSetç”¨äºå­˜å‚¨ç›¸é‚»å²›å±¿çš„æ ‡è®°å€¼
                int curSize = 1;  // åˆå§‹åŒ–å½“å‰æ°´åŸŸçš„é¢ç§¯ä¸º1
                for (int[] dir: dirs) {  // éå†å››ä¸ªæ–¹å‘
                    int curRow = row + dir[0], curCol = col + dir[1];  // è®¡ç®—ç›¸é‚»ä½ç½®çš„åæ ‡
                    if (curRow < 0 || curRow >= grid.length || curCol < 0 || curCol >= grid.length) 								continue;  // å¦‚æœç›¸é‚»ä½ç½®è¶…å‡ºè¾¹ç•Œï¼Œåˆ™è·³è¿‡
                    int curMark = grid[curRow][curCol];  // è·å–ç›¸é‚»ä½ç½®çš„æ ‡è®°å€¼
                    if (hashSet.contains(curMark) || !getSize.containsKey(curMark)) 
                        continue;  // å¦‚æœç›¸é‚»ä½ç½®çš„æ ‡è®°å€¼å·²ç»å­˜åœ¨äºHashSetä¸­ï¼Œæˆ–è€…HashMapä¸­ä¸å­˜åœ¨è¯¥æ ‡è®°å€¼ï¼Œåˆ™è·³è¿‡
                    hashSet.add(curMark);  // å°†ç›¸é‚»ä½ç½®çš„æ ‡è®°å€¼åŠ å…¥HashSetä¸­
                    curSize += getSize.get(curMark);  // æ›´æ–°å½“å‰æ°´åŸŸçš„é¢ç§¯
                }
                ans = Math.max(ans, curSize);  // æ›´æ–°æœ€å¤§å²›å±¿é¢ç§¯
            }
        }
        return ans == Integer.MIN_VALUE ? size * size : ans;  // å¦‚æœæœ€å¤§å²›å±¿é¢ç§¯ä»ç„¶æ˜¯åˆå§‹å€¼ï¼Œåˆ™è¿”å›æ•´ä¸ªgridçš„é¢ç§¯ï¼Œå¦åˆ™è¿”å›æœ€å¤§å²›å±¿é¢ç§¯
    }

    public int dfs(int[][] grid, int row, int col, int mark) {
        int ans = 0;  // åˆå§‹åŒ–å²›å±¿é¢ç§¯ä¸º0
        grid[row][col] = mark;  // å°†å½“å‰ä½ç½®æ ‡è®°ä¸ºmark
        for (int[] dir: dirs) {  // éå†å››ä¸ªæ–¹å‘
            int curRow = row + dir[0], curCol = col + dir[1];  // è®¡ç®—ç›¸é‚»ä½ç½®çš„åæ ‡
            if (curRow >= 0 && curRow < grid.length && curCol >= 0 && curCol < grid.length && grid[curRow]	[curCol] == 1)
                ans += 1 + dfs(grid, curRow, curCol, mark); // å¦‚æœç›¸é‚»ä½ç½®ä¸è¶…å‡ºè¾¹ç•Œä¸”æ˜¯é™†åœ°ï¼Œåˆ™é€’å½’è®¡ç®—å²›å±¿é¢ç§¯
        }
        return ans;  // è¿”å›å²›å±¿é¢ç§¯
    }
}
```

### 127. å•è¯æ¥é¾™

å­—å…¸ wordList ä¸­ä»å•è¯ beginWord å’Œ endWord çš„ è½¬æ¢åºåˆ— æ˜¯ä¸€ä¸ªæŒ‰ä¸‹è¿°è§„æ ¼å½¢æˆçš„åºåˆ—ï¼š

- åºåˆ—ä¸­ç¬¬ä¸€ä¸ªå•è¯æ˜¯ beginWord ã€‚
- åºåˆ—ä¸­æœ€åä¸€ä¸ªå•è¯æ˜¯ endWord ã€‚
- æ¯æ¬¡è½¬æ¢åªèƒ½æ”¹å˜ä¸€ä¸ªå­—æ¯ã€‚
- è½¬æ¢è¿‡ç¨‹ä¸­çš„ä¸­é—´å•è¯å¿…é¡»æ˜¯å­—å…¸ wordList ä¸­çš„å•è¯ã€‚
- ç»™ä½ ä¸¤ä¸ªå•è¯ beginWord å’Œ endWord å’Œä¸€ä¸ªå­—å…¸ wordList ï¼Œæ‰¾åˆ°ä» beginWord åˆ° endWord çš„ æœ€çŸ­è½¬æ¢åºåˆ— ä¸­çš„ å•è¯æ•°ç›® ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„è½¬æ¢åºåˆ—ï¼Œè¿”å› 0ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šbeginWord = "hit", endWord = "cog", wordList = ["hot","dot","dog","lot","log","cog"]
- è¾“å‡ºï¼š5
- è§£é‡Šï¼šä¸€ä¸ªæœ€çŸ­è½¬æ¢åºåˆ—æ˜¯ "hit" -> "hot" -> "dot" -> "dog" -> "cog", è¿”å›å®ƒçš„é•¿åº¦ 5ã€‚

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šbeginWord = "hit", endWord = "cog", wordList = ["hot","dot","dog","lot","log"]
- è¾“å‡ºï¼š0
- è§£é‡Šï¼šendWord "cog" ä¸åœ¨å­—å…¸ä¸­ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡Œè½¬æ¢ã€‚



ä»¥ç¤ºä¾‹1ä¸ºä¾‹ï¼Œä»è¿™ä¸ªå›¾ä¸­å¯ä»¥çœ‹å‡º hit åˆ° cogçš„è·¯çº¿ï¼Œä¸æ­¢ä¸€æ¡ï¼Œæœ‰ä¸‰æ¡ï¼Œä¸€æ¡æ˜¯æœ€çŸ­çš„é•¿åº¦ä¸º5ï¼Œä¸¤æ¡é•¿åº¦ä¸º6ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20210827175432.png" alt="img" style="zoom: 25%;" />

æœ¬é¢˜åªéœ€è¦æ±‚å‡ºæœ€çŸ­è·¯å¾„çš„é•¿åº¦å°±å¯ä»¥äº†ï¼Œä¸ç”¨æ‰¾å‡ºè·¯å¾„ã€‚

æ‰€ä»¥è¿™é“é¢˜è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š

- å›¾ä¸­çš„çº¿æ˜¯å¦‚ä½•è¿åœ¨ä¸€èµ·çš„
- èµ·ç‚¹å’Œç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„é•¿åº¦

é¦–å…ˆé¢˜ç›®ä¸­å¹¶æ²¡æœ‰ç»™å‡ºç‚¹ä¸ç‚¹ä¹‹é—´çš„è¿çº¿ï¼Œè€Œæ˜¯è¦æˆ‘ä»¬è‡ªå·±å»è¿ï¼Œæ¡ä»¶æ˜¯å­—ç¬¦åªèƒ½å·®ä¸€ä¸ªï¼Œæ‰€ä»¥åˆ¤æ–­ç‚¹ä¸ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œè¦è‡ªå·±åˆ¤æ–­æ˜¯ä¸æ˜¯å·®ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœå·®ä¸€ä¸ªå­—ç¬¦ï¼Œé‚£å°±æ˜¯æœ‰é“¾æ¥ã€‚

ç„¶åå°±æ˜¯æ±‚èµ·ç‚¹å’Œç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼Œ**è¿™é‡Œæ— å‘å›¾æ±‚æœ€çŸ­è·¯ï¼Œå¹¿æœæœ€ä¸ºåˆé€‚ï¼Œå¹¿æœåªè¦æœåˆ°äº†ç»ˆç‚¹ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯æœ€çŸ­çš„è·¯å¾„**ã€‚å› ä¸ºå¹¿æœå°±æ˜¯ä»¥èµ·ç‚¹ä¸­å¿ƒå‘å››å‘¨æ‰©æ•£çš„æœç´¢ã€‚

**æœ¬é¢˜å¦‚æœç”¨æ·±æœï¼Œä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œè¦åœ¨åˆ°è¾¾ç»ˆç‚¹çš„ä¸åŒè·¯å¾„ä¸­é€‰åˆ™ä¸€æ¡æœ€çŸ­è·¯**ã€‚ è€Œå¹¿æœåªè¦è¾¾åˆ°ç»ˆç‚¹ï¼Œä¸€å®šæ˜¯æœ€çŸ­è·¯ã€‚

å¦å¤–éœ€è¦æœ‰ä¸€ä¸ªæ³¨æ„ç‚¹ï¼š

- æœ¬é¢˜æ˜¯ä¸€ä¸ªæ— å‘å›¾ï¼Œéœ€è¦ç”¨æ ‡è®°ä½ï¼Œæ ‡è®°ç€èŠ‚ç‚¹æ˜¯å¦èµ°è¿‡ï¼Œå¦åˆ™å°±ä¼šæ­»å¾ªç¯ï¼
- æœ¬é¢˜ç»™å‡ºé›†åˆæ˜¯æ•°ç»„å‹çš„ï¼Œå¯ä»¥è½¬æˆsetç»“æ„ï¼ŒæŸ¥æ‰¾æ›´å¿«ä¸€äº›

```java
/**
 * å•è¯æ¥é¾™
 */
class Solution {
    /**
     * è®¡ç®—ä»beginWordåˆ°endWordçš„æœ€çŸ­è½¬æ¢åºåˆ—é•¿åº¦
     *
     * @param beginWord èµ·å§‹å•è¯
     * @param endWord   ç›®æ ‡å•è¯
     * @param wordList  å•è¯åˆ—è¡¨
     * @return æœ€çŸ­è½¬æ¢åºåˆ—é•¿åº¦ï¼Œå¦‚æœæ— æ³•è½¬æ¢åˆ™è¿”å›0
     */
    public int ladderLength(String beginWord, String endWord, List<String> wordList) {
        // ä½¿ç”¨HashSetå­˜å‚¨å•è¯åˆ—è¡¨ï¼Œæ–¹ä¾¿æŸ¥æ‰¾
        HashSet<String> wordSet = new HashSet<>(wordList);
        // å¦‚æœå•è¯åˆ—è¡¨ä¸ºç©ºæˆ–è€…ç›®æ ‡å•è¯ä¸åœ¨åˆ—è¡¨ä¸­ï¼Œåˆ™æ— æ³•è½¬æ¢ï¼Œè¿”å›0
        if (wordSet.size() == 0 || !wordSet.contains(endWord)) {
            return 0;
        }
        // ä½¿ç”¨é˜Ÿåˆ—å­˜å‚¨å¾…å¤„ç†çš„å•è¯
        Queue<String> queue = new LinkedList<>();
        // å°†èµ·å§‹å•è¯åŠ å…¥é˜Ÿåˆ—
        queue.offer(beginWord);
        // ä½¿ç”¨Mapå­˜å‚¨å•è¯åŠå…¶å¯¹åº”çš„è½¬æ¢åºåˆ—é•¿åº¦
        Map<String, Integer> map = new HashMap<>();
        // èµ·å§‹å•è¯çš„è½¬æ¢åºåˆ—é•¿åº¦ä¸º1
        map.put(beginWord, 1);

        // å¼€å§‹å¾ªç¯å¤„ç†é˜Ÿåˆ—ä¸­çš„å•è¯
        while (!queue.isEmpty()) {
            // å–å‡ºé˜Ÿåˆ—ä¸­çš„å•è¯
            String word = queue.poll();
            // è·å–å½“å‰å•è¯çš„è½¬æ¢åºåˆ—é•¿åº¦
            int path = map.get(word);
            // éå†å½“å‰å•è¯çš„æ¯ä¸ªå­—ç¬¦
            for (int i = 0; i < word.length(); i++) {
                // å°†å½“å‰å•è¯è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„
                char[] chars = word.toCharArray();
                // éå†26ä¸ªå­—æ¯
                for (char k = 'a'; k <= 'z'; k++) {
                    // å°†å½“å‰å­—ç¬¦æ›¿æ¢ä¸ºä¸åŒçš„å­—æ¯
                    chars[i] = k;
                    // æ„é€ æ–°çš„å•è¯
                    String newWord = String.valueOf(chars);
                    // å¦‚æœæ–°å•è¯ç­‰äºç›®æ ‡å•è¯ï¼Œè¿”å›è½¬æ¢åºåˆ—é•¿åº¦+1
                    if (newWord.equals(endWord)) {
                        return path + 1;
                    }
                    // å¦‚æœæ–°å•è¯åœ¨å•è¯åˆ—è¡¨ä¸­ä¸”æœªè¢«è®¿é—®è¿‡
                    if (wordSet.contains(newWord) && !map.containsKey(newWord)) {
                        // å°†æ–°å•è¯åŠ å…¥é˜Ÿåˆ—
                        queue.offer(newWord);
                        // æ›´æ–°æ–°å•è¯çš„è½¬æ¢åºåˆ—é•¿åº¦
                        map.put(newWord, path + 1);
                    }
                }
            }
        }
        // æ— æ³•è½¬æ¢ï¼Œè¿”å›0
        return 0;
    }
}
```

### 841.é’¥åŒ™å’Œæˆ¿é—´

æœ‰ N ä¸ªæˆ¿é—´ï¼Œå¼€å§‹æ—¶ä½ ä½äº 0 å·æˆ¿é—´ã€‚æ¯ä¸ªæˆ¿é—´æœ‰ä¸åŒçš„å·ç ï¼š0ï¼Œ1ï¼Œ2ï¼Œ...ï¼ŒN-1ï¼Œå¹¶ä¸”æˆ¿é—´é‡Œå¯èƒ½æœ‰ä¸€äº›é’¥åŒ™èƒ½ä½¿ä½ è¿›å…¥ä¸‹ä¸€ä¸ªæˆ¿é—´ã€‚

åœ¨å½¢å¼ä¸Šï¼Œå¯¹äºæ¯ä¸ªæˆ¿é—´ i éƒ½æœ‰ä¸€ä¸ªé’¥åŒ™åˆ—è¡¨ rooms[i]ï¼Œæ¯ä¸ªé’¥åŒ™ rooms[i][j] ç”± [0,1ï¼Œ...ï¼ŒN-1] ä¸­çš„ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºï¼Œå…¶ä¸­ N = rooms.lengthã€‚ é’¥åŒ™ rooms[i][j] = v å¯ä»¥æ‰“å¼€ç¼–å·ä¸º v çš„æˆ¿é—´ã€‚

æœ€åˆï¼Œé™¤ 0 å·æˆ¿é—´å¤–çš„å…¶ä½™æ‰€æœ‰æˆ¿é—´éƒ½è¢«é”ä½ã€‚

ä½ å¯ä»¥è‡ªç”±åœ°åœ¨æˆ¿é—´ä¹‹é—´æ¥å›èµ°åŠ¨ã€‚

å¦‚æœèƒ½è¿›å…¥æ¯ä¸ªæˆ¿é—´è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥: [[1],[2],[3],[]]
- è¾“å‡º: true
- è§£é‡Š: æˆ‘ä»¬ä» 0 å·æˆ¿é—´å¼€å§‹ï¼Œæ‹¿åˆ°é’¥åŒ™ 1ã€‚ ä¹‹åæˆ‘ä»¬å» 1 å·æˆ¿é—´ï¼Œæ‹¿åˆ°é’¥åŒ™ 2ã€‚ ç„¶åæˆ‘ä»¬å» 2 å·æˆ¿é—´ï¼Œæ‹¿åˆ°é’¥åŒ™ 3ã€‚ æœ€åæˆ‘ä»¬å»äº† 3 å·æˆ¿é—´ã€‚ ç”±äºæˆ‘ä»¬èƒ½å¤Ÿè¿›å…¥æ¯ä¸ªæˆ¿é—´ï¼Œæˆ‘ä»¬è¿”å› trueã€‚

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼š[[1,3],[3,0,1],[2],[0]]
- è¾“å‡ºï¼šfalse
- è§£é‡Šï¼šæˆ‘ä»¬ä¸èƒ½è¿›å…¥ 2 å·æˆ¿é—´ã€‚



æœ¬é¢˜å…¶å®ç»™æˆ‘ä»¬æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ï¼Œ æ„è¯†åˆ°è¿™æ˜¯æœ‰å‘å›¾å¾ˆé‡è¦ï¼

å›¾ä¸­ç»™æˆ‘çš„ä¸¤ä¸ªç¤ºä¾‹ï¼š `[[1],[2],[3],[]]` `[[1,3],[3,0,1],[2],[0]]`ï¼Œç”»æˆå¯¹åº”çš„å›¾å¦‚ä¸‹ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220714101414.png" alt="img" style="zoom: 33%;" />

æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå›¾1çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯é“¾æ¥çš„ï¼Œè€Œå›¾äºŒä¸­ï¼ŒèŠ‚ç‚¹2 æ˜¯å­¤ç«‹çš„ã€‚

è¿™å°±å¾ˆå®¹æ˜“è®©æˆ‘ä»¬æƒ³èµ·å²›å±¿é—®é¢˜ï¼Œåªè¦å‘ç°ç‹¬ç«‹çš„å²›ï¼Œå°±æ˜¯ä¸èƒ½è¿›å…¥æ‰€æœ‰æˆ¿é—´ã€‚

æ­¤æ—¶ä¹Ÿå®¹æ˜“æƒ³åˆ°ç”¨å¹¶æŸ¥é›†çš„æ–¹å¼å»è§£å†³ã€‚

**ä½†æœ¬é¢˜æ˜¯æœ‰å‘å›¾**ï¼Œåœ¨æœ‰å‘å›¾ä¸­ï¼Œå³ä½¿æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯é“¾æ¥çš„ï¼Œä½†ä¾ç„¶ä¸å¯èƒ½ä»0å‡ºå‘éå†æ‰€æœ‰è¾¹ã€‚ ç»™å¤§å®¶ä¸¾ä¸€ä¸ªä¾‹å­ï¼š

å›¾3ï¼š[[5], [], [1, 3], [5]] ï¼Œå¦‚å›¾ï¼š

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20220714102201.png" alt="img" style="zoom:33%;" />

åœ¨å›¾3ä¸­ï¼Œå¤§å®¶å¯ä»¥å‘ç°ï¼ŒèŠ‚ç‚¹0åªèƒ½åˆ°èŠ‚ç‚¹5ï¼Œç„¶åå°±å“ªä¹Ÿå»ä¸äº†äº†ã€‚

æ‰€ä»¥æœ¬é¢˜æ˜¯ä¸€ä¸ªæœ‰å‘å›¾æœç´¢å…¨è·¯å¾„çš„é—®é¢˜ã€‚ åªèƒ½ç”¨æ·±æœï¼ˆDFSï¼‰æˆ–è€…å¹¿æœï¼ˆBFSï¼‰æ¥æœã€‚

```java
class Solution {
    public boolean canVisitAllRooms(List<List<Integer>> rooms) {
        int n = rooms.size(); // è·å–æˆ¿é—´çš„æ•°é‡
        boolean[] visited = new boolean[n]; // åˆ›å»ºä¸€ä¸ªå¸ƒå°”æ•°ç»„ï¼Œç”¨äºè®°å½•æˆ¿é—´æ˜¯å¦è¢«è®¿é—®è¿‡
        dfs(rooms, 0, visited); // ä»ç¬¬ä¸€ä¸ªæˆ¿é—´å¼€å§‹è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢
        for (boolean b : visited) { // éå†visitedæ•°ç»„
            if (!b) { // å¦‚æœæœ‰æˆ¿é—´æœªè¢«è®¿é—®è¿‡
                return false; // è¿”å›false
            }
        }
        return true; // å¦‚æœæ‰€æœ‰æˆ¿é—´éƒ½è¢«è®¿é—®è¿‡ï¼Œåˆ™è¿”å›true
    }

    private void dfs(List<List<Integer>> rooms, int i, boolean[] visited) {
        visited[i] = true; // å°†å½“å‰æˆ¿é—´æ ‡è®°ä¸ºå·²è®¿é—®
        for (int j : rooms.get(i)) { // éå†å½“å‰æˆ¿é—´çš„é’¥åŒ™åˆ—è¡¨
            if (!visited[j]) { // å¦‚æœé’¥åŒ™å¯¹åº”çš„æˆ¿é—´æœªè¢«è®¿é—®è¿‡
                dfs(rooms, j, visited); // é€’å½’åœ°è®¿é—®è¯¥æˆ¿é—´
            }
        }
    }
}
```

### 463. å²›å±¿çš„å‘¨é•¿

ç»™å®šä¸€ä¸ª row x col çš„äºŒç»´ç½‘æ ¼åœ°å›¾ grid ï¼Œå…¶ä¸­ï¼šgrid[i][j] = 1 è¡¨ç¤ºé™†åœ°ï¼Œ grid[i][j] = 0 è¡¨ç¤ºæ°´åŸŸã€‚

ç½‘æ ¼ä¸­çš„æ ¼å­ æ°´å¹³å’Œå‚ç›´ æ–¹å‘ç›¸è¿ï¼ˆå¯¹è§’çº¿æ–¹å‘ä¸ç›¸è¿ï¼‰ã€‚æ•´ä¸ªç½‘æ ¼è¢«æ°´å®Œå…¨åŒ…å›´ï¼Œä½†å…¶ä¸­æ°å¥½æœ‰ä¸€ä¸ªå²›å±¿ï¼ˆæˆ–è€…è¯´ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç¤ºé™†åœ°çš„æ ¼å­ç›¸è¿ç»„æˆçš„å²›å±¿ï¼‰ã€‚

å²›å±¿ä¸­æ²¡æœ‰â€œæ¹–â€ï¼ˆâ€œæ¹–â€ æŒ‡æ°´åŸŸåœ¨å²›å±¿å†…éƒ¨ä¸”ä¸å’Œå²›å±¿å‘¨å›´çš„æ°´ç›¸è¿ï¼‰ã€‚æ ¼å­æ˜¯è¾¹é•¿ä¸º 1 çš„æ­£æ–¹å½¢ã€‚ç½‘æ ¼ä¸ºé•¿æ–¹å½¢ï¼Œä¸”å®½åº¦å’Œé«˜åº¦å‡ä¸è¶…è¿‡ 100 ã€‚è®¡ç®—è¿™ä¸ªå²›å±¿çš„å‘¨é•¿ã€‚

<img src="https://code-thinking-1253855093.file.myqcloud.com/pics/20230829180848.png" alt="img" style="zoom:50%;" />

- è¾“å…¥ï¼šgrid = [[0,1,0,0],[1,1,1,0],[0,1,0,0],[1,1,0,0]]
- è¾“å‡ºï¼š16
- è§£é‡Šï¼šå®ƒçš„å‘¨é•¿æ˜¯ä¸Šé¢å›¾ç‰‡ä¸­çš„ 16 ä¸ªé»„è‰²çš„è¾¹

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šgrid = [[1]]
- è¾“å‡ºï¼š4



```java
/**
 * è®¡ç®—å²›å±¿çš„å‘¨é•¿
 */
class Solution {
    /**
     * è®¡ç®—å²›å±¿çš„å‘¨é•¿
     * @param grid å²›å±¿çš„äºŒç»´æ•°ç»„è¡¨ç¤º
     * @return å²›å±¿çš„å‘¨é•¿
     */
    public int islandPerimeter(int[][] grid) {
        int count = 0; // åˆå§‹åŒ–å‘¨é•¿è®¡æ•°å™¨
        for (int i = 0; i < grid.length; i++) { // éå†äºŒç»´æ•°ç»„çš„è¡Œ
            for (int j = 0; j < grid[0].length; j++) { // éå†äºŒç»´æ•°ç»„çš„åˆ—
                if (grid[i][j] == 1) { // å¦‚æœå½“å‰ä½ç½®æ˜¯å²›å±¿
                    count += 4; // å‘¨é•¿åŠ 4
                    if (i > 0 && grid[i - 1][j] == 1) { // å¦‚æœä¸Šæ–¹ä¹Ÿæ˜¯å²›å±¿
                        count -= 2; // å‘¨é•¿å‡2
                    }
                    if (j > 0 && grid[i][j - 1] == 1) { // å¦‚æœå·¦æ–¹ä¹Ÿæ˜¯å²›å±¿
                        count -= 2; // å‘¨é•¿å‡2
                    }
                }
            }
        }
        return count; // è¿”å›å²›å±¿çš„å‘¨é•¿
    }
}
```



### 994.è…çƒ‚çš„æ©˜å­ï¼ˆnew hot100ï¼‰

åœ¨ç»™å®šçš„ `m x n` ç½‘æ ¼ `grid` ä¸­ï¼Œæ¯ä¸ªå•å…ƒæ ¼å¯ä»¥æœ‰ä»¥ä¸‹ä¸‰ä¸ªå€¼ä¹‹ä¸€ï¼š

- å€¼ `0` ä»£è¡¨ç©ºå•å…ƒæ ¼ï¼›
- å€¼ `1` ä»£è¡¨æ–°é²œæ©˜å­ï¼›
- å€¼ `2` ä»£è¡¨è…çƒ‚çš„æ©˜å­ã€‚

æ¯åˆ†é’Ÿï¼Œè…çƒ‚çš„æ©˜å­ **å‘¨å›´ 4 ä¸ªæ–¹å‘ä¸Šç›¸é‚»** çš„æ–°é²œæ©˜å­éƒ½ä¼šè…çƒ‚ã€‚

è¿”å› *ç›´åˆ°å•å…ƒæ ¼ä¸­æ²¡æœ‰æ–°é²œæ©˜å­ä¸ºæ­¢æ‰€å¿…é¡»ç»è¿‡çš„æœ€å°åˆ†é’Ÿæ•°ã€‚å¦‚æœä¸å¯èƒ½ï¼Œè¿”å› -1* ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

**![img](æ–‡æ¡£å›¾ç‰‡/oranges.png)**

```
è¾“å…¥ï¼šgrid = [[2,1,1],[1,1,0],[0,1,1]]
è¾“å‡ºï¼š4
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šgrid = [[2,1,1],[0,1,1],[1,0,1]]
è¾“å‡ºï¼š-1
è§£é‡Šï¼šå·¦ä¸‹è§’çš„æ©˜å­ï¼ˆç¬¬ 2 è¡Œï¼Œ ç¬¬ 0 åˆ—ï¼‰æ°¸è¿œä¸ä¼šè…çƒ‚ï¼Œå› ä¸ºè…çƒ‚åªä¼šå‘ç”Ÿåœ¨ 4 ä¸ªæ–¹å‘ä¸Šã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šgrid = [[0,2]]
è¾“å‡ºï¼š0
è§£é‡Šï¼šå› ä¸º 0 åˆ†é’Ÿæ—¶å·²ç»æ²¡æœ‰æ–°é²œæ©˜å­äº†ï¼Œæ‰€ä»¥ç­”æ¡ˆå°±æ˜¯ 0 ã€‚
```

### 399.é™¤æ³•æ±‚å€¼ï¼ˆhot100ï¼‰(4.6)

ç»™ä½ ä¸€ä¸ªå˜é‡å¯¹æ•°ç»„ `equations` å’Œä¸€ä¸ªå®æ•°å€¼æ•°ç»„ `values` ä½œä¸ºå·²çŸ¥æ¡ä»¶ï¼Œå…¶ä¸­ `equations[i] = [Ai, Bi]` å’Œ `values[i]` å…±åŒè¡¨ç¤ºç­‰å¼ `Ai / Bi = values[i]` ã€‚æ¯ä¸ª `Ai` æˆ– `Bi` æ˜¯ä¸€ä¸ªè¡¨ç¤ºå•ä¸ªå˜é‡çš„å­—ç¬¦ä¸²ã€‚

å¦æœ‰ä¸€äº›ä»¥æ•°ç»„ `queries` è¡¨ç¤ºçš„é—®é¢˜ï¼Œå…¶ä¸­ `queries[j] = [Cj, Dj]` è¡¨ç¤ºç¬¬ `j` ä¸ªé—®é¢˜ï¼Œè¯·ä½ æ ¹æ®å·²çŸ¥æ¡ä»¶æ‰¾å‡º `Cj / Dj = ?` çš„ç»“æœä½œä¸ºç­”æ¡ˆã€‚

è¿”å› **æ‰€æœ‰é—®é¢˜çš„ç­”æ¡ˆ** ã€‚å¦‚æœå­˜åœ¨æŸä¸ªæ— æ³•ç¡®å®šçš„ç­”æ¡ˆï¼Œåˆ™ç”¨ `-1.0` æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚å¦‚æœé—®é¢˜ä¸­å‡ºç°äº†ç»™å®šçš„å·²çŸ¥æ¡ä»¶ä¸­æ²¡æœ‰å‡ºç°çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿéœ€è¦ç”¨ `-1.0` æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚

**æ³¨æ„ï¼š**è¾“å…¥æ€»æ˜¯æœ‰æ•ˆçš„ã€‚ä½ å¯ä»¥å‡è®¾é™¤æ³•è¿ç®—ä¸­ä¸ä¼šå‡ºç°é™¤æ•°ä¸º 0 çš„æƒ…å†µï¼Œä¸”ä¸å­˜åœ¨ä»»ä½•çŸ›ç›¾çš„ç»“æœã€‚

**æ³¨æ„ï¼š**æœªåœ¨ç­‰å¼åˆ—è¡¨ä¸­å‡ºç°çš„å˜é‡æ˜¯æœªå®šä¹‰çš„ï¼Œå› æ­¤æ— æ³•ç¡®å®šå®ƒä»¬çš„ç­”æ¡ˆã€‚



**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šequations = [["a","b"],["b","c"]], values = [2.0,3.0], queries = [["a","c"],["b","a"],["a","e"],["a","a"],["x","x"]]
è¾“å‡ºï¼š[6.00000,0.50000,-1.00000,1.00000,-1.00000]
è§£é‡Šï¼š
æ¡ä»¶ï¼ša / b = 2.0, b / c = 3.0
é—®é¢˜ï¼ša / c = ?, b / a = ?, a / e = ?, a / a = ?, x / x = ?
ç»“æœï¼š[6.0, 0.5, -1.0, 1.0, -1.0 ]
æ³¨æ„ï¼šx æ˜¯æœªå®šä¹‰çš„ => -1.0
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šequations = [["a","b"],["b","c"],["bc","cd"]], values = [1.5,2.5,5.0], queries = [["a","c"],["c","b"],["bc","cd"],["cd","bc"]]
è¾“å‡ºï¼š[3.75000,0.40000,5.00000,0.20000]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šequations = [["a","b"]], values = [0.5], queries = [["a","b"],["b","a"],["a","c"],["x","y"]]
è¾“å‡ºï¼š[0.50000,2.00000,-1.00000,-1.00000]
```

é‡‡ç”¨å¹¿åº¦ä¼˜å…ˆéå†æœç´¢ï¼Œé€»è¾‘éå¸¸æ¸…æ™°ã€‚

```java
class Solution {
    /**
     * è®¡ç®—æ–¹ç¨‹çš„å€¼
     *
     * @param equations ä¸€ç³»åˆ—æ–¹ç¨‹ï¼Œæ¯ä¸ªæ–¹ç¨‹ç”±ä¸¤ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºï¼Œè¡¨ç¤ºå˜é‡ä¹‹é—´çš„é™¤æ³•å…³ç³»
     * @param values æ¯ä¸ªæ–¹ç¨‹çš„ç»“æœå€¼ï¼Œä¸æ–¹ç¨‹ä¸€ä¸€å¯¹åº”
     * @param queries ä¸€ç³»åˆ—æŸ¥è¯¢ï¼Œæ¯ä¸ªæŸ¥è¯¢ç”±ä¸¤ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºï¼Œéœ€è¦è®¡ç®—è¿™ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„é™¤æ³•ç»“æœ
     * @return è¿”å›æ¯ä¸ªæŸ¥è¯¢çš„ç»“æœæ•°ç»„ï¼Œå¦‚æœæ— æ³•è®¡ç®—ï¼Œåˆ™ç»“æœä¸º-1.0
     */
    public double[] calcEquation(List<List<String>> equations, double[] values, List<List<String>> queries) {
        // **æ„å»ºå›¾**ï¼ˆä½¿ç”¨é‚»æ¥è¡¨è¡¨ç¤ºï¼‰
        // `graph` æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼ˆMapï¼‰ï¼Œé”®æ˜¯å˜é‡åï¼ˆå¦‚ "a", "b"ï¼‰ï¼Œå€¼æ˜¯å¦ä¸€ä¸ªå“ˆå¸Œè¡¨
        // è¯¥å“ˆå¸Œè¡¨å­˜å‚¨ç›¸é‚»å˜é‡ä»¥åŠå®ƒä»¬çš„æ¯”å€¼ï¼Œä¾‹å¦‚ï¼š
        // å¦‚æœ "a / b = 2.0"ï¼Œé‚£ä¹ˆ `graph.get("a").get("b") = 2.0`ï¼Œ `graph.get("b").get("a") = 1/2.0`
        Map<String, Map<String, Double>> graph = new HashMap<>();

        // **æ„é€ åŠ æƒå›¾**
        for (int i = 0; i < equations.size(); i++) {
            List<String> equation = equations.get(i);
            String a = equation.get(0); // å˜é‡ A
            String b = equation.get(1); // å˜é‡ B
            double value = values[i];   // A / B = value

            // å¦‚æœ `a` è¿™ä¸ªèŠ‚ç‚¹è¿˜æ²¡æœ‰åœ¨å›¾ä¸­å‡ºç°ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„æ˜ å°„
            graph.putIfAbsent(a, new HashMap<>());
            // å­˜å‚¨ A -> B çš„æ¯”å€¼ï¼ˆA / B = valueï¼‰
            graph.get(a).put(b, value);

            // å¦‚æœ `b` è¿™ä¸ªèŠ‚ç‚¹è¿˜æ²¡æœ‰åœ¨å›¾ä¸­å‡ºç°ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„æ˜ å°„
            graph.putIfAbsent(b, new HashMap<>());
            // å­˜å‚¨ B -> A çš„æ¯”å€¼ï¼ˆB / A = 1 / valueï¼‰
            graph.get(b).put(a, 1.0 / value);
        }

        // **å­˜å‚¨æŸ¥è¯¢ç»“æœ**
        double[] results = new double[queries.size()];

        // **å¤„ç†æ¯ä¸ªæŸ¥è¯¢**
        for (int i = 0; i < queries.size(); i++) {
            List<String> query = queries.get(i);
            String start = query.get(0); // éœ€è¦è®¡ç®—çš„å˜é‡ C
            String end = query.get(1);   // éœ€è¦è®¡ç®—çš„å˜é‡ D

            // **æƒ…å†µ1ï¼šå¦‚æœ C æˆ– D å˜é‡ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1.0**
            if (!graph.containsKey(start) || !graph.containsKey(end)) {
                results[i] = -1.0;
                continue;
            }

            // **æƒ…å†µ2ï¼šå¦‚æœ C å’Œ D æ˜¯åŒä¸€ä¸ªå˜é‡ï¼Œåˆ™ç»“æœæ˜¯ 1.0**
            if (start.equals(end)) {
                results[i] = 1.0;
                continue;
            }

            // **æƒ…å†µ3ï¼šä½¿ç”¨ BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰æ¥æŸ¥æ‰¾ C åˆ° D çš„è·¯å¾„**
            Queue<String> nodesQueue = new LinkedList<>(); // å­˜å‚¨è¦éå†çš„å˜é‡èŠ‚ç‚¹
            Queue<Double> valuesQueue = new LinkedList<>(); // å­˜å‚¨ä» start å¼€å§‹ç´¯ç§¯çš„æ¯”å€¼
            Set<String> visited = new HashSet<>(); // è®°å½•å·²ç»è®¿é—®è¿‡çš„èŠ‚ç‚¹ï¼Œé¿å…é‡å¤æœç´¢

            // **åˆå§‹åŒ– BFS**
            nodesQueue.offer(start);
            valuesQueue.offer(1.0); // åˆå§‹å€¼ä¸º 1.0ï¼ˆè¡¨ç¤º start / start = 1.0ï¼‰
            visited.add(start);

            boolean found = false; // æ ‡è®°æ˜¯å¦æ‰¾åˆ°ç­”æ¡ˆ

            // **BFS éå†æœç´¢**
            while (!nodesQueue.isEmpty()) {
                String currentNode = nodesQueue.poll(); // å–å‡ºå½“å‰å¤„ç†çš„å˜é‡
                double currentValue = valuesQueue.poll(); // å–å‡ºå½“å‰è®¡ç®—çš„æ¯”å€¼

                // **å¦‚æœæ‰¾åˆ°äº†ç›®æ ‡å˜é‡ endï¼Œåˆ™å­˜å…¥ç»“æœå¹¶ç»ˆæ­¢ BFS**
                if (currentNode.equals(end)) {
                    results[i] = currentValue;
                    found = true;
                    break;
                }

                // **è·å–å½“å‰å˜é‡çš„æ‰€æœ‰é‚»æ¥å˜é‡**
                Map<String, Double> neighbors = graph.get(currentNode);
                if (neighbors == null) {
                    continue;
                }

                // **éå†å½“å‰å˜é‡çš„æ‰€æœ‰é‚»æ¥å˜é‡**
                for (Map.Entry<String, Double> entry : neighbors.entrySet()) {
                    String neighbor = entry.getKey(); // ç›¸é‚»å˜é‡
                    double weight = entry.getValue(); // å½“å‰å˜é‡ / ç›¸é‚»å˜é‡çš„æ¯”å€¼

                    // **å¦‚æœè¯¥å˜é‡æ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œåˆ™åŠ å…¥ BFS é˜Ÿåˆ—**
                    if (!visited.contains(neighbor)) {
                        visited.add(neighbor);
                        nodesQueue.offer(neighbor);
                        /**
                         * **å…¬å¼æ¨å¯¼**
                         * æˆ‘ä»¬åœ¨éå†å›¾çš„è¿‡ç¨‹ä¸­ï¼Œå®é™…æ˜¯åœ¨è®¡ç®— ä» start åˆ° neighbor å˜é‡çš„é™¤æ³•å…³ç³»ã€‚
                         *
                         * å‡è®¾å½“å‰ `currentNode = A`ï¼Œå®ƒçš„ç›¸é‚»èŠ‚ç‚¹ `neighbor = B`ï¼Œå¹¶ä¸”å·²çŸ¥ï¼š
                         *
                         *      A / B = weight
                         *
                         * å½“å‰ BFS è¿‡ç¨‹ä¸­ï¼Œ`currentValue` å­˜å‚¨çš„æ˜¯ ä»èµ·ç‚¹ start åˆ° A çš„æ¯”å€¼ï¼Œå³ï¼š
                         *
                         *      start / A = currentValue
                         *
                         * é‚£ä¹ˆ ä» start åˆ° B çš„æ¯”å€¼ `nextValue` å¯ä»¥è®¡ç®—ä¸ºï¼š
                         *
                         *      start / B = (start / A) Ã— (A / B)
                         *
                         * ä¹Ÿå°±æ˜¯ï¼š
                         */
                        double nextValue = currentValue * weight; // è®¡ç®— start / neighbor
                        valuesQueue.offer(nextValue);
                    }
                }
            }

            // **å¦‚æœ BFS ç»“æŸåä»æœªæ‰¾åˆ° endï¼Œè¯´æ˜ C / D ä¸å¯è¾¾ï¼Œè¿”å› -1.0**
            if (!found) {
                results[i] = -1.0;
            }
        }

        // **è¿”å›æ‰€æœ‰æŸ¥è¯¢çš„ç»“æœ**
        return results;
    }
}

```

æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œä»£ç ç®€æ´å¥½è®°

```java
class Solution {
    // è®¡ç®—å•†å€¼
    public double[] calcEquation(List<List<String>> equations, double[] values, List<List<String>> queries) {
        // å­˜å‚¨ç»“æœ
        double[] res = new double[queries.size()];
        // æ„å»ºå›¾ç»“æ„
        Map<String, Map<String, Double>> graph = new HashMap<>();
        // éå†æ–¹ç¨‹å¼ï¼Œæ„å»ºå›¾
        for (int i = 0; i < equations.size(); i++) {
            String a = equations.get(i).get(0);
            String b = equations.get(i).get(1);
            double val = values[i];
            graph.putIfAbsent(a, new HashMap<>());
            graph.putIfAbsent(b, new HashMap<>());
            graph.get(a).put(b, val);
            graph.get(b).put(a, 1.0 / val);
        }
        // éå†æŸ¥è¯¢åˆ—è¡¨
        for (int i = 0; i < queries.size(); i++) {
            String a = queries.get(i).get(0);
            String b = queries.get(i).get(1);
            // ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢è®¡ç®—ç»“æœ
            res[i] = dfs(graph, a, b, new HashSet<>());
        }
        return res;
    }

    // æ·±åº¦ä¼˜å…ˆæœç´¢
    private double dfs(Map<String, Map<String, Double>> graph, String a, String b, Set<String> visited) {
        // å¦‚æœå›¾ä¸­ä¸åŒ…å«èŠ‚ç‚¹aï¼Œè¿”å›-1.0
        if (!graph.containsKey(a)) {
            return -1.0;
        }
        visited.add(a);
        // å¦‚æœèŠ‚ç‚¹aç›´æ¥è¿æ¥èŠ‚ç‚¹bï¼Œè¿”å›å¯¹åº”çš„å€¼
        if (graph.get(a).containsKey(b)) {
            return graph.get(a).get(b);
        }
        // éå†èŠ‚ç‚¹açš„é‚»å±…èŠ‚ç‚¹
        for (String key : graph.get(a).keySet()) {
            if (!visited.contains(key)) {
                // é€’å½’è®¡ç®—ç»“æœ
                double res = dfs(graph, key, b, visited);
                if (res != -1.0) {
                    // è¿”å›è®¡ç®—ç»“æœ
                    return graph.get(a).get(key) * res;
                }
            }
        }
        return -1.0;
    }
}
```



### 207.è¯¾ç¨‹è¡¨ï¼ˆhot100ï¼‰(3.31)

ä½ è¿™ä¸ªå­¦æœŸå¿…é¡»é€‰ä¿® `numCourses` é—¨è¯¾ç¨‹ï¼Œè®°ä¸º `0` åˆ° `numCourses - 1` ã€‚

åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚ å…ˆä¿®è¯¾ç¨‹æŒ‰æ•°ç»„ `prerequisites` ç»™å‡ºï¼Œå…¶ä¸­ `prerequisites[i] = [ai, bi]` ï¼Œè¡¨ç¤ºå¦‚æœè¦å­¦ä¹ è¯¾ç¨‹ `ai` åˆ™ **å¿…é¡»** å…ˆå­¦ä¹ è¯¾ç¨‹ `bi` ã€‚

- ä¾‹å¦‚ï¼Œå…ˆä¿®è¯¾ç¨‹å¯¹ `[0, 1]` è¡¨ç¤ºï¼šæƒ³è¦å­¦ä¹ è¯¾ç¨‹ `0` ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ `1` ã€‚

è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ï¼Ÿå¦‚æœå¯ä»¥ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0]]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆè¯¾ç¨‹ 0 ã€‚è¿™æ˜¯å¯èƒ½çš„ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0],[0,1]]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0 ï¼›å¹¶ä¸”å­¦ä¹ è¯¾ç¨‹ 0 ä¹‹å‰ï¼Œä½ è¿˜åº”å…ˆå®Œæˆè¯¾ç¨‹ 1 ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚
```

```java
class Solution {
    // åˆ¤æ–­æ˜¯å¦å¯ä»¥å®Œæˆè¯¾ç¨‹å®‰æ’
    public boolean canFinish(int numCourses, int[][] prerequisites) {
        // åˆ›å»ºä¸€ä¸ªé‚»æ¥è¡¨æ¥è¡¨ç¤ºè¯¾ç¨‹ä¹‹é—´çš„ä¾èµ–å…³ç³»
        List<List<Integer>> graph = new ArrayList<>();
        // åˆå§‹åŒ–é‚»æ¥è¡¨
        for (int i = 0; i < numCourses; i++) {
            graph.add(new ArrayList<>());
        }
        // æ„å»ºé‚»æ¥è¡¨
        for (int[] edge : prerequisites) {
            graph.get(edge[1]).add(edge[0]);
        }
        // è®°å½•èŠ‚ç‚¹çš„è®¿é—®çŠ¶æ€ï¼Œ0è¡¨ç¤ºæœªè®¿é—®ï¼Œ1è¡¨ç¤ºæ­£åœ¨è®¿é—®ï¼Œ2è¡¨ç¤ºå·²è®¿é—®ä¸”ä¸å­˜åœ¨ç¯
        int[] visited = new int[numCourses];
        // éå†æ¯ä¸ªèŠ‚ç‚¹ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¯
        for (int i = 0; i < numCourses; i++) {
            if (hasRing(graph, visited, i)) {
                return false;
            }
        }
        return true;
    }

    // åˆ¤æ–­ä»èŠ‚ç‚¹iå¼€å§‹æ˜¯å¦å­˜åœ¨ç¯
    private boolean hasRing(List<List<Integer>> graph, int[] visited, int i) {
        // å¦‚æœèŠ‚ç‚¹iå·²ç»åœ¨å½“å‰è·¯å¾„ä¸­ï¼Œåˆ™å­˜åœ¨ç¯
        if (visited[i] == 1) {
            return true;
        }
        // å¦‚æœèŠ‚ç‚¹iå·²ç»è¢«è®¿é—®è¿‡ï¼Œè¯´æ˜ä¸å­˜åœ¨ç¯
        if (visited[i] == 2) {
            return false;
        }
        // å°†èŠ‚ç‚¹iæ ‡è®°ä¸ºæ­£åœ¨è®¿é—®
        visited[i] = 1;
        // éå†èŠ‚ç‚¹içš„é‚»å±…èŠ‚ç‚¹
        for (int j : graph.get(i)) {
            // é€’å½’åˆ¤æ–­é‚»å±…èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ç¯
            if (hasRing(graph, visited, j)) {
                return true;
            }
        }
        // å°†èŠ‚ç‚¹iæ ‡è®°ä¸ºå·²è®¿é—®
        visited[i] = 2;
        return false;
    }
}
```



### 208.å®ç° Trie (å‰ç¼€æ ‘)ï¼ˆhot100ï¼‰ï¼ˆ4.3ï¼‰

**Trie**ï¼ˆå‘éŸ³ç±»ä¼¼ "try"ï¼‰æˆ–è€…è¯´ **å‰ç¼€æ ‘** æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®é›†ä¸­çš„é”®ã€‚è¿™ä¸€æ•°æ®ç»“æ„æœ‰ç›¸å½“å¤šçš„åº”ç”¨æƒ…æ™¯ï¼Œä¾‹å¦‚è‡ªåŠ¨è¡¥å…¨å’Œæ‹¼å†™æ£€æŸ¥ã€‚

è¯·ä½ å®ç° Trie ç±»ï¼š

- `Trie()` åˆå§‹åŒ–å‰ç¼€æ ‘å¯¹è±¡ã€‚
- `void insert(String word)` å‘å‰ç¼€æ ‘ä¸­æ’å…¥å­—ç¬¦ä¸² `word` ã€‚
- `boolean search(String word)` å¦‚æœå­—ç¬¦ä¸² `word` åœ¨å‰ç¼€æ ‘ä¸­ï¼Œè¿”å› `true`ï¼ˆå³ï¼Œåœ¨æ£€ç´¢ä¹‹å‰å·²ç»æ’å…¥ï¼‰ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
- `boolean startsWith(String prefix)` å¦‚æœä¹‹å‰å·²ç»æ’å…¥çš„å­—ç¬¦ä¸² `word` çš„å‰ç¼€ä¹‹ä¸€ä¸º `prefix` ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚



**ç¤ºä¾‹ï¼š**

```
è¾“å…¥
["Trie", "insert", "search", "search", "startsWith", "insert", "search"]
[[], ["apple"], ["apple"], ["app"], ["app"], ["app"], ["app"]]
è¾“å‡º
[null, null, true, false, true, null, true]

è§£é‡Š
Trie trie = new Trie();
trie.insert("apple");
trie.search("apple");   // è¿”å› True
trie.search("app");     // è¿”å› False
trie.startsWith("app"); // è¿”å› True
trie.insert("app");
trie.search("app");     // è¿”å› True
```



**æç¤ºï¼š**

- `1 <= word.length, prefix.length <= 2000`
- `word` å’Œ `prefix` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- `insert`ã€`search` å’Œ `startsWith` è°ƒç”¨æ¬¡æ•° **æ€»è®¡** ä¸è¶…è¿‡ `3 * 104` æ¬¡

```java
class Trie {
    private Trie[] children; // å­˜å‚¨å­èŠ‚ç‚¹çš„æ•°ç»„
    private boolean isEnd; // æ ‡è®°æ˜¯å¦ä¸ºå•è¯ç»“å°¾

    public Trie() {
        children = new Trie[26]; // åˆå§‹åŒ–26ä¸ªå­èŠ‚ç‚¹ä½ç½®
        isEnd = false; // åˆå§‹æ—¶ä¸æ˜¯å•è¯ç»“å°¾
    }
    
    public void insert(String word) {
        Trie temp = this; // ä»æ ¹èŠ‚ç‚¹å¼€å§‹
        for (char chr : word.toCharArray()) { // éå†å•è¯çš„æ¯ä¸ªå­—ç¬¦
            if (temp.children[chr - 'a'] == null) // å¦‚æœå½“å‰å­—ç¬¦å¯¹åº”çš„å­èŠ‚ç‚¹ä¸ºç©º
                temp.children[chr - 'a'] = new Trie(); // åˆ›å»ºæ–°çš„å­èŠ‚ç‚¹
            temp = temp.children[chr - 'a']; // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹
        }
        temp.isEnd = true; // æ ‡è®°å½“å‰èŠ‚ç‚¹ä¸ºå•è¯ç»“å°¾
    }

    public boolean search(String word) {
        Trie temp = this; // ä»æ ¹èŠ‚ç‚¹å¼€å§‹
        for (char chr : word.toCharArray()) { // éå†å•è¯çš„æ¯ä¸ªå­—ç¬¦
            if (temp.children[chr - 'a'] == null) // å¦‚æœå½“å‰å­—ç¬¦å¯¹åº”çš„å­èŠ‚ç‚¹ä¸ºç©º
                return false; // å•è¯ä¸å­˜åœ¨
            temp = temp.children[chr - 'a']; // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹
        }
        return temp.isEnd; // è¿”å›å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºå•è¯ç»“å°¾
    }

    public boolean startsWith(String prefix) {
        Trie temp = this; // ä»æ ¹èŠ‚ç‚¹å¼€å§‹
        for (char chr : prefix.toCharArray()) { // éå†å‰ç¼€çš„æ¯ä¸ªå­—ç¬¦
            if (temp.children[chr - 'a'] == null) // å¦‚æœå½“å‰å­—ç¬¦å¯¹åº”çš„å­èŠ‚ç‚¹ä¸ºç©º
                return false; // å‰ç¼€ä¸å­˜åœ¨
            temp = temp.children[chr - 'a']; // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹
        }
        return true; // å­˜åœ¨ä»¥è¯¥å‰ç¼€å¼€å¤´çš„å•è¯
    }
}
```



